import{aD as ud,_ as pr,d as hr,aE as cd,aF as $s,f as q,o as _,r as li,n as Nt,p as dd,v as so,g as J,i as Le,O as Ke,t as ae,k as qs,l as js,w as je,c as vt,aG as pd,x as tt,y as Ee,aH as hd,I as si,u as Y,q as fd,aI as md,j as eo,W as Fn,A as kt,aJ as gd,N as ms,aK as vd,aL as yd,G as ot,h as de,Q as ft,aB as Xr,H as Ws,F as Mt,aM as gs,Z as ht,a3 as Zr,L as dr,X as to,C as sn,S as dt,R as At,ab as cr,a5 as bd,P as xd,J as vs,aN as Cd,$ as kd,aO as wd,U as St,aC as ys,M as Gs,a8 as pn,V as uo,aP as bs,a7 as Dd,aQ as Sd,aR as zn,aS as Ad,aT as Fd,T as Ld}from"./index-BGCAAR9m.chunk.mjs";import{N as Kr}from"./NcDialog-BY-1v8yi-C4-QLhBD.chunk.mjs";import{e as Ed,C as Qr,f as Jr,a as Ys,g as Md}from"./Calendar-DT9LkGD1.chunk.mjs";import{c as Xs,r as Zs,C as Yr,b as ea,u as co,L as Td,a as Ks}from"./useAppointmentResponse-wi_dC-8i.chunk.mjs";import{g as jn,a as Wn}from"./response-qwsgigBs.chunk.mjs";import{A as ao,a as oo}from"./AccountStar-Cls1ZAmN.chunk.mjs";import{a as An,s as nn,g as _d}from"./index-hZPKu-D6-BXEfvOYf.chunk.mjs";import{N as Qs}from"./NcNoteCard-C6JdnZUp-DJ-IEcCg.chunk.mjs";const Js=Symbol.for("NcFormBox:context");function Bd(){return ud(Js,{isInFormBox:!1,formBoxItemClass:void 0})}const zd=hr({__name:"NcFormBox",props:{row:{type:Boolean}},setup(D){const S=cd();return $s(Js,{isInFormBox:!0,formBoxItemClass:S.ncFormBox__item}),(c,A)=>(_(),q("div",{class:Nt([c.$style.ncFormBox,c.row?c.$style.ncFormBox_row:c.$style.ncFormBox_col])},[li(c.$slots,"default",{itemClass:c.$style.ncFormBox__item})],2))}}),Id="_ncFormBox_1u9di_20",Nd="_ncFormBox_row_1u9di_25",Od="_ncFormBox__item_1u9di_29",Hd="_ncFormBox_col_1u9di_33",Rd={"material-design-icon":"_material-design-icon_1u9di_12",ncFormBox:Id,ncFormBox_row:Nd,ncFormBox__item:Od,ncFormBox_col:Hd},Pd={$style:Rd},Vd=pr(zd,[["__cssModules",Pd]]),Ud=["aria-describedby"],$d=hr({__name:"NcFormGroup",props:{label:{default:()=>{}},description:{default:()=>{}},hideLabel:{type:Boolean,default:!1},hideDescription:{type:Boolean,default:!1},noGap:{type:Boolean,default:!1}},setup(D){const S=dd(),c=`${`nc-form-group-${so()}`}-description`,A=()=>!!D.description||!!S.description,x=()=>A()?c:void 0,w=()=>D.hideLabel&&(!A()||D.hideDescription);return(y,I)=>(_(),q("fieldset",{class:Nt([y.$style.formGroup,{[y.$style.formGroup_noGap]:y.noGap}]),"aria-describedby":x()},[J("legend",{class:Nt([y.$style.formGroup__label,{"hidden-visually":y.hideLabel}])},[li(y.$slots,"label",{},()=>[Ke(ae(y.label||"âš ï¸ Missing label"),1)])],2),A()?(_(),q("div",{key:0,id:c,class:Nt([y.$style.formGroup__description,{"hidden-visually":y.hideDescription}])},[li(y.$slots,"description",{},()=>[Ke(ae(y.description),1)])],2)):Le("",!0),J("div",{class:Nt([y.$style.formGroup__content,{[y.$style.formGroup__content_only]:w()}])},[li(y.$slots,"default")],2)],10,Ud))}}),qd="_formGroup_9p8a1_20",jd="_formGroup_noGap_9p8a1_24",Wd="_formGroup__label_9p8a1_28",Gd="_formGroup__description_9p8a1_34",Yd="_formGroup__content_9p8a1_39",Xd="_formGroup__content_only_9p8a1_45",Zd={"material-design-icon":"_material-design-icon_9p8a1_12",formGroup:qd,formGroup_noGap:jd,formGroup__label:Wd,formGroup__description:Gd,formGroup__content:Yd,formGroup__content_only:Xd},Kd={$style:Zd},Qd=pr($d,[["__cssModules",Kd]]),Jd=hr({__name:"NcRadioGroup",props:qs({label:{},labelHidden:{type:Boolean},hideLabel:{type:Boolean},description:{}},{modelValue:{required:!1,default:""},modelModifiers:{}}),emits:["update:modelValue"],setup(D){const S=js(D,"modelValue"),c=je();$s(pd,vt(()=>({register:A,modelValue:S.value,onUpdate:x})));function A(w){c.value!==void 0&&c.value,c.value=w}function x(w){S.value=w}return(w,y)=>(_(),tt(Qd,{label:w.label,description:w.description,"hide-label":w.labelHidden||w.hideLabel},{default:Ee(()=>[c.value?(_(),tt(Vd,{key:0,row:""},{default:Ee(()=>[li(w.$slots,"default")]),_:3})):(_(),q("span",{key:1,class:Nt(w.$style.radioGroup_checkboxRadioContainer)},[li(w.$slots,"default")],2))]),_:3},8,["label","description","hide-label"]))}}),ep="_radioGroup_checkboxRadioContainer_14z4o_20",tp={"material-design-icon":"_material-design-icon_14z4o_12",radioGroup_checkboxRadioContainer:ep},np={$style:tp},ip=pr(Jd,[["__cssModules",np]]),rp=["id"],ap=["aria-labelledby","aria-label","checked","value"],op=hr({__name:"NcRadioGroupButton",props:{ariaLabel:{},label:{},value:{}},setup(D){const S=D,c=so(),A=hd(),{formBoxItemClass:x}=Bd();si(()=>A.value.register(!0));const w=vt(()=>A?.value.modelValue===S.value);function y(){A.value.onUpdate(S.value)}return(I,L)=>(_(),q("div",{class:Nt([{[I.$style.radioGroupButton_active]:w.value},I.$style.radioGroupButton,Y(x)]),onClick:y},[I.$slots.icon?(_(),q("div",{key:0,class:Nt(I.$style.radioGroupButton__icon)},[li(I.$slots,"icon")],2)):Le("",!0),I.label?(_(),q("div",{key:1,id:Y(c),class:Nt(I.$style.radioGroupButton__label)},ae(I.label),11,rp)):Le("",!0),J("input",{"aria-labelledby":I.label?Y(c):void 0,"aria-label":I.label?void 0:I.ariaLabel,class:"hidden-visually",checked:w.value,type:"radio",value:I.value,onInput:y},null,40,ap)],2))}}),lp="_radioGroupButton_1euqq_20",sp="_radioGroupButton__label_1euqq_46",up="_radioGroupButton__icon_1euqq_49",cp="_radioGroupButton_active_1euqq_62",dp={"material-design-icon":"_material-design-icon_1euqq_12",radioGroupButton:lp,radioGroupButton__label:sp,radioGroupButton__icon:up,radioGroupButton_active:cp},pp={$style:dp},xs=pr(op,[["__cssModules",pp]]),hp={class:"textarea__main-wrapper"},fp=["id","aria-describedby","disabled","placeholder","value"],mp=["for"],gp=["id"],vp=hr({inheritAttrs:!1,__name:"NcTextArea",props:qs({disabled:{type:Boolean},error:{type:Boolean},helperText:{default:void 0},id:{default:()=>so()},inputClass:{default:""},label:{default:void 0},labelOutside:{type:Boolean},placeholder:{default:void 0},resize:{default:"both"},success:{type:Boolean}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(D,{expose:S}){const c=js(D,"modelValue"),A=D;S({focus:$,select:X});const x=fd("input"),w=md(),y=vt(()=>A.placeholder||(eo?A.label:void 0));Fn(()=>A.labelOutside,()=>{!A.labelOutside&&!A.label&&yd.warn("[NcTextArea] You need to add a label to the NcInputField component. Either use the prop label or use an external one, as per the example in the documentation.")});const I=vt(()=>{const V=[];return A.helperText&&V.push(`${A.id}-helper-text`),typeof w["aria-describedby"]=="string"&&V.push(w["aria-describedby"]),V.join(" ")||void 0});function L(V){const{value:R}=V.target;c.value=R}function $(V){x.value.focus(V)}function X(){x.value.select()}return(V,R)=>(_(),q("div",{class:Nt(["textarea",[V.$attrs.class,{"textarea--disabled":V.disabled,"textarea--legacy":Y(eo)}]])},[J("div",hp,[J("textarea",kt({...V.$attrs,class:void 0},{id:V.id,ref:"input","aria-describedby":I.value,"aria-live":"polite",class:["textarea__input",[V.inputClass,{"textarea__input--label-outside":V.labelOutside,"textarea__input--legacy":Y(eo),"textarea__input--success":V.success,"textarea__input--error":V.error}]],disabled:V.disabled,placeholder:y.value,style:{resize:V.resize},value:c.value,onInput:L}),null,16,fp),V.labelOutside?Le("",!0):(_(),q("label",{key:0,class:"textarea__label",for:V.id},ae(V.label),9,mp))]),V.helperText?(_(),q("p",{key:0,id:`${V.id}-helper-text`,class:Nt(["textarea__helper-text-message",{"textarea__helper-text-message--error":V.error,"textarea__helper-text-message--success":V.success}])},[V.success?(_(),tt(ms,{key:0,class:"textarea__helper-text-message__icon",path:Y(gd),inline:""},null,8,["path"])):V.error?(_(),tt(ms,{key:1,class:"textarea__helper-text-message__icon",path:Y(vd),inline:""},null,8,["path"])):Le("",!0),Ke(" "+ae(V.helperText),1)],10,gp)):Le("",!0)],2))}}),yp=pr(vp,[["__scopeId","data-v-87d290b5"]]),bp={name:"AlertIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},xp=["aria-hidden","aria-label"],Cp=["fill","width","height"],kp={d:"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z"},wp={key:0};function Dp(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon alert-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",kp,[c.title?(_(),q("title",wp,ae(c.title),1)):Le("",!0)])],8,Cp))],16,xp)}const po=ot(bp,[["render",Dp]]),Sp={name:"AccountSearchIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Ap=["aria-hidden","aria-label"],Fp=["fill","width","height"],Lp={d:"M15.5,12C18,12 20,14 20,16.5C20,17.38 19.75,18.21 19.31,18.9L22.39,22L21,23.39L17.88,20.32C17.19,20.75 16.37,21 15.5,21C13,21 11,19 11,16.5C11,14 13,12 15.5,12M15.5,14A2.5,2.5 0 0,0 13,16.5A2.5,2.5 0 0,0 15.5,19A2.5,2.5 0 0,0 18,16.5A2.5,2.5 0 0,0 15.5,14M10,4A4,4 0 0,1 14,8C14,8.91 13.69,9.75 13.18,10.43C12.32,10.75 11.55,11.26 10.91,11.9L10,12A4,4 0 0,1 6,8A4,4 0 0,1 10,4M2,20V18C2,15.88 5.31,14.14 9.5,14C9.18,14.78 9,15.62 9,16.5C9,17.79 9.38,19 10,20H2Z"},Ep={key:0};function Mp(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon account-search-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Lp,[c.title?(_(),q("title",Ep,ae(c.title),1)):Le("",!0)])],8,Fp))],16,Ap)}const Tp=ot(Sp,[["render",Mp]]),_p={name:"ArrowLeftIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Bp=["aria-hidden","aria-label"],zp=["fill","width","height"],Ip={d:"M20,11V13H8L13.5,18.5L12.08,19.92L4.16,12L12.08,4.08L13.5,5.5L8,11H20Z"},Np={key:0};function Op(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon arrow-left-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Ip,[c.title?(_(),q("title",Np,ae(c.title),1)):Le("",!0)])],8,zp))],16,Bp)}const ho=ot(_p,[["render",Op]]),Hp={class:"checkin-header"},Rp={__name:"CheckinHeader",emits:["back"],setup(D){return(S,c)=>(_(),q("div",Hp,[de(Y(ft),{variant:"tertiary","data-test":"button-back",onClick:c[0]||(c[0]=A=>S.$emit("back"))},{icon:Ee(()=>[de(ho)]),default:Ee(()=>[Ke(" "+ae(S.t("attendance","Back")),1)]),_:1})]))}},Pp=ot(Rp,[["__scopeId","data-v-eff03a85"]]),Vp={class:"appointment-info"},Up={class:"appointment-details"},$p=["innerHTML"],qp={__name:"CheckinAppointmentInfo",props:{appointment:{type:Object,required:!0}},setup(D){const S=D,c=x=>Ed(x),A=vt(()=>S.appointment?.description?Xs(Zs(S.appointment.description,!0)):"");return(x,w)=>(_(),q("div",Vp,[J("h2",null,ae(x.t("attendance","Check-in"))+": "+ae(D.appointment.name),1),J("p",Up,[J("strong",null,ae(x.t("attendance","Start"))+":",1),Ke(" "+ae(c(D.appointment.startDatetime)),1),w[0]||(w[0]=J("br",null,null,-1)),J("strong",null,ae(x.t("attendance","End"))+":",1),Ke(" "+ae(c(D.appointment.endDatetime)),1)]),D.appointment.description?(_(),q("div",{key:0,class:"appointment-description",innerHTML:A.value},null,8,$p)):Le("",!0)]))}},jp=ot(qp,[["__scopeId","data-v-9b283f26"]]),Wp={class:"checkin-status"},Gp={key:0,class:"status-complete"},Yp={key:1,class:"status-pending"},Xp={__name:"CheckinStatus",props:{allCheckedIn:{type:Boolean,required:!0},notCheckedInCount:{type:Number,required:!0}},setup(D){return(S,c)=>(_(),q("div",Wp,[D.allCheckedIn?(_(),q("div",Gp,[de(Qr,{size:20}),J("span",null,ae(S.t("attendance","All attendees checked in")),1)])):(_(),q("div",Yp,[de(po,{size:20}),J("span",null,ae(S.n("attendance","{count} attendee not yet checked in","{count} attendees not yet checked in",D.notCheckedInCount,{count:D.notCheckedInCount})),1)]))]))}},Zp=ot(Xp,[["__scopeId","data-v-b2b281ab"]]),Kp={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Qp=["aria-hidden","aria-label"],Jp=["fill","width","height"],eh={d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},th={key:0};function nh(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon magnify-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",eh,[c.title?(_(),q("title",th,ae(c.title),1)):Le("",!0)])],8,Jp))],16,Qp)}const ih=ot(Kp,[["render",nh]]),rh={class:"controls-section"},ah={class:"search-container"},oh={class:"group-filter"},lh={__name:"CheckinControls",props:{searchQuery:{type:String,default:""},selectedGroup:{type:Object,default:null},groupOptions:{type:Array,default:()=>[]}},emits:["update:searchQuery","update:selectedGroup"],setup(D,{emit:S}){const c=S,A=w=>{c("update:searchQuery",w)},x=w=>{c("update:selectedGroup",w)};return(w,y)=>(_(),q("div",rh,[J("div",ah,[de(Y(Xr),{"model-value":D.searchQuery,label:w.t("attendance","Search by name â€¦"),"data-test":"input-search","onUpdate:modelValue":A},{default:Ee(()=>[de(ih,{size:16})]),_:1},8,["model-value","label"])]),J("div",oh,[de(Y(Ws),{"model-value":D.selectedGroup,options:D.groupOptions,placeholder:w.t("attendance","Filter by group"),clearable:!0,label:"label","data-test":"select-group-filter","onUpdate:modelValue":x},null,8,["model-value","options","placeholder"])])]))}},sh=ot(lh,[["__scopeId","data-v-2be8d959"]]),uh={class:"section-header"},ch={class:"section-actions"},dh={__name:"CheckinBulkActions",props:{disabled:{type:Boolean,default:!1}},emits:["bulk-checkin"],setup(D){return(S,c)=>(_(),q("div",uh,[J("div",ch,[de(Y(ft),{variant:"success",disabled:D.disabled,"data-test":"button-bulk-present",onClick:c[0]||(c[0]=A=>S.$emit("bulk-checkin","yes"))},{default:Ee(()=>[Ke(ae(S.t("attendance","All present")),1)]),_:1},8,["disabled"]),de(Y(ft),{variant:"error",disabled:D.disabled,"data-test":"button-bulk-absent",onClick:c[1]||(c[1]=A=>S.$emit("bulk-checkin","no"))},{default:Ee(()=>[Ke(ae(S.t("attendance","All absent")),1)]),_:1},8,["disabled"])])]))}},ph=ot(dh,[["__scopeId","data-v-bebfcf52"]]),hh=["data-test"],fh={class:"user-info"},mh={class:"user-details"},gh={class:"user-name"},vh={class:"response-row"},yh={key:0,class:"user-comment"},bh={class:"user-actions"},xh={class:"action-buttons"},Ch={key:0,class:"checkin-comment"},kh={key:1,class:"comment-overlay"},wh={class:"comment-overlay-header"},Dh={class:"comment-overlay-info"},Sh={class:"user-name"},Ah={class:"response-row"},Fh={class:"comment-overlay-input"},Lh={class:"comment-actions"},Eh={__name:"CheckinUserItem",props:{user:{type:Object,required:!0},showCommentInput:{type:Boolean,default:!1},commentValue:{type:String,default:""},canSeeComments:{type:Boolean,default:!0}},emits:["checkin","toggle-comment","save-comment","cancel-comment","update:commentValue"],setup(D){return(S,c)=>(_(),q("div",{class:"user-item","data-test":`user-item-${D.user.userId}`},[D.showCommentInput?Le("",!0):(_(),q(Mt,{key:0},[J("div",fh,[de(Y(gs),{user:D.user.userId,size:80,"show-user-status":!1},null,8,["user"]),J("div",mh,[J("div",gh,ae(D.user.displayName),1),J("div",vh,[D.user.response?(_(),tt(Y(ht),{key:0,text:Y(Wn)(D.user.response),variant:Y(jn)(D.user.response),"no-close":""},null,8,["text","variant"])):(_(),tt(Y(ht),{key:1,text:S.t("attendance","No response"),variant:"tertiary","no-close":""},null,8,["text"]))]),D.canSeeComments&&D.user.comment&&D.user.comment.trim()?(_(),q("div",yh,[de(Yr,{size:14,class:"comment-icon"}),Ke(" "+ae(D.user.comment),1)])):Le("",!0)])]),J("div",bh,[J("div",xh,[de(Y(ft),{variant:D.user.checkinState==="yes"||!D.user.checkinState?"success":"tertiary","data-test":"button-present",onClick:c[0]||(c[0]=A=>S.$emit("checkin",D.user.userId,"yes"))},{default:Ee(()=>[Ke(ae(S.t("attendance","Present")),1)]),_:1},8,["variant"]),de(Y(ft),{variant:D.user.checkinState==="no"||!D.user.checkinState?"error":"tertiary","data-test":"button-absent",onClick:c[1]||(c[1]=A=>S.$emit("checkin",D.user.userId,"no"))},{default:Ee(()=>[Ke(ae(S.t("attendance","Absent")),1)]),_:1},8,["variant"]),de(Y(ft),{variant:"tertiary","data-test":"button-add-comment","aria-label":S.t("attendance","Add comment"),onClick:c[2]||(c[2]=A=>S.$emit("toggle-comment",D.user.userId))},{icon:Ee(()=>[de(Yr,{size:16})]),_:1},8,["aria-label"])]),D.user.checkinComment&&D.user.checkinComment.trim()?(_(),q("div",Ch,[de(Yr,{size:14,class:"checkin-icon"}),Ke(" "+ae(D.user.checkinComment),1)])):Le("",!0)])],64)),D.showCommentInput?(_(),q("div",kh,[J("div",wh,[de(Y(gs),{user:D.user.userId,size:32,"show-user-status":!1},null,8,["user"]),J("div",Dh,[J("div",Sh,ae(D.user.displayName),1),J("div",Ah,[D.user.response?(_(),tt(Y(ht),{key:0,text:Y(Wn)(D.user.response),variant:Y(jn)(D.user.response),"no-close":""},null,8,["text","variant"])):(_(),tt(Y(ht),{key:1,text:S.t("attendance","No response"),variant:"tertiary","no-close":""},null,8,["text"]))])])]),J("div",Fh,[de(Y(yp),{value:D.commentValue,label:S.t("attendance","Check-in comment"),placeholder:S.t("attendance","Add a comment for this check-inÂ â€¦"),"data-test":"textarea-checkin-comment",rows:"2","onUpdate:value":c[3]||(c[3]=A=>S.$emit("update:commentValue",A))},null,8,["value","label","placeholder"]),J("div",Lh,[de(Y(ft),{variant:"primary","data-test":"button-save-comment",onClick:c[4]||(c[4]=A=>S.$emit("save-comment",D.user.userId))},{default:Ee(()=>[Ke(ae(S.t("attendance","Save")),1)]),_:1}),de(Y(ft),{variant:"tertiary","data-test":"button-cancel-comment",onClick:c[5]||(c[5]=A=>S.$emit("cancel-comment",D.user.userId))},{default:Ee(()=>[Ke(ae(S.t("attendance","Cancel")),1)]),_:1})])])])):Le("",!0)],8,hh))}},Mh=ot(Eh,[["__scopeId","data-v-18731e71"]]),Th={class:"checkin-view","data-test":"checkin-view"},_h={key:0,class:"loading-container"},Bh={key:1,class:"error-container"},zh={key:2,class:"checkin-content"},Ih={class:"filter-section"},Nh={class:"user-lists"},Oh={class:"user-section"},Hh={key:1,class:"user-list"},Rh={__name:"Checkin",props:{appointmentId:{type:[String,Number],required:!0}},setup(D){const S=D,c=je(!0),A=je(null),x=je(null),w=je([]),y=je(!1),I=je(""),L=je(null),$=je([]),X=je("all"),V=Zr({}),R=Zr({}),he=je(!1),fe=je(null),Me=je(""),{permissions:ge,loadPermissions:ye}=ea(),Z=vt(()=>$.value.map(W=>({id:W,label:window.t("attendance",W)}))),K=vt(()=>window.t("attendance","Only pending ({count})",{count:ie.value.notCheckedIn})),G=vt(()=>{let W=w.value;if(X.value==="not-checked-in"&&(W=W.filter(re=>!re.checkinState)),I.value){const re=I.value.toLowerCase();W=W.filter(we=>we.displayName.toLowerCase().includes(re)||we.userId.toLowerCase().includes(re))}return L.value&&(W=W.filter(re=>re.groups&&re.groups.includes(L.value.id))),W.sort((re,we)=>re.displayName.localeCompare(we.displayName))}),ie=vt(()=>{const W=w.value.filter(we=>we.checkinState),re=w.value.length-W.length;return{total:w.value.length,checkedIn:W.length,notCheckedIn:re,allCheckedIn:re===0}}),ue=()=>{window.history.back()},oe=async(W=!1)=>{try{W||(c.value=!0),A.value=null;const re=dt("/apps/attendance/api/appointments/{id}/checkin-data",{id:S.appointmentId}),we=await At.get(re);x.value=we.data.appointment,w.value=we.data.users||[],$.value=we.data.userGroups||[]}catch(re){console.error("Failed to load appointment data:",re),A.value=re.response?.data?.message||window.t("attendance","Failed to load appointment data")}finally{c.value=!1}},le=async(W,re,we=!0)=>{try{const Je=dt("/apps/attendance/api/appointments/{id}/checkin/{userId}",{id:S.appointmentId,userId:W});await At.post(Je,{response:re}),we&&await oe(!0)}catch(Je){console.error("Failed to check in user:",Je)}},be=W=>{const re=G.value.length,we=W==="yes"?window.t("attendance","attending"):window.t("attendance","not attending");Me.value=window.t("attendance","Do you want to set {count} users to {action}?",{count:re,action:we}),fe.value=W,he.value=!0},Xe=async()=>{if(!y.value){y.value=!0,he.value=!1;try{for(const W of G.value)await le(W.userId,fe.value,!1);await oe(!0)}catch(W){console.error("Failed to bulk checkin users:",W)}finally{y.value=!1,fe.value=null}}},Se=()=>{he.value=!1,fe.value=null,Me.value=""},pe=W=>{if(V[W]=!V[W],V[W]&&!R[W]){const re=G.value.find(we=>we.userId===W);R[W]=re?.checkinComment||""}},De=(W,re)=>{R[W]=re},ve=async W=>{try{const re=dt("/apps/attendance/api/appointments/{id}/checkin/{userId}",{id:S.appointmentId,userId:W});await At.post(re,{response:null,comment:R[W]||""}),V[W]=!1,await oe(!0)}catch(re){console.error("Failed to save admin comment:",re)}},T=W=>{const re=G.value.find(we=>we.userId===W);R[W]=re?.checkinComment||"",V[W]=!1};return si(async()=>{await ye(),await oe()}),(W,re)=>(_(),q("div",Th,[de(Pp,{onBack:ue}),c.value?(_(),q("div",_h,[de(Y(dr)),J("p",null,ae(W.t("attendance","Loading appointment dataÂ â€¦")),1)])):A.value?(_(),q("div",Bh,[de(Y(to),{title:W.t("attendance","Error loading appointment")},{icon:Ee(()=>[de(po)]),description:Ee(()=>[Ke(ae(A.value),1)]),_:1},8,["title"])])):Le("",!0),!c.value&&!A.value?(_(),q("div",zh,[de(jp,{appointment:x.value},null,8,["appointment"]),de(Zp,{"all-checked-in":ie.value.allCheckedIn,"not-checked-in-count":ie.value.notCheckedIn},null,8,["all-checked-in","not-checked-in-count"]),J("div",Ih,[de(Y(ip),{modelValue:X.value,"onUpdate:modelValue":re[0]||(re[0]=we=>X.value=we),label:W.t("attendance","Filter users"),"hide-label":""},{default:Ee(()=>[de(Y(xs),{label:W.t("attendance","All users"),value:"all","data-test":"filter-all"},null,8,["label"]),de(Y(xs),{label:K.value,value:"not-checked-in","data-test":"filter-not-checked-in"},null,8,["label"])]),_:1},8,["modelValue","label"])]),de(sh,{"search-query":I.value,"onUpdate:searchQuery":re[1]||(re[1]=we=>I.value=we),"selected-group":L.value,"onUpdate:selectedGroup":re[2]||(re[2]=we=>L.value=we),"group-options":Z.value},null,8,["search-query","selected-group","group-options"]),J("div",Nh,[J("div",Oh,[G.value.length>0?(_(),tt(ph,{key:0,disabled:y.value,onBulkCheckin:be},null,8,["disabled"])):Le("",!0),G.value.length>0?(_(),q("div",Hh,[(_(!0),q(Mt,null,sn(G.value,we=>(_(),tt(Mh,{key:we.userId,user:we,"show-comment-input":V[we.userId],"comment-value":R[we.userId]||"","can-see-comments":Y(ge).canSeeComments,onCheckin:le,onToggleComment:pe,onSaveComment:ve,onCancelComment:T,"onUpdate:commentValue":Je=>De(we.userId,Je)},null,8,["user","show-comment-input","comment-value","can-see-comments","onUpdate:commentValue"]))),128))])):X.value==="not-checked-in"?(_(),tt(Y(to),{key:2,name:W.t("attendance","All attendees checked in"),"data-test":"empty-all-checked-in"},{icon:Ee(()=>[de(Qr)]),action:Ee(()=>[de(Y(ft),{onClick:re[3]||(re[3]=we=>X.value="all")},{default:Ee(()=>[Ke(ae(W.t("attendance","Show all users")),1)]),_:1})]),_:1},8,["name"])):I.value||L.value?(_(),tt(Y(to),{key:3,name:W.t("attendance","No users found"),"data-test":"empty-no-results"},{icon:Ee(()=>[de(Tp)]),description:Ee(()=>[Ke(ae(W.t("attendance","Try adjusting your search or filter")),1)]),_:1},8,["name"])):Le("",!0)])])])):Le("",!0),de(Y(Kr),{open:he.value,name:W.t("attendance","Confirm bulk action"),message:Me.value,"data-test":"dialog-confirm-bulk",onClosing:Se},{actions:Ee(()=>[de(Y(ft),{"data-test":"button-bulk-cancel",onClick:Se},{default:Ee(()=>[Ke(ae(W.t("attendance","Cancel")),1)]),_:1}),de(Y(ft),{variant:fe.value==="yes"?"success":"error","data-test":"button-bulk-confirm",onClick:Xe},{default:Ee(()=>[Ke(ae(W.t("attendance","Confirm")),1)]),_:1},8,["variant"])]),_:1},8,["open","name","message"])]))}},Ph=ot(Rh,[["__scopeId","data-v-6c954f16"]]),Vh={key:0,class:"response-summary-detailed","data-test":"response-summary"},Uh={class:"summary-stats"},$h={key:0,class:"group-summary","data-test":"group-summary"},qh=["data-test"],jh=["onClick"],Wh={class:"group-name"},Gh={class:"group-counts"},Yh={key:0,class:"group-details"},Xh={key:0,class:"group-responses"},Zh={class:"response-header"},Kh={class:"user-info"},Qh={key:0,class:"checkin-info"},Jh={class:"checkin-badge"},ef={key:0,class:"response-comment"},tf={key:1,class:"non-responding-users"},nf={class:"non-responding-header"},rf={class:"non-responding-list"},af=["data-test"],of=["onClick"],lf={class:"group-name"},sf={class:"group-counts"},uf={key:0,class:"group-details"},cf={key:0,class:"group-responses"},df={class:"response-header"},pf={class:"user-info"},hf={key:0,class:"checkin-info"},ff={class:"checkin-badge"},mf={key:0,class:"response-comment"},gf={key:1,class:"non-responding-users"},vf={class:"non-responding-header"},yf={class:"non-responding-list"},bf={key:0,class:"group-container"},xf={class:"group-name"},Cf={class:"group-counts"},kf={key:0,class:"group-details"},wf={key:0,class:"group-responses"},Df={class:"response-header"},Sf={class:"user-info"},Af={key:0,class:"checkin-info"},Ff={class:"checkin-badge"},Lf={key:0,class:"response-comment"},Ef={__name:"ResponseSummary",props:{responseSummary:{type:Object,default:null},canSeeComments:{type:Boolean,default:!0}},setup(D){const S=D,c=je({}),A=vt(()=>{if(!S.responseSummary)return!1;const L=S.responseSummary.by_group&&Object.keys(S.responseSummary.by_group).length>0,$=S.responseSummary.by_team&&Object.keys(S.responseSummary.by_team).length>0;return L||$}),x=L=>{c.value[L]=!c.value[L]},w=L=>!L||L.length===0?[]:[...L].sort(($,X)=>$.userName.localeCompare(X.userName)),y=L=>!L||L.length===0?[]:[...L].sort(($,X)=>$.displayName.localeCompare(X.displayName)),I=()=>S.responseSummary?.others?S.responseSummary.others.yes>0||S.responseSummary.others.maybe>0||S.responseSummary.others.no>0:!1;return(L,$)=>D.responseSummary?(_(),q("div",Vh,[J("h4",null,ae(L.t("attendance","Response summary")),1),J("div",Uh,[de(Y(ht),{text:`${L.t("attendance","Yes")}: ${D.responseSummary.yes}`,variant:"success","no-close":""},null,8,["text"]),de(Y(ht),{text:`${L.t("attendance","Maybe")}: ${D.responseSummary.maybe}`,variant:"warning","no-close":""},null,8,["text"]),de(Y(ht),{text:`${L.t("attendance","No")}: ${D.responseSummary.no}`,variant:"error","no-close":""},null,8,["text"]),de(Y(ht),{text:`${L.t("attendance","No response")}: ${D.responseSummary.no_response}`,variant:"tertiary","no-close":""},null,8,["text"])]),A.value?(_(),q("div",$h,[(_(!0),q(Mt,null,sn(D.responseSummary.by_group,(X,V)=>(_(),q("div",{key:`group-${V}`,class:"group-container","data-test":`group-container-${V}`},[J("div",{class:"group-stats clickable","data-test":"group-header",onClick:R=>x(`group-${V}`)},[J("div",Wh,[J("span",{class:Nt(["expand-icon",{expanded:c.value[`group-${V}`]}])},"â–¶",2),de(ao,{size:18,class:"type-icon"}),Ke(" "+ae(V),1)]),J("div",Gh,[de(Y(ht),{text:String(X.yes),variant:"success","no-close":""},null,8,["text"]),de(Y(ht),{text:String(X.maybe),variant:"warning","no-close":""},null,8,["text"]),de(Y(ht),{text:String(X.no),variant:"error","no-close":""},null,8,["text"]),de(Y(ht),{text:String(X.no_response),variant:"tertiary","no-close":""},null,8,["text"])])],8,jh),c.value[`group-${V}`]?(_(),q("div",Yh,[X.responses&&X.responses.length>0?(_(),q("div",Xh,[(_(!0),q(Mt,null,sn(w(X.responses),R=>(_(),q("div",{key:R.id,class:"response-item"},[J("div",Zh,[J("div",Kh,[J("strong",null,ae(R.userName),1),de(Y(ht),{text:Y(Wn)(R.response),variant:Y(jn)(R.response),"no-close":""},null,8,["text","variant"])]),R.isCheckedIn?(_(),q("div",Qh,[J("span",Jh,ae(L.t("attendance","Checked in?")),1),de(Y(ht),{text:Y(Wn)(R.checkinState),variant:Y(jn)(R.checkinState),"no-close":""},null,8,["text","variant"])])):Le("",!0)]),D.canSeeComments&&R.comment&&R.comment.trim()?(_(),q("div",ef,ae(R.comment),1)):Le("",!0)]))),128))])):Le("",!0),X.non_responding_users&&X.non_responding_users.length>0?(_(),q("div",tf,[J("div",nf,ae(L.t("attendance","No response yet:")),1),J("div",rf,ae(y(X.non_responding_users).map(R=>R.displayName).join(", ")),1)])):Le("",!0)])):Le("",!0)],8,qh))),128)),(_(!0),q(Mt,null,sn(D.responseSummary.by_team,(X,V)=>(_(),q("div",{key:`team-${V}`,class:"group-container","data-test":`team-container-${V}`},[J("div",{class:"group-stats clickable","data-test":"team-header",onClick:R=>x(`team-${V}`)},[J("div",lf,[J("span",{class:Nt(["expand-icon",{expanded:c.value[`team-${V}`]}])},"â–¶",2),de(oo,{size:18,class:"type-icon"}),Ke(" "+ae(X.displayName||V),1)]),J("div",sf,[de(Y(ht),{text:String(X.yes),variant:"success","no-close":""},null,8,["text"]),de(Y(ht),{text:String(X.maybe),variant:"warning","no-close":""},null,8,["text"]),de(Y(ht),{text:String(X.no),variant:"error","no-close":""},null,8,["text"]),de(Y(ht),{text:String(X.no_response),variant:"tertiary","no-close":""},null,8,["text"])])],8,of),c.value[`team-${V}`]?(_(),q("div",uf,[X.responses&&X.responses.length>0?(_(),q("div",cf,[(_(!0),q(Mt,null,sn(w(X.responses),R=>(_(),q("div",{key:R.id,class:"response-item"},[J("div",df,[J("div",pf,[J("strong",null,ae(R.userName),1),de(Y(ht),{text:Y(Wn)(R.response),variant:Y(jn)(R.response),"no-close":""},null,8,["text","variant"])]),R.isCheckedIn?(_(),q("div",hf,[J("span",ff,ae(L.t("attendance","Checked in?")),1),de(Y(ht),{text:Y(Wn)(R.checkinState),variant:Y(jn)(R.checkinState),"no-close":""},null,8,["text","variant"])])):Le("",!0)]),D.canSeeComments&&R.comment&&R.comment.trim()?(_(),q("div",mf,ae(R.comment),1)):Le("",!0)]))),128))])):Le("",!0),X.non_responding_users&&X.non_responding_users.length>0?(_(),q("div",gf,[J("div",vf,ae(L.t("attendance","No response yet:")),1),J("div",yf,ae(y(X.non_responding_users).map(R=>R.displayName).join(", ")),1)])):Le("",!0)])):Le("",!0)],8,af))),128)),D.responseSummary.others&&I()?(_(),q("div",bf,[J("div",{class:"group-stats clickable",onClick:$[0]||($[0]=X=>x("others"))},[J("div",xf,[J("span",{class:Nt(["expand-icon",{expanded:c.value.others}])},"â–¶",2),Ke(" "+ae(L.t("attendance","Others")),1)]),J("div",Cf,[de(Y(ht),{text:String(D.responseSummary.others.yes),variant:"success","no-close":""},null,8,["text"]),de(Y(ht),{text:String(D.responseSummary.others.maybe),variant:"warning","no-close":""},null,8,["text"]),de(Y(ht),{text:String(D.responseSummary.others.no),variant:"error","no-close":""},null,8,["text"])])]),c.value.others?(_(),q("div",kf,[D.responseSummary.others.responses.length>0?(_(),q("div",wf,[(_(!0),q(Mt,null,sn(w(D.responseSummary.others.responses),X=>(_(),q("div",{key:X.id,class:"response-item"},[J("div",Df,[J("div",Sf,[J("strong",null,ae(X.userName),1),de(Y(ht),{text:Y(Wn)(X.response),variant:Y(jn)(X.response),"no-close":""},null,8,["text","variant"])]),X.isCheckedIn?(_(),q("div",Af,[J("span",Ff,ae(L.t("attendance","Checked in?")),1),de(Y(ht),{text:Y(Wn)(X.checkinState),variant:Y(jn)(X.checkinState),"no-close":""},null,8,["text","variant"])])):Le("",!0)]),D.canSeeComments&&X.comment&&X.comment.trim()?(_(),q("div",Lf,ae(X.comment),1)):Le("",!0)]))),128))])):Le("",!0)])):Le("",!0)])):Le("",!0)])):Le("",!0)])):Le("",!0)}},Mf=ot(Ef,[["__scopeId","data-v-e72470bd"]]),Tf={name:"ShareVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},_f=["aria-hidden","aria-label"],Bf=["fill","width","height"],zf={d:"M18,16.08C17.24,16.08 16.56,16.38 16.04,16.85L8.91,12.7C8.96,12.47 9,12.24 9,12C9,11.76 8.96,11.53 8.91,11.3L15.96,7.19C16.5,7.69 17.21,8 18,8A3,3 0 0,0 21,5A3,3 0 0,0 18,2A3,3 0 0,0 15,5C15,5.24 15.04,5.47 15.09,5.7L8.04,9.81C7.5,9.31 6.79,9 6,9A3,3 0 0,0 3,12A3,3 0 0,0 6,15C6.79,15 7.5,14.69 8.04,14.19L15.16,18.34C15.11,18.55 15.08,18.77 15.08,19C15.08,20.61 16.39,21.91 18,21.91C19.61,21.91 20.92,20.61 20.92,19A2.92,2.92 0 0,0 18,16.08Z"},If={key:0};function Nf(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon share-variant-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",zf,[c.title?(_(),q("title",If,ae(c.title),1)):Le("",!0)])],8,Bf))],16,_f)}const Of=ot(Tf,[["render",Nf]]),Hf={name:"PencilIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Rf=["aria-hidden","aria-label"],Pf=["fill","width","height"],Vf={d:"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z"},Uf={key:0};function $f(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon pencil-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Vf,[c.title?(_(),q("title",Uf,ae(c.title),1)):Le("",!0)])],8,Pf))],16,Rf)}const qf=ot(Hf,[["render",$f]]),jf={name:"DeleteIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Wf=["aria-hidden","aria-label"],Gf=["fill","width","height"],Yf={d:"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z"},Xf={key:0};function Zf(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon delete-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Yf,[c.title?(_(),q("title",Xf,ae(c.title),1)):Le("",!0)])],8,Gf))],16,Wf)}const Kf=ot(jf,[["render",Zf]]),Qf={name:"ContentCopyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Jf=["aria-hidden","aria-label"],em=["fill","width","height"],tm={d:"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"},nm={key:0};function im(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon content-copy-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",tm,[c.title?(_(),q("title",nm,ae(c.title),1)):Le("",!0)])],8,em))],16,Jf)}const eu=ot(Qf,[["render",im]]),rm={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},am=["aria-hidden","aria-label"],om=["fill","width","height"],lm={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},sm={key:0};function um(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon close-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",lm,[c.title?(_(),q("title",sm,ae(c.title),1)):Le("",!0)])],8,om))],16,am)}const cm=ot(rm,[["render",um]]),dm={name:"HelpCircleOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},pm=["aria-hidden","aria-label"],hm=["fill","width","height"],fm={d:"M11,18H13V16H11V18M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,6A4,4 0 0,0 8,10H10A2,2 0 0,1 12,8A2,2 0 0,1 14,10C14,12 11,11.75 11,15H13C13,12.75 16,12.5 16,10A4,4 0 0,0 12,6Z"},mm={key:0};function gm(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon help-circle-outline-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",fm,[c.title?(_(),q("title",mm,ae(c.title),1)):Le("",!0)])],8,hm))],16,pm)}const vm=ot(dm,[["render",gm]]),ym={name:"PaperclipIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},bm=["aria-hidden","aria-label"],xm=["fill","width","height"],Cm={d:"M16.5,6V17.5A4,4 0 0,1 12.5,21.5A4,4 0 0,1 8.5,17.5V5A2.5,2.5 0 0,1 11,2.5A2.5,2.5 0 0,1 13.5,5V15.5A1,1 0 0,1 12.5,16.5A1,1 0 0,1 11.5,15.5V6H10V15.5A2.5,2.5 0 0,0 12.5,18A2.5,2.5 0 0,0 15,15.5V5A4,4 0 0,0 11,1A4,4 0 0,0 7,5V17.5A5.5,5.5 0 0,0 12.5,23A5.5,5.5 0 0,0 18,17.5V6H16.5Z"},km={key:0};function wm(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon paperclip-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Cm,[c.title?(_(),q("title",km,ae(c.title),1)):Le("",!0)])],8,xm))],16,bm)}const tu=ot(ym,[["render",wm]]),Dm={class:"appointment-card","data-test":"appointment-card"},Sm={class:"appointment-header"},Am={"data-test":"appointment-title"},Fm={class:"appointment-actions"},Lm=["innerHTML"],Em={key:1,class:"attachment-chips","data-test":"attachment-chips"},Mm=["href","data-test"],Tm={class:"appointment-time"},_m=["href"],Bm={class:"response-section","data-test":"response-section"},zm={key:0,class:"comment-section"},Im={class:"textarea-container"},Nm={key:0,class:"saving-spinner"},Om={key:1,class:"saved-indicator"},Hm={key:2,class:"error-indicator"},Rm={key:2,class:"checkin-summary","data-test":"checkin-summary"},Pm={class:"summary-stats"},Vm={__name:"AppointmentCard",props:{appointment:{type:Object,required:!0},canManageAppointments:{type:Boolean,default:!1},canCheckin:{type:Boolean,default:!1},canSeeResponseOverview:{type:Boolean,default:!0},canSeeComments:{type:Boolean,default:!0}},emits:["start-checkin","edit","copy","delete","submit-response","update-comment"],setup(D,{emit:S}){const c=D,A=S,x=je(c.appointment.userResponse?.comment||""),w=je(!1),y=je(null);let I=null;const{savingComment:L,commentSaved:$,errorComment:X,autoSaveComment:V}=co(),R=async()=>{w.value=!w.value,w.value&&(await vs(),y.value?.$el?.querySelector("input")?.focus())},he=vt(()=>c.appointment.userResponse?.response||null),fe=vt(()=>{if(!c.appointment.description)return"";const le=Zs(c.appointment.description,!1);return Xs(le)}),Me=vt(()=>{if(!c.appointment.calendarUri||!c.appointment.calendarEventUid||!c.appointment.startDatetime)return null;const le=new Date(c.appointment.startDatetime),be=le.getFullYear(),Xe=String(le.getMonth()+1).padStart(2,"0"),Se=String(le.getDate()).padStart(2,"0"),pe=`${be}-${Xe}-${Se}`,De=window.OC?.currentUser||"admin",ve=c.appointment.calendarEventUid,T=`/remote.php/dav/calendars/${De}/${c.appointment.calendarUri}/${ve}`,W=btoa(T);return dt(`/apps/calendar/dayGridMonth/${pe}/edit/popover/${W}/next`)});Fn(()=>c.appointment.userResponse,le=>{I||(x.value=le?.comment||"")},{immediate:!0,deep:!0});const ge=async()=>{const le=window.location.origin+dt(`/apps/attendance/appointment/${c.appointment.id}`);try{await navigator.clipboard.writeText(le),An(window.t("attendance","Link copied to clipboard"))}catch(be){console.error("Failed to copy link:",be)}},ye=()=>{A("start-checkin",c.appointment.id)},Z=()=>{A("edit",c.appointment)},K=()=>{A("copy",c.appointment)},G=()=>{A("delete",c.appointment.id)},ie=le=>{A("submit-response",c.appointment.id,le)},ue=le=>le.downloadUrl||dt(`/f/${le.fileId}`),oe=()=>{I&&clearTimeout(I),I=setTimeout(async()=>{await vs(),V(c.appointment.id,he.value,x.value)},500)};return(le,be)=>(_(),q("div",Dm,[J("div",Sm,[J("h3",Am,ae(D.appointment.name),1),J("div",Fm,[de(Y(bd),{"force-menu":!0,"data-test":"appointment-actions-menu"},{default:Ee(()=>[de(Y(cr),{"close-after-click":!0,"data-test":"action-share-link",onClick:ge},{icon:Ee(()=>[de(Of,{size:20})]),default:Ee(()=>[Ke(" "+ae(le.t("attendance","Share link")),1)]),_:1}),D.canCheckin?(_(),tt(Y(cr),{key:0,"close-after-click":!0,"data-test":"action-start-checkin",onClick:ye},{icon:Ee(()=>[de(Td,{size:20})]),default:Ee(()=>[Ke(" "+ae(le.t("attendance","Start check-in")),1)]),_:1})):Le("",!0),D.canManageAppointments?(_(),tt(Y(cr),{key:1,"close-after-click":!0,"data-test":"action-edit",onClick:Z},{icon:Ee(()=>[de(qf,{size:20})]),default:Ee(()=>[Ke(" "+ae(le.t("attendance","Edit")),1)]),_:1})):Le("",!0),D.canManageAppointments?(_(),tt(Y(cr),{key:2,"close-after-click":!0,"data-test":"action-copy",onClick:K},{icon:Ee(()=>[de(eu,{size:20})]),default:Ee(()=>[Ke(" "+ae(le.t("attendance","Copy")),1)]),_:1})):Le("",!0),D.canManageAppointments?(_(),tt(Y(cr),{key:3,"close-after-click":!0,"data-test":"action-delete",onClick:G},{icon:Ee(()=>[de(Kf,{size:20})]),default:Ee(()=>[Ke(" "+ae(le.t("attendance","Delete")),1)]),_:1})):Le("",!0)]),_:1})])]),D.appointment.description?(_(),q("div",{key:0,class:"appointment-description",innerHTML:fe.value},null,8,Lm)):Le("",!0),D.appointment.attachments?.length?(_(),q("div",Em,[(_(!0),q(Mt,null,sn(D.appointment.attachments,Xe=>(_(),q("a",{key:Xe.fileId,href:ue(Xe),target:"_blank",rel:"noopener noreferrer",class:"attachment-link","data-test":`attachment-link-${Xe.fileId}`},[de(Y(ht),{text:Xe.fileName,"no-close":""},{icon:Ee(()=>[de(tu,{size:16})]),_:1},8,["text"])],8,Mm))),128))])):Le("",!0),J("div",Tm,[J("strong",null,ae(le.t("attendance","Start date & time"))+":",1),Ke(" "+ae(Y(Jr)(D.appointment.startDatetime)),1),be[5]||(be[5]=J("br",null,null,-1)),J("strong",null,ae(le.t("attendance","End date & time"))+":",1),Ke(" "+ae(Y(Jr)(D.appointment.endDatetime))+" ",1),Me.value?(_(),q(Mt,{key:0},[be[4]||(be[4]=J("br",null,null,-1)),J("a",{href:Me.value,target:"_blank",rel:"noopener noreferrer",class:"calendar-link"},[de(Ys,{size:16}),J("span",null,ae(le.t("attendance","Imported from calendar")),1)],8,_m)],64)):Le("",!0)]),J("div",Bm,[J("h4",null,ae(le.t("attendance","Your response")),1),J("div",{class:Nt(["response-buttons",{"has-response":he.value}])},[de(Y(ft),{class:Nt({active:he.value==="yes"}),variant:"success",text:le.t("attendance","Yes"),"data-test":"response-yes",onClick:be[0]||(be[0]=Xe=>ie("yes"))},null,8,["class","text"]),de(Y(ft),{class:Nt({active:he.value==="maybe"}),variant:"warning",text:le.t("attendance","Maybe"),"data-test":"response-maybe",onClick:be[1]||(be[1]=Xe=>ie("maybe"))},null,8,["class","text"]),de(Y(ft),{class:Nt({active:he.value==="no"}),variant:"error",text:le.t("attendance","No"),"data-test":"response-no",onClick:be[2]||(be[2]=Xe=>ie("no"))},null,8,["class","text"]),he.value?(_(),tt(Y(ft),{key:0,class:Nt({"comment-active":w.value,"comment-toggle":!0}),type:"tertiary","data-test":"button-toggle-comment",onClick:R},{icon:Ee(()=>[de(Yr,{size:20})]),_:1},8,["class"])):Le("",!0)],2),w.value?(_(),q("div",zm,[J("div",Im,[de(Y(xd),{ref_key:"commentInput",ref:y,modelValue:x.value,"onUpdate:modelValue":[be[3]||(be[3]=Xe=>x.value=Xe),oe],type:"text",label:le.t("attendance","Comment (optional)"),placeholder:le.t("attendance","Add your commentÂ â€¦"),"data-test":"response-comment"},null,8,["modelValue","label","placeholder"]),Y(L)?(_(),q("div",Nm,[...be[6]||(be[6]=[J("div",{class:"spinner"},null,-1)])])):Y($)?(_(),q("div",Om,[de(Qr,{size:16,class:"check-icon"})])):Y(X)?(_(),q("div",Hm,[de(Ks,{size:16,class:"error-icon"})])):Le("",!0)])])):Le("",!0)]),D.canSeeResponseOverview&&D.appointment.checkinSummary?.hasCheckins?(_(),q("div",Rm,[J("h4",null,ae(le.t("attendance","Check-in summary")),1),J("div",Pm,[de(Y(ht),{text:le.t("attendance","{count} attended",{count:D.appointment.checkinSummary.attended}),variant:"success","no-close":""},{icon:Ee(()=>[de(Qr,{size:16})]),_:1},8,["text"]),de(Y(ht),{text:le.t("attendance","{count} absent",{count:D.appointment.checkinSummary.absent}),variant:"error","no-close":""},{icon:Ee(()=>[de(cm,{size:16})]),_:1},8,["text"]),D.appointment.checkinSummary.notCheckedIn>0?(_(),tt(Y(ht),{key:0,text:le.t("attendance","{count} pending",{count:D.appointment.checkinSummary.notCheckedIn}),variant:"tertiary","no-close":""},{icon:Ee(()=>[de(vm,{size:16})]),_:1},8,["text"])):Le("",!0)])])):Le("",!0),D.canSeeResponseOverview&&D.appointment.responseSummary?(_(),tt(Mf,{key:3,"response-summary":D.appointment.responseSummary,"can-see-comments":D.canSeeComments},null,8,["response-summary","can-see-comments"])):Le("",!0)]))}},nu=ot(Vm,[["__scopeId","data-v-fe91692e"]]);var fo={};(function D(S,c,A,x){var w=!!(S.Worker&&S.Blob&&S.Promise&&S.OffscreenCanvas&&S.OffscreenCanvasRenderingContext2D&&S.HTMLCanvasElement&&S.HTMLCanvasElement.prototype.transferControlToOffscreen&&S.URL&&S.URL.createObjectURL),y=typeof Path2D=="function"&&typeof DOMMatrix=="function",I=(function(){if(!S.OffscreenCanvas)return!1;try{var ne=new OffscreenCanvas(1,1),U=ne.getContext("2d");U.fillRect(0,0,1,1);var f=ne.transferToImageBitmap();U.createPattern(f,"no-repeat")}catch{return!1}return!0})();function L(){}function $(ne){var U=c.exports.Promise,f=U!==void 0?U:S.Promise;return typeof f=="function"?new f(ne):(ne(L,L),null)}var X=(function(ne,U){return{transform:function(f){if(ne)return f;if(U.has(f))return U.get(f);var p=new OffscreenCanvas(f.width,f.height),z=p.getContext("2d");return z.drawImage(f,0,0),U.set(f,p),p},clear:function(){U.clear()}}})(I,new Map),V=(function(){var ne=Math.floor(16.666666666666668),U,f,p={},z=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(U=function(Ce){var xe=Math.random();return p[xe]=requestAnimationFrame(function Fe(Ue){z===Ue||z+ne-1<Ue?(z=Ue,delete p[xe],Ce()):p[xe]=requestAnimationFrame(Fe)}),xe},f=function(Ce){p[Ce]&&cancelAnimationFrame(p[Ce])}):(U=function(Ce){return setTimeout(Ce,ne)},f=function(Ce){return clearTimeout(Ce)}),{frame:U,cancel:f}})(),R=(function(){var ne,U,f={};function p(z){function Ce(xe,Fe){z.postMessage({options:xe||{},callback:Fe})}z.init=function(xe){var Fe=xe.transferControlToOffscreen();z.postMessage({canvas:Fe},[Fe])},z.fire=function(xe,Fe,Ue){if(U)return Ce(xe,null),U;var qe=Math.random().toString(36).slice(2);return U=$(function(nt){function Pe(Ze){Ze.data.callback===qe&&(delete f[qe],z.removeEventListener("message",Pe),U=null,X.clear(),Ue(),nt())}z.addEventListener("message",Pe),Ce(xe,qe),f[qe]=Pe.bind(null,{data:{callback:qe}})}),U},z.reset=function(){z.postMessage({reset:!0});for(var xe in f)f[xe](),delete f[xe]}}return function(){if(ne)return ne;if(!A&&w){var z=["var CONFETTI, SIZE = {}, module = {};","("+D.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{ne=new Worker(URL.createObjectURL(new Blob([z])))}catch(Ce){return typeof console<"u"&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",Ce),null}p(ne)}return ne}})(),he={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function fe(ne,U){return U?U(ne):ne}function Me(ne){return ne!=null}function ge(ne,U,f){return fe(ne&&Me(ne[U])?ne[U]:he[U],f)}function ye(ne){return ne<0?0:Math.floor(ne)}function Z(ne,U){return Math.floor(Math.random()*(U-ne))+ne}function K(ne){return parseInt(ne,16)}function G(ne){return ne.map(ie)}function ie(ne){var U=String(ne).replace(/[^0-9a-f]/gi,"");return U.length<6&&(U=U[0]+U[0]+U[1]+U[1]+U[2]+U[2]),{r:K(U.substring(0,2)),g:K(U.substring(2,4)),b:K(U.substring(4,6))}}function ue(ne){var U=ge(ne,"origin",Object);return U.x=ge(U,"x",Number),U.y=ge(U,"y",Number),U}function oe(ne){ne.width=document.documentElement.clientWidth,ne.height=document.documentElement.clientHeight}function le(ne){var U=ne.getBoundingClientRect();ne.width=U.width,ne.height=U.height}function be(ne){var U=document.createElement("canvas");return U.style.position="fixed",U.style.top="0px",U.style.left="0px",U.style.pointerEvents="none",U.style.zIndex=ne,U}function Xe(ne,U,f,p,z,Ce,xe,Fe,Ue){ne.save(),ne.translate(U,f),ne.rotate(Ce),ne.scale(p,z),ne.arc(0,0,1,xe,Fe,Ue),ne.restore()}function Se(ne){var U=ne.angle*(Math.PI/180),f=ne.spread*(Math.PI/180);return{x:ne.x,y:ne.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:ne.startVelocity*.5+Math.random()*ne.startVelocity,angle2D:-U+(.5*f-Math.random()*f),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:ne.color,shape:ne.shape,tick:0,totalTicks:ne.ticks,decay:ne.decay,drift:ne.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:ne.gravity*3,ovalScalar:.6,scalar:ne.scalar,flat:ne.flat}}function pe(ne,U){U.x+=Math.cos(U.angle2D)*U.velocity+U.drift,U.y+=Math.sin(U.angle2D)*U.velocity+U.gravity,U.velocity*=U.decay,U.flat?(U.wobble=0,U.wobbleX=U.x+10*U.scalar,U.wobbleY=U.y+10*U.scalar,U.tiltSin=0,U.tiltCos=0,U.random=1):(U.wobble+=U.wobbleSpeed,U.wobbleX=U.x+10*U.scalar*Math.cos(U.wobble),U.wobbleY=U.y+10*U.scalar*Math.sin(U.wobble),U.tiltAngle+=.1,U.tiltSin=Math.sin(U.tiltAngle),U.tiltCos=Math.cos(U.tiltAngle),U.random=Math.random()+2);var f=U.tick++/U.totalTicks,p=U.x+U.random*U.tiltCos,z=U.y+U.random*U.tiltSin,Ce=U.wobbleX+U.random*U.tiltCos,xe=U.wobbleY+U.random*U.tiltSin;if(ne.fillStyle="rgba("+U.color.r+", "+U.color.g+", "+U.color.b+", "+(1-f)+")",ne.beginPath(),y&&U.shape.type==="path"&&typeof U.shape.path=="string"&&Array.isArray(U.shape.matrix))ne.fill(re(U.shape.path,U.shape.matrix,U.x,U.y,Math.abs(Ce-p)*.1,Math.abs(xe-z)*.1,Math.PI/10*U.wobble));else if(U.shape.type==="bitmap"){var Fe=Math.PI/10*U.wobble,Ue=Math.abs(Ce-p)*.1,qe=Math.abs(xe-z)*.1,nt=U.shape.bitmap.width*U.scalar,Pe=U.shape.bitmap.height*U.scalar,Ze=new DOMMatrix([Math.cos(Fe)*Ue,Math.sin(Fe)*Ue,-Math.sin(Fe)*qe,Math.cos(Fe)*qe,U.x,U.y]);Ze.multiplySelf(new DOMMatrix(U.shape.matrix));var lt=ne.createPattern(X.transform(U.shape.bitmap),"no-repeat");lt.setTransform(Ze),ne.globalAlpha=1-f,ne.fillStyle=lt,ne.fillRect(U.x-nt/2,U.y-Pe/2,nt,Pe),ne.globalAlpha=1}else if(U.shape==="circle")ne.ellipse?ne.ellipse(U.x,U.y,Math.abs(Ce-p)*U.ovalScalar,Math.abs(xe-z)*U.ovalScalar,Math.PI/10*U.wobble,0,2*Math.PI):Xe(ne,U.x,U.y,Math.abs(Ce-p)*U.ovalScalar,Math.abs(xe-z)*U.ovalScalar,Math.PI/10*U.wobble,0,2*Math.PI);else if(U.shape==="star")for(var Ge=Math.PI/2*3,He=4*U.scalar,yt=8*U.scalar,wt=U.x,ct=U.y,_t=5,Oe=Math.PI/_t;_t--;)wt=U.x+Math.cos(Ge)*yt,ct=U.y+Math.sin(Ge)*yt,ne.lineTo(wt,ct),Ge+=Oe,wt=U.x+Math.cos(Ge)*He,ct=U.y+Math.sin(Ge)*He,ne.lineTo(wt,ct),Ge+=Oe;else ne.moveTo(Math.floor(U.x),Math.floor(U.y)),ne.lineTo(Math.floor(U.wobbleX),Math.floor(z)),ne.lineTo(Math.floor(Ce),Math.floor(xe)),ne.lineTo(Math.floor(p),Math.floor(U.wobbleY));return ne.closePath(),ne.fill(),U.tick<U.totalTicks}function De(ne,U,f,p,z){var Ce=U.slice(),xe=ne.getContext("2d"),Fe,Ue,qe=$(function(nt){function Pe(){Fe=Ue=null,xe.clearRect(0,0,p.width,p.height),X.clear(),z(),nt()}function Ze(){A&&!(p.width===x.width&&p.height===x.height)&&(p.width=ne.width=x.width,p.height=ne.height=x.height),!p.width&&!p.height&&(f(ne),p.width=ne.width,p.height=ne.height),xe.clearRect(0,0,p.width,p.height),Ce=Ce.filter(function(lt){return pe(xe,lt)}),Ce.length?Fe=V.frame(Ze):Pe()}Fe=V.frame(Ze),Ue=Pe});return{addFettis:function(nt){return Ce=Ce.concat(nt),qe},canvas:ne,promise:qe,reset:function(){Fe&&V.cancel(Fe),Ue&&Ue()}}}function ve(ne,U){var f=!ne,p=!!ge(U||{},"resize"),z=!1,Ce=ge(U,"disableForReducedMotion",Boolean),xe=w&&!!ge(U||{},"useWorker"),Fe=xe?R():null,Ue=f?oe:le,qe=ne&&Fe?!!ne.__confetti_initialized:!1,nt=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Pe;function Ze(Ge,He,yt){for(var wt=ge(Ge,"particleCount",ye),ct=ge(Ge,"angle",Number),_t=ge(Ge,"spread",Number),Oe=ge(Ge,"startVelocity",Number),Lt=ge(Ge,"decay",Number),rn=ge(Ge,"gravity",Number),bn=ge(Ge,"drift",Number),Q=ge(Ge,"colors",G),te=ge(Ge,"ticks",Number),m=ge(Ge,"shapes"),g=ge(Ge,"scalar"),b=!!ge(Ge,"flat"),M=ue(Ge),u=wt,v=[],k=ne.width*M.x,E=ne.height*M.y;u--;)v.push(Se({x:k,y:E,angle:ct,spread:_t,startVelocity:Oe,color:Q[u%Q.length],shape:m[Z(0,m.length)],ticks:te,decay:Lt,gravity:rn,drift:bn,scalar:g,flat:b}));return Pe?Pe.addFettis(v):(Pe=De(ne,v,Ue,He,yt),Pe.promise)}function lt(Ge){var He=Ce||ge(Ge,"disableForReducedMotion",Boolean),yt=ge(Ge,"zIndex",Number);if(He&&nt)return $(function(Oe){Oe()});f&&Pe?ne=Pe.canvas:f&&!ne&&(ne=be(yt),document.body.appendChild(ne)),p&&!qe&&Ue(ne);var wt={width:ne.width,height:ne.height};Fe&&!qe&&Fe.init(ne),qe=!0,Fe&&(ne.__confetti_initialized=!0);function ct(){if(Fe){var Oe={getBoundingClientRect:function(){if(!f)return ne.getBoundingClientRect()}};Ue(Oe),Fe.postMessage({resize:{width:Oe.width,height:Oe.height}});return}wt.width=wt.height=null}function _t(){Pe=null,p&&(z=!1,S.removeEventListener("resize",ct)),f&&ne&&(document.body.contains(ne)&&document.body.removeChild(ne),ne=null,qe=!1)}return p&&!z&&(z=!0,S.addEventListener("resize",ct,!1)),Fe?Fe.fire(Ge,wt,_t):Ze(Ge,wt,_t)}return lt.reset=function(){Fe&&Fe.reset(),Pe&&Pe.reset()},lt}var T;function W(){return T||(T=ve(null,{useWorker:!0,resize:!0})),T}function re(ne,U,f,p,z,Ce,xe){var Fe=new Path2D(ne),Ue=new Path2D;Ue.addPath(Fe,new DOMMatrix(U));var qe=new Path2D;return qe.addPath(Ue,new DOMMatrix([Math.cos(xe)*z,Math.sin(xe)*z,-Math.sin(xe)*Ce,Math.cos(xe)*Ce,f,p])),qe}function we(ne){if(!y)throw new Error("path confetti are not supported in this browser");var U,f;typeof ne=="string"?U=ne:(U=ne.path,f=ne.matrix);var p=new Path2D(U),z=document.createElement("canvas"),Ce=z.getContext("2d");if(!f){for(var xe=1e3,Fe=xe,Ue=xe,qe=0,nt=0,Pe,Ze,lt=0;lt<xe;lt+=2)for(var Ge=0;Ge<xe;Ge+=2)Ce.isPointInPath(p,lt,Ge,"nonzero")&&(Fe=Math.min(Fe,lt),Ue=Math.min(Ue,Ge),qe=Math.max(qe,lt),nt=Math.max(nt,Ge));Pe=qe-Fe,Ze=nt-Ue;var He=10,yt=Math.min(He/Pe,He/Ze);f=[yt,0,0,yt,-Math.round(Pe/2+Fe)*yt,-Math.round(Ze/2+Ue)*yt]}return{type:"path",path:U,matrix:f}}function Je(ne){var U,f=1,p="#000000",z='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof ne=="string"?U=ne:(U=ne.text,f="scalar"in ne?ne.scalar:f,z="fontFamily"in ne?ne.fontFamily:z,p="color"in ne?ne.color:p);var Ce=10*f,xe=""+Ce+"px "+z,Fe=new OffscreenCanvas(Ce,Ce),Ue=Fe.getContext("2d");Ue.font=xe;var qe=Ue.measureText(U),nt=Math.ceil(qe.actualBoundingBoxRight+qe.actualBoundingBoxLeft),Pe=Math.ceil(qe.actualBoundingBoxAscent+qe.actualBoundingBoxDescent),Ze=2,lt=qe.actualBoundingBoxLeft+Ze,Ge=qe.actualBoundingBoxAscent+Ze;nt+=Ze+Ze,Pe+=Ze+Ze,Fe=new OffscreenCanvas(nt,Pe),Ue=Fe.getContext("2d"),Ue.font=xe,Ue.fillStyle=p,Ue.fillText(U,lt,Ge);var He=1/f;return{type:"bitmap",bitmap:Fe.transferToImageBitmap(),matrix:[He,0,0,He,-nt*He/2,-Pe*He/2]}}c.exports=function(){return W().apply(this,arguments)},c.exports.reset=function(){W().reset()},c.exports.create=ve,c.exports.shapeFromPath=we,c.exports.shapeFromText=Je})((function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}})(),fo,!1);const Um=fo.exports;fo.exports.create;const $m={class:"attendance-container"},qm={key:0,class:"unanswered-banner-container"},jm={key:0,class:"unanswered-banner pending"},Wm={key:1,class:"unanswered-banner complete"},Gm={class:"appointments-list"},Ym={key:0,class:"loading"},Xm={key:1,class:"empty-state"},Zm={key:2},Km={__name:"AllAppointments",props:{showPast:{type:Boolean,default:!1},showUnanswered:{type:Boolean,default:!1}},emits:["response-updated","edit-appointment","copy-appointment","navigate-to-upcoming"],setup(D,{emit:S}){const c=D,A=S,x=je([]),w=()=>{A("navigate-to-upcoming")},y=je(!0),I=Zr({}),{permissions:L,loadPermissions:$}=ea(),{submitResponse:X}=co({onSuccess:()=>{A("response-updated"),V(!0)}}),V=async(ue=!1)=>{try{ue||(y.value=!0);const oe=c.showPast?"?showPastAppointments=true":"",le=await At.get(dt("/apps/attendance/api/appointments")+oe);c.showUnanswered?x.value=le.data.filter(be=>!be.userResponse||be.userResponse===null):x.value=le.data,x.value.forEach(be=>{be.userResponse&&(I[be.id]=be.userResponse.comment||"")}),L.canManageAppointments&&await R()}catch(oe){console.error("Failed to load appointments:",oe)}finally{y.value=!1}},R=async()=>{for(const ue of x.value)try{const oe=await At.get(dt(`/apps/attendance/api/appointments/${ue.id}/responses`));ue.detailedResponses=oe.data}catch(oe){console.error(`Failed to load detailed responses for appointment ${ue.id}:`,oe)}},he=async(ue,oe)=>{const le=x.value.find(be=>be.id===ue)?.userResponse?.comment||"";await X(ue,oe,le)},fe=async(ue,oe)=>{const le=x.value.find(be=>be.id===ue)?.userResponse?.response||"yes";await X(ue,le,oe)},Me=async ue=>{if(confirm(window.t("attendance","Are you sure you want to delete this appointment?")))try{await At.delete(dt(`/apps/attendance/api/appointments/${ue}`)),await V(!0)}catch(oe){console.error("Failed to delete appointment:",oe)}},ge=ue=>{A("edit-appointment",ue)},ye=ue=>{A("copy-appointment",ue)},Z=ue=>{window.location.href=dt(`/apps/attendance/checkin/${ue}`)};let K=null;const G=()=>{if(!K){const ue=document.createElement("canvas");ue.style.position="fixed",ue.style.top="0",ue.style.left="0",ue.style.width="100%",ue.style.height="100%",ue.style.pointerEvents="none",ue.style.zIndex="9999",document.body.appendChild(ue),K=Um.create(ue,{resize:!0,useWorker:!1})}return K},ie=()=>{G()({particleCount:200,spread:100,origin:{x:.5,y:1},angle:90,startVelocity:60})};return Fn(y,ue=>{!ue&&c.showUnanswered&&x.value.length===0&&ie()}),Fn(()=>x.value.length,(ue,oe)=>{c.showUnanswered&&!y.value&&ue===0&&oe>0&&ie()}),si(async()=>{await $(),await V()}),(ue,oe)=>(_(),q("div",$m,[D.showUnanswered&&!y.value?(_(),q("div",qm,[x.value.length>0?(_(),q("div",jm,[de(po,{size:20}),J("span",null,ae(ue.n("attendance","%n appointment awaiting your response","%n appointments awaiting your response",x.value.length)),1)])):(_(),q("div",Wm,[J("span",null,ae(ue.t("attendance","Hurray! You responded to all appointments.")),1),de(Y(ft),{onClick:w},{default:Ee(()=>[Ke(ae(ue.t("attendance","Show upcoming appointments")),1)]),_:1})]))])):Le("",!0),J("div",Gm,[y.value?(_(),q("div",Ym,ae(ue.t("attendance","LoadingÂ â€¦")),1)):x.value.length===0&&!D.showUnanswered?(_(),q("div",Xm,ae(ue.t("attendance","No appointments found")),1)):(_(),q("div",Zm,[(_(!0),q(Mt,null,sn(x.value,le=>(_(),tt(nu,{key:le.id,appointment:le,"can-manage-appointments":Y(L).canManageAppointments,"can-checkin":Y(L).canCheckin,"can-see-response-overview":Y(L).canSeeResponseOverview,"can-see-comments":Y(L).canSeeComments,onStartCheckin:Z,onEdit:ge,onCopy:ye,onDelete:Me,onSubmitResponse:he,onUpdateComment:fe},null,8,["appointment","can-manage-appointments","can-checkin","can-see-response-overview","can-see-comments"]))),128))]))])]))}},Qm=ot(Km,[["__scopeId","data-v-80dfabe5"]]),Jm={class:"appointment-detail","data-test":"appointment-detail-view"},eg={key:0,class:"loading-state","data-test":"loading-state"},tg={key:1,class:"error-state","data-test":"error-state"},ng={key:2,class:"appointment-content"},ig={__name:"AppointmentDetail",props:{appointmentId:{type:Number,required:!0}},emits:["response-updated","edit-appointment","copy-appointment"],setup(D,{emit:S}){const c=D,A=S,x=je(null),w=je(!0),y=je(null),{permissions:I,loadPermissions:L}=ea(),{submitResponse:$}=co({onSuccess:()=>{A("response-updated"),ye()},onError:()=>{Z()}}),X=()=>{window.history.back()},V=K=>{window.location.href=dt(`/apps/attendance/checkin/${K}`)},R=K=>{A("edit-appointment",K)},he=K=>{A("copy-appointment",K)},fe=async K=>{if(confirm(t("attendance","Are you sure you want to delete this appointment?")))try{await At.delete(dt(`/apps/attendance/api/appointments/${K}`)),An(t("attendance","Appointment deleted")),X()}catch(G){console.error("Failed to delete appointment:",G),nn(t("attendance","Error deleting appointment"))}},Me=async(K,G)=>{const ie=x.value.userResponse?.comment||"";x.value.userResponse||(x.value.userResponse={}),x.value.userResponse.response=G,await $(K,G,ie)},ge=async(K,G)=>{const ie=x.value.userResponse?.response||"yes";x.value.userResponse||(x.value.userResponse={}),x.value.userResponse.comment=G,await $(K,ie,G)},ye=async()=>{try{const K=await At.get(dt(`/apps/attendance/api/appointments/${c.appointmentId}`));x.value=K.data}catch(K){console.error("Failed to reload appointment silently:",K)}},Z=async()=>{w.value=!0,y.value=null;try{const K=await At.get(dt(`/apps/attendance/api/appointments/${c.appointmentId}`));x.value=K.data}catch(K){console.error("Failed to load appointment:",K),K.response?.status===404?y.value=t("attendance","Appointment not found"):y.value=t("attendance","Error loading appointment")}finally{w.value=!1}};return si(async()=>{await L(),await Z()}),Fn(()=>c.appointmentId,async(K,G)=>{K!==G&&await Z()}),(K,G)=>(_(),q("div",Jm,[w.value?(_(),q("div",eg,ae(K.t("attendance","LoadingÂ â€¦")),1)):y.value?(_(),q("div",tg,[J("p",null,ae(y.value),1),de(Y(ft),{"data-test":"button-back",onClick:X},{default:Ee(()=>[Ke(ae(K.t("attendance","Back")),1)]),_:1})])):x.value?(_(),q("div",ng,[de(nu,{appointment:x.value,"can-manage-appointments":Y(I).canManageAppointments,"can-checkin":Y(I).canCheckin,"can-see-response-overview":Y(I).canSeeResponseOverview,"can-see-comments":Y(I).canSeeComments,onStartCheckin:V,onEdit:R,onCopy:he,onDelete:fe,onSubmitResponse:Me,onUpdateComment:ge},null,8,["appointment","can-manage-appointments","can-checkin","can-see-response-overview","can-see-comments"])])):Le("",!0)]))}},rg=ot(ig,[["__scopeId","data-v-3f8b6c31"]]);var lo={exports:{}},ag=lo.exports,Cs;function dn(){return Cs||(Cs=1,(function(D,S){(function(c,A){D.exports=A()})(ag,(function(){var c=navigator.userAgent,A=navigator.platform,x=/gecko\/\d/i.test(c),w=/MSIE \d/.test(c),y=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(c),I=/Edge\/(\d+)/.exec(c),L=w||y||I,$=L&&(w?document.documentMode||6:+(I||y)[1]),X=!I&&/WebKit\//.test(c),V=X&&/Qt\/\d+\.\d+/.test(c),R=!I&&/Chrome\/(\d+)/.exec(c),he=R&&+R[1],fe=/Opera\//.test(c),Me=/Apple Computer/.test(navigator.vendor),ge=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(c),ye=/PhantomJS/.test(c),Z=Me&&(/Mobile\/\w+/.test(c)||navigator.maxTouchPoints>2),K=/Android/.test(c),G=Z||K||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(c),ie=Z||/Mac/.test(A),ue=/\bCrOS\b/.test(c),oe=/win/i.test(A),le=fe&&c.match(/Version\/(\d*\.\d*)/);le&&(le=Number(le[1])),le&&le>=15&&(fe=!1,X=!0);var be=ie&&(V||fe&&(le==null||le<12.11)),Xe=x||L&&$>=9;function Se(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var pe=function(e,n){var r=e.className,i=Se(n).exec(r);if(i){var a=r.slice(i.index+i[0].length);e.className=r.slice(0,i.index)+(a?i[1]+a:"")}};function De(e){for(var n=e.childNodes.length;n>0;--n)e.removeChild(e.firstChild);return e}function ve(e,n){return De(e).appendChild(n)}function T(e,n,r,i){var a=document.createElement(e);if(r&&(a.className=r),i&&(a.style.cssText=i),typeof n=="string")a.appendChild(document.createTextNode(n));else if(n)for(var o=0;o<n.length;++o)a.appendChild(n[o]);return a}function W(e,n,r,i){var a=T(e,n,r,i);return a.setAttribute("role","presentation"),a}var re;document.createRange?re=function(e,n,r,i){var a=document.createRange();return a.setEnd(i||e,r),a.setStart(e,n),a}:re=function(e,n,r){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch{return i}return i.collapse(!0),i.moveEnd("character",r),i.moveStart("character",n),i};function we(e,n){if(n.nodeType==3&&(n=n.parentNode),e.contains)return e.contains(n);do if(n.nodeType==11&&(n=n.host),n==e)return!0;while(n=n.parentNode)}function Je(e){var n=e.ownerDocument||e,r;try{r=e.activeElement}catch{r=n.body||null}for(;r&&r.shadowRoot&&r.shadowRoot.activeElement;)r=r.shadowRoot.activeElement;return r}function ne(e,n){var r=e.className;Se(n).test(r)||(e.className+=(r?" ":"")+n)}function U(e,n){for(var r=e.split(" "),i=0;i<r.length;i++)r[i]&&!Se(r[i]).test(n)&&(n+=" "+r[i]);return n}var f=function(e){e.select()};Z?f=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:L&&(f=function(e){try{e.select()}catch{}});function p(e){return e.display.wrapper.ownerDocument}function z(e){return Ce(e.display.wrapper)}function Ce(e){return e.getRootNode?e.getRootNode():e.ownerDocument}function xe(e){return p(e).defaultView}function Fe(e){var n=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,n)}}function Ue(e,n,r){n||(n={});for(var i in e)e.hasOwnProperty(i)&&(r!==!1||!n.hasOwnProperty(i))&&(n[i]=e[i]);return n}function qe(e,n,r,i,a){n==null&&(n=e.search(/[^\s\u00a0]/),n==-1&&(n=e.length));for(var o=i||0,l=a||0;;){var s=e.indexOf("	",o);if(s<0||s>=n)return l+(n-o);l+=s-o,l+=r-l%r,o=s+1}}var nt=function(){this.id=null,this.f=null,this.time=0,this.handler=Fe(this.onTimeout,this)};nt.prototype.onTimeout=function(e){e.id=0,e.time<=+new Date?e.f():setTimeout(e.handler,e.time-+new Date)},nt.prototype.set=function(e,n){this.f=n;var r=+new Date+e;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,e),this.time=r)};function Pe(e,n){for(var r=0;r<e.length;++r)if(e[r]==n)return r;return-1}var Ze=50,lt={toString:function(){return"CodeMirror.Pass"}},Ge={scroll:!1},He={origin:"*mouse"},yt={origin:"+move"};function wt(e,n,r){for(var i=0,a=0;;){var o=e.indexOf("	",i);o==-1&&(o=e.length);var l=o-i;if(o==e.length||a+l>=n)return i+Math.min(l,n-a);if(a+=o-i,a+=r-a%r,i=o+1,a>=n)return i}}var ct=[""];function _t(e){for(;ct.length<=e;)ct.push(Oe(ct)+" ");return ct[e]}function Oe(e){return e[e.length-1]}function Lt(e,n){for(var r=[],i=0;i<e.length;i++)r[i]=n(e[i],i);return r}function rn(e,n,r){for(var i=0,a=r(n);i<e.length&&r(e[i])<=a;)i++;e.splice(i,0,n)}function bn(){}function Q(e,n){var r;return Object.create?r=Object.create(e):(bn.prototype=e,r=new bn),n&&Ue(n,r),r}var te=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function m(e){return/\w/.test(e)||e>"Â€"&&(e.toUpperCase()!=e.toLowerCase()||te.test(e))}function g(e,n){return n?n.source.indexOf("\\w")>-1&&m(e)?!0:n.test(e):m(e)}function b(e){for(var n in e)if(e.hasOwnProperty(n)&&e[n])return!1;return!0}var M=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function u(e){return e.charCodeAt(0)>=768&&M.test(e)}function v(e,n,r){for(;(r<0?n>0:n<e.length)&&u(e.charAt(n));)n+=r;return n}function k(e,n,r){for(var i=n>r?-1:1;;){if(n==r)return n;var a=(n+r)/2,o=i<0?Math.ceil(a):Math.floor(a);if(o==n)return e(o)?n:r;e(o)?r=o:n=o+i}}function E(e,n,r,i){if(!e)return i(n,r,"ltr",0);for(var a=!1,o=0;o<e.length;++o){var l=e[o];(l.from<r&&l.to>n||n==r&&l.to==n)&&(i(Math.max(l.from,n),Math.min(l.to,r),l.level==1?"rtl":"ltr",o),a=!0)}a||i(n,r,"ltr")}var N=null;function ee(e,n,r){var i;N=null;for(var a=0;a<e.length;++a){var o=e[a];if(o.from<n&&o.to>n)return a;o.to==n&&(o.from!=o.to&&r=="before"?i=a:N=a),o.from==n&&(o.from!=o.to&&r!="before"?i=a:N=a)}return i??N}var O=(function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",n="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(h){return h<=247?e.charAt(h):1424<=h&&h<=1524?"R":1536<=h&&h<=1785?n.charAt(h-1536):1774<=h&&h<=2220?"r":8192<=h&&h<=8203?"w":h==8204?"b":"L"}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,a=/[stwN]/,o=/[LRr]/,l=/[Lb1n]/,s=/[1n]/;function d(h,C,F){this.level=h,this.from=C,this.to=F}return function(h,C){var F=C=="ltr"?"L":"R";if(h.length==0||C=="ltr"&&!i.test(h))return!1;for(var j=h.length,P=[],ce=0;ce<j;++ce)P.push(r(h.charCodeAt(ce)));for(var me=0,Ae=F;me<j;++me){var Be=P[me];Be=="m"?P[me]=Ae:Ae=Be}for(var Ne=0,ze=F;Ne<j;++Ne){var Re=P[Ne];Re=="1"&&ze=="r"?P[Ne]="n":o.test(Re)&&(ze=Re,Re=="r"&&(P[Ne]="R"))}for(var Ye=1,We=P[0];Ye<j-1;++Ye){var st=P[Ye];st=="+"&&We=="1"&&P[Ye+1]=="1"?P[Ye]="1":st==","&&We==P[Ye+1]&&(We=="1"||We=="n")&&(P[Ye]=We),We=st}for(var Ct=0;Ct<j;++Ct){var Ut=P[Ct];if(Ut==",")P[Ct]="N";else if(Ut=="%"){var Ft=void 0;for(Ft=Ct+1;Ft<j&&P[Ft]=="%";++Ft);for(var ln=Ct&&P[Ct-1]=="!"||Ft<j&&P[Ft]=="1"?"1":"N",Jt=Ct;Jt<Ft;++Jt)P[Jt]=ln;Ct=Ft-1}}for(var zt=0,en=F;zt<j;++zt){var jt=P[zt];en=="L"&&jt=="1"?P[zt]="L":o.test(jt)&&(en=jt)}for(var Ht=0;Ht<j;++Ht)if(a.test(P[Ht])){var It=void 0;for(It=Ht+1;It<j&&a.test(P[It]);++It);for(var Et=(Ht?P[Ht-1]:F)=="L",tn=(It<j?P[It]:F)=="L",Ti=Et==tn?Et?"L":"R":F,$n=Ht;$n<It;++$n)P[$n]=Ti;Ht=It-1}for(var Yt=[],Sn,$t=0;$t<j;)if(l.test(P[$t])){var Qa=$t;for(++$t;$t<j&&l.test(P[$t]);++$t);Yt.push(new d(0,Qa,$t))}else{var Bn=$t,ai=Yt.length,oi=C=="rtl"?1:0;for(++$t;$t<j&&P[$t]!="L";++$t);for(var Zt=Bn;Zt<$t;)if(s.test(P[Zt])){Bn<Zt&&(Yt.splice(ai,0,new d(1,Bn,Zt)),ai+=oi);var _i=Zt;for(++Zt;Zt<$t&&s.test(P[Zt]);++Zt);Yt.splice(ai,0,new d(2,_i,Zt)),ai+=oi,Bn=Zt}else++Zt;Bn<$t&&Yt.splice(ai,0,new d(1,Bn,$t))}return C=="ltr"&&(Yt[0].level==1&&(Sn=h.match(/^\s+/))&&(Yt[0].from=Sn[0].length,Yt.unshift(new d(0,0,Sn[0].length))),Oe(Yt).level==1&&(Sn=h.match(/\s+$/))&&(Oe(Yt).to-=Sn[0].length,Yt.push(new d(0,j-Sn[0].length,j)))),C=="rtl"?Yt.reverse():Yt}})();function B(e,n){var r=e.order;return r==null&&(r=e.order=O(e.text,n)),r}var H=[],se=function(e,n,r){if(e.addEventListener)e.addEventListener(n,r,!1);else if(e.attachEvent)e.attachEvent("on"+n,r);else{var i=e._handlers||(e._handlers={});i[n]=(i[n]||H).concat(r)}};function Ie(e,n){return e._handlers&&e._handlers[n]||H}function Ve(e,n,r){if(e.removeEventListener)e.removeEventListener(n,r,!1);else if(e.detachEvent)e.detachEvent("on"+n,r);else{var i=e._handlers,a=i&&i[n];if(a){var o=Pe(a,r);o>-1&&(i[n]=a.slice(0,o).concat(a.slice(o+1)))}}}function _e(e,n){var r=Ie(e,n);if(r.length)for(var i=Array.prototype.slice.call(arguments,2),a=0;a<r.length;++a)r[a].apply(null,i)}function Te(e,n,r){return typeof n=="string"&&(n={type:n,preventDefault:function(){this.defaultPrevented=!0}}),_e(e,r||n.type,e,n),xt(n)||n.codemirrorIgnore}function ut(e){var n=e._handlers&&e._handlers.cursorActivity;if(n)for(var r=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<n.length;++i)Pe(r,n[i])==-1&&r.push(n[i])}function it(e,n){return Ie(e,n).length>0}function et(e){e.prototype.on=function(n,r){se(this,n,r)},e.prototype.off=function(n,r){Ve(this,n,r)}}function Qe(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function bt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function xt(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==!1}function Wt(e){Qe(e),bt(e)}function Ot(e){return e.target||e.srcElement}function hn(e){var n=e.which;return n==null&&(e.button&1?n=1:e.button&2?n=3:e.button&4&&(n=2)),ie&&e.ctrlKey&&n==1&&(n=3),n}var ui=(function(){if(L&&$<9)return!1;var e=T("div");return"draggable"in e||"dragDrop"in e})(),ci;function fr(e){if(ci==null){var n=T("span","â€‹");ve(e,T("span",[n,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ci=n.offsetWidth<=1&&n.offsetHeight>2&&!(L&&$<8))}var r=ci?T("span","â€‹"):T("span","Â ",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var Bi;function zi(e){if(Bi!=null)return Bi;var n=ve(e,document.createTextNode("AØ®A")),r=re(n,0,1).getBoundingClientRect(),i=re(n,1,2).getBoundingClientRect();return De(e),!r||r.left==r.right?!1:Bi=i.right-r.right<3}var Ii=`

b`.split(/\n/).length!=3?function(e){for(var n=0,r=[],i=e.length;n<=i;){var a=e.indexOf(`
`,n);a==-1&&(a=e.length);var o=e.slice(n,e.charAt(a-1)=="\r"?a-1:a),l=o.indexOf("\r");l!=-1?(r.push(o.slice(0,l)),n+=l+1):(r.push(o),n=a+1)}return r}:function(e){return e.split(/\r\n?|\n/)},ta=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch{return!1}}:function(e){var n;try{n=e.ownerDocument.selection.createRange()}catch{}return!n||n.parentElement()!=e?!1:n.compareEndPoints("StartToEnd",n)!=0},qt=(function(){var e=T("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")})(),xn=null;function fn(e){if(xn!=null)return xn;var n=ve(e,T("span","x")),r=n.getBoundingClientRect(),i=re(n,0,1).getBoundingClientRect();return xn=Math.abs(r.left-i.left)>1}var un={},an={};function Gn(e,n){arguments.length>2&&(n.dependencies=Array.prototype.slice.call(arguments,2)),un[e]=n}function mr(e,n){an[e]=n}function di(e){if(typeof e=="string"&&an.hasOwnProperty(e))e=an[e];else if(e&&typeof e.name=="string"&&an.hasOwnProperty(e.name)){var n=an[e.name];typeof n=="string"&&(n={name:n}),e=Q(n,e),e.name=n.name}else{if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return di("application/xml");if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return di("application/json")}return typeof e=="string"?{name:e}:e||{name:"null"}}function pi(e,n){n=di(n);var r=un[n.name];if(!r)return pi(e,"text/plain");var i=r(e,n);if(hi.hasOwnProperty(n.name)){var a=hi[n.name];for(var o in a)a.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=a[o])}if(i.name=n.name,n.helperType&&(i.helperType=n.helperType),n.modeProps)for(var l in n.modeProps)i[l]=n.modeProps[l];return i}var hi={};function uu(e,n){var r=hi.hasOwnProperty(e)?hi[e]:hi[e]={};Ue(n,r)}function Yn(e,n){if(n===!0)return n;if(e.copyState)return e.copyState(n);var r={};for(var i in n){var a=n[i];a instanceof Array&&(a=a.concat([])),r[i]=a}return r}function na(e,n){for(var r;e.innerMode&&(r=e.innerMode(n),!(!r||r.mode==e));)n=r.state,e=r.mode;return r||{mode:e,state:n}}function mo(e,n,r){return e.startState?e.startState(n,r):!0}var Bt=function(e,n,r){this.pos=this.start=0,this.string=e,this.tabSize=n||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};Bt.prototype.eol=function(){return this.pos>=this.string.length},Bt.prototype.sol=function(){return this.pos==this.lineStart},Bt.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Bt.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Bt.prototype.eat=function(e){var n=this.string.charAt(this.pos),r;if(typeof e=="string"?r=n==e:r=n&&(e.test?e.test(n):e(n)),r)return++this.pos,n},Bt.prototype.eatWhile=function(e){for(var n=this.pos;this.eat(e););return this.pos>n},Bt.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},Bt.prototype.skipToEnd=function(){this.pos=this.string.length},Bt.prototype.skipTo=function(e){var n=this.string.indexOf(e,this.pos);if(n>-1)return this.pos=n,!0},Bt.prototype.backUp=function(e){this.pos-=e},Bt.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=qe(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?qe(this.string,this.lineStart,this.tabSize):0)},Bt.prototype.indentation=function(){return qe(this.string,null,this.tabSize)-(this.lineStart?qe(this.string,this.lineStart,this.tabSize):0)},Bt.prototype.match=function(e,n,r){if(typeof e=="string"){var i=function(l){return r?l.toLowerCase():l},a=this.string.substr(this.pos,e.length);if(i(a)==i(e))return n!==!1&&(this.pos+=e.length),!0}else{var o=this.string.slice(this.pos).match(e);return o&&o.index>0?null:(o&&n!==!1&&(this.pos+=o[0].length),o)}},Bt.prototype.current=function(){return this.string.slice(this.start,this.pos)},Bt.prototype.hideFirstChars=function(e,n){this.lineStart+=e;try{return n()}finally{this.lineStart-=e}},Bt.prototype.lookAhead=function(e){var n=this.lineOracle;return n&&n.lookAhead(e)},Bt.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};function $e(e,n){if(n-=e.first,n<0||n>=e.size)throw new Error("There is no line "+(n+e.first)+" in the document.");for(var r=e;!r.lines;)for(var i=0;;++i){var a=r.children[i],o=a.chunkSize();if(n<o){r=a;break}n-=o}return r.lines[n]}function Xn(e,n,r){var i=[],a=n.line;return e.iter(n.line,r.line+1,function(o){var l=o.text;a==r.line&&(l=l.slice(0,r.ch)),a==n.line&&(l=l.slice(n.ch)),i.push(l),++a}),i}function ia(e,n,r){var i=[];return e.iter(n,r,function(a){i.push(a.text)}),i}function Cn(e,n){var r=n-e.height;if(r)for(var i=e;i;i=i.parent)i.height+=r}function mt(e){if(e.parent==null)return null;for(var n=e.parent,r=Pe(n.lines,e),i=n.parent;i;n=i,i=i.parent)for(var a=0;i.children[a]!=n;++a)r+=i.children[a].chunkSize();return r+n.first}function Zn(e,n){var r=e.first;e:do{for(var i=0;i<e.children.length;++i){var a=e.children[i],o=a.height;if(n<o){e=a;continue e}n-=o,r+=a.chunkSize()}return r}while(!e.lines);for(var l=0;l<e.lines.length;++l){var s=e.lines[l],d=s.height;if(n<d)break;n-=d}return r+l}function Ni(e,n){return n>=e.first&&n<e.first+e.size}function ra(e,n){return String(e.lineNumberFormatter(n+e.firstLineNumber))}function ke(e,n,r){if(r===void 0&&(r=null),!(this instanceof ke))return new ke(e,n,r);this.line=e,this.ch=n,this.sticky=r}function rt(e,n){return e.line-n.line||e.ch-n.ch}function aa(e,n){return e.sticky==n.sticky&&rt(e,n)==0}function oa(e){return ke(e.line,e.ch)}function gr(e,n){return rt(e,n)<0?n:e}function vr(e,n){return rt(e,n)<0?e:n}function go(e,n){return Math.max(e.first,Math.min(n,e.first+e.size-1))}function at(e,n){if(n.line<e.first)return ke(e.first,0);var r=e.first+e.size-1;return n.line>r?ke(r,$e(e,r).text.length):cu(n,$e(e,n.line).text.length)}function cu(e,n){var r=e.ch;return r==null||r>n?ke(e.line,n):r<0?ke(e.line,0):e}function vo(e,n){for(var r=[],i=0;i<n.length;i++)r[i]=at(e,n[i]);return r}var yr=function(e,n){this.state=e,this.lookAhead=n},kn=function(e,n,r,i){this.state=n,this.doc=e,this.line=r,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};kn.prototype.lookAhead=function(e){var n=this.doc.getLine(this.line+e);return n!=null&&e>this.maxLookAhead&&(this.maxLookAhead=e),n},kn.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var n=this.baseTokens[this.baseTokenPos+1];return{type:n&&n.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},kn.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},kn.fromSaved=function(e,n,r){return n instanceof yr?new kn(e,Yn(e.mode,n.state),r,n.lookAhead):new kn(e,Yn(e.mode,n),r)},kn.prototype.save=function(e){var n=e!==!1?Yn(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new yr(n,this.maxLookAhead):n};function yo(e,n,r,i){var a=[e.state.modeGen],o={};Do(e,n.text,e.doc.mode,r,function(h,C){return a.push(h,C)},o,i);for(var l=r.state,s=function(h){r.baseTokens=a;var C=e.state.overlays[h],F=1,j=0;r.state=!0,Do(e,n.text,C.mode,r,function(P,ce){for(var me=F;j<P;){var Ae=a[F];Ae>P&&a.splice(F,1,P,a[F+1],Ae),F+=2,j=Math.min(P,Ae)}if(ce)if(C.opaque)a.splice(me,F-me,P,"overlay "+ce),F=me+2;else for(;me<F;me+=2){var Be=a[me+1];a[me+1]=(Be?Be+" ":"")+"overlay "+ce}},o),r.state=l,r.baseTokens=null,r.baseTokenPos=1},d=0;d<e.state.overlays.length;++d)s(d);return{styles:a,classes:o.bgClass||o.textClass?o:null}}function bo(e,n,r){if(!n.styles||n.styles[0]!=e.state.modeGen){var i=Oi(e,mt(n)),a=n.text.length>e.options.maxHighlightLength&&Yn(e.doc.mode,i.state),o=yo(e,n,i);a&&(i.state=a),n.stateAfter=i.save(!a),n.styles=o.styles,o.classes?n.styleClasses=o.classes:n.styleClasses&&(n.styleClasses=null),r===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return n.styles}function Oi(e,n,r){var i=e.doc,a=e.display;if(!i.mode.startState)return new kn(i,!0,n);var o=du(e,n,r),l=o>i.first&&$e(i,o-1).stateAfter,s=l?kn.fromSaved(i,l,o):new kn(i,mo(i.mode),o);return i.iter(o,n,function(d){la(e,d.text,s);var h=s.line;d.stateAfter=h==n-1||h%5==0||h>=a.viewFrom&&h<a.viewTo?s.save():null,s.nextLine()}),r&&(i.modeFrontier=s.line),s}function la(e,n,r,i){var a=e.doc.mode,o=new Bt(n,e.options.tabSize,r);for(o.start=o.pos=i||0,n==""&&xo(a,r.state);!o.eol();)sa(a,o,r.state),o.start=o.pos}function xo(e,n){if(e.blankLine)return e.blankLine(n);if(e.innerMode){var r=na(e,n);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function sa(e,n,r,i){for(var a=0;a<10;a++){i&&(i[0]=na(e,r).mode);var o=e.token(n,r);if(n.pos>n.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}var Co=function(e,n,r){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=n||null,this.state=r};function ko(e,n,r,i){var a=e.doc,o=a.mode,l;n=at(a,n);var s=$e(a,n.line),d=Oi(e,n.line,r),h=new Bt(s.text,e.options.tabSize,d),C;for(i&&(C=[]);(i||h.pos<n.ch)&&!h.eol();)h.start=h.pos,l=sa(o,h,d.state),i&&C.push(new Co(h,l,Yn(a.mode,d.state)));return i?C:new Co(h,l,d.state)}function wo(e,n){if(e)for(;;){var r=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;e=e.slice(0,r.index)+e.slice(r.index+r[0].length);var i=r[1]?"bgClass":"textClass";n[i]==null?n[i]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(n[i])||(n[i]+=" "+r[2])}return e}function Do(e,n,r,i,a,o,l){var s=r.flattenSpans;s==null&&(s=e.options.flattenSpans);var d=0,h=null,C=new Bt(n,e.options.tabSize,i),F,j=e.options.addModeClass&&[null];for(n==""&&wo(xo(r,i.state),o);!C.eol();){if(C.pos>e.options.maxHighlightLength?(s=!1,l&&la(e,n,i,C.pos),C.pos=n.length,F=null):F=wo(sa(r,C,i.state,j),o),j){var P=j[0].name;P&&(F="m-"+(F?P+" "+F:P))}if(!s||h!=F){for(;d<C.start;)d=Math.min(C.start,d+5e3),a(d,h);h=F}C.start=C.pos}for(;d<C.pos;){var ce=Math.min(C.pos,d+5e3);a(ce,h),d=ce}}function du(e,n,r){for(var i,a,o=e.doc,l=r?-1:n-(e.doc.mode.innerMode?1e3:100),s=n;s>l;--s){if(s<=o.first)return o.first;var d=$e(o,s-1),h=d.stateAfter;if(h&&(!r||s+(h instanceof yr?h.lookAhead:0)<=o.modeFrontier))return s;var C=qe(d.text,null,e.options.tabSize);(a==null||i>C)&&(a=s-1,i=C)}return a}function pu(e,n){if(e.modeFrontier=Math.min(e.modeFrontier,n),!(e.highlightFrontier<n-10)){for(var r=e.first,i=n-1;i>r;i--){var a=$e(e,i).stateAfter;if(a&&(!(a instanceof yr)||i+a.lookAhead<n)){r=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,r)}}var So=!1,Ln=!1;function hu(){So=!0}function fu(){Ln=!0}function br(e,n,r){this.marker=e,this.from=n,this.to=r}function Hi(e,n){if(e)for(var r=0;r<e.length;++r){var i=e[r];if(i.marker==n)return i}}function mu(e,n){for(var r,i=0;i<e.length;++i)e[i]!=n&&(r||(r=[])).push(e[i]);return r}function gu(e,n,r){var i=r&&window.WeakSet&&(r.markedSpans||(r.markedSpans=new WeakSet));i&&e.markedSpans&&i.has(e.markedSpans)?e.markedSpans.push(n):(e.markedSpans=e.markedSpans?e.markedSpans.concat([n]):[n],i&&i.add(e.markedSpans)),n.marker.attachLine(e)}function vu(e,n,r){var i;if(e)for(var a=0;a<e.length;++a){var o=e[a],l=o.marker,s=o.from==null||(l.inclusiveLeft?o.from<=n:o.from<n);if(s||o.from==n&&l.type=="bookmark"&&(!r||!o.marker.insertLeft)){var d=o.to==null||(l.inclusiveRight?o.to>=n:o.to>n);(i||(i=[])).push(new br(l,o.from,d?null:o.to))}}return i}function yu(e,n,r){var i;if(e)for(var a=0;a<e.length;++a){var o=e[a],l=o.marker,s=o.to==null||(l.inclusiveRight?o.to>=n:o.to>n);if(s||o.from==n&&l.type=="bookmark"&&(!r||o.marker.insertLeft)){var d=o.from==null||(l.inclusiveLeft?o.from<=n:o.from<n);(i||(i=[])).push(new br(l,d?null:o.from-n,o.to==null?null:o.to-n))}}return i}function ua(e,n){if(n.full)return null;var r=Ni(e,n.from.line)&&$e(e,n.from.line).markedSpans,i=Ni(e,n.to.line)&&$e(e,n.to.line).markedSpans;if(!r&&!i)return null;var a=n.from.ch,o=n.to.ch,l=rt(n.from,n.to)==0,s=vu(r,a,l),d=yu(i,o,l),h=n.text.length==1,C=Oe(n.text).length+(h?a:0);if(s)for(var F=0;F<s.length;++F){var j=s[F];if(j.to==null){var P=Hi(d,j.marker);P?h&&(j.to=P.to==null?null:P.to+C):j.to=a}}if(d)for(var ce=0;ce<d.length;++ce){var me=d[ce];if(me.to!=null&&(me.to+=C),me.from==null){var Ae=Hi(s,me.marker);Ae||(me.from=C,h&&(s||(s=[])).push(me))}else me.from+=C,h&&(s||(s=[])).push(me)}s&&(s=Ao(s)),d&&d!=s&&(d=Ao(d));var Be=[s];if(!h){var Ne=n.text.length-2,ze;if(Ne>0&&s)for(var Re=0;Re<s.length;++Re)s[Re].to==null&&(ze||(ze=[])).push(new br(s[Re].marker,null,null));for(var Ye=0;Ye<Ne;++Ye)Be.push(ze);Be.push(d)}return Be}function Ao(e){for(var n=0;n<e.length;++n){var r=e[n];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&e.splice(n--,1)}return e.length?e:null}function bu(e,n,r){var i=null;if(e.iter(n.line,r.line+1,function(P){if(P.markedSpans)for(var ce=0;ce<P.markedSpans.length;++ce){var me=P.markedSpans[ce].marker;me.readOnly&&(!i||Pe(i,me)==-1)&&(i||(i=[])).push(me)}}),!i)return null;for(var a=[{from:n,to:r}],o=0;o<i.length;++o)for(var l=i[o],s=l.find(0),d=0;d<a.length;++d){var h=a[d];if(!(rt(h.to,s.from)<0||rt(h.from,s.to)>0)){var C=[d,1],F=rt(h.from,s.from),j=rt(h.to,s.to);(F<0||!l.inclusiveLeft&&!F)&&C.push({from:h.from,to:s.from}),(j>0||!l.inclusiveRight&&!j)&&C.push({from:s.to,to:h.to}),a.splice.apply(a,C),d+=C.length-3}}return a}function Fo(e){var n=e.markedSpans;if(n){for(var r=0;r<n.length;++r)n[r].marker.detachLine(e);e.markedSpans=null}}function Lo(e,n){if(n){for(var r=0;r<n.length;++r)n[r].marker.attachLine(e);e.markedSpans=n}}function xr(e){return e.inclusiveLeft?-1:0}function Cr(e){return e.inclusiveRight?1:0}function ca(e,n){var r=e.lines.length-n.lines.length;if(r!=0)return r;var i=e.find(),a=n.find(),o=rt(i.from,a.from)||xr(e)-xr(n);if(o)return-o;var l=rt(i.to,a.to)||Cr(e)-Cr(n);return l||n.id-e.id}function Eo(e,n){var r=Ln&&e.markedSpans,i;if(r)for(var a=void 0,o=0;o<r.length;++o)a=r[o],a.marker.collapsed&&(n?a.from:a.to)==null&&(!i||ca(i,a.marker)<0)&&(i=a.marker);return i}function Mo(e){return Eo(e,!0)}function kr(e){return Eo(e,!1)}function xu(e,n){var r=Ln&&e.markedSpans,i;if(r)for(var a=0;a<r.length;++a){var o=r[a];o.marker.collapsed&&(o.from==null||o.from<n)&&(o.to==null||o.to>n)&&(!i||ca(i,o.marker)<0)&&(i=o.marker)}return i}function To(e,n,r,i,a){var o=$e(e,n),l=Ln&&o.markedSpans;if(l)for(var s=0;s<l.length;++s){var d=l[s];if(d.marker.collapsed){var h=d.marker.find(0),C=rt(h.from,r)||xr(d.marker)-xr(a),F=rt(h.to,i)||Cr(d.marker)-Cr(a);if(!(C>=0&&F<=0||C<=0&&F>=0)&&(C<=0&&(d.marker.inclusiveRight&&a.inclusiveLeft?rt(h.to,r)>=0:rt(h.to,r)>0)||C>=0&&(d.marker.inclusiveRight&&a.inclusiveLeft?rt(h.from,i)<=0:rt(h.from,i)<0)))return!0}}}function mn(e){for(var n;n=Mo(e);)e=n.find(-1,!0).line;return e}function Cu(e){for(var n;n=kr(e);)e=n.find(1,!0).line;return e}function ku(e){for(var n,r;n=kr(e);)e=n.find(1,!0).line,(r||(r=[])).push(e);return r}function da(e,n){var r=$e(e,n),i=mn(r);return r==i?n:mt(i)}function _o(e,n){if(n>e.lastLine())return n;var r=$e(e,n),i;if(!In(e,r))return n;for(;i=kr(r);)r=i.find(1,!0).line;return mt(r)+1}function In(e,n){var r=Ln&&n.markedSpans;if(r){for(var i=void 0,a=0;a<r.length;++a)if(i=r[a],!!i.marker.collapsed&&(i.from==null||!i.marker.widgetNode&&i.from==0&&i.marker.inclusiveLeft&&pa(e,n,i)))return!0}}function pa(e,n,r){if(r.to==null){var i=r.marker.find(1,!0);return pa(e,i.line,Hi(i.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==n.text.length)return!0;for(var a=void 0,o=0;o<n.markedSpans.length;++o)if(a=n.markedSpans[o],a.marker.collapsed&&!a.marker.widgetNode&&a.from==r.to&&(a.to==null||a.to!=r.from)&&(a.marker.inclusiveLeft||r.marker.inclusiveRight)&&pa(e,n,a))return!0}function En(e){e=mn(e);for(var n=0,r=e.parent,i=0;i<r.lines.length;++i){var a=r.lines[i];if(a==e)break;n+=a.height}for(var o=r.parent;o;r=o,o=r.parent)for(var l=0;l<o.children.length;++l){var s=o.children[l];if(s==r)break;n+=s.height}return n}function wr(e){if(e.height==0)return 0;for(var n=e.text.length,r,i=e;r=Mo(i);){var a=r.find(0,!0);i=a.from.line,n+=a.from.ch-a.to.ch}for(i=e;r=kr(i);){var o=r.find(0,!0);n-=i.text.length-o.from.ch,i=o.to.line,n+=i.text.length-o.to.ch}return n}function ha(e){var n=e.display,r=e.doc;n.maxLine=$e(r,r.first),n.maxLineLength=wr(n.maxLine),n.maxLineChanged=!0,r.iter(function(i){var a=wr(i);a>n.maxLineLength&&(n.maxLineLength=a,n.maxLine=i)})}var fi=function(e,n,r){this.text=e,Lo(this,n),this.height=r?r(this):1};fi.prototype.lineNo=function(){return mt(this)},et(fi);function wu(e,n,r,i){e.text=n,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Fo(e),Lo(e,r);var a=i?i(e):1;a!=e.height&&Cn(e,a)}function Du(e){e.parent=null,Fo(e)}var Su={},Au={};function Bo(e,n){if(!e||/^\s*$/.test(e))return null;var r=n.addModeClass?Au:Su;return r[e]||(r[e]=e.replace(/\S+/g,"cm-$&"))}function zo(e,n){var r=W("span",null,null,X?"padding-right: .1px":null),i={pre:W("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};n.measure={};for(var a=0;a<=(n.rest?n.rest.length:0);a++){var o=a?n.rest[a-1]:n.line,l=void 0;i.pos=0,i.addToken=Lu,zi(e.display.measure)&&(l=B(o,e.doc.direction))&&(i.addToken=Mu(i.addToken,l)),i.map=[];var s=n!=e.display.externalMeasured&&mt(o);Tu(o,i,bo(e,o,s)),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=U(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=U(o.styleClasses.textClass,i.textClass||""))),i.map.length==0&&i.map.push(0,0,i.content.appendChild(fr(e.display.measure))),a==0?(n.measure.map=i.map,n.measure.cache={}):((n.measure.maps||(n.measure.maps=[])).push(i.map),(n.measure.caches||(n.measure.caches=[])).push({}))}if(X){var d=i.content.lastChild;(/\bcm-tab\b/.test(d.className)||d.querySelector&&d.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return _e(e,"renderLine",e,n.line,i.pre),i.pre.className&&(i.textClass=U(i.pre.className,i.textClass||"")),i}function Fu(e){var n=T("span","â€¢","cm-invalidchar");return n.title="\\u"+e.charCodeAt(0).toString(16),n.setAttribute("aria-label",n.title),n}function Lu(e,n,r,i,a,o,l){if(n){var s=e.splitSpaces?Eu(n,e.trailingSpace):n,d=e.cm.state.specialChars,h=!1,C;if(!d.test(n))e.col+=n.length,C=document.createTextNode(s),e.map.push(e.pos,e.pos+n.length,C),L&&$<9&&(h=!0),e.pos+=n.length;else{C=document.createDocumentFragment();for(var F=0;;){d.lastIndex=F;var j=d.exec(n),P=j?j.index-F:n.length-F;if(P){var ce=document.createTextNode(s.slice(F,F+P));L&&$<9?C.appendChild(T("span",[ce])):C.appendChild(ce),e.map.push(e.pos,e.pos+P,ce),e.col+=P,e.pos+=P}if(!j)break;F+=P+1;var me=void 0;if(j[0]=="	"){var Ae=e.cm.options.tabSize,Be=Ae-e.col%Ae;me=C.appendChild(T("span",_t(Be),"cm-tab")),me.setAttribute("role","presentation"),me.setAttribute("cm-text","	"),e.col+=Be}else j[0]=="\r"||j[0]==`
`?(me=C.appendChild(T("span",j[0]=="\r"?"â":"â¤","cm-invalidchar")),me.setAttribute("cm-text",j[0]),e.col+=1):(me=e.cm.options.specialCharPlaceholder(j[0]),me.setAttribute("cm-text",j[0]),L&&$<9?C.appendChild(T("span",[me])):C.appendChild(me),e.col+=1);e.map.push(e.pos,e.pos+1,me),e.pos++}}if(e.trailingSpace=s.charCodeAt(n.length-1)==32,r||i||a||h||o||l){var Ne=r||"";i&&(Ne+=i),a&&(Ne+=a);var ze=T("span",[C],Ne,o);if(l)for(var Re in l)l.hasOwnProperty(Re)&&Re!="style"&&Re!="class"&&ze.setAttribute(Re,l[Re]);return e.content.appendChild(ze)}e.content.appendChild(C)}}function Eu(e,n){if(e.length>1&&!/  /.test(e))return e;for(var r=n,i="",a=0;a<e.length;a++){var o=e.charAt(a);o==" "&&r&&(a==e.length-1||e.charCodeAt(a+1)==32)&&(o="Â "),i+=o,r=o==" "}return i}function Mu(e,n){return function(r,i,a,o,l,s,d){a=a?a+" cm-force-border":"cm-force-border";for(var h=r.pos,C=h+i.length;;){for(var F=void 0,j=0;j<n.length&&(F=n[j],!(F.to>h&&F.from<=h));j++);if(F.to>=C)return e(r,i,a,o,l,s,d);e(r,i.slice(0,F.to-h),a,o,null,s,d),o=null,i=i.slice(F.to-h),h=F.to}}}function Io(e,n,r,i){var a=!i&&r.widgetNode;a&&e.map.push(e.pos,e.pos+n,a),!i&&e.cm.display.input.needsContentAttribute&&(a||(a=e.content.appendChild(document.createElement("span"))),a.setAttribute("cm-marker",r.id)),a&&(e.cm.display.input.setUneditable(a),e.content.appendChild(a)),e.pos+=n,e.trailingSpace=!1}function Tu(e,n,r){var i=e.markedSpans,a=e.text,o=0;if(!i){for(var l=1;l<r.length;l+=2)n.addToken(n,a.slice(o,o=r[l]),Bo(r[l+1],n.cm.options));return}for(var s=a.length,d=0,h=1,C="",F,j,P=0,ce,me,Ae,Be,Ne;;){if(P==d){ce=me=Ae=j="",Ne=null,Be=null,P=1/0;for(var ze=[],Re=void 0,Ye=0;Ye<i.length;++Ye){var We=i[Ye],st=We.marker;if(st.type=="bookmark"&&We.from==d&&st.widgetNode)ze.push(st);else if(We.from<=d&&(We.to==null||We.to>d||st.collapsed&&We.to==d&&We.from==d)){if(We.to!=null&&We.to!=d&&P>We.to&&(P=We.to,me=""),st.className&&(ce+=" "+st.className),st.css&&(j=(j?j+";":"")+st.css),st.startStyle&&We.from==d&&(Ae+=" "+st.startStyle),st.endStyle&&We.to==P&&(Re||(Re=[])).push(st.endStyle,We.to),st.title&&((Ne||(Ne={})).title=st.title),st.attributes)for(var Ct in st.attributes)(Ne||(Ne={}))[Ct]=st.attributes[Ct];st.collapsed&&(!Be||ca(Be.marker,st)<0)&&(Be=We)}else We.from>d&&P>We.from&&(P=We.from)}if(Re)for(var Ut=0;Ut<Re.length;Ut+=2)Re[Ut+1]==P&&(me+=" "+Re[Ut]);if(!Be||Be.from==d)for(var Ft=0;Ft<ze.length;++Ft)Io(n,0,ze[Ft]);if(Be&&(Be.from||0)==d){if(Io(n,(Be.to==null?s+1:Be.to)-d,Be.marker,Be.from==null),Be.to==null)return;Be.to==d&&(Be=!1)}}if(d>=s)break;for(var ln=Math.min(s,P);;){if(C){var Jt=d+C.length;if(!Be){var zt=Jt>ln?C.slice(0,ln-d):C;n.addToken(n,zt,F?F+ce:ce,Ae,d+zt.length==P?me:"",j,Ne)}if(Jt>=ln){C=C.slice(ln-d),d=ln;break}d=Jt,Ae=""}C=a.slice(o,o=r[h++]),F=Bo(r[h++],n.cm.options)}}}function No(e,n,r){this.line=n,this.rest=ku(n),this.size=this.rest?mt(Oe(this.rest))-r+1:1,this.node=this.text=null,this.hidden=In(e,n)}function Dr(e,n,r){for(var i=[],a,o=n;o<r;o=a){var l=new No(e.doc,$e(e.doc,o),o);a=o+l.size,i.push(l)}return i}var mi=null;function _u(e){mi?mi.ops.push(e):e.ownsGroup=mi={ops:[e],delayedCallbacks:[]}}function Bu(e){var n=e.delayedCallbacks,r=0;do{for(;r<n.length;r++)n[r].call(null);for(var i=0;i<e.ops.length;i++){var a=e.ops[i];if(a.cursorActivityHandlers)for(;a.cursorActivityCalled<a.cursorActivityHandlers.length;)a.cursorActivityHandlers[a.cursorActivityCalled++].call(null,a.cm)}}while(r<n.length)}function zu(e,n){var r=e.ownsGroup;if(r)try{Bu(r)}finally{mi=null,n(r)}}var Ri=null;function Rt(e,n){var r=Ie(e,n);if(r.length){var i=Array.prototype.slice.call(arguments,2),a;mi?a=mi.delayedCallbacks:Ri?a=Ri:(a=Ri=[],setTimeout(Iu,0));for(var o=function(s){a.push(function(){return r[s].apply(null,i)})},l=0;l<r.length;++l)o(l)}}function Iu(){var e=Ri;Ri=null;for(var n=0;n<e.length;++n)e[n]()}function Oo(e,n,r,i){for(var a=0;a<n.changes.length;a++){var o=n.changes[a];o=="text"?Ou(e,n):o=="gutter"?Ro(e,n,r,i):o=="class"?fa(e,n):o=="widget"&&Hu(e,n,i)}n.changes=null}function Pi(e){return e.node==e.text&&(e.node=T("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),L&&$<8&&(e.node.style.zIndex=2)),e.node}function Nu(e,n){var r=n.bgClass?n.bgClass+" "+(n.line.bgClass||""):n.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),n.background)r?n.background.className=r:(n.background.parentNode.removeChild(n.background),n.background=null);else if(r){var i=Pi(n);n.background=i.insertBefore(T("div",null,r),i.firstChild),e.display.input.setUneditable(n.background)}}function Ho(e,n){var r=e.display.externalMeasured;return r&&r.line==n.line?(e.display.externalMeasured=null,n.measure=r.measure,r.built):zo(e,n)}function Ou(e,n){var r=n.text.className,i=Ho(e,n);n.text==n.node&&(n.node=i.pre),n.text.parentNode.replaceChild(i.pre,n.text),n.text=i.pre,i.bgClass!=n.bgClass||i.textClass!=n.textClass?(n.bgClass=i.bgClass,n.textClass=i.textClass,fa(e,n)):r&&(n.text.className=r)}function fa(e,n){Nu(e,n),n.line.wrapClass?Pi(n).className=n.line.wrapClass:n.node!=n.text&&(n.node.className="");var r=n.textClass?n.textClass+" "+(n.line.textClass||""):n.line.textClass;n.text.className=r||""}function Ro(e,n,r,i){if(n.gutter&&(n.node.removeChild(n.gutter),n.gutter=null),n.gutterBackground&&(n.node.removeChild(n.gutterBackground),n.gutterBackground=null),n.line.gutterClass){var a=Pi(n);n.gutterBackground=T("div",null,"CodeMirror-gutter-background "+n.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(n.gutterBackground),a.insertBefore(n.gutterBackground,n.text)}var o=n.line.gutterMarkers;if(e.options.lineNumbers||o){var l=Pi(n),s=n.gutter=T("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(s.setAttribute("aria-hidden","true"),e.display.input.setUneditable(s),l.insertBefore(s,n.text),n.line.gutterClass&&(s.className+=" "+n.line.gutterClass),e.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"])&&(n.lineNumber=s.appendChild(T("div",ra(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var d=0;d<e.display.gutterSpecs.length;++d){var h=e.display.gutterSpecs[d].className,C=o.hasOwnProperty(h)&&o[h];C&&s.appendChild(T("div",[C],"CodeMirror-gutter-elt","left: "+i.gutterLeft[h]+"px; width: "+i.gutterWidth[h]+"px"))}}}function Hu(e,n,r){n.alignable&&(n.alignable=null);for(var i=Se("CodeMirror-linewidget"),a=n.node.firstChild,o=void 0;a;a=o)o=a.nextSibling,i.test(a.className)&&n.node.removeChild(a);Po(e,n,r)}function Ru(e,n,r,i){var a=Ho(e,n);return n.text=n.node=a.pre,a.bgClass&&(n.bgClass=a.bgClass),a.textClass&&(n.textClass=a.textClass),fa(e,n),Ro(e,n,r,i),Po(e,n,i),n.node}function Po(e,n,r){if(Vo(e,n.line,n,r,!0),n.rest)for(var i=0;i<n.rest.length;i++)Vo(e,n.rest[i],n,r,!1)}function Vo(e,n,r,i,a){if(n.widgets)for(var o=Pi(r),l=0,s=n.widgets;l<s.length;++l){var d=s[l],h=T("div",[d.node],"CodeMirror-linewidget"+(d.className?" "+d.className:""));d.handleMouseEvents||h.setAttribute("cm-ignore-events","true"),Pu(d,h,r,i),e.display.input.setUneditable(h),a&&d.above?o.insertBefore(h,r.gutter||r.text):o.appendChild(h),Rt(d,"redraw")}}function Pu(e,n,r,i){if(e.noHScroll){(r.alignable||(r.alignable=[])).push(n);var a=i.wrapperWidth;n.style.left=i.fixedPos+"px",e.coverGutter||(a-=i.gutterTotalWidth,n.style.paddingLeft=i.gutterTotalWidth+"px"),n.style.width=a+"px"}e.coverGutter&&(n.style.zIndex=5,n.style.position="relative",e.noHScroll||(n.style.marginLeft=-i.gutterTotalWidth+"px"))}function Vi(e){if(e.height!=null)return e.height;var n=e.doc.cm;if(!n)return 0;if(!we(document.body,e.node)){var r="position: relative;";e.coverGutter&&(r+="margin-left: -"+n.display.gutters.offsetWidth+"px;"),e.noHScroll&&(r+="width: "+n.display.wrapper.clientWidth+"px;"),ve(n.display.measure,T("div",[e.node],null,r))}return e.height=e.node.parentNode.offsetHeight}function Mn(e,n){for(var r=Ot(n);r!=e.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==e.sizer&&r!=e.mover)return!0}function Sr(e){return e.lineSpace.offsetTop}function ma(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Uo(e){if(e.cachedPaddingH)return e.cachedPaddingH;var n=ve(e.measure,T("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(n):n.currentStyle,i={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(i.left)&&!isNaN(i.right)&&(e.cachedPaddingH=i),i}function wn(e){return Ze-e.display.nativeBarWidth}function Kn(e){return e.display.scroller.clientWidth-wn(e)-e.display.barWidth}function ga(e){return e.display.scroller.clientHeight-wn(e)-e.display.barHeight}function Vu(e,n,r){var i=e.options.lineWrapping,a=i&&Kn(e);if(!n.measure.heights||i&&n.measure.width!=a){var o=n.measure.heights=[];if(i){n.measure.width=a;for(var l=n.text.firstChild.getClientRects(),s=0;s<l.length-1;s++){var d=l[s],h=l[s+1];Math.abs(d.bottom-h.bottom)>2&&o.push((d.bottom+h.top)/2-r.top)}}o.push(r.bottom-r.top)}}function $o(e,n,r){if(e.line==n)return{map:e.measure.map,cache:e.measure.cache};if(e.rest){for(var i=0;i<e.rest.length;i++)if(e.rest[i]==n)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var a=0;a<e.rest.length;a++)if(mt(e.rest[a])>r)return{map:e.measure.maps[a],cache:e.measure.caches[a],before:!0}}}function Uu(e,n){n=mn(n);var r=mt(n),i=e.display.externalMeasured=new No(e.doc,n,r);i.lineN=r;var a=i.built=zo(e,i);return i.text=a.pre,ve(e.display.lineMeasure,a.pre),i}function qo(e,n,r,i){return Dn(e,gi(e,n),r,i)}function va(e,n){if(n>=e.display.viewFrom&&n<e.display.viewTo)return e.display.view[ei(e,n)];var r=e.display.externalMeasured;if(r&&n>=r.lineN&&n<r.lineN+r.size)return r}function gi(e,n){var r=mt(n),i=va(e,r);i&&!i.text?i=null:i&&i.changes&&(Oo(e,i,r,ka(e)),e.curOp.forceUpdate=!0),i||(i=Uu(e,n));var a=$o(i,n,r);return{line:n,view:i,rect:null,map:a.map,cache:a.cache,before:a.before,hasHeights:!1}}function Dn(e,n,r,i,a){n.before&&(r=-1);var o=r+(i||""),l;return n.cache.hasOwnProperty(o)?l=n.cache[o]:(n.rect||(n.rect=n.view.text.getBoundingClientRect()),n.hasHeights||(Vu(e,n.view,n.rect),n.hasHeights=!0),l=qu(e,n,r,i),l.bogus||(n.cache[o]=l)),{left:l.left,right:l.right,top:a?l.rtop:l.top,bottom:a?l.rbottom:l.bottom}}var jo={left:0,right:0,top:0,bottom:0};function Wo(e,n,r){for(var i,a,o,l,s,d,h=0;h<e.length;h+=3)if(s=e[h],d=e[h+1],n<s?(a=0,o=1,l="left"):n<d?(a=n-s,o=a+1):(h==e.length-3||n==d&&e[h+3]>n)&&(o=d-s,a=o-1,n>=d&&(l="right")),a!=null){if(i=e[h+2],s==d&&r==(i.insertLeft?"left":"right")&&(l=r),r=="left"&&a==0)for(;h&&e[h-2]==e[h-3]&&e[h-1].insertLeft;)i=e[(h-=3)+2],l="left";if(r=="right"&&a==d-s)for(;h<e.length-3&&e[h+3]==e[h+4]&&!e[h+5].insertLeft;)i=e[(h+=3)+2],l="right";break}return{node:i,start:a,end:o,collapse:l,coverStart:s,coverEnd:d}}function $u(e,n){var r=jo;if(n=="left")for(var i=0;i<e.length&&(r=e[i]).left==r.right;i++);else for(var a=e.length-1;a>=0&&(r=e[a]).left==r.right;a--);return r}function qu(e,n,r,i){var a=Wo(n.map,r,i),o=a.node,l=a.start,s=a.end,d=a.collapse,h;if(o.nodeType==3){for(var C=0;C<4;C++){for(;l&&u(n.line.text.charAt(a.coverStart+l));)--l;for(;a.coverStart+s<a.coverEnd&&u(n.line.text.charAt(a.coverStart+s));)++s;if(L&&$<9&&l==0&&s==a.coverEnd-a.coverStart?h=o.parentNode.getBoundingClientRect():h=$u(re(o,l,s).getClientRects(),i),h.left||h.right||l==0)break;s=l,l=l-1,d="right"}L&&$<11&&(h=ju(e.display.measure,h))}else{l>0&&(d=i="right");var F;e.options.lineWrapping&&(F=o.getClientRects()).length>1?h=F[i=="right"?F.length-1:0]:h=o.getBoundingClientRect()}if(L&&$<9&&!l&&(!h||!h.left&&!h.right)){var j=o.parentNode.getClientRects()[0];j?h={left:j.left,right:j.left+yi(e.display),top:j.top,bottom:j.bottom}:h=jo}for(var P=h.top-n.rect.top,ce=h.bottom-n.rect.top,me=(P+ce)/2,Ae=n.view.measure.heights,Be=0;Be<Ae.length-1&&!(me<Ae[Be]);Be++);var Ne=Be?Ae[Be-1]:0,ze=Ae[Be],Re={left:(d=="right"?h.right:h.left)-n.rect.left,right:(d=="left"?h.left:h.right)-n.rect.left,top:Ne,bottom:ze};return!h.left&&!h.right&&(Re.bogus=!0),e.options.singleCursorHeightPerLine||(Re.rtop=P,Re.rbottom=ce),Re}function ju(e,n){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!fn(e))return n;var r=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:n.left*r,right:n.right*r,top:n.top*i,bottom:n.bottom*i}}function Go(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var n=0;n<e.rest.length;n++)e.measure.caches[n]={}}function Yo(e){e.display.externalMeasure=null,De(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)Go(e.display.view[n])}function Ui(e){Yo(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Xo(e){return R&&K?-(e.body.getBoundingClientRect().left-parseInt(getComputedStyle(e.body).marginLeft)):e.defaultView.pageXOffset||(e.documentElement||e.body).scrollLeft}function Zo(e){return R&&K?-(e.body.getBoundingClientRect().top-parseInt(getComputedStyle(e.body).marginTop)):e.defaultView.pageYOffset||(e.documentElement||e.body).scrollTop}function ya(e){var n=mn(e),r=n.widgets,i=0;if(r)for(var a=0;a<r.length;++a)r[a].above&&(i+=Vi(r[a]));return i}function Ar(e,n,r,i,a){if(!a){var o=ya(n);r.top+=o,r.bottom+=o}if(i=="line")return r;i||(i="local");var l=En(n);if(i=="local"?l+=Sr(e.display):l-=e.display.viewOffset,i=="page"||i=="window"){var s=e.display.lineSpace.getBoundingClientRect();l+=s.top+(i=="window"?0:Zo(p(e)));var d=s.left+(i=="window"?0:Xo(p(e)));r.left+=d,r.right+=d}return r.top+=l,r.bottom+=l,r}function Ko(e,n,r){if(r=="div")return n;var i=n.left,a=n.top;if(r=="page")i-=Xo(p(e)),a-=Zo(p(e));else if(r=="local"||!r){var o=e.display.sizer.getBoundingClientRect();i+=o.left,a+=o.top}var l=e.display.lineSpace.getBoundingClientRect();return{left:i-l.left,top:a-l.top}}function Fr(e,n,r,i,a){return i||(i=$e(e.doc,n.line)),Ar(e,i,qo(e,i,n.ch,a),r)}function gn(e,n,r,i,a,o){i=i||$e(e.doc,n.line),a||(a=gi(e,i));function l(ce,me){var Ae=Dn(e,a,ce,me?"right":"left",o);return me?Ae.left=Ae.right:Ae.right=Ae.left,Ar(e,i,Ae,r)}var s=B(i,e.doc.direction),d=n.ch,h=n.sticky;if(d>=i.text.length?(d=i.text.length,h="before"):d<=0&&(d=0,h="after"),!s)return l(h=="before"?d-1:d,h=="before");function C(ce,me,Ae){var Be=s[me],Ne=Be.level==1;return l(Ae?ce-1:ce,Ne!=Ae)}var F=ee(s,d,h),j=N,P=C(d,F,h=="before");return j!=null&&(P.other=C(d,j,h!="before")),P}function Qo(e,n){var r=0;n=at(e.doc,n),e.options.lineWrapping||(r=yi(e.display)*n.ch);var i=$e(e.doc,n.line),a=En(i)+Sr(e.display);return{left:r,right:r,top:a,bottom:a+i.height}}function ba(e,n,r,i,a){var o=ke(e,n,r);return o.xRel=a,i&&(o.outside=i),o}function xa(e,n,r){var i=e.doc;if(r+=e.display.viewOffset,r<0)return ba(i.first,0,null,-1,-1);var a=Zn(i,r),o=i.first+i.size-1;if(a>o)return ba(i.first+i.size-1,$e(i,o).text.length,null,1,1);n<0&&(n=0);for(var l=$e(i,a);;){var s=Wu(e,l,a,n,r),d=xu(l,s.ch+(s.xRel>0||s.outside>0?1:0));if(!d)return s;var h=d.find(1);if(h.line==a)return h;l=$e(i,a=h.line)}}function Jo(e,n,r,i){i-=ya(n);var a=n.text.length,o=k(function(l){return Dn(e,r,l-1).bottom<=i},a,0);return a=k(function(l){return Dn(e,r,l).top>i},o,a),{begin:o,end:a}}function el(e,n,r,i){r||(r=gi(e,n));var a=Ar(e,n,Dn(e,r,i),"line").top;return Jo(e,n,r,a)}function Ca(e,n,r,i){return e.bottom<=r?!1:e.top>r?!0:(i?e.left:e.right)>n}function Wu(e,n,r,i,a){a-=En(n);var o=gi(e,n),l=ya(n),s=0,d=n.text.length,h=!0,C=B(n,e.doc.direction);if(C){var F=(e.options.lineWrapping?Yu:Gu)(e,n,r,o,C,i,a);h=F.level!=1,s=h?F.from:F.to-1,d=h?F.to:F.from-1}var j=null,P=null,ce=k(function(Ye){var We=Dn(e,o,Ye);return We.top+=l,We.bottom+=l,Ca(We,i,a,!1)?(We.top<=a&&We.left<=i&&(j=Ye,P=We),!0):!1},s,d),me,Ae,Be=!1;if(P){var Ne=i-P.left<P.right-i,ze=Ne==h;ce=j+(ze?0:1),Ae=ze?"after":"before",me=Ne?P.left:P.right}else{!h&&(ce==d||ce==s)&&ce++,Ae=ce==0?"after":ce==n.text.length?"before":Dn(e,o,ce-(h?1:0)).bottom+l<=a==h?"after":"before";var Re=gn(e,ke(r,ce,Ae),"line",n,o);me=Re.left,Be=a<Re.top?-1:a>=Re.bottom?1:0}return ce=v(n.text,ce,1),ba(r,ce,Ae,Be,i-me)}function Gu(e,n,r,i,a,o,l){var s=k(function(F){var j=a[F],P=j.level!=1;return Ca(gn(e,ke(r,P?j.to:j.from,P?"before":"after"),"line",n,i),o,l,!0)},0,a.length-1),d=a[s];if(s>0){var h=d.level!=1,C=gn(e,ke(r,h?d.from:d.to,h?"after":"before"),"line",n,i);Ca(C,o,l,!0)&&C.top>l&&(d=a[s-1])}return d}function Yu(e,n,r,i,a,o,l){var s=Jo(e,n,i,l),d=s.begin,h=s.end;/\s/.test(n.text.charAt(h-1))&&h--;for(var C=null,F=null,j=0;j<a.length;j++){var P=a[j];if(!(P.from>=h||P.to<=d)){var ce=P.level!=1,me=Dn(e,i,ce?Math.min(h,P.to)-1:Math.max(d,P.from)).right,Ae=me<o?o-me+1e9:me-o;(!C||F>Ae)&&(C=P,F=Ae)}}return C||(C=a[a.length-1]),C.from<d&&(C={from:d,to:C.to,level:C.level}),C.to>h&&(C={from:C.from,to:h,level:C.level}),C}var Qn;function vi(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Qn==null){Qn=T("pre",null,"CodeMirror-line-like");for(var n=0;n<49;++n)Qn.appendChild(document.createTextNode("x")),Qn.appendChild(T("br"));Qn.appendChild(document.createTextNode("x"))}ve(e.measure,Qn);var r=Qn.offsetHeight/50;return r>3&&(e.cachedTextHeight=r),De(e.measure),r||1}function yi(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var n=T("span","xxxxxxxxxx"),r=T("pre",[n],"CodeMirror-line-like");ve(e.measure,r);var i=n.getBoundingClientRect(),a=(i.right-i.left)/10;return a>2&&(e.cachedCharWidth=a),a||10}function ka(e){for(var n=e.display,r={},i={},a=n.gutters.clientLeft,o=n.gutters.firstChild,l=0;o;o=o.nextSibling,++l){var s=e.display.gutterSpecs[l].className;r[s]=o.offsetLeft+o.clientLeft+a,i[s]=o.clientWidth}return{fixedPos:wa(n),gutterTotalWidth:n.gutters.offsetWidth,gutterLeft:r,gutterWidth:i,wrapperWidth:n.wrapper.clientWidth}}function wa(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function tl(e){var n=vi(e.display),r=e.options.lineWrapping,i=r&&Math.max(5,e.display.scroller.clientWidth/yi(e.display)-3);return function(a){if(In(e.doc,a))return 0;var o=0;if(a.widgets)for(var l=0;l<a.widgets.length;l++)a.widgets[l].height&&(o+=a.widgets[l].height);return r?o+(Math.ceil(a.text.length/i)||1)*n:o+n}}function Da(e){var n=e.doc,r=tl(e);n.iter(function(i){var a=r(i);a!=i.height&&Cn(i,a)})}function Jn(e,n,r,i){var a=e.display;if(!r&&Ot(n).getAttribute("cm-not-content")=="true")return null;var o,l,s=a.lineSpace.getBoundingClientRect();try{o=n.clientX-s.left,l=n.clientY-s.top}catch{return null}var d=xa(e,o,l),h;if(i&&d.xRel>0&&(h=$e(e.doc,d.line).text).length==d.ch){var C=qe(h,h.length,e.options.tabSize)-h.length;d=ke(d.line,Math.max(0,Math.round((o-Uo(e.display).left)/yi(e.display))-C))}return d}function ei(e,n){if(n>=e.display.viewTo||(n-=e.display.viewFrom,n<0))return null;for(var r=e.display.view,i=0;i<r.length;i++)if(n-=r[i].size,n<0)return i}function Kt(e,n,r,i){n==null&&(n=e.doc.first),r==null&&(r=e.doc.first+e.doc.size),i||(i=0);var a=e.display;if(i&&r<a.viewTo&&(a.updateLineNumbers==null||a.updateLineNumbers>n)&&(a.updateLineNumbers=n),e.curOp.viewChanged=!0,n>=a.viewTo)Ln&&da(e.doc,n)<a.viewTo&&On(e);else if(r<=a.viewFrom)Ln&&_o(e.doc,r+i)>a.viewFrom?On(e):(a.viewFrom+=i,a.viewTo+=i);else if(n<=a.viewFrom&&r>=a.viewTo)On(e);else if(n<=a.viewFrom){var o=Lr(e,r,r+i,1);o?(a.view=a.view.slice(o.index),a.viewFrom=o.lineN,a.viewTo+=i):On(e)}else if(r>=a.viewTo){var l=Lr(e,n,n,-1);l?(a.view=a.view.slice(0,l.index),a.viewTo=l.lineN):On(e)}else{var s=Lr(e,n,n,-1),d=Lr(e,r,r+i,1);s&&d?(a.view=a.view.slice(0,s.index).concat(Dr(e,s.lineN,d.lineN)).concat(a.view.slice(d.index)),a.viewTo+=i):On(e)}var h=a.externalMeasured;h&&(r<h.lineN?h.lineN+=i:n<h.lineN+h.size&&(a.externalMeasured=null))}function Nn(e,n,r){e.curOp.viewChanged=!0;var i=e.display,a=e.display.externalMeasured;if(a&&n>=a.lineN&&n<a.lineN+a.size&&(i.externalMeasured=null),!(n<i.viewFrom||n>=i.viewTo)){var o=i.view[ei(e,n)];if(o.node!=null){var l=o.changes||(o.changes=[]);Pe(l,r)==-1&&l.push(r)}}}function On(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function Lr(e,n,r,i){var a=ei(e,n),o,l=e.display.view;if(!Ln||r==e.doc.first+e.doc.size)return{index:a,lineN:r};for(var s=e.display.viewFrom,d=0;d<a;d++)s+=l[d].size;if(s!=n){if(i>0){if(a==l.length-1)return null;o=s+l[a].size-n,a++}else o=s-n;n+=o,r+=o}for(;da(e.doc,r)!=r;){if(a==(i<0?0:l.length-1))return null;r+=i*l[a-(i<0?1:0)].size,a+=i}return{index:a,lineN:r}}function Xu(e,n,r){var i=e.display,a=i.view;a.length==0||n>=i.viewTo||r<=i.viewFrom?(i.view=Dr(e,n,r),i.viewFrom=n):(i.viewFrom>n?i.view=Dr(e,n,i.viewFrom).concat(i.view):i.viewFrom<n&&(i.view=i.view.slice(ei(e,n))),i.viewFrom=n,i.viewTo<r?i.view=i.view.concat(Dr(e,i.viewTo,r)):i.viewTo>r&&(i.view=i.view.slice(0,ei(e,r)))),i.viewTo=r}function nl(e){for(var n=e.display.view,r=0,i=0;i<n.length;i++){var a=n[i];!a.hidden&&(!a.node||a.changes)&&++r}return r}function $i(e){e.display.input.showSelection(e.display.input.prepareSelection())}function il(e,n){n===void 0&&(n=!0);var r=e.doc,i={},a=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),l=e.options.$customCursor;l&&(n=!0);for(var s=0;s<r.sel.ranges.length;s++)if(!(!n&&s==r.sel.primIndex)){var d=r.sel.ranges[s];if(!(d.from().line>=e.display.viewTo||d.to().line<e.display.viewFrom)){var h=d.empty();if(l){var C=l(e,d);C&&Sa(e,C,a)}else(h||e.options.showCursorWhenSelecting)&&Sa(e,d.head,a);h||Zu(e,d,o)}}return i}function Sa(e,n,r){var i=gn(e,n,"div",null,null,!e.options.singleCursorHeightPerLine),a=r.appendChild(T("div","Â ","CodeMirror-cursor"));if(a.style.left=i.left+"px",a.style.top=i.top+"px",a.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(e.getWrapperElement().className)){var o=Fr(e,n,"div",null,null),l=o.right-o.left;a.style.width=(l>0?l:e.defaultCharWidth())+"px"}if(i.other){var s=r.appendChild(T("div","Â ","CodeMirror-cursor CodeMirror-secondarycursor"));s.style.display="",s.style.left=i.other.left+"px",s.style.top=i.other.top+"px",s.style.height=(i.other.bottom-i.other.top)*.85+"px"}}function Er(e,n){return e.top-n.top||e.left-n.left}function Zu(e,n,r){var i=e.display,a=e.doc,o=document.createDocumentFragment(),l=Uo(e.display),s=l.left,d=Math.max(i.sizerWidth,Kn(e)-i.sizer.offsetLeft)-l.right,h=a.direction=="ltr";function C(ze,Re,Ye,We){Re<0&&(Re=0),Re=Math.round(Re),We=Math.round(We),o.appendChild(T("div",null,"CodeMirror-selected","position: absolute; left: "+ze+`px;
                             top: `+Re+"px; width: "+(Ye??d-ze)+`px;
                             height: `+(We-Re)+"px"))}function F(ze,Re,Ye){var We=$e(a,ze),st=We.text.length,Ct,Ut;function Ft(zt,en){return Fr(e,ke(ze,zt),"div",We,en)}function ln(zt,en,jt){var Ht=el(e,We,null,zt),It=en=="ltr"==(jt=="after")?"left":"right",Et=jt=="after"?Ht.begin:Ht.end-(/\s/.test(We.text.charAt(Ht.end-1))?2:1);return Ft(Et,It)[It]}var Jt=B(We,a.direction);return E(Jt,Re||0,Ye??st,function(zt,en,jt,Ht){var It=jt=="ltr",Et=Ft(zt,It?"left":"right"),tn=Ft(en-1,It?"right":"left"),Ti=Re==null&&zt==0,$n=Ye==null&&en==st,Yt=Ht==0,Sn=!Jt||Ht==Jt.length-1;if(tn.top-Et.top<=3){var $t=(h?Ti:$n)&&Yt,Qa=(h?$n:Ti)&&Sn,Bn=$t?s:(It?Et:tn).left,ai=Qa?d:(It?tn:Et).right;C(Bn,Et.top,ai-Bn,Et.bottom)}else{var oi,Zt,_i,Ja;It?(oi=h&&Ti&&Yt?s:Et.left,Zt=h?d:ln(zt,jt,"before"),_i=h?s:ln(en,jt,"after"),Ja=h&&$n&&Sn?d:tn.right):(oi=h?ln(zt,jt,"before"):s,Zt=!h&&Ti&&Yt?d:Et.right,_i=!h&&$n&&Sn?s:tn.left,Ja=h?ln(en,jt,"after"):d),C(oi,Et.top,Zt-oi,Et.bottom),Et.bottom<tn.top&&C(s,Et.bottom,null,tn.top),C(_i,tn.top,Ja-_i,tn.bottom)}(!Ct||Er(Et,Ct)<0)&&(Ct=Et),Er(tn,Ct)<0&&(Ct=tn),(!Ut||Er(Et,Ut)<0)&&(Ut=Et),Er(tn,Ut)<0&&(Ut=tn)}),{start:Ct,end:Ut}}var j=n.from(),P=n.to();if(j.line==P.line)F(j.line,j.ch,P.ch);else{var ce=$e(a,j.line),me=$e(a,P.line),Ae=mn(ce)==mn(me),Be=F(j.line,j.ch,Ae?ce.text.length+1:null).end,Ne=F(P.line,Ae?0:null,P.ch).start;Ae&&(Be.top<Ne.top-2?(C(Be.right,Be.top,null,Be.bottom),C(s,Ne.top,Ne.left,Ne.bottom)):C(Be.right,Be.top,Ne.left-Be.right,Be.bottom)),Be.bottom<Ne.top&&C(s,Be.bottom,null,Ne.top)}r.appendChild(o)}function Aa(e){if(e.state.focused){var n=e.display;clearInterval(n.blinker);var r=!0;n.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?n.blinker=setInterval(function(){e.hasFocus()||bi(e),n.cursorDiv.style.visibility=(r=!r)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(n.cursorDiv.style.visibility="hidden")}}function rl(e){e.hasFocus()||(e.display.input.focus(),e.state.focused||La(e))}function Fa(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,e.state.focused&&bi(e))},100)}function La(e,n){e.state.delayingBlurEvent&&!e.state.draggingText&&(e.state.delayingBlurEvent=!1),e.options.readOnly!="nocursor"&&(e.state.focused||(_e(e,"focus",e,n),e.state.focused=!0,ne(e.display.wrapper,"CodeMirror-focused"),!e.curOp&&e.display.selForContextMenu!=e.doc.sel&&(e.display.input.reset(),X&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Aa(e))}function bi(e,n){e.state.delayingBlurEvent||(e.state.focused&&(_e(e,"blur",e,n),e.state.focused=!1,pe(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Mr(e){for(var n=e.display,r=n.lineDiv.offsetTop,i=Math.max(0,n.scroller.getBoundingClientRect().top),a=n.lineDiv.getBoundingClientRect().top,o=0,l=0;l<n.view.length;l++){var s=n.view[l],d=e.options.lineWrapping,h=void 0,C=0;if(!s.hidden){if(a+=s.line.height,L&&$<8){var F=s.node.offsetTop+s.node.offsetHeight;h=F-r,r=F}else{var j=s.node.getBoundingClientRect();h=j.bottom-j.top,!d&&s.text.firstChild&&(C=s.text.firstChild.getBoundingClientRect().right-j.left-1)}var P=s.line.height-h;if((P>.005||P<-.005)&&(a<i&&(o-=P),Cn(s.line,h),al(s.line),s.rest))for(var ce=0;ce<s.rest.length;ce++)al(s.rest[ce]);if(C>e.display.sizerWidth){var me=Math.ceil(C/yi(e.display));me>e.display.maxLineLength&&(e.display.maxLineLength=me,e.display.maxLine=s.line,e.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(n.scroller.scrollTop+=o)}function al(e){if(e.widgets)for(var n=0;n<e.widgets.length;++n){var r=e.widgets[n],i=r.node.parentNode;i&&(r.height=i.offsetHeight)}}function Tr(e,n,r){var i=r&&r.top!=null?Math.max(0,r.top):e.scroller.scrollTop;i=Math.floor(i-Sr(e));var a=r&&r.bottom!=null?r.bottom:i+e.wrapper.clientHeight,o=Zn(n,i),l=Zn(n,a);if(r&&r.ensure){var s=r.ensure.from.line,d=r.ensure.to.line;s<o?(o=s,l=Zn(n,En($e(n,s))+e.wrapper.clientHeight)):Math.min(d,n.lastLine())>=l&&(o=Zn(n,En($e(n,d))-e.wrapper.clientHeight),l=d)}return{from:o,to:Math.max(l,o+1)}}function Ku(e,n){if(!Te(e,"scrollCursorIntoView")){var r=e.display,i=r.sizer.getBoundingClientRect(),a=null,o=r.wrapper.ownerDocument;if(n.top+i.top<0?a=!0:n.bottom+i.top>(o.defaultView.innerHeight||o.documentElement.clientHeight)&&(a=!1),a!=null&&!ye){var l=T("div","â€‹",null,`position: absolute;
                         top: `+(n.top-r.viewOffset-Sr(e.display))+`px;
                         height: `+(n.bottom-n.top+wn(e)+r.barHeight)+`px;
                         left: `+n.left+"px; width: "+Math.max(2,n.right-n.left)+"px;");e.display.lineSpace.appendChild(l),l.scrollIntoView(a),e.display.lineSpace.removeChild(l)}}}function Qu(e,n,r,i){i==null&&(i=0);var a;!e.options.lineWrapping&&n==r&&(r=n.sticky=="before"?ke(n.line,n.ch+1,"before"):n,n=n.ch?ke(n.line,n.sticky=="before"?n.ch-1:n.ch,"after"):n);for(var o=0;o<5;o++){var l=!1,s=gn(e,n),d=!r||r==n?s:gn(e,r);a={left:Math.min(s.left,d.left),top:Math.min(s.top,d.top)-i,right:Math.max(s.left,d.left),bottom:Math.max(s.bottom,d.bottom)+i};var h=Ea(e,a),C=e.doc.scrollTop,F=e.doc.scrollLeft;if(h.scrollTop!=null&&(ji(e,h.scrollTop),Math.abs(e.doc.scrollTop-C)>1&&(l=!0)),h.scrollLeft!=null&&(ti(e,h.scrollLeft),Math.abs(e.doc.scrollLeft-F)>1&&(l=!0)),!l)break}return a}function Ju(e,n){var r=Ea(e,n);r.scrollTop!=null&&ji(e,r.scrollTop),r.scrollLeft!=null&&ti(e,r.scrollLeft)}function Ea(e,n){var r=e.display,i=vi(e.display);n.top<0&&(n.top=0);var a=e.curOp&&e.curOp.scrollTop!=null?e.curOp.scrollTop:r.scroller.scrollTop,o=ga(e),l={};n.bottom-n.top>o&&(n.bottom=n.top+o);var s=e.doc.height+ma(r),d=n.top<i,h=n.bottom>s-i;if(n.top<a)l.scrollTop=d?0:n.top;else if(n.bottom>a+o){var C=Math.min(n.top,(h?s:n.bottom)-o);C!=a&&(l.scrollTop=C)}var F=e.options.fixedGutter?0:r.gutters.offsetWidth,j=e.curOp&&e.curOp.scrollLeft!=null?e.curOp.scrollLeft:r.scroller.scrollLeft-F,P=Kn(e)-r.gutters.offsetWidth,ce=n.right-n.left>P;return ce&&(n.right=n.left+P),n.left<10?l.scrollLeft=0:n.left<j?l.scrollLeft=Math.max(0,n.left+F-(ce?0:10)):n.right>P+j-3&&(l.scrollLeft=n.right+(ce?0:10)-P),l}function Ma(e,n){n!=null&&(_r(e),e.curOp.scrollTop=(e.curOp.scrollTop==null?e.doc.scrollTop:e.curOp.scrollTop)+n)}function xi(e){_r(e);var n=e.getCursor();e.curOp.scrollToPos={from:n,to:n,margin:e.options.cursorScrollMargin}}function qi(e,n,r){(n!=null||r!=null)&&_r(e),n!=null&&(e.curOp.scrollLeft=n),r!=null&&(e.curOp.scrollTop=r)}function ec(e,n){_r(e),e.curOp.scrollToPos=n}function _r(e){var n=e.curOp.scrollToPos;if(n){e.curOp.scrollToPos=null;var r=Qo(e,n.from),i=Qo(e,n.to);ol(e,r,i,n.margin)}}function ol(e,n,r,i){var a=Ea(e,{left:Math.min(n.left,r.left),top:Math.min(n.top,r.top)-i,right:Math.max(n.right,r.right),bottom:Math.max(n.bottom,r.bottom)+i});qi(e,a.scrollLeft,a.scrollTop)}function ji(e,n){Math.abs(e.doc.scrollTop-n)<2||(x||_a(e,{top:n}),ll(e,n,!0),x&&_a(e),Yi(e,100))}function ll(e,n,r){n=Math.max(0,Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,n)),!(e.display.scroller.scrollTop==n&&!r)&&(e.doc.scrollTop=n,e.display.scrollbars.setScrollTop(n),e.display.scroller.scrollTop!=n&&(e.display.scroller.scrollTop=n))}function ti(e,n,r,i){n=Math.max(0,Math.min(n,e.display.scroller.scrollWidth-e.display.scroller.clientWidth)),!((r?n==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-n)<2)&&!i)&&(e.doc.scrollLeft=n,pl(e),e.display.scroller.scrollLeft!=n&&(e.display.scroller.scrollLeft=n),e.display.scrollbars.setScrollLeft(n))}function Wi(e){var n=e.display,r=n.gutters.offsetWidth,i=Math.round(e.doc.height+ma(e.display));return{clientHeight:n.scroller.clientHeight,viewHeight:n.wrapper.clientHeight,scrollWidth:n.scroller.scrollWidth,clientWidth:n.scroller.clientWidth,viewWidth:n.wrapper.clientWidth,barLeft:e.options.fixedGutter?r:0,docHeight:i,scrollHeight:i+wn(e)+n.barHeight,nativeBarWidth:n.nativeBarWidth,gutterWidth:r}}var ni=function(e,n,r){this.cm=r;var i=this.vert=T("div",[T("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),a=this.horiz=T("div",[T("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=a.tabIndex=-1,e(i),e(a),se(i,"scroll",function(){i.clientHeight&&n(i.scrollTop,"vertical")}),se(a,"scroll",function(){a.clientWidth&&n(a.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,L&&$<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ni.prototype.update=function(e){var n=e.scrollWidth>e.clientWidth+1,r=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=n?i+"px":"0";var a=e.viewHeight-(n?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+a)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(n){this.horiz.style.display="block",this.horiz.style.right=r?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(r?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(i==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?i:0,bottom:n?i:0}},ni.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},ni.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},ni.prototype.zeroWidthHack=function(){var e=ie&&!ge?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.visibility=this.vert.style.visibility="hidden",this.disableHoriz=new nt,this.disableVert=new nt},ni.prototype.enableZeroWidthBar=function(e,n,r){e.style.visibility="";function i(){var a=e.getBoundingClientRect(),o=r=="vert"?document.elementFromPoint(a.right-1,(a.top+a.bottom)/2):document.elementFromPoint((a.right+a.left)/2,a.bottom-1);o!=e?e.style.visibility="hidden":n.set(1e3,i)}n.set(1e3,i)},ni.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Gi=function(){};Gi.prototype.update=function(){return{bottom:0,right:0}},Gi.prototype.setScrollLeft=function(){},Gi.prototype.setScrollTop=function(){},Gi.prototype.clear=function(){};function Ci(e,n){n||(n=Wi(e));var r=e.display.barWidth,i=e.display.barHeight;sl(e,n);for(var a=0;a<4&&r!=e.display.barWidth||i!=e.display.barHeight;a++)r!=e.display.barWidth&&e.options.lineWrapping&&Mr(e),sl(e,Wi(e)),r=e.display.barWidth,i=e.display.barHeight}function sl(e,n){var r=e.display,i=r.scrollbars.update(n);r.sizer.style.paddingRight=(r.barWidth=i.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=i.bottom)+"px",r.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=i.bottom+"px",r.scrollbarFiller.style.width=i.right+"px"):r.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=i.bottom+"px",r.gutterFiller.style.width=n.gutterWidth+"px"):r.gutterFiller.style.display=""}var ul={native:ni,null:Gi};function cl(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&pe(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ul[e.options.scrollbarStyle](function(n){e.display.wrapper.insertBefore(n,e.display.scrollbarFiller),se(n,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),n.setAttribute("cm-not-content","true")},function(n,r){r=="horizontal"?ti(e,n):ji(e,n)},e),e.display.scrollbars.addClass&&ne(e.display.wrapper,e.display.scrollbars.addClass)}var tc=0;function ii(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++tc,markArrays:null},_u(e.curOp)}function ri(e){var n=e.curOp;n&&zu(n,function(r){for(var i=0;i<r.ops.length;i++)r.ops[i].cm.curOp=null;nc(r)})}function nc(e){for(var n=e.ops,r=0;r<n.length;r++)ic(n[r]);for(var i=0;i<n.length;i++)rc(n[i]);for(var a=0;a<n.length;a++)ac(n[a]);for(var o=0;o<n.length;o++)oc(n[o]);for(var l=0;l<n.length;l++)lc(n[l])}function ic(e){var n=e.cm,r=n.display;uc(n),e.updateMaxLine&&ha(n),e.mustUpdate=e.viewChanged||e.forceUpdate||e.scrollTop!=null||e.scrollToPos&&(e.scrollToPos.from.line<r.viewFrom||e.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&n.options.lineWrapping,e.update=e.mustUpdate&&new Br(n,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function rc(e){e.updatedDisplay=e.mustUpdate&&Ta(e.cm,e.update)}function ac(e){var n=e.cm,r=n.display;e.updatedDisplay&&Mr(n),e.barMeasure=Wi(n),r.maxLineChanged&&!n.options.lineWrapping&&(e.adjustWidthTo=qo(n,r.maxLine,r.maxLine.text.length).left+3,n.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+e.adjustWidthTo+wn(n)+n.display.barWidth),e.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+e.adjustWidthTo-Kn(n))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=r.input.prepareSelection())}function oc(e){var n=e.cm;e.adjustWidthTo!=null&&(n.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<n.doc.scrollLeft&&ti(n,Math.min(n.display.scroller.scrollLeft,e.maxScrollLeft),!0),n.display.maxLineChanged=!1);var r=e.focus&&e.focus==Je(z(n));e.preparedSelection&&n.display.input.showSelection(e.preparedSelection,r),(e.updatedDisplay||e.startHeight!=n.doc.height)&&Ci(n,e.barMeasure),e.updatedDisplay&&za(n,e.barMeasure),e.selectionChanged&&Aa(n),n.state.focused&&e.updateInput&&n.display.input.reset(e.typing),r&&rl(e.cm)}function lc(e){var n=e.cm,r=n.display,i=n.doc;if(e.updatedDisplay&&dl(n,e.update),r.wheelStartX!=null&&(e.scrollTop!=null||e.scrollLeft!=null||e.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),e.scrollTop!=null&&ll(n,e.scrollTop,e.forceScroll),e.scrollLeft!=null&&ti(n,e.scrollLeft,!0,!0),e.scrollToPos){var a=Qu(n,at(i,e.scrollToPos.from),at(i,e.scrollToPos.to),e.scrollToPos.margin);Ku(n,a)}var o=e.maybeHiddenMarkers,l=e.maybeUnhiddenMarkers;if(o)for(var s=0;s<o.length;++s)o[s].lines.length||_e(o[s],"hide");if(l)for(var d=0;d<l.length;++d)l[d].lines.length&&_e(l[d],"unhide");r.wrapper.offsetHeight&&(i.scrollTop=n.display.scroller.scrollTop),e.changeObjs&&_e(n,"changes",n,e.changeObjs),e.update&&e.update.finish()}function on(e,n){if(e.curOp)return n();ii(e);try{return n()}finally{ri(e)}}function Pt(e,n){return function(){if(e.curOp)return n.apply(e,arguments);ii(e);try{return n.apply(e,arguments)}finally{ri(e)}}}function Xt(e){return function(){if(this.curOp)return e.apply(this,arguments);ii(this);try{return e.apply(this,arguments)}finally{ri(this)}}}function Vt(e){return function(){var n=this.cm;if(!n||n.curOp)return e.apply(this,arguments);ii(n);try{return e.apply(this,arguments)}finally{ri(n)}}}function Yi(e,n){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(n,Fe(sc,e))}function sc(e){var n=e.doc;if(!(n.highlightFrontier>=e.display.viewTo)){var r=+new Date+e.options.workTime,i=Oi(e,n.highlightFrontier),a=[];n.iter(i.line,Math.min(n.first+n.size,e.display.viewTo+500),function(o){if(i.line>=e.display.viewFrom){var l=o.styles,s=o.text.length>e.options.maxHighlightLength?Yn(n.mode,i.state):null,d=yo(e,o,i,!0);s&&(i.state=s),o.styles=d.styles;var h=o.styleClasses,C=d.classes;C?o.styleClasses=C:h&&(o.styleClasses=null);for(var F=!l||l.length!=o.styles.length||h!=C&&(!h||!C||h.bgClass!=C.bgClass||h.textClass!=C.textClass),j=0;!F&&j<l.length;++j)F=l[j]!=o.styles[j];F&&a.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&la(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>r)return Yi(e,e.options.workDelay),!0}),n.highlightFrontier=i.line,n.modeFrontier=Math.max(n.modeFrontier,i.line),a.length&&on(e,function(){for(var o=0;o<a.length;o++)Nn(e,a[o],"text")})}}var Br=function(e,n,r){var i=e.display;this.viewport=n,this.visible=Tr(i,e.doc,n),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=Kn(e),this.force=r,this.dims=ka(e),this.events=[]};Br.prototype.signal=function(e,n){it(e,n)&&this.events.push(arguments)},Br.prototype.finish=function(){for(var e=0;e<this.events.length;e++)_e.apply(null,this.events[e])};function uc(e){var n=e.display;!n.scrollbarsClipped&&n.scroller.offsetWidth&&(n.nativeBarWidth=n.scroller.offsetWidth-n.scroller.clientWidth,n.heightForcer.style.height=wn(e)+"px",n.sizer.style.marginBottom=-n.nativeBarWidth+"px",n.sizer.style.borderRightWidth=wn(e)+"px",n.scrollbarsClipped=!0)}function cc(e){if(e.hasFocus())return null;var n=Je(z(e));if(!n||!we(e.display.lineDiv,n))return null;var r={activeElt:n};if(window.getSelection){var i=xe(e).getSelection();i.anchorNode&&i.extend&&we(e.display.lineDiv,i.anchorNode)&&(r.anchorNode=i.anchorNode,r.anchorOffset=i.anchorOffset,r.focusNode=i.focusNode,r.focusOffset=i.focusOffset)}return r}function dc(e){if(!(!e||!e.activeElt||e.activeElt==Je(Ce(e.activeElt)))&&(e.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(e.activeElt.nodeName)&&e.anchorNode&&we(document.body,e.anchorNode)&&we(document.body,e.focusNode))){var n=e.activeElt.ownerDocument,r=n.defaultView.getSelection(),i=n.createRange();i.setEnd(e.anchorNode,e.anchorOffset),i.collapse(!1),r.removeAllRanges(),r.addRange(i),r.extend(e.focusNode,e.focusOffset)}}function Ta(e,n){var r=e.display,i=e.doc;if(n.editorIsHidden)return On(e),!1;if(!n.force&&n.visible.from>=r.viewFrom&&n.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&nl(e)==0)return!1;hl(e)&&(On(e),n.dims=ka(e));var a=i.first+i.size,o=Math.max(n.visible.from-e.options.viewportMargin,i.first),l=Math.min(a,n.visible.to+e.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(i.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(a,r.viewTo)),Ln&&(o=da(e.doc,o),l=_o(e.doc,l));var s=o!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=n.wrapperHeight||r.lastWrapWidth!=n.wrapperWidth;Xu(e,o,l),r.viewOffset=En($e(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var d=nl(e);if(!s&&d==0&&!n.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var h=cc(e);return d>4&&(r.lineDiv.style.display="none"),pc(e,r.updateLineNumbers,n.dims),d>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,dc(h),De(r.cursorDiv),De(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,s&&(r.lastWrapHeight=n.wrapperHeight,r.lastWrapWidth=n.wrapperWidth,Yi(e,400)),r.updateLineNumbers=null,!0}function dl(e,n){for(var r=n.viewport,i=!0;;i=!1){if(!i||!e.options.lineWrapping||n.oldDisplayWidth==Kn(e)){if(r&&r.top!=null&&(r={top:Math.min(e.doc.height+ma(e.display)-ga(e),r.top)}),n.visible=Tr(e.display,e.doc,r),n.visible.from>=e.display.viewFrom&&n.visible.to<=e.display.viewTo)break}else i&&(n.visible=Tr(e.display,e.doc,r));if(!Ta(e,n))break;Mr(e);var a=Wi(e);$i(e),Ci(e,a),za(e,a),n.force=!1}n.signal(e,"update",e),(e.display.viewFrom!=e.display.reportedViewFrom||e.display.viewTo!=e.display.reportedViewTo)&&(n.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function _a(e,n){var r=new Br(e,n);if(Ta(e,r)){Mr(e),dl(e,r);var i=Wi(e);$i(e),Ci(e,i),za(e,i),r.finish()}}function pc(e,n,r){var i=e.display,a=e.options.lineNumbers,o=i.lineDiv,l=o.firstChild;function s(ce){var me=ce.nextSibling;return X&&ie&&e.display.currentWheelTarget==ce?ce.style.display="none":ce.parentNode.removeChild(ce),me}for(var d=i.view,h=i.viewFrom,C=0;C<d.length;C++){var F=d[C];if(!F.hidden)if(!F.node||F.node.parentNode!=o){var j=Ru(e,F,h,r);o.insertBefore(j,l)}else{for(;l!=F.node;)l=s(l);var P=a&&n!=null&&n<=h&&F.lineNumber;F.changes&&(Pe(F.changes,"gutter")>-1&&(P=!1),Oo(e,F,h,r)),P&&(De(F.lineNumber),F.lineNumber.appendChild(document.createTextNode(ra(e.options,h)))),l=F.node.nextSibling}h+=F.size}for(;l;)l=s(l)}function Ba(e){var n=e.gutters.offsetWidth;e.sizer.style.marginLeft=n+"px",Rt(e,"gutterChanged",e)}function za(e,n){e.display.sizer.style.minHeight=n.docHeight+"px",e.display.heightForcer.style.top=n.docHeight+"px",e.display.gutters.style.height=n.docHeight+e.display.barHeight+wn(e)+"px"}function pl(e){var n=e.display,r=n.view;if(!(!n.alignWidgets&&(!n.gutters.firstChild||!e.options.fixedGutter))){for(var i=wa(n)-n.scroller.scrollLeft+e.doc.scrollLeft,a=n.gutters.offsetWidth,o=i+"px",l=0;l<r.length;l++)if(!r[l].hidden){e.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var s=r[l].alignable;if(s)for(var d=0;d<s.length;d++)s[d].style.left=o}e.options.fixedGutter&&(n.gutters.style.left=i+a+"px")}}function hl(e){if(!e.options.lineNumbers)return!1;var n=e.doc,r=ra(e.options,n.first+n.size-1),i=e.display;if(r.length!=i.lineNumChars){var a=i.measure.appendChild(T("div",[T("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=a.firstChild.offsetWidth,l=a.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-l)+1,i.lineNumWidth=i.lineNumInnerWidth+l,i.lineNumChars=i.lineNumInnerWidth?r.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Ba(e.display),!0}return!1}function Ia(e,n){for(var r=[],i=!1,a=0;a<e.length;a++){var o=e[a],l=null;if(typeof o!="string"&&(l=o.style,o=o.className),o=="CodeMirror-linenumbers")if(n)i=!0;else continue;r.push({className:o,style:l})}return n&&!i&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function fl(e){var n=e.gutters,r=e.gutterSpecs;De(n),e.lineGutter=null;for(var i=0;i<r.length;++i){var a=r[i],o=a.className,l=a.style,s=n.appendChild(T("div",null,"CodeMirror-gutter "+o));l&&(s.style.cssText=l),o=="CodeMirror-linenumbers"&&(e.lineGutter=s,s.style.width=(e.lineNumWidth||1)+"px")}n.style.display=r.length?"":"none",Ba(e)}function Xi(e){fl(e.display),Kt(e),pl(e)}function hc(e,n,r,i){var a=this;this.input=r,a.scrollbarFiller=T("div",null,"CodeMirror-scrollbar-filler"),a.scrollbarFiller.setAttribute("cm-not-content","true"),a.gutterFiller=T("div",null,"CodeMirror-gutter-filler"),a.gutterFiller.setAttribute("cm-not-content","true"),a.lineDiv=W("div",null,"CodeMirror-code"),a.selectionDiv=T("div",null,null,"position: relative; z-index: 1"),a.cursorDiv=T("div",null,"CodeMirror-cursors"),a.measure=T("div",null,"CodeMirror-measure"),a.lineMeasure=T("div",null,"CodeMirror-measure"),a.lineSpace=W("div",[a.measure,a.lineMeasure,a.selectionDiv,a.cursorDiv,a.lineDiv],null,"position: relative; outline: none");var o=W("div",[a.lineSpace],"CodeMirror-lines");a.mover=T("div",[o],null,"position: relative"),a.sizer=T("div",[a.mover],"CodeMirror-sizer"),a.sizerWidth=null,a.heightForcer=T("div",null,null,"position: absolute; height: "+Ze+"px; width: 1px;"),a.gutters=T("div",null,"CodeMirror-gutters"),a.lineGutter=null,a.scroller=T("div",[a.sizer,a.heightForcer,a.gutters],"CodeMirror-scroll"),a.scroller.setAttribute("tabIndex","-1"),a.wrapper=T("div",[a.scrollbarFiller,a.gutterFiller,a.scroller],"CodeMirror"),R&&he===105&&(a.wrapper.style.clipPath="inset(0px)"),a.wrapper.setAttribute("translate","no"),L&&$<8&&(a.gutters.style.zIndex=-1,a.scroller.style.paddingRight=0),!X&&!(x&&G)&&(a.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(a.wrapper):e(a.wrapper)),a.viewFrom=a.viewTo=n.first,a.reportedViewFrom=a.reportedViewTo=n.first,a.view=[],a.renderedView=null,a.externalMeasured=null,a.viewOffset=0,a.lastWrapHeight=a.lastWrapWidth=0,a.updateLineNumbers=null,a.nativeBarWidth=a.barHeight=a.barWidth=0,a.scrollbarsClipped=!1,a.lineNumWidth=a.lineNumInnerWidth=a.lineNumChars=null,a.alignWidgets=!1,a.cachedCharWidth=a.cachedTextHeight=a.cachedPaddingH=null,a.maxLine=null,a.maxLineLength=0,a.maxLineChanged=!1,a.wheelDX=a.wheelDY=a.wheelStartX=a.wheelStartY=null,a.shift=!1,a.selForContextMenu=null,a.activeTouch=null,a.gutterSpecs=Ia(i.gutters,i.lineNumbers),fl(a),r.init(a)}var zr=0,Tn=null;L?Tn=-.53:x?Tn=15:R?Tn=-.7:Me&&(Tn=-1/3);function ml(e){var n=e.wheelDeltaX,r=e.wheelDeltaY;return n==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(n=e.detail),r==null&&e.detail&&e.axis==e.VERTICAL_AXIS?r=e.detail:r==null&&(r=e.wheelDelta),{x:n,y:r}}function fc(e){var n=ml(e);return n.x*=Tn,n.y*=Tn,n}function gl(e,n){R&&he==102&&(e.display.chromeScrollHack==null?e.display.sizer.style.pointerEvents="none":clearTimeout(e.display.chromeScrollHack),e.display.chromeScrollHack=setTimeout(function(){e.display.chromeScrollHack=null,e.display.sizer.style.pointerEvents=""},100));var r=ml(n),i=r.x,a=r.y,o=Tn;n.deltaMode===0&&(i=n.deltaX,a=n.deltaY,o=1);var l=e.display,s=l.scroller,d=s.scrollWidth>s.clientWidth,h=s.scrollHeight>s.clientHeight;if(i&&d||a&&h){if(a&&ie&&X){e:for(var C=n.target,F=l.view;C!=s;C=C.parentNode)for(var j=0;j<F.length;j++)if(F[j].node==C){e.display.currentWheelTarget=C;break e}}if(i&&!x&&!fe&&o!=null){a&&h&&ji(e,Math.max(0,s.scrollTop+a*o)),ti(e,Math.max(0,s.scrollLeft+i*o)),(!a||a&&h)&&Qe(n),l.wheelStartX=null;return}if(a&&o!=null){var P=a*o,ce=e.doc.scrollTop,me=ce+l.wrapper.clientHeight;P<0?ce=Math.max(0,ce+P-50):me=Math.min(e.doc.height,me+P+50),_a(e,{top:ce,bottom:me})}zr<20&&n.deltaMode!==0&&(l.wheelStartX==null?(l.wheelStartX=s.scrollLeft,l.wheelStartY=s.scrollTop,l.wheelDX=i,l.wheelDY=a,setTimeout(function(){if(l.wheelStartX!=null){var Ae=s.scrollLeft-l.wheelStartX,Be=s.scrollTop-l.wheelStartY,Ne=Be&&l.wheelDY&&Be/l.wheelDY||Ae&&l.wheelDX&&Ae/l.wheelDX;l.wheelStartX=l.wheelStartY=null,Ne&&(Tn=(Tn*zr+Ne)/(zr+1),++zr)}},200)):(l.wheelDX+=i,l.wheelDY+=a))}}var cn=function(e,n){this.ranges=e,this.primIndex=n};cn.prototype.primary=function(){return this.ranges[this.primIndex]},cn.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var r=this.ranges[n],i=e.ranges[n];if(!aa(r.anchor,i.anchor)||!aa(r.head,i.head))return!1}return!0},cn.prototype.deepCopy=function(){for(var e=[],n=0;n<this.ranges.length;n++)e[n]=new pt(oa(this.ranges[n].anchor),oa(this.ranges[n].head));return new cn(e,this.primIndex)},cn.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},cn.prototype.contains=function(e,n){n||(n=e);for(var r=0;r<this.ranges.length;r++){var i=this.ranges[r];if(rt(n,i.from())>=0&&rt(e,i.to())<=0)return r}return-1};var pt=function(e,n){this.anchor=e,this.head=n};pt.prototype.from=function(){return vr(this.anchor,this.head)},pt.prototype.to=function(){return gr(this.anchor,this.head)},pt.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function vn(e,n,r){var i=e&&e.options.selectionsMayTouch,a=n[r];n.sort(function(j,P){return rt(j.from(),P.from())}),r=Pe(n,a);for(var o=1;o<n.length;o++){var l=n[o],s=n[o-1],d=rt(s.to(),l.from());if(i&&!l.empty()?d>0:d>=0){var h=vr(s.from(),l.from()),C=gr(s.to(),l.to()),F=s.empty()?l.from()==l.head:s.from()==s.head;o<=r&&--r,n.splice(--o,2,new pt(F?C:h,F?h:C))}}return new cn(n,r)}function Hn(e,n){return new cn([new pt(e,n||e)],0)}function Rn(e){return e.text?ke(e.from.line+e.text.length-1,Oe(e.text).length+(e.text.length==1?e.from.ch:0)):e.to}function vl(e,n){if(rt(e,n.from)<0)return e;if(rt(e,n.to)<=0)return Rn(n);var r=e.line+n.text.length-(n.to.line-n.from.line)-1,i=e.ch;return e.line==n.to.line&&(i+=Rn(n).ch-n.to.ch),ke(r,i)}function Na(e,n){for(var r=[],i=0;i<e.sel.ranges.length;i++){var a=e.sel.ranges[i];r.push(new pt(vl(a.anchor,n),vl(a.head,n)))}return vn(e.cm,r,e.sel.primIndex)}function yl(e,n,r){return e.line==n.line?ke(r.line,e.ch-n.ch+r.ch):ke(r.line+(e.line-n.line),e.ch)}function mc(e,n,r){for(var i=[],a=ke(e.first,0),o=a,l=0;l<n.length;l++){var s=n[l],d=yl(s.from,a,o),h=yl(Rn(s),a,o);if(a=s.to,o=h,r=="around"){var C=e.sel.ranges[l],F=rt(C.head,C.anchor)<0;i[l]=new pt(F?h:d,F?d:h)}else i[l]=new pt(d,d)}return new cn(i,e.sel.primIndex)}function Oa(e){e.doc.mode=pi(e.options,e.doc.modeOption),Zi(e)}function Zi(e){e.doc.iter(function(n){n.stateAfter&&(n.stateAfter=null),n.styles&&(n.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Yi(e,100),e.state.modeGen++,e.curOp&&Kt(e)}function bl(e,n){return n.from.ch==0&&n.to.ch==0&&Oe(n.text)==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ha(e,n,r,i){function a(Ne){return r?r[Ne]:null}function o(Ne,ze,Re){wu(Ne,ze,Re,i),Rt(Ne,"change",Ne,n)}function l(Ne,ze){for(var Re=[],Ye=Ne;Ye<ze;++Ye)Re.push(new fi(h[Ye],a(Ye),i));return Re}var s=n.from,d=n.to,h=n.text,C=$e(e,s.line),F=$e(e,d.line),j=Oe(h),P=a(h.length-1),ce=d.line-s.line;if(n.full)e.insert(0,l(0,h.length)),e.remove(h.length,e.size-h.length);else if(bl(e,n)){var me=l(0,h.length-1);o(F,F.text,P),ce&&e.remove(s.line,ce),me.length&&e.insert(s.line,me)}else if(C==F)if(h.length==1)o(C,C.text.slice(0,s.ch)+j+C.text.slice(d.ch),P);else{var Ae=l(1,h.length-1);Ae.push(new fi(j+C.text.slice(d.ch),P,i)),o(C,C.text.slice(0,s.ch)+h[0],a(0)),e.insert(s.line+1,Ae)}else if(h.length==1)o(C,C.text.slice(0,s.ch)+h[0]+F.text.slice(d.ch),a(0)),e.remove(s.line+1,ce);else{o(C,C.text.slice(0,s.ch)+h[0],a(0)),o(F,j+F.text.slice(d.ch),P);var Be=l(1,h.length-1);ce>1&&e.remove(s.line+1,ce-1),e.insert(s.line+1,Be)}Rt(e,"change",e,n)}function Pn(e,n,r){function i(a,o,l){if(a.linked)for(var s=0;s<a.linked.length;++s){var d=a.linked[s];if(d.doc!=o){var h=l&&d.sharedHist;r&&!h||(n(d.doc,h),i(d.doc,a,h))}}}i(e,null,!0)}function xl(e,n){if(n.cm)throw new Error("This document is already in use.");e.doc=n,n.cm=e,Da(e),Oa(e),Cl(e),e.options.direction=n.direction,e.options.lineWrapping||ha(e),e.options.mode=n.modeOption,Kt(e)}function Cl(e){(e.doc.direction=="rtl"?ne:pe)(e.display.lineDiv,"CodeMirror-rtl")}function gc(e){on(e,function(){Cl(e),Kt(e)})}function Ir(e){this.done=[],this.undone=[],this.undoDepth=e?e.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e?e.maxGeneration:1}function Ra(e,n){var r={from:oa(n.from),to:Rn(n),text:Xn(e,n.from,n.to)};return Dl(e,r,n.from.line,n.to.line+1),Pn(e,function(i){return Dl(i,r,n.from.line,n.to.line+1)},!0),r}function kl(e){for(;e.length;){var n=Oe(e);if(n.ranges)e.pop();else break}}function vc(e,n){if(n)return kl(e.done),Oe(e.done);if(e.done.length&&!Oe(e.done).ranges)return Oe(e.done);if(e.done.length>1&&!e.done[e.done.length-2].ranges)return e.done.pop(),Oe(e.done)}function wl(e,n,r,i){var a=e.history;a.undone.length=0;var o=+new Date,l,s;if((a.lastOp==i||a.lastOrigin==n.origin&&n.origin&&(n.origin.charAt(0)=="+"&&a.lastModTime>o-(e.cm?e.cm.options.historyEventDelay:500)||n.origin.charAt(0)=="*"))&&(l=vc(a,a.lastOp==i)))s=Oe(l.changes),rt(n.from,n.to)==0&&rt(n.from,s.to)==0?s.to=Rn(n):l.changes.push(Ra(e,n));else{var d=Oe(a.done);for((!d||!d.ranges)&&Nr(e.sel,a.done),l={changes:[Ra(e,n)],generation:a.generation},a.done.push(l);a.done.length>a.undoDepth;)a.done.shift(),a.done[0].ranges||a.done.shift()}a.done.push(r),a.generation=++a.maxGeneration,a.lastModTime=a.lastSelTime=o,a.lastOp=a.lastSelOp=i,a.lastOrigin=a.lastSelOrigin=n.origin,s||_e(e,"historyAdded")}function yc(e,n,r,i){var a=n.charAt(0);return a=="*"||a=="+"&&r.ranges.length==i.ranges.length&&r.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function bc(e,n,r,i){var a=e.history,o=i&&i.origin;r==a.lastSelOp||o&&a.lastSelOrigin==o&&(a.lastModTime==a.lastSelTime&&a.lastOrigin==o||yc(e,o,Oe(a.done),n))?a.done[a.done.length-1]=n:Nr(n,a.done),a.lastSelTime=+new Date,a.lastSelOrigin=o,a.lastSelOp=r,i&&i.clearRedo!==!1&&kl(a.undone)}function Nr(e,n){var r=Oe(n);r&&r.ranges&&r.equals(e)||n.push(e)}function Dl(e,n,r,i){var a=n["spans_"+e.id],o=0;e.iter(Math.max(e.first,r),Math.min(e.first+e.size,i),function(l){l.markedSpans&&((a||(a=n["spans_"+e.id]={}))[o]=l.markedSpans),++o})}function xc(e){if(!e)return null;for(var n,r=0;r<e.length;++r)e[r].marker.explicitlyCleared?n||(n=e.slice(0,r)):n&&n.push(e[r]);return n?n.length?n:null:e}function Cc(e,n){var r=n["spans_"+e.id];if(!r)return null;for(var i=[],a=0;a<n.text.length;++a)i.push(xc(r[a]));return i}function Sl(e,n){var r=Cc(e,n),i=ua(e,n);if(!r)return i;if(!i)return r;for(var a=0;a<r.length;++a){var o=r[a],l=i[a];if(o&&l)e:for(var s=0;s<l.length;++s){for(var d=l[s],h=0;h<o.length;++h)if(o[h].marker==d.marker)continue e;o.push(d)}else l&&(r[a]=l)}return r}function ki(e,n,r){for(var i=[],a=0;a<e.length;++a){var o=e[a];if(o.ranges){i.push(r?cn.prototype.deepCopy.call(o):o);continue}var l=o.changes,s=[];i.push({changes:s});for(var d=0;d<l.length;++d){var h=l[d],C=void 0;if(s.push({from:h.from,to:h.to,text:h.text}),n)for(var F in h)(C=F.match(/^spans_(\d+)$/))&&Pe(n,Number(C[1]))>-1&&(Oe(s)[F]=h[F],delete h[F])}}return i}function Pa(e,n,r,i){if(i){var a=e.anchor;if(r){var o=rt(n,a)<0;o!=rt(r,a)<0?(a=n,n=r):o!=rt(n,r)<0&&(n=r)}return new pt(a,n)}else return new pt(r||n,n)}function Or(e,n,r,i,a){a==null&&(a=e.cm&&(e.cm.display.shift||e.extend)),Gt(e,new cn([Pa(e.sel.primary(),n,r,a)],0),i)}function Al(e,n,r){for(var i=[],a=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=Pa(e.sel.ranges[o],n[o],null,a);var l=vn(e.cm,i,e.sel.primIndex);Gt(e,l,r)}function Va(e,n,r,i){var a=e.sel.ranges.slice(0);a[n]=r,Gt(e,vn(e.cm,a,e.sel.primIndex),i)}function Fl(e,n,r,i){Gt(e,Hn(n,r),i)}function kc(e,n,r){var i={ranges:n.ranges,update:function(a){this.ranges=[];for(var o=0;o<a.length;o++)this.ranges[o]=new pt(at(e,a[o].anchor),at(e,a[o].head))},origin:r&&r.origin};return _e(e,"beforeSelectionChange",e,i),e.cm&&_e(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=n.ranges?vn(e.cm,i.ranges,i.ranges.length-1):n}function Ll(e,n,r){var i=e.history.done,a=Oe(i);a&&a.ranges?(i[i.length-1]=n,Hr(e,n,r)):Gt(e,n,r)}function Gt(e,n,r){Hr(e,n,r),bc(e,e.sel,e.cm?e.cm.curOp.id:NaN,r)}function Hr(e,n,r){(it(e,"beforeSelectionChange")||e.cm&&it(e.cm,"beforeSelectionChange"))&&(n=kc(e,n,r));var i=r&&r.bias||(rt(n.primary().head,e.sel.primary().head)<0?-1:1);El(e,Tl(e,n,i,!0)),!(r&&r.scroll===!1)&&e.cm&&e.cm.getOption("readOnly")!="nocursor"&&xi(e.cm)}function El(e,n){n.equals(e.sel)||(e.sel=n,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,ut(e.cm)),Rt(e,"cursorActivity",e))}function Ml(e){El(e,Tl(e,e.sel,null,!1))}function Tl(e,n,r,i){for(var a,o=0;o<n.ranges.length;o++){var l=n.ranges[o],s=n.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],d=Rr(e,l.anchor,s&&s.anchor,r,i),h=l.head==l.anchor?d:Rr(e,l.head,s&&s.head,r,i);(a||d!=l.anchor||h!=l.head)&&(a||(a=n.ranges.slice(0,o)),a[o]=new pt(d,h))}return a?vn(e.cm,a,n.primIndex):n}function wi(e,n,r,i,a){var o=$e(e,n.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var s=o.markedSpans[l],d=s.marker,h="selectLeft"in d?!d.selectLeft:d.inclusiveLeft,C="selectRight"in d?!d.selectRight:d.inclusiveRight;if((s.from==null||(h?s.from<=n.ch:s.from<n.ch))&&(s.to==null||(C?s.to>=n.ch:s.to>n.ch))){if(a&&(_e(d,"beforeCursorEnter"),d.explicitlyCleared))if(o.markedSpans){--l;continue}else break;if(!d.atomic)continue;if(r){var F=d.find(i<0?1:-1),j=void 0;if((i<0?C:h)&&(F=_l(e,F,-i,F&&F.line==n.line?o:null)),F&&F.line==n.line&&(j=rt(F,r))&&(i<0?j<0:j>0))return wi(e,F,n,i,a)}var P=d.find(i<0?-1:1);return(i<0?h:C)&&(P=_l(e,P,i,P.line==n.line?o:null)),P?wi(e,P,n,i,a):null}}return n}function Rr(e,n,r,i,a){var o=i||1,l=wi(e,n,r,o,a)||!a&&wi(e,n,r,o,!0)||wi(e,n,r,-o,a)||!a&&wi(e,n,r,-o,!0);return l||(e.cantEdit=!0,ke(e.first,0))}function _l(e,n,r,i){return r<0&&n.ch==0?n.line>e.first?at(e,ke(n.line-1)):null:r>0&&n.ch==(i||$e(e,n.line)).text.length?n.line<e.first+e.size-1?ke(n.line+1,0):null:new ke(n.line,n.ch+r)}function Bl(e){e.setSelection(ke(e.firstLine(),0),ke(e.lastLine()),Ge)}function zl(e,n,r){var i={canceled:!1,from:n.from,to:n.to,text:n.text,origin:n.origin,cancel:function(){return i.canceled=!0}};return r&&(i.update=function(a,o,l,s){a&&(i.from=at(e,a)),o&&(i.to=at(e,o)),l&&(i.text=l),s!==void 0&&(i.origin=s)}),_e(e,"beforeChange",e,i),e.cm&&_e(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function Di(e,n,r){if(e.cm){if(!e.cm.curOp)return Pt(e.cm,Di)(e,n,r);if(e.cm.state.suppressEdits)return}if(!((it(e,"beforeChange")||e.cm&&it(e.cm,"beforeChange"))&&(n=zl(e,n,!0),!n))){var i=So&&!r&&bu(e,n.from,n.to);if(i)for(var a=i.length-1;a>=0;--a)Il(e,{from:i[a].from,to:i[a].to,text:a?[""]:n.text,origin:n.origin});else Il(e,n)}}function Il(e,n){if(!(n.text.length==1&&n.text[0]==""&&rt(n.from,n.to)==0)){var r=Na(e,n);wl(e,n,r,e.cm?e.cm.curOp.id:NaN),Ki(e,n,r,ua(e,n));var i=[];Pn(e,function(a,o){!o&&Pe(i,a.history)==-1&&(Rl(a.history,n),i.push(a.history)),Ki(a,n,null,ua(a,n))})}}function Pr(e,n,r){var i=e.cm&&e.cm.state.suppressEdits;if(!(i&&!r)){for(var a=e.history,o,l=e.sel,s=n=="undo"?a.done:a.undone,d=n=="undo"?a.undone:a.done,h=0;h<s.length&&(o=s[h],!(r?o.ranges&&!o.equals(e.sel):!o.ranges));h++);if(h!=s.length){for(a.lastOrigin=a.lastSelOrigin=null;;)if(o=s.pop(),o.ranges){if(Nr(o,d),r&&!o.equals(e.sel)){Gt(e,o,{clearRedo:!1});return}l=o}else if(i){s.push(o);return}else break;var C=[];Nr(l,d),d.push({changes:C,generation:a.generation}),a.generation=o.generation||++a.maxGeneration;for(var F=it(e,"beforeChange")||e.cm&&it(e.cm,"beforeChange"),j=function(me){var Ae=o.changes[me];if(Ae.origin=n,F&&!zl(e,Ae,!1))return s.length=0,{};C.push(Ra(e,Ae));var Be=me?Na(e,Ae):Oe(s);Ki(e,Ae,Be,Sl(e,Ae)),!me&&e.cm&&e.cm.scrollIntoView({from:Ae.from,to:Rn(Ae)});var Ne=[];Pn(e,function(ze,Re){!Re&&Pe(Ne,ze.history)==-1&&(Rl(ze.history,Ae),Ne.push(ze.history)),Ki(ze,Ae,null,Sl(ze,Ae))})},P=o.changes.length-1;P>=0;--P){var ce=j(P);if(ce)return ce.v}}}}function Nl(e,n){if(n!=0&&(e.first+=n,e.sel=new cn(Lt(e.sel.ranges,function(a){return new pt(ke(a.anchor.line+n,a.anchor.ch),ke(a.head.line+n,a.head.ch))}),e.sel.primIndex),e.cm)){Kt(e.cm,e.first,e.first-n,n);for(var r=e.cm.display,i=r.viewFrom;i<r.viewTo;i++)Nn(e.cm,i,"gutter")}}function Ki(e,n,r,i){if(e.cm&&!e.cm.curOp)return Pt(e.cm,Ki)(e,n,r,i);if(n.to.line<e.first){Nl(e,n.text.length-1-(n.to.line-n.from.line));return}if(!(n.from.line>e.lastLine())){if(n.from.line<e.first){var a=n.text.length-1-(e.first-n.from.line);Nl(e,a),n={from:ke(e.first,0),to:ke(n.to.line+a,n.to.ch),text:[Oe(n.text)],origin:n.origin}}var o=e.lastLine();n.to.line>o&&(n={from:n.from,to:ke(o,$e(e,o).text.length),text:[n.text[0]],origin:n.origin}),n.removed=Xn(e,n.from,n.to),r||(r=Na(e,n)),e.cm?wc(e.cm,n,i):Ha(e,n,i),Hr(e,r,Ge),e.cantEdit&&Rr(e,ke(e.firstLine(),0))&&(e.cantEdit=!1)}}function wc(e,n,r){var i=e.doc,a=e.display,o=n.from,l=n.to,s=!1,d=o.line;e.options.lineWrapping||(d=mt(mn($e(i,o.line))),i.iter(d,l.line+1,function(P){if(P==a.maxLine)return s=!0,!0})),i.sel.contains(n.from,n.to)>-1&&ut(e),Ha(i,n,r,tl(e)),e.options.lineWrapping||(i.iter(d,o.line+n.text.length,function(P){var ce=wr(P);ce>a.maxLineLength&&(a.maxLine=P,a.maxLineLength=ce,a.maxLineChanged=!0,s=!1)}),s&&(e.curOp.updateMaxLine=!0)),pu(i,o.line),Yi(e,400);var h=n.text.length-(l.line-o.line)-1;n.full?Kt(e):o.line==l.line&&n.text.length==1&&!bl(e.doc,n)?Nn(e,o.line,"text"):Kt(e,o.line,l.line+1,h);var C=it(e,"changes"),F=it(e,"change");if(F||C){var j={from:o,to:l,text:n.text,removed:n.removed,origin:n.origin};F&&Rt(e,"change",e,j),C&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(j)}e.display.selForContextMenu=null}function Si(e,n,r,i,a){var o;i||(i=r),rt(i,r)<0&&(o=[i,r],r=o[0],i=o[1]),typeof n=="string"&&(n=e.splitLines(n)),Di(e,{from:r,to:i,text:n,origin:a})}function Ol(e,n,r,i){r<e.line?e.line+=i:n<e.line&&(e.line=n,e.ch=0)}function Hl(e,n,r,i){for(var a=0;a<e.length;++a){var o=e[a],l=!0;if(o.ranges){o.copied||(o=e[a]=o.deepCopy(),o.copied=!0);for(var s=0;s<o.ranges.length;s++)Ol(o.ranges[s].anchor,n,r,i),Ol(o.ranges[s].head,n,r,i);continue}for(var d=0;d<o.changes.length;++d){var h=o.changes[d];if(r<h.from.line)h.from=ke(h.from.line+i,h.from.ch),h.to=ke(h.to.line+i,h.to.ch);else if(n<=h.to.line){l=!1;break}}l||(e.splice(0,a+1),a=0)}}function Rl(e,n){var r=n.from.line,i=n.to.line,a=n.text.length-(i-r)-1;Hl(e.done,r,i,a),Hl(e.undone,r,i,a)}function Qi(e,n,r,i){var a=n,o=n;return typeof n=="number"?o=$e(e,go(e,n)):a=mt(n),a==null?null:(i(o,a)&&e.cm&&Nn(e.cm,a,r),o)}function Ji(e){this.lines=e,this.parent=null;for(var n=0,r=0;r<e.length;++r)e[r].parent=this,n+=e[r].height;this.height=n}Ji.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,n){for(var r=e,i=e+n;r<i;++r){var a=this.lines[r];this.height-=a.height,Du(a),Rt(a,"delete")}this.lines.splice(e,n)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,n,r){this.height+=r,this.lines=this.lines.slice(0,e).concat(n).concat(this.lines.slice(e));for(var i=0;i<n.length;++i)n[i].parent=this},iterN:function(e,n,r){for(var i=e+n;e<i;++e)if(r(this.lines[e]))return!0}};function er(e){this.children=e;for(var n=0,r=0,i=0;i<e.length;++i){var a=e[i];n+=a.chunkSize(),r+=a.height,a.parent=this}this.size=n,this.height=r,this.parent=null}er.prototype={chunkSize:function(){return this.size},removeInner:function(e,n){this.size-=n;for(var r=0;r<this.children.length;++r){var i=this.children[r],a=i.chunkSize();if(e<a){var o=Math.min(n,a-e),l=i.height;if(i.removeInner(e,o),this.height-=l-i.height,a==o&&(this.children.splice(r--,1),i.parent=null),(n-=o)==0)break;e=0}else e-=a}if(this.size-n<25&&(this.children.length>1||!(this.children[0]instanceof Ji))){var s=[];this.collapse(s),this.children=[new Ji(s)],this.children[0].parent=this}},collapse:function(e){for(var n=0;n<this.children.length;++n)this.children[n].collapse(e)},insertInner:function(e,n,r){this.size+=n.length,this.height+=r;for(var i=0;i<this.children.length;++i){var a=this.children[i],o=a.chunkSize();if(e<=o){if(a.insertInner(e,n,r),a.lines&&a.lines.length>50){for(var l=a.lines.length%25+25,s=l;s<a.lines.length;){var d=new Ji(a.lines.slice(s,s+=25));a.height-=d.height,this.children.splice(++i,0,d),d.parent=this}a.lines=a.lines.slice(0,l),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var n=e.children.splice(e.children.length-5,5),r=new er(n);if(e.parent){e.size-=r.size,e.height-=r.height;var i=Pe(e.parent.children,e);e.parent.children.splice(i+1,0,r)}else{var a=new er(e.children);a.parent=e,e.children=[a,r],e=a}r.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,n,r){for(var i=0;i<this.children.length;++i){var a=this.children[i],o=a.chunkSize();if(e<o){var l=Math.min(n,o-e);if(a.iterN(e,l,r))return!0;if((n-=l)==0)break;e=0}else e-=o}}};var tr=function(e,n,r){if(r)for(var i in r)r.hasOwnProperty(i)&&(this[i]=r[i]);this.doc=e,this.node=n};tr.prototype.clear=function(){var e=this.doc.cm,n=this.line.widgets,r=this.line,i=mt(r);if(!(i==null||!n)){for(var a=0;a<n.length;++a)n[a]==this&&n.splice(a--,1);n.length||(r.widgets=null);var o=Vi(this);Cn(r,Math.max(0,r.height-o)),e&&(on(e,function(){Pl(e,r,-o),Nn(e,i,"widget")}),Rt(e,"lineWidgetCleared",e,this,i))}},tr.prototype.changed=function(){var e=this,n=this.height,r=this.doc.cm,i=this.line;this.height=null;var a=Vi(this)-n;a&&(In(this.doc,i)||Cn(i,i.height+a),r&&on(r,function(){r.curOp.forceUpdate=!0,Pl(r,i,a),Rt(r,"lineWidgetChanged",r,e,mt(i))}))},et(tr);function Pl(e,n,r){En(n)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Ma(e,r)}function Dc(e,n,r,i){var a=new tr(e,r,i),o=e.cm;return o&&a.noHScroll&&(o.display.alignWidgets=!0),Qi(e,n,"widget",function(l){var s=l.widgets||(l.widgets=[]);if(a.insertAt==null?s.push(a):s.splice(Math.min(s.length,Math.max(0,a.insertAt)),0,a),a.line=l,o&&!In(e,l)){var d=En(l)<e.scrollTop;Cn(l,l.height+Vi(a)),d&&Ma(o,a.height),o.curOp.forceUpdate=!0}return!0}),o&&Rt(o,"lineWidgetAdded",o,a,typeof n=="number"?n:mt(n)),a}var Vl=0,Vn=function(e,n){this.lines=[],this.type=n,this.doc=e,this.id=++Vl};Vn.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,n=e&&!e.curOp;if(n&&ii(e),it(this,"clear")){var r=this.find();r&&Rt(this,"clear",r.from,r.to)}for(var i=null,a=null,o=0;o<this.lines.length;++o){var l=this.lines[o],s=Hi(l.markedSpans,this);e&&!this.collapsed?Nn(e,mt(l),"text"):e&&(s.to!=null&&(a=mt(l)),s.from!=null&&(i=mt(l))),l.markedSpans=mu(l.markedSpans,s),s.from==null&&this.collapsed&&!In(this.doc,l)&&e&&Cn(l,vi(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var d=0;d<this.lines.length;++d){var h=mn(this.lines[d]),C=wr(h);C>e.display.maxLineLength&&(e.display.maxLine=h,e.display.maxLineLength=C,e.display.maxLineChanged=!0)}i!=null&&e&&this.collapsed&&Kt(e,i,a+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Ml(e.doc)),e&&Rt(e,"markerCleared",e,this,i,a),n&&ri(e),this.parent&&this.parent.clear()}},Vn.prototype.find=function(e,n){e==null&&this.type=="bookmark"&&(e=1);for(var r,i,a=0;a<this.lines.length;++a){var o=this.lines[a],l=Hi(o.markedSpans,this);if(l.from!=null&&(r=ke(n?o:mt(o),l.from),e==-1))return r;if(l.to!=null&&(i=ke(n?o:mt(o),l.to),e==1))return i}return r&&{from:r,to:i}},Vn.prototype.changed=function(){var e=this,n=this.find(-1,!0),r=this,i=this.doc.cm;!n||!i||on(i,function(){var a=n.line,o=mt(n.line),l=va(i,o);if(l&&(Go(l),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!In(r.doc,a)&&r.height!=null){var s=r.height;r.height=null;var d=Vi(r)-s;d&&Cn(a,a.height+d)}Rt(i,"markerChanged",i,e)})},Vn.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(!n.maybeHiddenMarkers||Pe(n.maybeHiddenMarkers,this)==-1)&&(n.maybeUnhiddenMarkers||(n.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},Vn.prototype.detachLine=function(e){if(this.lines.splice(Pe(this.lines,e),1),!this.lines.length&&this.doc.cm){var n=this.doc.cm.curOp;(n.maybeHiddenMarkers||(n.maybeHiddenMarkers=[])).push(this)}},et(Vn);function Ai(e,n,r,i,a){if(i&&i.shared)return Sc(e,n,r,i,a);if(e.cm&&!e.cm.curOp)return Pt(e.cm,Ai)(e,n,r,i,a);var o=new Vn(e,a),l=rt(n,r);if(i&&Ue(i,o,!1),l>0||l==0&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=W("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(To(e,n.line,n,r,o)||n.line!=r.line&&To(e,r.line,n,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");fu()}o.addToHistory&&wl(e,{from:n,to:r,origin:"markText"},e.sel,NaN);var s=n.line,d=e.cm,h;if(e.iter(s,r.line+1,function(F){d&&o.collapsed&&!d.options.lineWrapping&&mn(F)==d.display.maxLine&&(h=!0),o.collapsed&&s!=n.line&&Cn(F,0),gu(F,new br(o,s==n.line?n.ch:null,s==r.line?r.ch:null),e.cm&&e.cm.curOp),++s}),o.collapsed&&e.iter(n.line,r.line+1,function(F){In(e,F)&&Cn(F,0)}),o.clearOnEnter&&se(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(hu(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++Vl,o.atomic=!0),d){if(h&&(d.curOp.updateMaxLine=!0),o.collapsed)Kt(d,n.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var C=n.line;C<=r.line;C++)Nn(d,C,"text");o.atomic&&Ml(d.doc),Rt(d,"markerAdded",d,o)}return o}var nr=function(e,n){this.markers=e,this.primary=n;for(var r=0;r<e.length;++r)e[r].parent=this};nr.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();Rt(this,"clear")}},nr.prototype.find=function(e,n){return this.primary.find(e,n)},et(nr);function Sc(e,n,r,i,a){i=Ue(i),i.shared=!1;var o=[Ai(e,n,r,i,a)],l=o[0],s=i.widgetNode;return Pn(e,function(d){s&&(i.widgetNode=s.cloneNode(!0)),o.push(Ai(d,at(d,n),at(d,r),i,a));for(var h=0;h<d.linked.length;++h)if(d.linked[h].isParent)return;l=Oe(o)}),new nr(o,l)}function Ul(e){return e.findMarks(ke(e.first,0),e.clipPos(ke(e.lastLine())),function(n){return n.parent})}function Ac(e,n){for(var r=0;r<n.length;r++){var i=n[r],a=i.find(),o=e.clipPos(a.from),l=e.clipPos(a.to);if(rt(o,l)){var s=Ai(e,o,l,i.primary,i.primary.type);i.markers.push(s),s.parent=i}}}function Fc(e){for(var n=function(i){var a=e[i],o=[a.primary.doc];Pn(a.primary.doc,function(d){return o.push(d)});for(var l=0;l<a.markers.length;l++){var s=a.markers[l];Pe(o,s.doc)==-1&&(s.parent=null,a.markers.splice(l--,1))}},r=0;r<e.length;r++)n(r)}var Lc=0,Qt=function(e,n,r,i,a){if(!(this instanceof Qt))return new Qt(e,n,r,i,a);r==null&&(r=0),er.call(this,[new Ji([new fi("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=ke(r,0);this.sel=Hn(o),this.history=new Ir(null),this.id=++Lc,this.modeOption=n,this.lineSep=i,this.direction=a=="rtl"?"rtl":"ltr",this.extend=!1,typeof e=="string"&&(e=this.splitLines(e)),Ha(this,{from:o,to:o,text:e}),Gt(this,Hn(o),Ge)};Qt.prototype=Q(er.prototype,{constructor:Qt,iter:function(e,n,r){r?this.iterN(e-this.first,n-e,r):this.iterN(this.first,this.first+this.size,e)},insert:function(e,n){for(var r=0,i=0;i<n.length;++i)r+=n[i].height;this.insertInner(e-this.first,n,r)},remove:function(e,n){this.removeInner(e-this.first,n)},getValue:function(e){var n=ia(this,this.first,this.first+this.size);return e===!1?n:n.join(e||this.lineSeparator())},setValue:Vt(function(e){var n=ke(this.first,0),r=this.first+this.size-1;Di(this,{from:n,to:ke(r,$e(this,r).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&qi(this.cm,0,0),Gt(this,Hn(n),Ge)}),replaceRange:function(e,n,r,i){n=at(this,n),r=r?at(this,r):n,Si(this,e,n,r,i)},getRange:function(e,n,r){var i=Xn(this,at(this,e),at(this,n));return r===!1?i:r===""?i.join(""):i.join(r||this.lineSeparator())},getLine:function(e){var n=this.getLineHandle(e);return n&&n.text},getLineHandle:function(e){if(Ni(this,e))return $e(this,e)},getLineNumber:function(e){return mt(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=$e(this,e)),mn(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var n=this.sel.primary(),r;return e==null||e=="head"?r=n.head:e=="anchor"?r=n.anchor:e=="end"||e=="to"||e===!1?r=n.to():r=n.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Vt(function(e,n,r){Fl(this,at(this,typeof e=="number"?ke(e,n||0):e),null,r)}),setSelection:Vt(function(e,n,r){Fl(this,at(this,e),at(this,n||e),r)}),extendSelection:Vt(function(e,n,r){Or(this,at(this,e),n&&at(this,n),r)}),extendSelections:Vt(function(e,n){Al(this,vo(this,e),n)}),extendSelectionsBy:Vt(function(e,n){var r=Lt(this.sel.ranges,e);Al(this,vo(this,r),n)}),setSelections:Vt(function(e,n,r){if(e.length){for(var i=[],a=0;a<e.length;a++)i[a]=new pt(at(this,e[a].anchor),at(this,e[a].head||e[a].anchor));n==null&&(n=Math.min(e.length-1,this.sel.primIndex)),Gt(this,vn(this.cm,i,n),r)}}),addSelection:Vt(function(e,n,r){var i=this.sel.ranges.slice(0);i.push(new pt(at(this,e),at(this,n||e))),Gt(this,vn(this.cm,i,i.length-1),r)}),getSelection:function(e){for(var n=this.sel.ranges,r,i=0;i<n.length;i++){var a=Xn(this,n[i].from(),n[i].to());r=r?r.concat(a):a}return e===!1?r:r.join(e||this.lineSeparator())},getSelections:function(e){for(var n=[],r=this.sel.ranges,i=0;i<r.length;i++){var a=Xn(this,r[i].from(),r[i].to());e!==!1&&(a=a.join(e||this.lineSeparator())),n[i]=a}return n},replaceSelection:function(e,n,r){for(var i=[],a=0;a<this.sel.ranges.length;a++)i[a]=e;this.replaceSelections(i,n,r||"+input")},replaceSelections:Vt(function(e,n,r){for(var i=[],a=this.sel,o=0;o<a.ranges.length;o++){var l=a.ranges[o];i[o]={from:l.from(),to:l.to(),text:this.splitLines(e[o]),origin:r}}for(var s=n&&n!="end"&&mc(this,i,n),d=i.length-1;d>=0;d--)Di(this,i[d]);s?Ll(this,s):this.cm&&xi(this.cm)}),undo:Vt(function(){Pr(this,"undo")}),redo:Vt(function(){Pr(this,"redo")}),undoSelection:Vt(function(){Pr(this,"undo",!0)}),redoSelection:Vt(function(){Pr(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,n=0,r=0,i=0;i<e.done.length;i++)e.done[i].ranges||++n;for(var a=0;a<e.undone.length;a++)e.undone[a].ranges||++r;return{undo:n,redo:r}},clearHistory:function(){var e=this;this.history=new Ir(this.history),Pn(this,function(n){return n.history=e.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:ki(this.history.done),undone:ki(this.history.undone)}},setHistory:function(e){var n=this.history=new Ir(this.history);n.done=ki(e.done.slice(0),null,!0),n.undone=ki(e.undone.slice(0),null,!0)},setGutterMarker:Vt(function(e,n,r){return Qi(this,e,"gutter",function(i){var a=i.gutterMarkers||(i.gutterMarkers={});return a[n]=r,!r&&b(a)&&(i.gutterMarkers=null),!0})}),clearGutter:Vt(function(e){var n=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[e]&&Qi(n,r,"gutter",function(){return r.gutterMarkers[e]=null,b(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(e){var n;if(typeof e=="number"){if(!Ni(this,e)||(n=e,e=$e(this,e),!e))return null}else if(n=mt(e),n==null)return null;return{line:n,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Vt(function(e,n,r){return Qi(this,e,n=="gutter"?"gutter":"class",function(i){var a=n=="text"?"textClass":n=="background"?"bgClass":n=="gutter"?"gutterClass":"wrapClass";if(!i[a])i[a]=r;else{if(Se(r).test(i[a]))return!1;i[a]+=" "+r}return!0})}),removeLineClass:Vt(function(e,n,r){return Qi(this,e,n=="gutter"?"gutter":"class",function(i){var a=n=="text"?"textClass":n=="background"?"bgClass":n=="gutter"?"gutterClass":"wrapClass",o=i[a];if(o)if(r==null)i[a]=null;else{var l=o.match(Se(r));if(!l)return!1;var s=l.index+l[0].length;i[a]=o.slice(0,l.index)+(!l.index||s==o.length?"":" ")+o.slice(s)||null}else return!1;return!0})}),addLineWidget:Vt(function(e,n,r){return Dc(this,e,n,r)}),removeLineWidget:function(e){e.clear()},markText:function(e,n,r){return Ai(this,at(this,e),at(this,n),r,r&&r.type||"range")},setBookmark:function(e,n){var r={replacedWith:n&&(n.nodeType==null?n.widget:n),insertLeft:n&&n.insertLeft,clearWhenEmpty:!1,shared:n&&n.shared,handleMouseEvents:n&&n.handleMouseEvents};return e=at(this,e),Ai(this,e,e,r,"bookmark")},findMarksAt:function(e){e=at(this,e);var n=[],r=$e(this,e.line).markedSpans;if(r)for(var i=0;i<r.length;++i){var a=r[i];(a.from==null||a.from<=e.ch)&&(a.to==null||a.to>=e.ch)&&n.push(a.marker.parent||a.marker)}return n},findMarks:function(e,n,r){e=at(this,e),n=at(this,n);var i=[],a=e.line;return this.iter(e.line,n.line+1,function(o){var l=o.markedSpans;if(l)for(var s=0;s<l.length;s++){var d=l[s];!(d.to!=null&&a==e.line&&e.ch>=d.to||d.from==null&&a!=e.line||d.from!=null&&a==n.line&&d.from>=n.ch)&&(!r||r(d.marker))&&i.push(d.marker.parent||d.marker)}++a}),i},getAllMarks:function(){var e=[];return this.iter(function(n){var r=n.markedSpans;if(r)for(var i=0;i<r.length;++i)r[i].from!=null&&e.push(r[i].marker)}),e},posFromIndex:function(e){var n,r=this.first,i=this.lineSeparator().length;return this.iter(function(a){var o=a.text.length+i;if(o>e)return n=e,!0;e-=o,++r}),at(this,ke(r,n))},indexFromPos:function(e){e=at(this,e);var n=e.ch;if(e.line<this.first||e.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,e.line,function(i){n+=i.text.length+r}),n},copy:function(e){var n=new Qt(ia(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return n.scrollTop=this.scrollTop,n.scrollLeft=this.scrollLeft,n.sel=this.sel,n.extend=!1,e&&(n.history.undoDepth=this.history.undoDepth,n.setHistory(this.getHistory())),n},linkedDoc:function(e){e||(e={});var n=this.first,r=this.first+this.size;e.from!=null&&e.from>n&&(n=e.from),e.to!=null&&e.to<r&&(r=e.to);var i=new Qt(ia(this,n,r),e.mode||this.modeOption,n,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Ac(i,Ul(this)),i},unlinkDoc:function(e){if(e instanceof Dt&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=this.linked[n];if(r.doc==e){this.linked.splice(n,1),e.unlinkDoc(this),Fc(Ul(this));break}}if(e.history==this.history){var i=[e.id];Pn(e,function(a){return i.push(a.id)},!0),e.history=new Ir(null),e.history.done=ki(this.history.done,i),e.history.undone=ki(this.history.undone,i)}},iterLinkedDocs:function(e){Pn(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ii(e)},lineSeparator:function(){return this.lineSep||`
`},setDirection:Vt(function(e){e!="rtl"&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(n){return n.order=null}),this.cm&&gc(this.cm))})}),Qt.prototype.eachLine=Qt.prototype.iter;var $l=0;function Ec(e){var n=this;if(ql(n),!(Te(n,e)||Mn(n.display,e))){Qe(e),L&&($l=+new Date);var r=Jn(n,e,!0),i=e.dataTransfer.files;if(!(!r||n.isReadOnly()))if(i&&i.length&&window.FileReader&&window.File)for(var a=i.length,o=Array(a),l=0,s=function(){++l==a&&Pt(n,function(){r=at(n.doc,r);var P={from:r,to:r,text:n.doc.splitLines(o.filter(function(ce){return ce!=null}).join(n.doc.lineSeparator())),origin:"paste"};Di(n.doc,P),Ll(n.doc,Hn(at(n.doc,r),at(n.doc,Rn(P))))})()},d=function(P,ce){if(n.options.allowDropFileTypes&&Pe(n.options.allowDropFileTypes,P.type)==-1){s();return}var me=new FileReader;me.onerror=function(){return s()},me.onload=function(){var Ae=me.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(Ae)){s();return}o[ce]=Ae,s()},me.readAsText(P)},h=0;h<i.length;h++)d(i[h],h);else{if(n.state.draggingText&&n.doc.sel.contains(r)>-1){n.state.draggingText(e),setTimeout(function(){return n.display.input.focus()},20);return}try{var C=e.dataTransfer.getData("Text");if(C){var F;if(n.state.draggingText&&!n.state.draggingText.copy&&(F=n.listSelections()),Hr(n.doc,Hn(r,r)),F)for(var j=0;j<F.length;++j)Si(n.doc,"",F[j].anchor,F[j].head,"drag");n.replaceSelection(C,"around","paste"),n.display.input.focus()}}catch{}}}}function Mc(e,n){if(L&&(!e.state.draggingText||+new Date-$l<100)){Wt(n);return}if(!(Te(e,n)||Mn(e.display,n))&&(n.dataTransfer.setData("Text",e.getSelection()),n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setDragImage&&!Me)){var r=T("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",fe&&(r.width=r.height=1,e.display.wrapper.appendChild(r),r._top=r.offsetTop),n.dataTransfer.setDragImage(r,0,0),fe&&r.parentNode.removeChild(r)}}function Tc(e,n){var r=Jn(e,n);if(r){var i=document.createDocumentFragment();Sa(e,r,i),e.display.dragCursor||(e.display.dragCursor=T("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),ve(e.display.dragCursor,i)}}function ql(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function jl(e){if(document.getElementsByClassName){for(var n=document.getElementsByClassName("CodeMirror"),r=[],i=0;i<n.length;i++){var a=n[i].CodeMirror;a&&r.push(a)}r.length&&r[0].operation(function(){for(var o=0;o<r.length;o++)e(r[o])})}}var Wl=!1;function _c(){Wl||(Bc(),Wl=!0)}function Bc(){var e;se(window,"resize",function(){e==null&&(e=setTimeout(function(){e=null,jl(zc)},100))}),se(window,"blur",function(){return jl(bi)})}function zc(e){var n=e.display;n.cachedCharWidth=n.cachedTextHeight=n.cachedPaddingH=null,n.scrollbarsClipped=!1,e.setSize()}for(var Un={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ir=0;ir<10;ir++)Un[ir+48]=Un[ir+96]=String(ir);for(var Vr=65;Vr<=90;Vr++)Un[Vr]=String.fromCharCode(Vr);for(var rr=1;rr<=12;rr++)Un[rr+111]=Un[rr+63235]="F"+rr;var _n={};_n.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},_n.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},_n.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},_n.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},_n.default=ie?_n.macDefault:_n.pcDefault;function Ic(e){var n=e.split(/-(?!$)/);e=n[n.length-1];for(var r,i,a,o,l=0;l<n.length-1;l++){var s=n[l];if(/^(cmd|meta|m)$/i.test(s))o=!0;else if(/^a(lt)?$/i.test(s))r=!0;else if(/^(c|ctrl|control)$/i.test(s))i=!0;else if(/^s(hift)?$/i.test(s))a=!0;else throw new Error("Unrecognized modifier name: "+s)}return r&&(e="Alt-"+e),i&&(e="Ctrl-"+e),o&&(e="Cmd-"+e),a&&(e="Shift-"+e),e}function Nc(e){var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(i=="..."){delete e[r];continue}for(var a=Lt(r.split(" "),Ic),o=0;o<a.length;o++){var l=void 0,s=void 0;o==a.length-1?(s=a.join(" "),l=i):(s=a.slice(0,o+1).join(" "),l="...");var d=n[s];if(!d)n[s]=l;else if(d!=l)throw new Error("Inconsistent bindings for "+s)}delete e[r]}for(var h in n)e[h]=n[h];return e}function Fi(e,n,r,i){n=Ur(n);var a=n.call?n.call(e,i):n[e];if(a===!1)return"nothing";if(a==="...")return"multi";if(a!=null&&r(a))return"handled";if(n.fallthrough){if(Object.prototype.toString.call(n.fallthrough)!="[object Array]")return Fi(e,n.fallthrough,r,i);for(var o=0;o<n.fallthrough.length;o++){var l=Fi(e,n.fallthrough[o],r,i);if(l)return l}}}function Gl(e){var n=typeof e=="string"?e:Un[e.keyCode];return n=="Ctrl"||n=="Alt"||n=="Shift"||n=="Mod"}function Yl(e,n,r){var i=e;return n.altKey&&i!="Alt"&&(e="Alt-"+e),(be?n.metaKey:n.ctrlKey)&&i!="Ctrl"&&(e="Ctrl-"+e),(be?n.ctrlKey:n.metaKey)&&i!="Mod"&&(e="Cmd-"+e),!r&&n.shiftKey&&i!="Shift"&&(e="Shift-"+e),e}function Xl(e,n){if(fe&&e.keyCode==34&&e.char)return!1;var r=Un[e.keyCode];return r==null||e.altGraphKey?!1:(e.keyCode==3&&e.code&&(r=e.code),Yl(r,e,n))}function Ur(e){return typeof e=="string"?_n[e]:e}function Li(e,n){for(var r=e.doc.sel.ranges,i=[],a=0;a<r.length;a++){for(var o=n(r[a]);i.length&&rt(o.from,Oe(i).to)<=0;){var l=i.pop();if(rt(l.from,o.from)<0){o.from=l.from;break}}i.push(o)}on(e,function(){for(var s=i.length-1;s>=0;s--)Si(e.doc,"",i[s].from,i[s].to,"+delete");xi(e)})}function Ua(e,n,r){var i=v(e.text,n+r,r);return i<0||i>e.text.length?null:i}function $a(e,n,r){var i=Ua(e,n.ch,r);return i==null?null:new ke(n.line,i,r<0?"after":"before")}function qa(e,n,r,i,a){if(e){n.doc.direction=="rtl"&&(a=-a);var o=B(r,n.doc.direction);if(o){var l=a<0?Oe(o):o[0],s=a<0==(l.level==1),d=s?"after":"before",h;if(l.level>0||n.doc.direction=="rtl"){var C=gi(n,r);h=a<0?r.text.length-1:0;var F=Dn(n,C,h).top;h=k(function(j){return Dn(n,C,j).top==F},a<0==(l.level==1)?l.from:l.to-1,h),d=="before"&&(h=Ua(r,h,1))}else h=a<0?l.to:l.from;return new ke(i,h,d)}}return new ke(i,a<0?r.text.length:0,a<0?"before":"after")}function Oc(e,n,r,i){var a=B(n,e.doc.direction);if(!a)return $a(n,r,i);r.ch>=n.text.length?(r.ch=n.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=ee(a,r.ch,r.sticky),l=a[o];if(e.doc.direction=="ltr"&&l.level%2==0&&(i>0?l.to>r.ch:l.from<r.ch))return $a(n,r,i);var s=function(Be,Ne){return Ua(n,Be instanceof ke?Be.ch:Be,Ne)},d,h=function(Be){return e.options.lineWrapping?(d=d||gi(e,n),el(e,n,d,Be)):{begin:0,end:n.text.length}},C=h(r.sticky=="before"?s(r,-1):r.ch);if(e.doc.direction=="rtl"||l.level==1){var F=l.level==1==i<0,j=s(r,F?1:-1);if(j!=null&&(F?j<=l.to&&j<=C.end:j>=l.from&&j>=C.begin)){var P=F?"before":"after";return new ke(r.line,j,P)}}var ce=function(Be,Ne,ze){for(var Re=function(Ct,Ut){return Ut?new ke(r.line,s(Ct,1),"before"):new ke(r.line,Ct,"after")};Be>=0&&Be<a.length;Be+=Ne){var Ye=a[Be],We=Ne>0==(Ye.level!=1),st=We?ze.begin:s(ze.end,-1);if(Ye.from<=st&&st<Ye.to||(st=We?Ye.from:s(Ye.to,-1),ze.begin<=st&&st<ze.end))return Re(st,We)}},me=ce(o+i,i,C);if(me)return me;var Ae=i>0?C.end:s(C.begin,-1);return Ae!=null&&!(i>0&&Ae==n.text.length)&&(me=ce(i>0?0:a.length-1,i,h(Ae)),me)?me:null}var ar={selectAll:Bl,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Ge)},killLine:function(e){return Li(e,function(n){if(n.empty()){var r=$e(e.doc,n.head.line).text.length;return n.head.ch==r&&n.head.line<e.lastLine()?{from:n.head,to:ke(n.head.line+1,0)}:{from:n.head,to:ke(n.head.line,r)}}else return{from:n.from(),to:n.to()}})},deleteLine:function(e){return Li(e,function(n){return{from:ke(n.from().line,0),to:at(e.doc,ke(n.to().line+1,0))}})},delLineLeft:function(e){return Li(e,function(n){return{from:ke(n.from().line,0),to:n.from()}})},delWrappedLineLeft:function(e){return Li(e,function(n){var r=e.charCoords(n.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return{from:i,to:n.from()}})},delWrappedLineRight:function(e){return Li(e,function(n){var r=e.charCoords(n.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div");return{from:n.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(ke(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(ke(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(n){return Zl(e,n.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(n){return Kl(e,n.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(n){return Hc(e,n.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(n){var r=e.cursorCoords(n.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:r},"div")},yt)},goLineLeft:function(e){return e.extendSelectionsBy(function(n){var r=e.cursorCoords(n.head,"div").top+5;return e.coordsChar({left:0,top:r},"div")},yt)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(n){var r=e.cursorCoords(n.head,"div").top+5,i=e.coordsChar({left:0,top:r},"div");return i.ch<e.getLine(i.line).search(/\S/)?Kl(e,n.head):i},yt)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"codepoint")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var n=[],r=e.listSelections(),i=e.options.tabSize,a=0;a<r.length;a++){var o=r[a].from(),l=qe(e.getLine(o.line),o.ch,i);n.push(_t(i-l%i))}e.replaceSelections(n)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return on(e,function(){for(var n=e.listSelections(),r=[],i=0;i<n.length;i++)if(n[i].empty()){var a=n[i].head,o=$e(e.doc,a.line).text;if(o){if(a.ch==o.length&&(a=new ke(a.line,a.ch-1)),a.ch>0)a=new ke(a.line,a.ch+1),e.replaceRange(o.charAt(a.ch-1)+o.charAt(a.ch-2),ke(a.line,a.ch-2),a,"+transpose");else if(a.line>e.doc.first){var l=$e(e.doc,a.line-1).text;l&&(a=new ke(a.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+l.charAt(l.length-1),ke(a.line-1,l.length-1),a,"+transpose"))}}r.push(new pt(a,a))}e.setSelections(r)})},newlineAndIndent:function(e){return on(e,function(){for(var n=e.listSelections(),r=n.length-1;r>=0;r--)e.replaceRange(e.doc.lineSeparator(),n[r].anchor,n[r].head,"+input");n=e.listSelections();for(var i=0;i<n.length;i++)e.indentLine(n[i].from().line,null,!0);xi(e)})},openLine:function(e){return e.replaceSelection(`
`,"start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Zl(e,n){var r=$e(e.doc,n),i=mn(r);return i!=r&&(n=mt(i)),qa(!0,e,i,n,1)}function Hc(e,n){var r=$e(e.doc,n),i=Cu(r);return i!=r&&(n=mt(i)),qa(!0,e,r,n,-1)}function Kl(e,n){var r=Zl(e,n.line),i=$e(e.doc,r.line),a=B(i,e.doc.direction);if(!a||a[0].level==0){var o=Math.max(r.ch,i.text.search(/\S/)),l=n.line==r.line&&n.ch<=o&&n.ch;return ke(r.line,l?0:o,r.sticky)}return r}function $r(e,n,r){if(typeof n=="string"&&(n=ar[n],!n))return!1;e.display.input.ensurePolled();var i=e.display.shift,a=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),r&&(e.display.shift=!1),a=n(e)!=lt}finally{e.display.shift=i,e.state.suppressEdits=!1}return a}function Rc(e,n,r){for(var i=0;i<e.state.keyMaps.length;i++){var a=Fi(n,e.state.keyMaps[i],r,e);if(a)return a}return e.options.extraKeys&&Fi(n,e.options.extraKeys,r,e)||Fi(n,e.options.keyMap,r,e)}var Pc=new nt;function or(e,n,r,i){var a=e.state.keySeq;if(a){if(Gl(n))return"handled";if(/\'$/.test(n)?e.state.keySeq=null:Pc.set(50,function(){e.state.keySeq==a&&(e.state.keySeq=null,e.display.input.reset())}),Ql(e,a+" "+n,r,i))return!0}return Ql(e,n,r,i)}function Ql(e,n,r,i){var a=Rc(e,n,i);return a=="multi"&&(e.state.keySeq=n),a=="handled"&&Rt(e,"keyHandled",e,n,r),(a=="handled"||a=="multi")&&(Qe(r),Aa(e)),!!a}function Jl(e,n){var r=Xl(n,!0);return r?n.shiftKey&&!e.state.keySeq?or(e,"Shift-"+r,n,function(i){return $r(e,i,!0)})||or(e,r,n,function(i){if(typeof i=="string"?/^go[A-Z]/.test(i):i.motion)return $r(e,i)}):or(e,r,n,function(i){return $r(e,i)}):!1}function Vc(e,n,r){return or(e,"'"+r+"'",n,function(i){return $r(e,i,!0)})}var ja=null;function es(e){var n=this;if(!(e.target&&e.target!=n.display.input.getField())&&(n.curOp.focus=Je(z(n)),!Te(n,e))){L&&$<11&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;n.display.shift=r==16||e.shiftKey;var i=Jl(n,e);fe&&(ja=i?r:null,!i&&r==88&&!qt&&(ie?e.metaKey:e.ctrlKey)&&n.replaceSelection("",null,"cut")),x&&!ie&&!i&&r==46&&e.shiftKey&&!e.ctrlKey&&document.execCommand&&document.execCommand("cut"),r==18&&!/\bCodeMirror-crosshair\b/.test(n.display.lineDiv.className)&&Uc(n)}}function Uc(e){var n=e.display.lineDiv;ne(n,"CodeMirror-crosshair");function r(i){(i.keyCode==18||!i.altKey)&&(pe(n,"CodeMirror-crosshair"),Ve(document,"keyup",r),Ve(document,"mouseover",r))}se(document,"keyup",r),se(document,"mouseover",r)}function ts(e){e.keyCode==16&&(this.doc.sel.shift=!1),Te(this,e)}function ns(e){var n=this;if(!(e.target&&e.target!=n.display.input.getField())&&!(Mn(n.display,e)||Te(n,e)||e.ctrlKey&&!e.altKey||ie&&e.metaKey)){var r=e.keyCode,i=e.charCode;if(fe&&r==ja){ja=null,Qe(e);return}if(!(fe&&(!e.which||e.which<10)&&Jl(n,e))){var a=String.fromCharCode(i??r);a!="\b"&&(Vc(n,e,a)||n.display.input.onKeyPress(e))}}}var $c=400,Wa=function(e,n,r){this.time=e,this.pos=n,this.button=r};Wa.prototype.compare=function(e,n,r){return this.time+$c>e&&rt(n,this.pos)==0&&r==this.button};var lr,sr;function qc(e,n){var r=+new Date;return sr&&sr.compare(r,e,n)?(lr=sr=null,"triple"):lr&&lr.compare(r,e,n)?(sr=new Wa(r,e,n),lr=null,"double"):(lr=new Wa(r,e,n),sr=null,"single")}function is(e){var n=this,r=n.display;if(!(Te(n,e)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=e.shiftKey,Mn(r,e)){X||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));return}if(!Ga(n,e)){var i=Jn(n,e),a=hn(e),o=i?qc(i,a):"single";xe(n).focus(),a==1&&n.state.selectingText&&n.state.selectingText(e),!(i&&jc(n,a,i,o,e))&&(a==1?i?Gc(n,i,o,e):Ot(e)==r.scroller&&Qe(e):a==2?(i&&Or(n.doc,i),setTimeout(function(){return r.input.focus()},20)):a==3&&(Xe?n.display.input.onContextMenu(e):Fa(n)))}}}function jc(e,n,r,i,a){var o="Click";return i=="double"?o="Double"+o:i=="triple"&&(o="Triple"+o),o=(n==1?"Left":n==2?"Middle":"Right")+o,or(e,Yl(o,a),a,function(l){if(typeof l=="string"&&(l=ar[l]),!l)return!1;var s=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),s=l(e,r)!=lt}finally{e.state.suppressEdits=!1}return s})}function Wc(e,n,r){var i=e.getOption("configureMouse"),a=i?i(e,n,r):{};if(a.unit==null){var o=ue?r.shiftKey&&r.metaKey:r.altKey;a.unit=o?"rectangle":n=="single"?"char":n=="double"?"word":"line"}return(a.extend==null||e.doc.extend)&&(a.extend=e.doc.extend||r.shiftKey),a.addNew==null&&(a.addNew=ie?r.metaKey:r.ctrlKey),a.moveOnDrag==null&&(a.moveOnDrag=!(ie?r.altKey:r.ctrlKey)),a}function Gc(e,n,r,i){L?setTimeout(Fe(rl,e),0):e.curOp.focus=Je(z(e));var a=Wc(e,r,i),o=e.doc.sel,l;e.options.dragDrop&&ui&&!e.isReadOnly()&&r=="single"&&(l=o.contains(n))>-1&&(rt((l=o.ranges[l]).from(),n)<0||n.xRel>0)&&(rt(l.to(),n)>0||n.xRel<0)?Yc(e,i,n,a):Xc(e,i,n,a)}function Yc(e,n,r,i){var a=e.display,o=!1,l=Pt(e,function(h){X&&(a.scroller.draggable=!1),e.state.draggingText=!1,e.state.delayingBlurEvent&&(e.hasFocus()?e.state.delayingBlurEvent=!1:Fa(e)),Ve(a.wrapper.ownerDocument,"mouseup",l),Ve(a.wrapper.ownerDocument,"mousemove",s),Ve(a.scroller,"dragstart",d),Ve(a.scroller,"drop",l),o||(Qe(h),i.addNew||Or(e.doc,r,null,null,i.extend),X&&!Me||L&&$==9?setTimeout(function(){a.wrapper.ownerDocument.body.focus({preventScroll:!0}),a.input.focus()},20):a.input.focus())}),s=function(h){o=o||Math.abs(n.clientX-h.clientX)+Math.abs(n.clientY-h.clientY)>=10},d=function(){return o=!0};X&&(a.scroller.draggable=!0),e.state.draggingText=l,l.copy=!i.moveOnDrag,se(a.wrapper.ownerDocument,"mouseup",l),se(a.wrapper.ownerDocument,"mousemove",s),se(a.scroller,"dragstart",d),se(a.scroller,"drop",l),e.state.delayingBlurEvent=!0,setTimeout(function(){return a.input.focus()},20),a.scroller.dragDrop&&a.scroller.dragDrop()}function rs(e,n,r){if(r=="char")return new pt(n,n);if(r=="word")return e.findWordAt(n);if(r=="line")return new pt(ke(n.line,0),at(e.doc,ke(n.line+1,0)));var i=r(e,n);return new pt(i.from,i.to)}function Xc(e,n,r,i){L&&Fa(e);var a=e.display,o=e.doc;Qe(n);var l,s,d=o.sel,h=d.ranges;if(i.addNew&&!i.extend?(s=o.sel.contains(r),s>-1?l=h[s]:l=new pt(r,r)):(l=o.sel.primary(),s=o.sel.primIndex),i.unit=="rectangle")i.addNew||(l=new pt(r,r)),r=Jn(e,n,!0,!0),s=-1;else{var C=rs(e,r,i.unit);i.extend?l=Pa(l,C.anchor,C.head,i.extend):l=C}i.addNew?s==-1?(s=h.length,Gt(o,vn(e,h.concat([l]),s),{scroll:!1,origin:"*mouse"})):h.length>1&&h[s].empty()&&i.unit=="char"&&!i.extend?(Gt(o,vn(e,h.slice(0,s).concat(h.slice(s+1)),0),{scroll:!1,origin:"*mouse"}),d=o.sel):Va(o,s,l,He):(s=0,Gt(o,new cn([l],0),He),d=o.sel);var F=r;function j(ze){if(rt(F,ze)!=0)if(F=ze,i.unit=="rectangle"){for(var Re=[],Ye=e.options.tabSize,We=qe($e(o,r.line).text,r.ch,Ye),st=qe($e(o,ze.line).text,ze.ch,Ye),Ct=Math.min(We,st),Ut=Math.max(We,st),Ft=Math.min(r.line,ze.line),ln=Math.min(e.lastLine(),Math.max(r.line,ze.line));Ft<=ln;Ft++){var Jt=$e(o,Ft).text,zt=wt(Jt,Ct,Ye);Ct==Ut?Re.push(new pt(ke(Ft,zt),ke(Ft,zt))):Jt.length>zt&&Re.push(new pt(ke(Ft,zt),ke(Ft,wt(Jt,Ut,Ye))))}Re.length||Re.push(new pt(r,r)),Gt(o,vn(e,d.ranges.slice(0,s).concat(Re),s),{origin:"*mouse",scroll:!1}),e.scrollIntoView(ze)}else{var en=l,jt=rs(e,ze,i.unit),Ht=en.anchor,It;rt(jt.anchor,Ht)>0?(It=jt.head,Ht=vr(en.from(),jt.anchor)):(It=jt.anchor,Ht=gr(en.to(),jt.head));var Et=d.ranges.slice(0);Et[s]=Zc(e,new pt(at(o,Ht),It)),Gt(o,vn(e,Et,s),He)}}var P=a.wrapper.getBoundingClientRect(),ce=0;function me(ze){var Re=++ce,Ye=Jn(e,ze,!0,i.unit=="rectangle");if(Ye)if(rt(Ye,F)!=0){e.curOp.focus=Je(z(e)),j(Ye);var We=Tr(a,o);(Ye.line>=We.to||Ye.line<We.from)&&setTimeout(Pt(e,function(){ce==Re&&me(ze)}),150)}else{var st=ze.clientY<P.top?-20:ze.clientY>P.bottom?20:0;st&&setTimeout(Pt(e,function(){ce==Re&&(a.scroller.scrollTop+=st,me(ze))}),50)}}function Ae(ze){e.state.selectingText=!1,ce=1/0,ze&&(Qe(ze),a.input.focus()),Ve(a.wrapper.ownerDocument,"mousemove",Be),Ve(a.wrapper.ownerDocument,"mouseup",Ne),o.history.lastSelOrigin=null}var Be=Pt(e,function(ze){ze.buttons===0||!hn(ze)?Ae(ze):me(ze)}),Ne=Pt(e,Ae);e.state.selectingText=Ne,se(a.wrapper.ownerDocument,"mousemove",Be),se(a.wrapper.ownerDocument,"mouseup",Ne)}function Zc(e,n){var r=n.anchor,i=n.head,a=$e(e.doc,r.line);if(rt(r,i)==0&&r.sticky==i.sticky)return n;var o=B(a);if(!o)return n;var l=ee(o,r.ch,r.sticky),s=o[l];if(s.from!=r.ch&&s.to!=r.ch)return n;var d=l+(s.from==r.ch==(s.level!=1)?0:1);if(d==0||d==o.length)return n;var h;if(i.line!=r.line)h=(i.line-r.line)*(e.doc.direction=="ltr"?1:-1)>0;else{var C=ee(o,i.ch,i.sticky),F=C-l||(i.ch-r.ch)*(s.level==1?-1:1);C==d-1||C==d?h=F<0:h=F>0}var j=o[d+(h?-1:0)],P=h==(j.level==1),ce=P?j.from:j.to,me=P?"after":"before";return r.ch==ce&&r.sticky==me?n:new pt(new ke(r.line,ce,me),i)}function as(e,n,r,i){var a,o;if(n.touches)a=n.touches[0].clientX,o=n.touches[0].clientY;else try{a=n.clientX,o=n.clientY}catch{return!1}if(a>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&Qe(n);var l=e.display,s=l.lineDiv.getBoundingClientRect();if(o>s.bottom||!it(e,r))return xt(n);o-=s.top-l.viewOffset;for(var d=0;d<e.display.gutterSpecs.length;++d){var h=l.gutters.childNodes[d];if(h&&h.getBoundingClientRect().right>=a){var C=Zn(e.doc,o),F=e.display.gutterSpecs[d];return _e(e,r,e,C,F.className,n),xt(n)}}}function Ga(e,n){return as(e,n,"gutterClick",!0)}function os(e,n){Mn(e.display,n)||Kc(e,n)||Te(e,n,"contextmenu")||Xe||e.display.input.onContextMenu(n)}function Kc(e,n){return it(e,"gutterContextMenu")?as(e,n,"gutterContextMenu",!1):!1}function ls(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Ui(e)}var Ei={toString:function(){return"CodeMirror.Init"}},ss={},qr={};function Qc(e){var n=e.optionHandlers;function r(i,a,o,l){e.defaults[i]=a,o&&(n[i]=l?function(s,d,h){h!=Ei&&o(s,d,h)}:o)}e.defineOption=r,e.Init=Ei,r("value","",function(i,a){return i.setValue(a)},!0),r("mode",null,function(i,a){i.doc.modeOption=a,Oa(i)},!0),r("indentUnit",2,Oa,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(i){Zi(i),Ui(i),Kt(i)},!0),r("lineSeparator",null,function(i,a){if(i.doc.lineSep=a,!!a){var o=[],l=i.doc.first;i.doc.iter(function(d){for(var h=0;;){var C=d.text.indexOf(a,h);if(C==-1)break;h=C+a.length,o.push(ke(l,C))}l++});for(var s=o.length-1;s>=0;s--)Si(i.doc,a,o[s],ke(o[s].line,o[s].ch+a.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\u202d\u202e\u2066\u2067\u2069\ufeff\ufff9-\ufffc]/g,function(i,a,o){i.state.specialChars=new RegExp(a.source+(a.test("	")?"":"|	"),"g"),o!=Ei&&i.refresh()}),r("specialCharPlaceholder",Fu,function(i){return i.refresh()},!0),r("electricChars",!0),r("inputStyle",G?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(i,a){return i.getInputField().spellcheck=a},!0),r("autocorrect",!1,function(i,a){return i.getInputField().autocorrect=a},!0),r("autocapitalize",!1,function(i,a){return i.getInputField().autocapitalize=a},!0),r("rtlMoveVisually",!oe),r("wholeLineUpdateBefore",!0),r("theme","default",function(i){ls(i),Xi(i)},!0),r("keyMap","default",function(i,a,o){var l=Ur(a),s=o!=Ei&&Ur(o);s&&s.detach&&s.detach(i,l),l.attach&&l.attach(i,s||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,ed,!0),r("gutters",[],function(i,a){i.display.gutterSpecs=Ia(a,i.options.lineNumbers),Xi(i)},!0),r("fixedGutter",!0,function(i,a){i.display.gutters.style.left=a?wa(i.display)+"px":"0",i.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(i){return Ci(i)},!0),r("scrollbarStyle","native",function(i){cl(i),Ci(i),i.display.scrollbars.setScrollTop(i.doc.scrollTop),i.display.scrollbars.setScrollLeft(i.doc.scrollLeft)},!0),r("lineNumbers",!1,function(i,a){i.display.gutterSpecs=Ia(i.options.gutters,a),Xi(i)},!0),r("firstLineNumber",1,Xi,!0),r("lineNumberFormatter",function(i){return i},Xi,!0),r("showCursorWhenSelecting",!1,$i,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(i,a){a=="nocursor"&&(bi(i),i.display.input.blur()),i.display.input.readOnlyChanged(a)}),r("screenReaderLabel",null,function(i,a){a=a===""?null:a,i.display.input.screenReaderLabelChanged(a)}),r("disableInput",!1,function(i,a){a||i.display.input.reset()},!0),r("dragDrop",!0,Jc),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,$i,!0),r("singleCursorHeightPerLine",!0,$i,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Zi,!0),r("addModeClass",!1,Zi,!0),r("pollInterval",100),r("undoDepth",200,function(i,a){return i.doc.history.undoDepth=a}),r("historyEventDelay",1250),r("viewportMargin",10,function(i){return i.refresh()},!0),r("maxHighlightLength",1e4,Zi,!0),r("moveInputWithCursor",!0,function(i,a){a||i.display.input.resetPosition()}),r("tabindex",null,function(i,a){return i.display.input.getField().tabIndex=a||""}),r("autofocus",null),r("direction","ltr",function(i,a){return i.doc.setDirection(a)},!0),r("phrases",null)}function Jc(e,n,r){var i=r&&r!=Ei;if(!n!=!i){var a=e.display.dragFunctions,o=n?se:Ve;o(e.display.scroller,"dragstart",a.start),o(e.display.scroller,"dragenter",a.enter),o(e.display.scroller,"dragover",a.over),o(e.display.scroller,"dragleave",a.leave),o(e.display.scroller,"drop",a.drop)}}function ed(e){e.options.lineWrapping?(ne(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(pe(e.display.wrapper,"CodeMirror-wrap"),ha(e)),Da(e),Kt(e),Ui(e),setTimeout(function(){return Ci(e)},100)}function Dt(e,n){var r=this;if(!(this instanceof Dt))return new Dt(e,n);this.options=n=n?Ue(n):{},Ue(ss,n,!1);var i=n.value;typeof i=="string"?i=new Qt(i,n.mode,null,n.lineSeparator,n.direction):n.mode&&(i.modeOption=n.mode),this.doc=i;var a=new Dt.inputStyles[n.inputStyle](this),o=this.display=new hc(e,i,a,n);o.wrapper.CodeMirror=this,ls(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),cl(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new nt,keySeq:null,specialChars:null},n.autofocus&&!G&&o.input.focus(),L&&$<11&&setTimeout(function(){return r.display.input.reset(!0)},20),td(this),_c(),ii(this),this.curOp.forceUpdate=!0,xl(this,i),n.autofocus&&!G||this.hasFocus()?setTimeout(function(){r.hasFocus()&&!r.state.focused&&La(r)},20):bi(this);for(var l in qr)qr.hasOwnProperty(l)&&qr[l](this,n[l],Ei);hl(this),n.finishInit&&n.finishInit(this);for(var s=0;s<Ya.length;++s)Ya[s](this);ri(this),X&&n.lineWrapping&&getComputedStyle(o.lineDiv).textRendering=="optimizelegibility"&&(o.lineDiv.style.textRendering="auto")}Dt.defaults=ss,Dt.optionHandlers=qr;function td(e){var n=e.display;se(n.scroller,"mousedown",Pt(e,is)),L&&$<11?se(n.scroller,"dblclick",Pt(e,function(d){if(!Te(e,d)){var h=Jn(e,d);if(!(!h||Ga(e,d)||Mn(e.display,d))){Qe(d);var C=e.findWordAt(h);Or(e.doc,C.anchor,C.head)}}})):se(n.scroller,"dblclick",function(d){return Te(e,d)||Qe(d)}),se(n.scroller,"contextmenu",function(d){return os(e,d)}),se(n.input.getField(),"contextmenu",function(d){n.scroller.contains(d.target)||os(e,d)});var r,i={end:0};function a(){n.activeTouch&&(r=setTimeout(function(){return n.activeTouch=null},1e3),i=n.activeTouch,i.end=+new Date)}function o(d){if(d.touches.length!=1)return!1;var h=d.touches[0];return h.radiusX<=1&&h.radiusY<=1}function l(d,h){if(h.left==null)return!0;var C=h.left-d.left,F=h.top-d.top;return C*C+F*F>400}se(n.scroller,"touchstart",function(d){if(!Te(e,d)&&!o(d)&&!Ga(e,d)){n.input.ensurePolled(),clearTimeout(r);var h=+new Date;n.activeTouch={start:h,moved:!1,prev:h-i.end<=300?i:null},d.touches.length==1&&(n.activeTouch.left=d.touches[0].pageX,n.activeTouch.top=d.touches[0].pageY)}}),se(n.scroller,"touchmove",function(){n.activeTouch&&(n.activeTouch.moved=!0)}),se(n.scroller,"touchend",function(d){var h=n.activeTouch;if(h&&!Mn(n,d)&&h.left!=null&&!h.moved&&new Date-h.start<300){var C=e.coordsChar(n.activeTouch,"page"),F;!h.prev||l(h,h.prev)?F=new pt(C,C):!h.prev.prev||l(h,h.prev.prev)?F=e.findWordAt(C):F=new pt(ke(C.line,0),at(e.doc,ke(C.line+1,0))),e.setSelection(F.anchor,F.head),e.focus(),Qe(d)}a()}),se(n.scroller,"touchcancel",a),se(n.scroller,"scroll",function(){n.scroller.clientHeight&&(ji(e,n.scroller.scrollTop),ti(e,n.scroller.scrollLeft,!0),_e(e,"scroll",e))}),se(n.scroller,"mousewheel",function(d){return gl(e,d)}),se(n.scroller,"DOMMouseScroll",function(d){return gl(e,d)}),se(n.wrapper,"scroll",function(){return n.wrapper.scrollTop=n.wrapper.scrollLeft=0}),n.dragFunctions={enter:function(d){Te(e,d)||Wt(d)},over:function(d){Te(e,d)||(Tc(e,d),Wt(d))},start:function(d){return Mc(e,d)},drop:Pt(e,Ec),leave:function(d){Te(e,d)||ql(e)}};var s=n.input.getField();se(s,"keyup",function(d){return ts.call(e,d)}),se(s,"keydown",Pt(e,es)),se(s,"keypress",Pt(e,ns)),se(s,"focus",function(d){return La(e,d)}),se(s,"blur",function(d){return bi(e,d)})}var Ya=[];Dt.defineInitHook=function(e){return Ya.push(e)};function ur(e,n,r,i){var a=e.doc,o;r==null&&(r="add"),r=="smart"&&(a.mode.indent?o=Oi(e,n).state:r="prev");var l=e.options.tabSize,s=$e(a,n),d=qe(s.text,null,l);s.stateAfter&&(s.stateAfter=null);var h=s.text.match(/^\s*/)[0],C;if(!i&&!/\S/.test(s.text))C=0,r="not";else if(r=="smart"&&(C=a.mode.indent(o,s.text.slice(h.length),s.text),C==lt||C>150)){if(!i)return;r="prev"}r=="prev"?n>a.first?C=qe($e(a,n-1).text,null,l):C=0:r=="add"?C=d+e.options.indentUnit:r=="subtract"?C=d-e.options.indentUnit:typeof r=="number"&&(C=d+r),C=Math.max(0,C);var F="",j=0;if(e.options.indentWithTabs)for(var P=Math.floor(C/l);P;--P)j+=l,F+="	";if(j<C&&(F+=_t(C-j)),F!=h)return Si(a,F,ke(n,0),ke(n,h.length),"+input"),s.stateAfter=null,!0;for(var ce=0;ce<a.sel.ranges.length;ce++){var me=a.sel.ranges[ce];if(me.head.line==n&&me.head.ch<h.length){var Ae=ke(n,h.length);Va(a,ce,new pt(Ae,Ae));break}}}var yn=null;function jr(e){yn=e}function Xa(e,n,r,i,a){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var l=+new Date-200,s=a=="paste"||e.state.pasteIncoming>l,d=Ii(n),h=null;if(s&&i.ranges.length>1)if(yn&&yn.text.join(`
`)==n){if(i.ranges.length%yn.text.length==0){h=[];for(var C=0;C<yn.text.length;C++)h.push(o.splitLines(yn.text[C]))}}else d.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(h=Lt(d,function(Be){return[Be]}));for(var F=e.curOp.updateInput,j=i.ranges.length-1;j>=0;j--){var P=i.ranges[j],ce=P.from(),me=P.to();P.empty()&&(r&&r>0?ce=ke(ce.line,ce.ch-r):e.state.overwrite&&!s?me=ke(me.line,Math.min($e(o,me.line).text.length,me.ch+Oe(d).length)):s&&yn&&yn.lineWise&&yn.text.join(`
`)==d.join(`
`)&&(ce=me=ke(ce.line,0)));var Ae={from:ce,to:me,text:h?h[j%h.length]:d,origin:a||(s?"paste":e.state.cutIncoming>l?"cut":"+input")};Di(e.doc,Ae),Rt(e,"inputRead",e,Ae)}n&&!s&&cs(e,n),xi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=F),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function us(e,n){var r=e.clipboardData&&e.clipboardData.getData("Text");if(r)return e.preventDefault(),!n.isReadOnly()&&!n.options.disableInput&&n.hasFocus()&&on(n,function(){return Xa(n,r,0,null,"paste")}),!0}function cs(e,n){if(!(!e.options.electricChars||!e.options.smartIndent))for(var r=e.doc.sel,i=r.ranges.length-1;i>=0;i--){var a=r.ranges[i];if(!(a.head.ch>100||i&&r.ranges[i-1].head.line==a.head.line)){var o=e.getModeAt(a.head),l=!1;if(o.electricChars){for(var s=0;s<o.electricChars.length;s++)if(n.indexOf(o.electricChars.charAt(s))>-1){l=ur(e,a.head.line,"smart");break}}else o.electricInput&&o.electricInput.test($e(e.doc,a.head.line).text.slice(0,a.head.ch))&&(l=ur(e,a.head.line,"smart"));l&&Rt(e,"electricInput",e,a.head.line)}}}function ds(e){for(var n=[],r=[],i=0;i<e.doc.sel.ranges.length;i++){var a=e.doc.sel.ranges[i].head.line,o={anchor:ke(a,0),head:ke(a+1,0)};r.push(o),n.push(e.getRange(o.anchor,o.head))}return{text:n,ranges:r}}function Za(e,n,r,i){e.setAttribute("autocorrect",r?"on":"off"),e.setAttribute("autocapitalize",i?"on":"off"),e.setAttribute("spellcheck",!!n)}function ps(){var e=T("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),n=T("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return X?e.style.width="1000px":e.setAttribute("wrap","off"),Z&&(e.style.border="1px solid black"),n}function nd(e){var n=e.optionHandlers,r=e.helpers={};e.prototype={constructor:e,focus:function(){xe(this).focus(),this.display.input.focus()},setOption:function(i,a){var o=this.options,l=o[i];o[i]==a&&i!="mode"||(o[i]=a,n.hasOwnProperty(i)&&Pt(this,n[i])(this,a,l),_e(this,"optionChange",this,i))},getOption:function(i){return this.options[i]},getDoc:function(){return this.doc},addKeyMap:function(i,a){this.state.keyMaps[a?"push":"unshift"](Ur(i))},removeKeyMap:function(i){for(var a=this.state.keyMaps,o=0;o<a.length;++o)if(a[o]==i||a[o].name==i)return a.splice(o,1),!0},addOverlay:Xt(function(i,a){var o=i.token?i:e.getMode(this.options,i);if(o.startState)throw new Error("Overlays may not be stateful.");rn(this.state.overlays,{mode:o,modeSpec:i,opaque:a&&a.opaque,priority:a&&a.priority||0},function(l){return l.priority}),this.state.modeGen++,Kt(this)}),removeOverlay:Xt(function(i){for(var a=this.state.overlays,o=0;o<a.length;++o){var l=a[o].modeSpec;if(l==i||typeof i=="string"&&l.name==i){a.splice(o,1),this.state.modeGen++,Kt(this);return}}}),indentLine:Xt(function(i,a,o){typeof a!="string"&&typeof a!="number"&&(a==null?a=this.options.smartIndent?"smart":"prev":a=a?"add":"subtract"),Ni(this.doc,i)&&ur(this,i,a,o)}),indentSelection:Xt(function(i){for(var a=this.doc.sel.ranges,o=-1,l=0;l<a.length;l++){var s=a[l];if(s.empty())s.head.line>o&&(ur(this,s.head.line,i,!0),o=s.head.line,l==this.doc.sel.primIndex&&xi(this));else{var d=s.from(),h=s.to(),C=Math.max(o,d.line);o=Math.min(this.lastLine(),h.line-(h.ch?0:1))+1;for(var F=C;F<o;++F)ur(this,F,i);var j=this.doc.sel.ranges;d.ch==0&&a.length==j.length&&j[l].from().ch>0&&Va(this.doc,l,new pt(d,j[l].to()),Ge)}}}),getTokenAt:function(i,a){return ko(this,i,a)},getLineTokens:function(i,a){return ko(this,ke(i),a,!0)},getTokenTypeAt:function(i){i=at(this.doc,i);var a=bo(this,$e(this.doc,i.line)),o=0,l=(a.length-1)/2,s=i.ch,d;if(s==0)d=a[2];else for(;;){var h=o+l>>1;if((h?a[h*2-1]:0)>=s)l=h;else if(a[h*2+1]<s)o=h+1;else{d=a[h*2+2];break}}var C=d?d.indexOf("overlay "):-1;return C<0?d:C==0?null:d.slice(0,C-1)},getModeAt:function(i){var a=this.doc.mode;return a.innerMode?e.innerMode(a,this.getTokenAt(i).state).mode:a},getHelper:function(i,a){return this.getHelpers(i,a)[0]},getHelpers:function(i,a){var o=[];if(!r.hasOwnProperty(a))return o;var l=r[a],s=this.getModeAt(i);if(typeof s[a]=="string")l[s[a]]&&o.push(l[s[a]]);else if(s[a])for(var d=0;d<s[a].length;d++){var h=l[s[a][d]];h&&o.push(h)}else s.helperType&&l[s.helperType]?o.push(l[s.helperType]):l[s.name]&&o.push(l[s.name]);for(var C=0;C<l._global.length;C++){var F=l._global[C];F.pred(s,this)&&Pe(o,F.val)==-1&&o.push(F.val)}return o},getStateAfter:function(i,a){var o=this.doc;return i=go(o,i??o.first+o.size-1),Oi(this,i+1,a).state},cursorCoords:function(i,a){var o,l=this.doc.sel.primary();return i==null?o=l.head:typeof i=="object"?o=at(this.doc,i):o=i?l.from():l.to(),gn(this,o,a||"page")},charCoords:function(i,a){return Fr(this,at(this.doc,i),a||"page")},coordsChar:function(i,a){return i=Ko(this,i,a||"page"),xa(this,i.left,i.top)},lineAtHeight:function(i,a){return i=Ko(this,{top:i,left:0},a||"page").top,Zn(this.doc,i+this.display.viewOffset)},heightAtLine:function(i,a,o){var l=!1,s;if(typeof i=="number"){var d=this.doc.first+this.doc.size-1;i<this.doc.first?i=this.doc.first:i>d&&(i=d,l=!0),s=$e(this.doc,i)}else s=i;return Ar(this,s,{top:0,left:0},a||"page",o||l).top+(l?this.doc.height-En(s):0)},defaultTextHeight:function(){return vi(this.display)},defaultCharWidth:function(){return yi(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(i,a,o,l,s){var d=this.display;i=gn(this,at(this.doc,i));var h=i.bottom,C=i.left;if(a.style.position="absolute",a.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(a),d.sizer.appendChild(a),l=="over")h=i.top;else if(l=="above"||l=="near"){var F=Math.max(d.wrapper.clientHeight,this.doc.height),j=Math.max(d.sizer.clientWidth,d.lineSpace.clientWidth);(l=="above"||i.bottom+a.offsetHeight>F)&&i.top>a.offsetHeight?h=i.top-a.offsetHeight:i.bottom+a.offsetHeight<=F&&(h=i.bottom),C+a.offsetWidth>j&&(C=j-a.offsetWidth)}a.style.top=h+"px",a.style.left=a.style.right="",s=="right"?(C=d.sizer.clientWidth-a.offsetWidth,a.style.right="0px"):(s=="left"?C=0:s=="middle"&&(C=(d.sizer.clientWidth-a.offsetWidth)/2),a.style.left=C+"px"),o&&Ju(this,{left:C,top:h,right:C+a.offsetWidth,bottom:h+a.offsetHeight})},triggerOnKeyDown:Xt(es),triggerOnKeyPress:Xt(ns),triggerOnKeyUp:ts,triggerOnMouseDown:Xt(is),execCommand:function(i){if(ar.hasOwnProperty(i))return ar[i].call(null,this)},triggerElectric:Xt(function(i){cs(this,i)}),findPosH:function(i,a,o,l){var s=1;a<0&&(s=-1,a=-a);for(var d=at(this.doc,i),h=0;h<a&&(d=Ka(this.doc,d,s,o,l),!d.hitSide);++h);return d},moveH:Xt(function(i,a){var o=this;this.extendSelectionsBy(function(l){return o.display.shift||o.doc.extend||l.empty()?Ka(o.doc,l.head,i,a,o.options.rtlMoveVisually):i<0?l.from():l.to()},yt)}),deleteH:Xt(function(i,a){var o=this.doc.sel,l=this.doc;o.somethingSelected()?l.replaceSelection("",null,"+delete"):Li(this,function(s){var d=Ka(l,s.head,i,a,!1);return i<0?{from:d,to:s.head}:{from:s.head,to:d}})}),findPosV:function(i,a,o,l){var s=1,d=l;a<0&&(s=-1,a=-a);for(var h=at(this.doc,i),C=0;C<a;++C){var F=gn(this,h,"div");if(d==null?d=F.left:F.left=d,h=hs(this,F,s,o),h.hitSide)break}return h},moveV:Xt(function(i,a){var o=this,l=this.doc,s=[],d=!this.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(C){if(d)return i<0?C.from():C.to();var F=gn(o,C.head,"div");C.goalColumn!=null&&(F.left=C.goalColumn),s.push(F.left);var j=hs(o,F,i,a);return a=="page"&&C==l.sel.primary()&&Ma(o,Fr(o,j,"div").top-F.top),j},yt),s.length)for(var h=0;h<l.sel.ranges.length;h++)l.sel.ranges[h].goalColumn=s[h]}),findWordAt:function(i){var a=this.doc,o=$e(a,i.line).text,l=i.ch,s=i.ch;if(o){var d=this.getHelper(i,"wordChars");(i.sticky=="before"||s==o.length)&&l?--l:++s;for(var h=o.charAt(l),C=g(h,d)?function(F){return g(F,d)}:/\s/.test(h)?function(F){return/\s/.test(F)}:function(F){return!/\s/.test(F)&&!g(F)};l>0&&C(o.charAt(l-1));)--l;for(;s<o.length&&C(o.charAt(s));)++s}return new pt(ke(i.line,l),ke(i.line,s))},toggleOverwrite:function(i){i!=null&&i==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ne(this.display.cursorDiv,"CodeMirror-overwrite"):pe(this.display.cursorDiv,"CodeMirror-overwrite"),_e(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Je(z(this))},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:Xt(function(i,a){qi(this,i,a)}),getScrollInfo:function(){var i=this.display.scroller;return{left:i.scrollLeft,top:i.scrollTop,height:i.scrollHeight-wn(this)-this.display.barHeight,width:i.scrollWidth-wn(this)-this.display.barWidth,clientHeight:ga(this),clientWidth:Kn(this)}},scrollIntoView:Xt(function(i,a){i==null?(i={from:this.doc.sel.primary().head,to:null},a==null&&(a=this.options.cursorScrollMargin)):typeof i=="number"?i={from:ke(i,0),to:null}:i.from==null&&(i={from:i,to:null}),i.to||(i.to=i.from),i.margin=a||0,i.from.line!=null?ec(this,i):ol(this,i.from,i.to,i.margin)}),setSize:Xt(function(i,a){var o=this,l=function(d){return typeof d=="number"||/^\d+$/.test(String(d))?d+"px":d};i!=null&&(this.display.wrapper.style.width=l(i)),a!=null&&(this.display.wrapper.style.height=l(a)),this.options.lineWrapping&&Yo(this);var s=this.display.viewFrom;this.doc.iter(s,this.display.viewTo,function(d){if(d.widgets){for(var h=0;h<d.widgets.length;h++)if(d.widgets[h].noHScroll){Nn(o,s,"widget");break}}++s}),this.curOp.forceUpdate=!0,_e(this,"refresh",this)}),operation:function(i){return on(this,i)},startOperation:function(){return ii(this)},endOperation:function(){return ri(this)},refresh:Xt(function(){var i=this.display.cachedTextHeight;Kt(this),this.curOp.forceUpdate=!0,Ui(this),qi(this,this.doc.scrollLeft,this.doc.scrollTop),Ba(this.display),(i==null||Math.abs(i-vi(this.display))>.5||this.options.lineWrapping)&&Da(this),_e(this,"refresh",this)}),swapDoc:Xt(function(i){var a=this.doc;return a.cm=null,this.state.selectingText&&this.state.selectingText(),xl(this,i),Ui(this),this.display.input.reset(),qi(this,i.scrollLeft,i.scrollTop),this.curOp.forceScroll=!0,Rt(this,"swapDoc",this,a),a}),phrase:function(i){var a=this.options.phrases;return a&&Object.prototype.hasOwnProperty.call(a,i)?a[i]:i},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},et(e),e.registerHelper=function(i,a,o){r.hasOwnProperty(i)||(r[i]=e[i]={_global:[]}),r[i][a]=o},e.registerGlobalHelper=function(i,a,o,l){e.registerHelper(i,a,l),r[i]._global.push({pred:o,val:l})}}function Ka(e,n,r,i,a){var o=n,l=r,s=$e(e,n.line),d=a&&e.direction=="rtl"?-r:r;function h(){var Ne=n.line+d;return Ne<e.first||Ne>=e.first+e.size?!1:(n=new ke(Ne,n.ch,n.sticky),s=$e(e,Ne))}function C(Ne){var ze;if(i=="codepoint"){var Re=s.text.charCodeAt(n.ch+(r>0?0:-1));if(isNaN(Re))ze=null;else{var Ye=r>0?Re>=55296&&Re<56320:Re>=56320&&Re<57343;ze=new ke(n.line,Math.max(0,Math.min(s.text.length,n.ch+r*(Ye?2:1))),-r)}}else a?ze=Oc(e.cm,s,n,r):ze=$a(s,n,r);if(ze==null)if(!Ne&&h())n=qa(a,e.cm,s,n.line,d);else return!1;else n=ze;return!0}if(i=="char"||i=="codepoint")C();else if(i=="column")C(!0);else if(i=="word"||i=="group")for(var F=null,j=i=="group",P=e.cm&&e.cm.getHelper(n,"wordChars"),ce=!0;!(r<0&&!C(!ce));ce=!1){var me=s.text.charAt(n.ch)||`
`,Ae=g(me,P)?"w":j&&me==`
`?"n":!j||/\s/.test(me)?null:"p";if(j&&!ce&&!Ae&&(Ae="s"),F&&F!=Ae){r<0&&(r=1,C(),n.sticky="after");break}if(Ae&&(F=Ae),r>0&&!C(!ce))break}var Be=Rr(e,n,o,l,!0);return aa(o,Be)&&(Be.hitSide=!0),Be}function hs(e,n,r,i){var a=e.doc,o=n.left,l;if(i=="page"){var s=Math.min(e.display.wrapper.clientHeight,xe(e).innerHeight||a(e).documentElement.clientHeight),d=Math.max(s-.5*vi(e.display),3);l=(r>0?n.bottom:n.top)+r*d}else i=="line"&&(l=r>0?n.bottom+3:n.top-3);for(var h;h=xa(e,o,l),!!h.outside;){if(r<0?l<=0:l>=a.height){h.hitSide=!0;break}l+=r*5}return h}var gt=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new nt,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};gt.prototype.init=function(e){var n=this,r=this,i=r.cm,a=r.div=e.lineDiv;a.contentEditable=!0,Za(a,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize);function o(s){for(var d=s.target;d;d=d.parentNode){if(d==a)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(d.className))break}return!1}se(a,"paste",function(s){!o(s)||Te(i,s)||us(s,i)||$<=11&&setTimeout(Pt(i,function(){return n.updateFromDOM()}),20)}),se(a,"compositionstart",function(s){n.composing={data:s.data,done:!1}}),se(a,"compositionupdate",function(s){n.composing||(n.composing={data:s.data,done:!1})}),se(a,"compositionend",function(s){n.composing&&(s.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),se(a,"touchstart",function(){return r.forceCompositionEnd()}),se(a,"input",function(){n.composing||n.readFromDOMSoon()});function l(s){if(!(!o(s)||Te(i,s))){if(i.somethingSelected())jr({lineWise:!1,text:i.getSelections()}),s.type=="cut"&&i.replaceSelection("",null,"cut");else if(i.options.lineWiseCopyCut){var d=ds(i);jr({lineWise:!0,text:d.text}),s.type=="cut"&&i.operation(function(){i.setSelections(d.ranges,0,Ge),i.replaceSelection("",null,"cut")})}else return;if(s.clipboardData){s.clipboardData.clearData();var h=yn.text.join(`
`);if(s.clipboardData.setData("Text",h),s.clipboardData.getData("Text")==h){s.preventDefault();return}}var C=ps(),F=C.firstChild;Za(F),i.display.lineSpace.insertBefore(C,i.display.lineSpace.firstChild),F.value=yn.text.join(`
`);var j=Je(Ce(a));f(F),setTimeout(function(){i.display.lineSpace.removeChild(C),j.focus(),j==a&&r.showPrimarySelection()},50)}}se(a,"copy",l),se(a,"cut",l)},gt.prototype.screenReaderLabelChanged=function(e){e?this.div.setAttribute("aria-label",e):this.div.removeAttribute("aria-label")},gt.prototype.prepareSelection=function(){var e=il(this.cm,!1);return e.focus=Je(Ce(this.div))==this.div,e},gt.prototype.showSelection=function(e,n){!e||!this.cm.display.view.length||((e.focus||n)&&this.showPrimarySelection(),this.showMultipleSelections(e))},gt.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},gt.prototype.showPrimarySelection=function(){var e=this.getSelection(),n=this.cm,r=n.doc.sel.primary(),i=r.from(),a=r.to();if(n.display.viewTo==n.display.viewFrom||i.line>=n.display.viewTo||a.line<n.display.viewFrom){e.removeAllRanges();return}var o=Wr(n,e.anchorNode,e.anchorOffset),l=Wr(n,e.focusNode,e.focusOffset);if(!(o&&!o.bad&&l&&!l.bad&&rt(vr(o,l),i)==0&&rt(gr(o,l),a)==0)){var s=n.display.view,d=i.line>=n.display.viewFrom&&fs(n,i)||{node:s[0].measure.map[2],offset:0},h=a.line<n.display.viewTo&&fs(n,a);if(!h){var C=s[s.length-1].measure,F=C.maps?C.maps[C.maps.length-1]:C.map;h={node:F[F.length-1],offset:F[F.length-2]-F[F.length-3]}}if(!d||!h){e.removeAllRanges();return}var j=e.rangeCount&&e.getRangeAt(0),P;try{P=re(d.node,d.offset,h.offset,h.node)}catch{}P&&(!x&&n.state.focused?(e.collapse(d.node,d.offset),P.collapsed||(e.removeAllRanges(),e.addRange(P))):(e.removeAllRanges(),e.addRange(P)),j&&e.anchorNode==null?e.addRange(j):x&&this.startGracePeriod()),this.rememberSelection()}},gt.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},gt.prototype.showMultipleSelections=function(e){ve(this.cm.display.cursorDiv,e.cursors),ve(this.cm.display.selectionDiv,e.selection)},gt.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},gt.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var n=e.getRangeAt(0).commonAncestorContainer;return we(this.div,n)},gt.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Je(Ce(this.div))!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},gt.prototype.blur=function(){this.div.blur()},gt.prototype.getField=function(){return this.div},gt.prototype.supportsTouch=function(){return!0},gt.prototype.receivedFocus=function(){var e=this,n=this;this.selectionInEditor()?setTimeout(function(){return e.pollSelection()},20):on(this.cm,function(){return n.cm.curOp.selectionChanged=!0});function r(){n.cm.state.focused&&(n.pollSelection(),n.polling.set(n.cm.options.pollInterval,r))}this.polling.set(this.cm.options.pollInterval,r)},gt.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},gt.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var e=this.getSelection(),n=this.cm;if(K&&R&&this.cm.display.gutterSpecs.length&&id(e.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var r=Wr(n,e.anchorNode,e.anchorOffset),i=Wr(n,e.focusNode,e.focusOffset);r&&i&&on(n,function(){Gt(n.doc,Hn(r,i),Ge),(r.bad||i.bad)&&(n.curOp.selectionChanged=!0)})}}},gt.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,n=e.display,r=e.doc.sel.primary(),i=r.from(),a=r.to();if(i.ch==0&&i.line>e.firstLine()&&(i=ke(i.line-1,$e(e.doc,i.line-1).length)),a.ch==$e(e.doc,a.line).text.length&&a.line<e.lastLine()&&(a=ke(a.line+1,0)),i.line<n.viewFrom||a.line>n.viewTo-1)return!1;var o,l,s;i.line==n.viewFrom||(o=ei(e,i.line))==0?(l=mt(n.view[0].line),s=n.view[0].node):(l=mt(n.view[o].line),s=n.view[o-1].node.nextSibling);var d=ei(e,a.line),h,C;if(d==n.view.length-1?(h=n.viewTo-1,C=n.lineDiv.lastChild):(h=mt(n.view[d+1].line)-1,C=n.view[d+1].node.previousSibling),!s)return!1;for(var F=e.doc.splitLines(rd(e,s,C,l,h)),j=Xn(e.doc,ke(l,0),ke(h,$e(e.doc,h).text.length));F.length>1&&j.length>1;)if(Oe(F)==Oe(j))F.pop(),j.pop(),h--;else if(F[0]==j[0])F.shift(),j.shift(),l++;else break;for(var P=0,ce=0,me=F[0],Ae=j[0],Be=Math.min(me.length,Ae.length);P<Be&&me.charCodeAt(P)==Ae.charCodeAt(P);)++P;for(var Ne=Oe(F),ze=Oe(j),Re=Math.min(Ne.length-(F.length==1?P:0),ze.length-(j.length==1?P:0));ce<Re&&Ne.charCodeAt(Ne.length-ce-1)==ze.charCodeAt(ze.length-ce-1);)++ce;if(F.length==1&&j.length==1&&l==i.line)for(;P&&P>i.ch&&Ne.charCodeAt(Ne.length-ce-1)==ze.charCodeAt(ze.length-ce-1);)P--,ce++;F[F.length-1]=Ne.slice(0,Ne.length-ce).replace(/^\u200b+/,""),F[0]=F[0].slice(P).replace(/\u200b+$/,"");var Ye=ke(l,P),We=ke(h,j.length?Oe(j).length-ce:0);if(F.length>1||F[0]||rt(Ye,We))return Si(e.doc,F,Ye,We,"+input"),!0},gt.prototype.ensurePolled=function(){this.forceCompositionEnd()},gt.prototype.reset=function(){this.forceCompositionEnd()},gt.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},gt.prototype.readFromDOMSoon=function(){var e=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing)if(e.composing.done)e.composing=null;else return;e.updateFromDOM()},80))},gt.prototype.updateFromDOM=function(){var e=this;(this.cm.isReadOnly()||!this.pollContent())&&on(this.cm,function(){return Kt(e.cm)})},gt.prototype.setUneditable=function(e){e.contentEditable="false"},gt.prototype.onKeyPress=function(e){e.charCode==0||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Pt(this.cm,Xa)(this.cm,String.fromCharCode(e.charCode==null?e.keyCode:e.charCode),0))},gt.prototype.readOnlyChanged=function(e){this.div.contentEditable=String(e!="nocursor")},gt.prototype.onContextMenu=function(){},gt.prototype.resetPosition=function(){},gt.prototype.needsContentAttribute=!0;function fs(e,n){var r=va(e,n.line);if(!r||r.hidden)return null;var i=$e(e.doc,n.line),a=$o(r,i,n.line),o=B(i,e.doc.direction),l="left";if(o){var s=ee(o,n.ch);l=s%2?"right":"left"}var d=Wo(a.map,n.ch,l);return d.offset=d.collapse=="right"?d.end:d.start,d}function id(e){for(var n=e;n;n=n.parentNode)if(/CodeMirror-gutter-wrapper/.test(n.className))return!0;return!1}function Mi(e,n){return n&&(e.bad=!0),e}function rd(e,n,r,i,a){var o="",l=!1,s=e.doc.lineSeparator(),d=!1;function h(P){return function(ce){return ce.id==P}}function C(){l&&(o+=s,d&&(o+=s),l=d=!1)}function F(P){P&&(C(),o+=P)}function j(P){if(P.nodeType==1){var ce=P.getAttribute("cm-text");if(ce){F(ce);return}var me=P.getAttribute("cm-marker"),Ae;if(me){var Be=e.findMarks(ke(i,0),ke(a+1,0),h(+me));Be.length&&(Ae=Be[0].find(0))&&F(Xn(e.doc,Ae.from,Ae.to).join(s));return}if(P.getAttribute("contenteditable")=="false")return;var Ne=/^(pre|div|p|li|table|br)$/i.test(P.nodeName);if(!/^br$/i.test(P.nodeName)&&P.textContent.length==0)return;Ne&&C();for(var ze=0;ze<P.childNodes.length;ze++)j(P.childNodes[ze]);/^(pre|p)$/i.test(P.nodeName)&&(d=!0),Ne&&(l=!0)}else P.nodeType==3&&F(P.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;j(n),n!=r;)n=n.nextSibling,d=!1;return o}function Wr(e,n,r){var i;if(n==e.display.lineDiv){if(i=e.display.lineDiv.childNodes[r],!i)return Mi(e.clipPos(ke(e.display.viewTo-1)),!0);n=null,r=0}else for(i=n;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var a=0;a<e.display.view.length;a++){var o=e.display.view[a];if(o.node==i)return ad(o,n,r)}}function ad(e,n,r){var i=e.text.firstChild,a=!1;if(!n||!we(i,n))return Mi(ke(mt(e.line),0),!0);if(n==i&&(a=!0,n=i.childNodes[r],r=0,!n)){var o=e.rest?Oe(e.rest):e.line;return Mi(ke(mt(o),o.text.length),a)}var l=n.nodeType==3?n:null,s=n;for(!l&&n.childNodes.length==1&&n.firstChild.nodeType==3&&(l=n.firstChild,r&&(r=l.nodeValue.length));s.parentNode!=i;)s=s.parentNode;var d=e.measure,h=d.maps;function C(Ae,Be,Ne){for(var ze=-1;ze<(h?h.length:0);ze++)for(var Re=ze<0?d.map:h[ze],Ye=0;Ye<Re.length;Ye+=3){var We=Re[Ye+2];if(We==Ae||We==Be){var st=mt(ze<0?e.line:e.rest[ze]),Ct=Re[Ye]+Ne;return(Ne<0||We!=Ae)&&(Ct=Re[Ye+(Ne?1:0)]),ke(st,Ct)}}}var F=C(l,s,r);if(F)return Mi(F,a);for(var j=s.nextSibling,P=l?l.nodeValue.length-r:0;j;j=j.nextSibling){if(F=C(j,j.firstChild,0),F)return Mi(ke(F.line,F.ch-P),a);P+=j.textContent.length}for(var ce=s.previousSibling,me=r;ce;ce=ce.previousSibling){if(F=C(ce,ce.firstChild,-1),F)return Mi(ke(F.line,F.ch+me),a);me+=ce.textContent.length}}var Tt=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new nt,this.hasSelection=!1,this.composing=null,this.resetting=!1};Tt.prototype.init=function(e){var n=this,r=this,i=this.cm;this.createField(e);var a=this.textarea;e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),Z&&(a.style.width="0px"),se(a,"input",function(){L&&$>=9&&n.hasSelection&&(n.hasSelection=null),r.poll()}),se(a,"paste",function(l){Te(i,l)||us(l,i)||(i.state.pasteIncoming=+new Date,r.fastPoll())});function o(l){if(!Te(i,l)){if(i.somethingSelected())jr({lineWise:!1,text:i.getSelections()});else if(i.options.lineWiseCopyCut){var s=ds(i);jr({lineWise:!0,text:s.text}),l.type=="cut"?i.setSelections(s.ranges,null,Ge):(r.prevInput="",a.value=s.text.join(`
`),f(a))}else return;l.type=="cut"&&(i.state.cutIncoming=+new Date)}}se(a,"cut",o),se(a,"copy",o),se(e.scroller,"paste",function(l){if(!(Mn(e,l)||Te(i,l))){if(!a.dispatchEvent){i.state.pasteIncoming=+new Date,r.focus();return}var s=new Event("paste");s.clipboardData=l.clipboardData,a.dispatchEvent(s)}}),se(e.lineSpace,"selectstart",function(l){Mn(e,l)||Qe(l)}),se(a,"compositionstart",function(){var l=i.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:l,range:i.markText(l,i.getCursor("to"),{className:"CodeMirror-composing"})}}),se(a,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Tt.prototype.createField=function(e){this.wrapper=ps(),this.textarea=this.wrapper.firstChild;var n=this.cm.options;Za(this.textarea,n.spellcheck,n.autocorrect,n.autocapitalize)},Tt.prototype.screenReaderLabelChanged=function(e){e?this.textarea.setAttribute("aria-label",e):this.textarea.removeAttribute("aria-label")},Tt.prototype.prepareSelection=function(){var e=this.cm,n=e.display,r=e.doc,i=il(e);if(e.options.moveInputWithCursor){var a=gn(e,r.sel.primary().head,"div"),o=n.wrapper.getBoundingClientRect(),l=n.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(n.wrapper.clientHeight-10,a.top+l.top-o.top)),i.teLeft=Math.max(0,Math.min(n.wrapper.clientWidth-10,a.left+l.left-o.left))}return i},Tt.prototype.showSelection=function(e){var n=this.cm,r=n.display;ve(r.cursorDiv,e.cursors),ve(r.selectionDiv,e.selection),e.teTop!=null&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},Tt.prototype.reset=function(e){if(!(this.contextMenuPending||this.composing&&e)){var n=this.cm;if(this.resetting=!0,n.somethingSelected()){this.prevInput="";var r=n.getSelection();this.textarea.value=r,n.state.focused&&f(this.textarea),L&&$>=9&&(this.hasSelection=r)}else e||(this.prevInput=this.textarea.value="",L&&$>=9&&(this.hasSelection=null));this.resetting=!1}},Tt.prototype.getField=function(){return this.textarea},Tt.prototype.supportsTouch=function(){return!1},Tt.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!G||Je(Ce(this.textarea))!=this.textarea))try{this.textarea.focus()}catch{}},Tt.prototype.blur=function(){this.textarea.blur()},Tt.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Tt.prototype.receivedFocus=function(){this.slowPoll()},Tt.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},Tt.prototype.fastPoll=function(){var e=!1,n=this;n.pollingFast=!0;function r(){var i=n.poll();!i&&!e?(e=!0,n.polling.set(60,r)):(n.pollingFast=!1,n.slowPoll())}n.polling.set(20,r)},Tt.prototype.poll=function(){var e=this,n=this.cm,r=this.textarea,i=this.prevInput;if(this.contextMenuPending||this.resetting||!n.state.focused||ta(r)&&!i&&!this.composing||n.isReadOnly()||n.options.disableInput||n.state.keySeq)return!1;var a=r.value;if(a==i&&!n.somethingSelected())return!1;if(L&&$>=9&&this.hasSelection===a||ie&&/[\uf700-\uf7ff]/.test(a))return n.display.input.reset(),!1;if(n.doc.sel==n.display.selForContextMenu){var o=a.charCodeAt(0);if(o==8203&&!i&&(i="â€‹"),o==8666)return this.reset(),this.cm.execCommand("undo")}for(var l=0,s=Math.min(i.length,a.length);l<s&&i.charCodeAt(l)==a.charCodeAt(l);)++l;return on(n,function(){Xa(n,a.slice(l),i.length-l,null,e.composing?"*compose":null),a.length>1e3||a.indexOf(`
`)>-1?r.value=e.prevInput="":e.prevInput=a,e.composing&&(e.composing.range.clear(),e.composing.range=n.markText(e.composing.start,n.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Tt.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Tt.prototype.onKeyPress=function(){L&&$>=9&&(this.hasSelection=null),this.fastPoll()},Tt.prototype.onContextMenu=function(e){var n=this,r=n.cm,i=r.display,a=n.textarea;n.contextMenuPending&&n.contextMenuPending();var o=Jn(r,e),l=i.scroller.scrollTop;if(!o||fe)return;var s=r.options.resetSelectionOnContextMenu;s&&r.doc.sel.contains(o)==-1&&Pt(r,Gt)(r.doc,Hn(o),Ge);var d=a.style.cssText,h=n.wrapper.style.cssText,C=n.wrapper.offsetParent.getBoundingClientRect();n.wrapper.style.cssText="position: static",a.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(e.clientY-C.top-5)+"px; left: "+(e.clientX-C.left-5)+`px;
      z-index: 1000; background: `+(L?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var F;X&&(F=a.ownerDocument.defaultView.scrollY),i.input.focus(),X&&a.ownerDocument.defaultView.scrollTo(null,F),i.input.reset(),r.somethingSelected()||(a.value=n.prevInput=" "),n.contextMenuPending=P,i.selForContextMenu=r.doc.sel,clearTimeout(i.detectingSelectAll);function j(){if(a.selectionStart!=null){var me=r.somethingSelected(),Ae="â€‹"+(me?a.value:"");a.value="â‡š",a.value=Ae,n.prevInput=me?"":"â€‹",a.selectionStart=1,a.selectionEnd=Ae.length,i.selForContextMenu=r.doc.sel}}function P(){if(n.contextMenuPending==P&&(n.contextMenuPending=!1,n.wrapper.style.cssText=h,a.style.cssText=d,L&&$<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=l),a.selectionStart!=null)){(!L||L&&$<9)&&j();var me=0,Ae=function(){i.selForContextMenu==r.doc.sel&&a.selectionStart==0&&a.selectionEnd>0&&n.prevInput=="â€‹"?Pt(r,Bl)(r):me++<10?i.detectingSelectAll=setTimeout(Ae,500):(i.selForContextMenu=null,i.input.reset())};i.detectingSelectAll=setTimeout(Ae,200)}}if(L&&$>=9&&j(),Xe){Wt(e);var ce=function(){Ve(window,"mouseup",ce),setTimeout(P,20)};se(window,"mouseup",ce)}else setTimeout(P,50)},Tt.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled=e=="nocursor",this.textarea.readOnly=!!e},Tt.prototype.setUneditable=function(){},Tt.prototype.needsContentAttribute=!1;function od(e,n){if(n=n?Ue(n):{},n.value=e.value,!n.tabindex&&e.tabIndex&&(n.tabindex=e.tabIndex),!n.placeholder&&e.placeholder&&(n.placeholder=e.placeholder),n.autofocus==null){var r=Je(Ce(e));n.autofocus=r==e||e.getAttribute("autofocus")!=null&&r==document.body}function i(){e.value=s.getValue()}var a;if(e.form&&(se(e.form,"submit",i),!n.leaveSubmitMethodAlone)){var o=e.form;a=o.submit;try{var l=o.submit=function(){i(),o.submit=a,o.submit(),o.submit=l}}catch{}}n.finishInit=function(d){d.save=i,d.getTextArea=function(){return e},d.toTextArea=function(){d.toTextArea=isNaN,i(),e.parentNode.removeChild(d.getWrapperElement()),e.style.display="",e.form&&(Ve(e.form,"submit",i),!n.leaveSubmitMethodAlone&&typeof e.form.submit=="function"&&(e.form.submit=a))}},e.style.display="none";var s=Dt(function(d){return e.parentNode.insertBefore(d,e.nextSibling)},n);return s}function ld(e){e.off=Ve,e.on=se,e.wheelEventPixels=fc,e.Doc=Qt,e.splitLines=Ii,e.countColumn=qe,e.findColumn=wt,e.isWordChar=m,e.Pass=lt,e.signal=_e,e.Line=fi,e.changeEnd=Rn,e.scrollbarModel=ul,e.Pos=ke,e.cmpPos=rt,e.modes=un,e.mimeModes=an,e.resolveMode=di,e.getMode=pi,e.modeExtensions=hi,e.extendMode=uu,e.copyState=Yn,e.startState=mo,e.innerMode=na,e.commands=ar,e.keyMap=_n,e.keyName=Xl,e.isModifierKey=Gl,e.lookupKey=Fi,e.normalizeKeyMap=Nc,e.StringStream=Bt,e.SharedTextMarker=nr,e.TextMarker=Vn,e.LineWidget=tr,e.e_preventDefault=Qe,e.e_stopPropagation=bt,e.e_stop=Wt,e.addClass=ne,e.contains=we,e.rmClass=pe,e.keyNames=Un}Qc(Dt),nd(Dt);var sd="iter insert remove copy getEditor constructor".split(" ");for(var Gr in Qt.prototype)Qt.prototype.hasOwnProperty(Gr)&&Pe(sd,Gr)<0&&(Dt.prototype[Gr]=(function(e){return function(){return e.apply(this.doc,arguments)}})(Qt.prototype[Gr]));return et(Qt),Dt.inputStyles={textarea:Tt,contenteditable:gt},Dt.defineMode=function(e){!Dt.defaults.mode&&e!="null"&&(Dt.defaults.mode=e),Gn.apply(this,arguments)},Dt.defineMIME=mr,Dt.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Dt.defineMIME("text/plain","null"),Dt.defineExtension=function(e,n){Dt.prototype[e]=n},Dt.defineDocExtension=function(e,n){Qt.prototype[e]=n},Dt.fromTextArea=od,ld(Dt),Dt.version="5.65.20",Dt}))})(lo)),lo.exports}var og={exports:{}},ks;function lg(){return ks||(ks=1,(function(D,S){(function(c){c(dn())})(function(c){var A=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,x=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,w=/[*+-]\s/;c.commands.newlineAndIndentContinueMarkdownList=function(I){if(I.getOption("disableInput"))return c.Pass;for(var L=I.listSelections(),$=[],X=0;X<L.length;X++){var V=L[X].head,R=I.getStateAfter(V.line),he=c.innerMode(I.getMode(),R);if(he.mode.name!=="markdown"&&he.mode.helperType!=="markdown"){I.execCommand("newlineAndIndent");return}else R=he.state;var fe=R.list!==!1,Me=R.quote!==0,ge=I.getLine(V.line),ye=A.exec(ge),Z=/^\s*$/.test(ge.slice(0,V.ch));if(!L[X].empty()||!fe&&!Me||!ye||Z){I.execCommand("newlineAndIndent");return}if(x.test(ge)){var K=Me&&/>\s*$/.test(ge),G=!/>\s*$/.test(ge);(K||G)&&I.replaceRange("",{line:V.line,ch:0},{line:V.line,ch:V.ch+1}),$[X]=`
`}else{var ie=ye[1],ue=ye[5],oe=!(w.test(ye[2])||ye[2].indexOf(">")>=0),le=oe?parseInt(ye[3],10)+1+ye[4]:ye[2].replace("x"," ");$[X]=`
`+ie+le+ue,oe&&y(I,V)}}I.replaceSelections($)};function y(I,L){var $=L.line,X=0,V=0,R=A.exec(I.getLine($)),he=R[1];do{X+=1;var fe=$+X,Me=I.getLine(fe),ge=A.exec(Me);if(ge){var ye=ge[1],Z=parseInt(R[3],10)+X-V,K=parseInt(ge[3],10),G=K;if(he===ye&&!isNaN(K))Z===K&&(G=K+1),Z>K&&(G=Z+1),I.replaceRange(Me.replace(A,ye+G+ge[4]+ge[5]),{line:fe,ch:0},{line:fe,ch:Me.length});else{if(he.length>ye.length||he.length<ye.length&&X===1)return;V+=1}}}while(ge)}})})()),og.exports}var ws={},Ds;function sg(){if(Ds)return ws;Ds=1;var D=dn();return D.commands.tabAndIndentMarkdownList=function(S){var c=S.listSelections(),A=c[0].head,x=S.getStateAfter(A.line),w=x.list!==!1;if(w){S.execCommand("indentMore");return}if(S.options.indentWithTabs)S.execCommand("insertTab");else{var y=Array(S.options.tabSize+1).join(" ");S.replaceSelection(y)}},D.commands.shiftTabAndUnindentMarkdownList=function(S){var c=S.listSelections(),A=c[0].head,x=S.getStateAfter(A.line),w=x.list!==!1;if(w){S.execCommand("indentLess");return}if(S.options.indentWithTabs)S.execCommand("insertTab");else{var y=Array(S.options.tabSize+1).join(" ");S.replaceSelection(y)}},ws}var ug={exports:{}},Ss;function cg(){return Ss||(Ss=1,(function(D,S){(function(c){c(dn())})(function(c){c.defineOption("fullScreen",!1,function(w,y,I){I==c.Init&&(I=!1),!I!=!y&&(y?A(w):x(w))});function A(w){var y=w.getWrapperElement();w.state.fullScreenRestore={scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,width:y.style.width,height:y.style.height},y.style.width="",y.style.height="auto",y.className+=" CodeMirror-fullscreen",document.documentElement.style.overflow="hidden",w.refresh()}function x(w){var y=w.getWrapperElement();y.className=y.className.replace(/\s*CodeMirror-fullscreen\b/,""),document.documentElement.style.overflow="";var I=w.state.fullScreenRestore;y.style.width=I.width,y.style.height=I.height,window.scrollTo(I.scrollLeft,I.scrollTop),w.refresh()}})})()),ug.exports}var dg={exports:{}},pg={exports:{}},As;function iu(){return As||(As=1,(function(D,S){(function(c){c(dn())})(function(c){var A={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},x={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,allowMissingTagName:!1,caseFold:!1};c.defineMode("xml",function(w,y){var I=w.indentUnit,L={},$=y.htmlMode?A:x;for(var X in $)L[X]=$[X];for(var X in y)L[X]=y[X];var V,R;function he(T,W){function re(ne){return W.tokenize=ne,ne(T,W)}var we=T.next();if(we=="<")return T.eat("!")?T.eat("[")?T.match("CDATA[")?re(ge("atom","]]>")):null:T.match("--")?re(ge("comment","-->")):T.match("DOCTYPE",!0,!0)?(T.eatWhile(/[\w\._\-]/),re(ye(1))):null:T.eat("?")?(T.eatWhile(/[\w\._\-]/),W.tokenize=ge("meta","?>"),"meta"):(V=T.eat("/")?"closeTag":"openTag",W.tokenize=fe,"tag bracket");if(we=="&"){var Je;return T.eat("#")?T.eat("x")?Je=T.eatWhile(/[a-fA-F\d]/)&&T.eat(";"):Je=T.eatWhile(/[\d]/)&&T.eat(";"):Je=T.eatWhile(/[\w\.\-:]/)&&T.eat(";"),Je?"atom":"error"}else return T.eatWhile(/[^&<]/),null}he.isInText=!0;function fe(T,W){var re=T.next();if(re==">"||re=="/"&&T.eat(">"))return W.tokenize=he,V=re==">"?"endTag":"selfcloseTag","tag bracket";if(re=="=")return V="equals",null;if(re=="<"){W.tokenize=he,W.state=ue,W.tagName=W.tagStart=null;var we=W.tokenize(T,W);return we?we+" tag error":"tag error"}else return/[\'\"]/.test(re)?(W.tokenize=Me(re),W.stringStartCol=T.column(),W.tokenize(T,W)):(T.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function Me(T){var W=function(re,we){for(;!re.eol();)if(re.next()==T){we.tokenize=fe;break}return"string"};return W.isInAttribute=!0,W}function ge(T,W){return function(re,we){for(;!re.eol();){if(re.match(W)){we.tokenize=he;break}re.next()}return T}}function ye(T){return function(W,re){for(var we;(we=W.next())!=null;){if(we=="<")return re.tokenize=ye(T+1),re.tokenize(W,re);if(we==">")if(T==1){re.tokenize=he;break}else return re.tokenize=ye(T-1),re.tokenize(W,re)}return"meta"}}function Z(T){return T&&T.toLowerCase()}function K(T,W,re){this.prev=T.context,this.tagName=W||"",this.indent=T.indented,this.startOfLine=re,(L.doNotIndent.hasOwnProperty(W)||T.context&&T.context.noIndent)&&(this.noIndent=!0)}function G(T){T.context&&(T.context=T.context.prev)}function ie(T,W){for(var re;;){if(!T.context||(re=T.context.tagName,!L.contextGrabbers.hasOwnProperty(Z(re))||!L.contextGrabbers[Z(re)].hasOwnProperty(Z(W))))return;G(T)}}function ue(T,W,re){return T=="openTag"?(re.tagStart=W.column(),oe):T=="closeTag"?le:ue}function oe(T,W,re){return T=="word"?(re.tagName=W.current(),R="tag",Se):L.allowMissingTagName&&T=="endTag"?(R="tag bracket",Se(T,W,re)):(R="error",oe)}function le(T,W,re){if(T=="word"){var we=W.current();return re.context&&re.context.tagName!=we&&L.implicitlyClosed.hasOwnProperty(Z(re.context.tagName))&&G(re),re.context&&re.context.tagName==we||L.matchClosing===!1?(R="tag",be):(R="tag error",Xe)}else return L.allowMissingTagName&&T=="endTag"?(R="tag bracket",be(T,W,re)):(R="error",Xe)}function be(T,W,re){return T!="endTag"?(R="error",be):(G(re),ue)}function Xe(T,W,re){return R="error",be(T,W,re)}function Se(T,W,re){if(T=="word")return R="attribute",pe;if(T=="endTag"||T=="selfcloseTag"){var we=re.tagName,Je=re.tagStart;return re.tagName=re.tagStart=null,T=="selfcloseTag"||L.autoSelfClosers.hasOwnProperty(Z(we))?ie(re,we):(ie(re,we),re.context=new K(re,we,Je==re.indented)),ue}return R="error",Se}function pe(T,W,re){return T=="equals"?De:(L.allowMissing||(R="error"),Se(T,W,re))}function De(T,W,re){return T=="string"?ve:T=="word"&&L.allowUnquoted?(R="string",Se):(R="error",Se(T,W,re))}function ve(T,W,re){return T=="string"?ve:Se(T,W,re)}return{startState:function(T){var W={tokenize:he,state:ue,indented:T||0,tagName:null,tagStart:null,context:null};return T!=null&&(W.baseIndent=T),W},token:function(T,W){if(!W.tagName&&T.sol()&&(W.indented=T.indentation()),T.eatSpace())return null;V=null;var re=W.tokenize(T,W);return(re||V)&&re!="comment"&&(R=null,W.state=W.state(V||re,T,W),R&&(re=R=="error"?re+" error":R)),re},indent:function(T,W,re){var we=T.context;if(T.tokenize.isInAttribute)return T.tagStart==T.indented?T.stringStartCol+1:T.indented+I;if(we&&we.noIndent)return c.Pass;if(T.tokenize!=fe&&T.tokenize!=he)return re?re.match(/^(\s*)/)[0].length:0;if(T.tagName)return L.multilineTagIndentPastTag!==!1?T.tagStart+T.tagName.length+2:T.tagStart+I*(L.multilineTagIndentFactor||1);if(L.alignCDATA&&/<!\[CDATA\[/.test(W))return 0;var Je=W&&/^<(\/)?([\w_:\.-]*)/.exec(W);if(Je&&Je[1])for(;we;)if(we.tagName==Je[2]){we=we.prev;break}else if(L.implicitlyClosed.hasOwnProperty(Z(we.tagName)))we=we.prev;else break;else if(Je)for(;we;){var ne=L.contextGrabbers[Z(we.tagName)];if(ne&&ne.hasOwnProperty(Z(Je[2])))we=we.prev;else break}for(;we&&we.prev&&!we.startOfLine;)we=we.prev;return we?we.indent+I:T.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:L.htmlMode?"html":"xml",helperType:L.htmlMode?"html":"xml",skipAttribute:function(T){T.state==De&&(T.state=Se)},xmlCurrentTag:function(T){return T.tagName?{name:T.tagName,close:T.type=="closeTag"}:null},xmlCurrentContext:function(T){for(var W=[],re=T.context;re;re=re.prev)W.push(re.tagName);return W.reverse()}}}),c.defineMIME("text/xml","xml"),c.defineMIME("application/xml","xml"),c.mimeModes.hasOwnProperty("text/html")||c.defineMIME("text/html",{name:"xml",htmlMode:!0})})})()),pg.exports}var hg={exports:{}},Fs;function fg(){return Fs||(Fs=1,(function(D,S){(function(c){c(dn())})(function(c){c.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-encrypted","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["asc","pgp","sig"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h","ino"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy","cbl"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp","cs"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists\.txt$/},{name:"CoffeeScript",mimes:["application/vnd.coffeescript","text/coffeescript","text/x-coffeescript"],mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded JavaScript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Esper",mime:"text/x-esper",mode:"sql"},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90","f95"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history)\.md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm","handlebars","hbs"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"text/jinja2",mode:"jinja2",ext:["j2","jinja","jinja2"]},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"],alias:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb","wl","wls"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mimes:["application/n-triples","application/n-quads","text/n-triples"],mode:"ntriples",ext:["nt","nq"]},{name:"Objective-C",mime:"text/x-objectivec",mode:"clike",ext:["m"],alias:["objective-c","objc"]},{name:"Objective-C++",mime:"text/x-objectivec++",mode:"clike",ext:["mm"],alias:["objective-c++","objc++"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mimes:["text/x-php","application/x-httpd-php","application/x-httpd-php-open"],mode:"php",ext:["php","php3","php4","php5","php7","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PostgreSQL",mime:"text/x-pgsql",mode:"sql"},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mimes:["text/x-sh","application/x-sh"],mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"SML",mime:"text/x-sml",mode:"mllike",ext:["sml","sig","fun","smackspec"]},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"SQLite",mime:"text/x-sqlite",mode:"sql"},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx","tex"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v","sv","svh"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"TypeScript-JSX",mime:"text/typescript-jsx",mode:"jsx",ext:["tsx"],alias:["tsx"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]},{name:"WebAssembly",mime:"text/webassembly",mode:"wast",ext:["wat","wast"]}];for(var A=0;A<c.modeInfo.length;A++){var x=c.modeInfo[A];x.mimes&&(x.mime=x.mimes[0])}c.findModeByMIME=function(w){w=w.toLowerCase();for(var y=0;y<c.modeInfo.length;y++){var I=c.modeInfo[y];if(I.mime==w)return I;if(I.mimes){for(var L=0;L<I.mimes.length;L++)if(I.mimes[L]==w)return I}}if(/\+xml$/.test(w))return c.findModeByMIME("application/xml");if(/\+json$/.test(w))return c.findModeByMIME("application/json")},c.findModeByExtension=function(w){w=w.toLowerCase();for(var y=0;y<c.modeInfo.length;y++){var I=c.modeInfo[y];if(I.ext){for(var L=0;L<I.ext.length;L++)if(I.ext[L]==w)return I}}},c.findModeByFileName=function(w){for(var y=0;y<c.modeInfo.length;y++){var I=c.modeInfo[y];if(I.file&&I.file.test(w))return I}var L=w.lastIndexOf("."),$=L>-1&&w.substring(L+1,w.length);if($)return c.findModeByExtension($)},c.findModeByName=function(w){w=w.toLowerCase();for(var y=0;y<c.modeInfo.length;y++){var I=c.modeInfo[y];if(I.name.toLowerCase()==w)return I;if(I.alias){for(var L=0;L<I.alias.length;L++)if(I.alias[L].toLowerCase()==w)return I}}}})})()),hg.exports}var Ls;function ru(){return Ls||(Ls=1,(function(D,S){(function(c){c(dn(),iu(),fg())})(function(c){c.defineMode("markdown",function(A,x){var w=c.getMode(A,"text/html"),y=w.name=="null";function I(f){if(c.findModeByName){var p=c.findModeByName(f);p&&(f=p.mime||p.mimes[0])}var z=c.getMode(A,f);return z.name=="null"?null:z}x.highlightFormatting===void 0&&(x.highlightFormatting=!1),x.maxBlockquoteDepth===void 0&&(x.maxBlockquoteDepth=0),x.taskLists===void 0&&(x.taskLists=!1),x.strikethrough===void 0&&(x.strikethrough=!1),x.emoji===void 0&&(x.emoji=!1),x.fencedCodeBlockHighlighting===void 0&&(x.fencedCodeBlockHighlighting=!0),x.fencedCodeBlockDefaultMode===void 0&&(x.fencedCodeBlockDefaultMode="text/plain"),x.xml===void 0&&(x.xml=!0),x.tokenTypeOverrides===void 0&&(x.tokenTypeOverrides={});var L={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var $ in L)L.hasOwnProperty($)&&x.tokenTypeOverrides[$]&&(L[$]=x.tokenTypeOverrides[$]);var X=/^([*\-_])(?:\s*\1){2,}\s*$/,V=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,R=/^\[(x| )\](?=\s)/i,he=x.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,fe=/^ {0,3}(?:\={1,}|-{2,})\s*$/,Me=/^[^#!\[\]*_\\<>` "'(~:]+/,ge=/^(~~~+|```+)[ \t]*([\w\/+#-]*)[^\n`]*$/,ye=/^\s*\[[^\]]+?\]:.*$/,Z=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E42\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC9\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDF3C-\uDF3E]|\uD809[\uDC70-\uDC74]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]/,K="    ";function G(f,p,z){return p.f=p.inline=z,z(f,p)}function ie(f,p,z){return p.f=p.block=z,z(f,p)}function ue(f){return!f||!/\S/.test(f.string)}function oe(f){if(f.linkTitle=!1,f.linkHref=!1,f.linkText=!1,f.em=!1,f.strong=!1,f.strikethrough=!1,f.quote=0,f.indentedCode=!1,f.f==be){var p=y;if(!p){var z=c.innerMode(w,f.htmlState);p=z.mode.name=="xml"&&z.state.tagStart===null&&!z.state.context&&z.state.tokenize.isInText}p&&(f.f=De,f.block=le,f.htmlState=null)}return f.trailingSpace=0,f.trailingSpaceNewLine=!1,f.prevLine=f.thisLine,f.thisLine={stream:null},null}function le(f,p){var z=f.column()===p.indentation,Ce=ue(p.prevLine.stream),xe=p.indentedCode,Fe=p.prevLine.hr,Ue=p.list!==!1,qe=(p.listStack[p.listStack.length-1]||0)+3;p.indentedCode=!1;var nt=p.indentation;if(p.indentationDiff===null&&(p.indentationDiff=p.indentation,Ue)){for(p.list=null;nt<p.listStack[p.listStack.length-1];)p.listStack.pop(),p.listStack.length?p.indentation=p.listStack[p.listStack.length-1]:p.list=!1;p.list!==!1&&(p.indentationDiff=nt-p.listStack[p.listStack.length-1])}var Pe=!Ce&&!Fe&&!p.prevLine.header&&(!Ue||!xe)&&!p.prevLine.fencedCodeEnd,Ze=(p.list===!1||Fe||Ce)&&p.indentation<=qe&&f.match(X),lt=null;if(p.indentationDiff>=4&&(xe||p.prevLine.fencedCodeEnd||p.prevLine.header||Ce))return f.skipToEnd(),p.indentedCode=!0,L.code;if(f.eatSpace())return null;if(z&&p.indentation<=qe&&(lt=f.match(he))&&lt[1].length<=6)return p.quote=0,p.header=lt[1].length,p.thisLine.header=!0,x.highlightFormatting&&(p.formatting="header"),p.f=p.inline,Se(p);if(p.indentation<=qe&&f.eat(">"))return p.quote=z?1:p.quote+1,x.highlightFormatting&&(p.formatting="quote"),f.eatSpace(),Se(p);if(!Ze&&!p.setext&&z&&p.indentation<=qe&&(lt=f.match(V))){var Ge=lt[1]?"ol":"ul";return p.indentation=nt+f.current().length,p.list=!0,p.quote=0,p.listStack.push(p.indentation),p.em=!1,p.strong=!1,p.code=!1,p.strikethrough=!1,x.taskLists&&f.match(R,!1)&&(p.taskList=!0),p.f=p.inline,x.highlightFormatting&&(p.formatting=["list","list-"+Ge]),Se(p)}else{if(z&&p.indentation<=qe&&(lt=f.match(ge,!0)))return p.quote=0,p.fencedEndRE=new RegExp(lt[1]+"+ *$"),p.localMode=x.fencedCodeBlockHighlighting&&I(lt[2]||x.fencedCodeBlockDefaultMode),p.localMode&&(p.localState=c.startState(p.localMode)),p.f=p.block=Xe,x.highlightFormatting&&(p.formatting="code-block"),p.code=-1,Se(p);if(p.setext||(!Pe||!Ue)&&!p.quote&&p.list===!1&&!p.code&&!Ze&&!ye.test(f.string)&&(lt=f.lookAhead(1))&&(lt=lt.match(fe)))return p.setext?(p.header=p.setext,p.setext=0,f.skipToEnd(),x.highlightFormatting&&(p.formatting="header")):(p.header=lt[0].charAt(0)=="="?1:2,p.setext=p.header),p.thisLine.header=!0,p.f=p.inline,Se(p);if(Ze)return f.skipToEnd(),p.hr=!0,p.thisLine.hr=!0,L.hr;if(f.peek()==="[")return G(f,p,we)}return G(f,p,p.inline)}function be(f,p){var z=w.token(f,p.htmlState);if(!y){var Ce=c.innerMode(w,p.htmlState);(Ce.mode.name=="xml"&&Ce.state.tagStart===null&&!Ce.state.context&&Ce.state.tokenize.isInText||p.md_inside&&f.current().indexOf(">")>-1)&&(p.f=De,p.block=le,p.htmlState=null)}return z}function Xe(f,p){var z=p.listStack[p.listStack.length-1]||0,Ce=p.indentation<z,xe=z+3;if(p.fencedEndRE&&p.indentation<=xe&&(Ce||f.match(p.fencedEndRE))){x.highlightFormatting&&(p.formatting="code-block");var Fe;return Ce||(Fe=Se(p)),p.localMode=p.localState=null,p.block=le,p.f=De,p.fencedEndRE=null,p.code=0,p.thisLine.fencedCodeEnd=!0,Ce?ie(f,p,p.block):Fe}else return p.localMode?p.localMode.token(f,p.localState):(f.skipToEnd(),L.code)}function Se(f){var p=[];if(f.formatting){p.push(L.formatting),typeof f.formatting=="string"&&(f.formatting=[f.formatting]);for(var z=0;z<f.formatting.length;z++)p.push(L.formatting+"-"+f.formatting[z]),f.formatting[z]==="header"&&p.push(L.formatting+"-"+f.formatting[z]+"-"+f.header),f.formatting[z]==="quote"&&(!x.maxBlockquoteDepth||x.maxBlockquoteDepth>=f.quote?p.push(L.formatting+"-"+f.formatting[z]+"-"+f.quote):p.push("error"))}if(f.taskOpen)return p.push("meta"),p.length?p.join(" "):null;if(f.taskClosed)return p.push("property"),p.length?p.join(" "):null;if(f.linkHref?p.push(L.linkHref,"url"):(f.strong&&p.push(L.strong),f.em&&p.push(L.em),f.strikethrough&&p.push(L.strikethrough),f.emoji&&p.push(L.emoji),f.linkText&&p.push(L.linkText),f.code&&p.push(L.code),f.image&&p.push(L.image),f.imageAltText&&p.push(L.imageAltText,"link"),f.imageMarker&&p.push(L.imageMarker)),f.header&&p.push(L.header,L.header+"-"+f.header),f.quote&&(p.push(L.quote),!x.maxBlockquoteDepth||x.maxBlockquoteDepth>=f.quote?p.push(L.quote+"-"+f.quote):p.push(L.quote+"-"+x.maxBlockquoteDepth)),f.list!==!1){var Ce=(f.listStack.length-1)%3;Ce?Ce===1?p.push(L.list2):p.push(L.list3):p.push(L.list1)}return f.trailingSpaceNewLine?p.push("trailing-space-new-line"):f.trailingSpace&&p.push("trailing-space-"+(f.trailingSpace%2?"a":"b")),p.length?p.join(" "):null}function pe(f,p){if(f.match(Me,!0))return Se(p)}function De(f,p){var z=p.text(f,p);if(typeof z<"u")return z;if(p.list)return p.list=null,Se(p);if(p.taskList){var Ce=f.match(R,!0)[1]===" ";return Ce?p.taskOpen=!0:p.taskClosed=!0,x.highlightFormatting&&(p.formatting="task"),p.taskList=!1,Se(p)}if(p.taskOpen=!1,p.taskClosed=!1,p.header&&f.match(/^#+$/,!0))return x.highlightFormatting&&(p.formatting="header"),Se(p);var xe=f.next();if(p.linkTitle){p.linkTitle=!1;var Fe=xe;xe==="("&&(Fe=")"),Fe=(Fe+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1");var Ue="^\\s*(?:[^"+Fe+"\\\\]+|\\\\\\\\|\\\\.)"+Fe;if(f.match(new RegExp(Ue),!0))return L.linkHref}if(xe==="`"){var qe=p.formatting;x.highlightFormatting&&(p.formatting="code"),f.eatWhile("`");var nt=f.current().length;if(p.code==0&&(!p.quote||nt==1))return p.code=nt,Se(p);if(nt==p.code){var Pe=Se(p);return p.code=0,Pe}else return p.formatting=qe,Se(p)}else if(p.code)return Se(p);if(xe==="\\"&&(f.next(),x.highlightFormatting)){var Ze=Se(p),lt=L.formatting+"-escape";return Ze?Ze+" "+lt:lt}if(xe==="!"&&f.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return p.imageMarker=!0,p.image=!0,x.highlightFormatting&&(p.formatting="image"),Se(p);if(xe==="["&&p.imageMarker&&f.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return p.imageMarker=!1,p.imageAltText=!0,x.highlightFormatting&&(p.formatting="image"),Se(p);if(xe==="]"&&p.imageAltText){x.highlightFormatting&&(p.formatting="image");var Ze=Se(p);return p.imageAltText=!1,p.image=!1,p.inline=p.f=T,Ze}if(xe==="["&&!p.image)return p.linkText&&f.match(/^.*?\]/)||(p.linkText=!0,x.highlightFormatting&&(p.formatting="link")),Se(p);if(xe==="]"&&p.linkText){x.highlightFormatting&&(p.formatting="link");var Ze=Se(p);return p.linkText=!1,p.inline=p.f=f.match(/\(.*?\)| ?\[.*?\]/,!1)?T:De,Ze}if(xe==="<"&&f.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){p.f=p.inline=ve,x.highlightFormatting&&(p.formatting="link");var Ze=Se(p);return Ze?Ze+=" ":Ze="",Ze+L.linkInline}if(xe==="<"&&f.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){p.f=p.inline=ve,x.highlightFormatting&&(p.formatting="link");var Ze=Se(p);return Ze?Ze+=" ":Ze="",Ze+L.linkEmail}if(x.xml&&xe==="<"&&f.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var Ge=f.string.indexOf(">",f.pos);if(Ge!=-1){var He=f.string.substring(f.start,Ge);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(He)&&(p.md_inside=!0)}return f.backUp(1),p.htmlState=c.startState(w),ie(f,p,be)}if(x.xml&&xe==="<"&&f.match(/^\/\w*?>/))return p.md_inside=!1,"tag";if(xe==="*"||xe==="_"){for(var yt=1,wt=f.pos==1?" ":f.string.charAt(f.pos-2);yt<3&&f.eat(xe);)yt++;var ct=f.peek()||" ",_t=!/\s/.test(ct)&&(!Z.test(ct)||/\s/.test(wt)||Z.test(wt)),Oe=!/\s/.test(wt)&&(!Z.test(wt)||/\s/.test(ct)||Z.test(ct)),Lt=null,rn=null;if(yt%2&&(!p.em&&_t&&(xe==="*"||!Oe||Z.test(wt))?Lt=!0:p.em==xe&&Oe&&(xe==="*"||!_t||Z.test(ct))&&(Lt=!1)),yt>1&&(!p.strong&&_t&&(xe==="*"||!Oe||Z.test(wt))?rn=!0:p.strong==xe&&Oe&&(xe==="*"||!_t||Z.test(ct))&&(rn=!1)),rn!=null||Lt!=null){x.highlightFormatting&&(p.formatting=Lt==null?"strong":rn==null?"em":"strong em"),Lt===!0&&(p.em=xe),rn===!0&&(p.strong=xe);var Pe=Se(p);return Lt===!1&&(p.em=!1),rn===!1&&(p.strong=!1),Pe}}else if(xe===" "&&(f.eat("*")||f.eat("_"))){if(f.peek()===" ")return Se(p);f.backUp(1)}if(x.strikethrough){if(xe==="~"&&f.eatWhile(xe)){if(p.strikethrough){x.highlightFormatting&&(p.formatting="strikethrough");var Pe=Se(p);return p.strikethrough=!1,Pe}else if(f.match(/^[^\s]/,!1))return p.strikethrough=!0,x.highlightFormatting&&(p.formatting="strikethrough"),Se(p)}else if(xe===" "&&f.match("~~",!0)){if(f.peek()===" ")return Se(p);f.backUp(2)}}if(x.emoji&&xe===":"&&f.match(/^(?:[a-z_\d+][a-z_\d+-]*|\-[a-z_\d+][a-z_\d+-]*):/)){p.emoji=!0,x.highlightFormatting&&(p.formatting="emoji");var bn=Se(p);return p.emoji=!1,bn}return xe===" "&&(f.match(/^ +$/,!1)?p.trailingSpace++:p.trailingSpace&&(p.trailingSpaceNewLine=!0)),Se(p)}function ve(f,p){var z=f.next();if(z===">"){p.f=p.inline=De,x.highlightFormatting&&(p.formatting="link");var Ce=Se(p);return Ce?Ce+=" ":Ce="",Ce+L.linkInline}return f.match(/^[^>]+/,!0),L.linkInline}function T(f,p){if(f.eatSpace())return null;var z=f.next();return z==="("||z==="["?(p.f=p.inline=re(z==="("?")":"]"),x.highlightFormatting&&(p.formatting="link-string"),p.linkHref=!0,Se(p)):"error"}var W={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function re(f){return function(p,z){var Ce=p.next();if(Ce===f){z.f=z.inline=De,x.highlightFormatting&&(z.formatting="link-string");var xe=Se(z);return z.linkHref=!1,xe}return p.match(W[f]),z.linkHref=!0,Se(z)}}function we(f,p){return f.match(/^([^\]\\]|\\.)*\]:/,!1)?(p.f=Je,f.next(),x.highlightFormatting&&(p.formatting="link"),p.linkText=!0,Se(p)):G(f,p,De)}function Je(f,p){if(f.match("]:",!0)){p.f=p.inline=ne,x.highlightFormatting&&(p.formatting="link");var z=Se(p);return p.linkText=!1,z}return f.match(/^([^\]\\]|\\.)+/,!0),L.linkText}function ne(f,p){return f.eatSpace()?null:(f.match(/^[^\s]+/,!0),f.peek()===void 0?p.linkTitle=!0:f.match(/^(?:\s+(?:"(?:[^"\\]|\\.)+"|'(?:[^'\\]|\\.)+'|\((?:[^)\\]|\\.)+\)))?/,!0),p.f=p.inline=De,L.linkHref+" url")}var U={startState:function(){return{f:le,prevLine:{stream:null},thisLine:{stream:null},block:le,htmlState:null,indentation:0,inline:De,text:pe,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(f){return{f:f.f,prevLine:f.prevLine,thisLine:f.thisLine,block:f.block,htmlState:f.htmlState&&c.copyState(w,f.htmlState),indentation:f.indentation,localMode:f.localMode,localState:f.localMode?c.copyState(f.localMode,f.localState):null,inline:f.inline,text:f.text,formatting:!1,linkText:f.linkText,linkTitle:f.linkTitle,linkHref:f.linkHref,code:f.code,em:f.em,strong:f.strong,strikethrough:f.strikethrough,emoji:f.emoji,header:f.header,setext:f.setext,hr:f.hr,taskList:f.taskList,list:f.list,listStack:f.listStack.slice(0),quote:f.quote,indentedCode:f.indentedCode,trailingSpace:f.trailingSpace,trailingSpaceNewLine:f.trailingSpaceNewLine,md_inside:f.md_inside,fencedEndRE:f.fencedEndRE}},token:function(f,p){if(p.formatting=!1,f!=p.thisLine.stream){if(p.header=0,p.hr=!1,f.match(/^\s*$/,!0))return oe(p),null;if(p.prevLine=p.thisLine,p.thisLine={stream:f},p.taskList=!1,p.trailingSpace=0,p.trailingSpaceNewLine=!1,!p.localState&&(p.f=p.block,p.f!=be)){var z=f.match(/^\s*/,!0)[0].replace(/\t/g,K).length;if(p.indentation=z,p.indentationDiff=null,z>0)return null}}return p.f(f,p)},innerMode:function(f){return f.block==be?{state:f.htmlState,mode:w}:f.localState?{state:f.localState,mode:f.localMode}:{state:f,mode:U}},indent:function(f,p,z){return f.block==be&&w.indent?w.indent(f.htmlState,p,z):f.localState&&f.localMode.indent?f.localMode.indent(f.localState,p,z):c.Pass},blankLine:oe,getType:Se,blockCommentStart:"<!--",blockCommentEnd:"-->",closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return U},"xml"),c.defineMIME("text/markdown","markdown"),c.defineMIME("text/x-markdown","markdown")})})()),dg.exports}var mg={exports:{}},Es;function au(){return Es||(Es=1,(function(D,S){(function(c){c(dn())})(function(c){c.overlayMode=function(A,x,w){return{startState:function(){return{base:c.startState(A),overlay:c.startState(x),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(y){return{base:c.copyState(A,y.base),overlay:c.copyState(x,y.overlay),basePos:y.basePos,baseCur:null,overlayPos:y.overlayPos,overlayCur:null}},token:function(y,I){return(y!=I.streamSeen||Math.min(I.basePos,I.overlayPos)<y.start)&&(I.streamSeen=y,I.basePos=I.overlayPos=y.start),y.start==I.basePos&&(I.baseCur=A.token(y,I.base),I.basePos=y.pos),y.start==I.overlayPos&&(y.pos=y.start,I.overlayCur=x.token(y,I.overlay),I.overlayPos=y.pos),y.pos=Math.min(I.basePos,I.overlayPos),I.overlayCur==null?I.baseCur:I.baseCur!=null&&I.overlay.combineTokens||w&&I.overlay.combineTokens==null?I.baseCur+" "+I.overlayCur:I.overlayCur},indent:A.indent&&function(y,I,L){return A.indent(y.base,I,L)},electricChars:A.electricChars,innerMode:function(y){return{state:y.base,mode:A}},blankLine:function(y){var I,L;return A.blankLine&&(I=A.blankLine(y.base)),x.blankLine&&(L=x.blankLine(y.overlay)),L==null?I:w&&I!=null?I+" "+L:L}}}})})()),mg.exports}var gg={exports:{}},Ms;function vg(){return Ms||(Ms=1,(function(D,S){(function(c){c(dn())})(function(c){c.defineOption("placeholder","",function($,X,V){var R=V&&V!=c.Init;if(X&&!R)$.on("blur",y),$.on("change",I),$.on("swapDoc",I),c.on($.getInputField(),"compositionupdate",$.state.placeholderCompose=function(){w($)}),I($);else if(!X&&R){$.off("blur",y),$.off("change",I),$.off("swapDoc",I),c.off($.getInputField(),"compositionupdate",$.state.placeholderCompose),A($);var he=$.getWrapperElement();he.className=he.className.replace(" CodeMirror-empty","")}X&&!$.hasFocus()&&y($)});function A($){$.state.placeholder&&($.state.placeholder.parentNode.removeChild($.state.placeholder),$.state.placeholder=null)}function x($){A($);var X=$.state.placeholder=document.createElement("pre");X.style.cssText="height: 0; overflow: visible",X.style.direction=$.getOption("direction"),X.className="CodeMirror-placeholder CodeMirror-line-like";var V=$.getOption("placeholder");typeof V=="string"&&(V=document.createTextNode(V)),X.appendChild(V),$.display.lineSpace.insertBefore(X,$.display.lineSpace.firstChild)}function w($){setTimeout(function(){var X=!1;if($.lineCount()==1){var V=$.getInputField();X=V.nodeName=="TEXTAREA"?!$.getLine(0).length:!/[^\u200b]/.test(V.querySelector(".CodeMirror-line").textContent)}X?x($):A($)},20)}function y($){L($)&&x($)}function I($){var X=$.getWrapperElement(),V=L($);X.className=X.className.replace(" CodeMirror-empty","")+(V?" CodeMirror-empty":""),V?x($):A($)}function L($){return $.lineCount()===1&&$.getLine(0)===""}})})()),gg.exports}var yg={exports:{}},Ts;function bg(){return Ts||(Ts=1,(function(D,S){(function(c){c(dn())})(function(c){c.defineOption("autoRefresh",!1,function(w,y){w.state.autoRefresh&&(x(w,w.state.autoRefresh),w.state.autoRefresh=null),y&&w.display.wrapper.offsetHeight==0&&A(w,w.state.autoRefresh={delay:y.delay||250})});function A(w,y){function I(){w.display.wrapper.offsetHeight?(x(w,y),w.display.lastWrapHeight!=w.display.wrapper.clientHeight&&w.refresh()):y.timeout=setTimeout(I,y.delay)}y.timeout=setTimeout(I,y.delay),y.hurry=function(){clearTimeout(y.timeout),y.timeout=setTimeout(I,50)},c.on(window,"mouseup",y.hurry),c.on(window,"keyup",y.hurry)}function x(w,y){clearTimeout(y.timeout),c.off(window,"mouseup",y.hurry),c.off(window,"keyup",y.hurry)}})})()),yg.exports}var xg={exports:{}},_s;function Cg(){return _s||(_s=1,(function(D,S){(function(c){c(dn())})(function(c){c.defineOption("styleSelectedText",!1,function(R,he,fe){var Me=fe&&fe!=c.Init;he&&!Me?(R.state.markedSelection=[],R.state.markedSelectionStyle=typeof he=="string"?he:"CodeMirror-selectedtext",X(R),R.on("cursorActivity",A),R.on("change",x)):!he&&Me&&(R.off("cursorActivity",A),R.off("change",x),$(R),R.state.markedSelection=R.state.markedSelectionStyle=null)});function A(R){R.state.markedSelection&&R.operation(function(){V(R)})}function x(R){R.state.markedSelection&&R.state.markedSelection.length&&R.operation(function(){$(R)})}var w=8,y=c.Pos,I=c.cmpPos;function L(R,he,fe,Me){if(I(he,fe)!=0)for(var ge=R.state.markedSelection,ye=R.state.markedSelectionStyle,Z=he.line;;){var K=Z==he.line?he:y(Z,0),G=Z+w,ie=G>=fe.line,ue=ie?fe:y(G,0),oe=R.markText(K,ue,{className:ye});if(Me==null?ge.push(oe):ge.splice(Me++,0,oe),ie)break;Z=G}}function $(R){for(var he=R.state.markedSelection,fe=0;fe<he.length;++fe)he[fe].clear();he.length=0}function X(R){$(R);for(var he=R.listSelections(),fe=0;fe<he.length;fe++)L(R,he[fe].from(),he[fe].to())}function V(R){if(!R.somethingSelected())return $(R);if(R.listSelections().length>1)return X(R);var he=R.getCursor("start"),fe=R.getCursor("end"),Me=R.state.markedSelection;if(!Me.length)return L(R,he,fe);var ge=Me[0].find(),ye=Me[Me.length-1].find();if(!ge||!ye||fe.line-he.line<=w||I(he,ye.to)>=0||I(fe,ge.from)<=0)return X(R);for(;I(he,ge.from)>0;)Me.shift().clear(),ge=Me[0].find();for(I(he,ge.from)<0&&(ge.to.line-he.line<w?(Me.shift().clear(),L(R,he,ge.to,0)):L(R,he,ge.from,0));I(fe,ye.to)<0;)Me.pop().clear(),ye=Me[Me.length-1].find();I(fe,ye.to)>0&&(fe.line-ye.from.line<w?(Me.pop().clear(),L(R,ye.from,fe)):L(R,ye.to,fe))}})})()),xg.exports}var kg={exports:{}},Bs;function wg(){return Bs||(Bs=1,(function(D,S){(function(c){c(dn())})(function(c){var A=c.Pos;function x(Z){var K=Z.flags;return K??(Z.ignoreCase?"i":"")+(Z.global?"g":"")+(Z.multiline?"m":"")}function w(Z,K){for(var G=x(Z),ie=G,ue=0;ue<K.length;ue++)ie.indexOf(K.charAt(ue))==-1&&(ie+=K.charAt(ue));return G==ie?Z:new RegExp(Z.source,ie)}function y(Z){return/\\s|\\n|\n|\\W|\\D|\[\^/.test(Z.source)}function I(Z,K,G){K=w(K,"g");for(var ie=G.line,ue=G.ch,oe=Z.lastLine();ie<=oe;ie++,ue=0){K.lastIndex=ue;var le=Z.getLine(ie),be=K.exec(le);if(be)return{from:A(ie,be.index),to:A(ie,be.index+be[0].length),match:be}}}function L(Z,K,G){if(!y(K))return I(Z,K,G);K=w(K,"gm");for(var ie,ue=1,oe=G.line,le=Z.lastLine();oe<=le;){for(var be=0;be<ue&&!(oe>le);be++){var Xe=Z.getLine(oe++);ie=ie==null?Xe:ie+`
`+Xe}ue=ue*2,K.lastIndex=G.ch;var Se=K.exec(ie);if(Se){var pe=ie.slice(0,Se.index).split(`
`),De=Se[0].split(`
`),ve=G.line+pe.length-1,T=pe[pe.length-1].length;return{from:A(ve,T),to:A(ve+De.length-1,De.length==1?T+De[0].length:De[De.length-1].length),match:Se}}}}function $(Z,K,G){for(var ie,ue=0;ue<=Z.length;){K.lastIndex=ue;var oe=K.exec(Z);if(!oe)break;var le=oe.index+oe[0].length;if(le>Z.length-G)break;(!ie||le>ie.index+ie[0].length)&&(ie=oe),ue=oe.index+1}return ie}function X(Z,K,G){K=w(K,"g");for(var ie=G.line,ue=G.ch,oe=Z.firstLine();ie>=oe;ie--,ue=-1){var le=Z.getLine(ie),be=$(le,K,ue<0?0:le.length-ue);if(be)return{from:A(ie,be.index),to:A(ie,be.index+be[0].length),match:be}}}function V(Z,K,G){if(!y(K))return X(Z,K,G);K=w(K,"gm");for(var ie,ue=1,oe=Z.getLine(G.line).length-G.ch,le=G.line,be=Z.firstLine();le>=be;){for(var Xe=0;Xe<ue&&le>=be;Xe++){var Se=Z.getLine(le--);ie=ie==null?Se:Se+`
`+ie}ue*=2;var pe=$(ie,K,oe);if(pe){var De=ie.slice(0,pe.index).split(`
`),ve=pe[0].split(`
`),T=le+De.length,W=De[De.length-1].length;return{from:A(T,W),to:A(T+ve.length-1,ve.length==1?W+ve[0].length:ve[ve.length-1].length),match:pe}}}}var R,he;String.prototype.normalize?(R=function(Z){return Z.normalize("NFD").toLowerCase()},he=function(Z){return Z.normalize("NFD")}):(R=function(Z){return Z.toLowerCase()},he=function(Z){return Z});function fe(Z,K,G,ie){if(Z.length==K.length)return G;for(var ue=0,oe=G+Math.max(0,Z.length-K.length);;){if(ue==oe)return ue;var le=ue+oe>>1,be=ie(Z.slice(0,le)).length;if(be==G)return le;be>G?oe=le:ue=le+1}}function Me(Z,K,G,ie){if(!K.length)return null;var ue=ie?R:he,oe=ue(K).split(/\r|\n\r?/);e:for(var le=G.line,be=G.ch,Xe=Z.lastLine()+1-oe.length;le<=Xe;le++,be=0){var Se=Z.getLine(le).slice(be),pe=ue(Se);if(oe.length==1){var De=pe.indexOf(oe[0]);if(De==-1)continue e;var G=fe(Se,pe,De,ue)+be;return{from:A(le,fe(Se,pe,De,ue)+be),to:A(le,fe(Se,pe,De+oe[0].length,ue)+be)}}else{var ve=pe.length-oe[0].length;if(pe.slice(ve)!=oe[0])continue e;for(var T=1;T<oe.length-1;T++)if(ue(Z.getLine(le+T))!=oe[T])continue e;var W=Z.getLine(le+oe.length-1),re=ue(W),we=oe[oe.length-1];if(re.slice(0,we.length)!=we)continue e;return{from:A(le,fe(Se,pe,ve,ue)+be),to:A(le+oe.length-1,fe(W,re,we.length,ue))}}}}function ge(Z,K,G,ie){if(!K.length)return null;var ue=ie?R:he,oe=ue(K).split(/\r|\n\r?/);e:for(var le=G.line,be=G.ch,Xe=Z.firstLine()-1+oe.length;le>=Xe;le--,be=-1){var Se=Z.getLine(le);be>-1&&(Se=Se.slice(0,be));var pe=ue(Se);if(oe.length==1){var De=pe.lastIndexOf(oe[0]);if(De==-1)continue e;return{from:A(le,fe(Se,pe,De,ue)),to:A(le,fe(Se,pe,De+oe[0].length,ue))}}else{var ve=oe[oe.length-1];if(pe.slice(0,ve.length)!=ve)continue e;for(var T=1,G=le-oe.length+1;T<oe.length-1;T++)if(ue(Z.getLine(G+T))!=oe[T])continue e;var W=Z.getLine(le+1-oe.length),re=ue(W);if(re.slice(re.length-oe[0].length)!=oe[0])continue e;return{from:A(le+1-oe.length,fe(W,re,W.length-oe[0].length,ue)),to:A(le,fe(Se,pe,ve.length,ue))}}}}function ye(Z,K,G,ie){this.atOccurrence=!1,this.afterEmptyMatch=!1,this.doc=Z,G=G?Z.clipPos(G):A(0,0),this.pos={from:G,to:G};var ue;typeof ie=="object"?ue=ie.caseFold:(ue=ie,ie=null),typeof K=="string"?(ue==null&&(ue=!1),this.matches=function(oe,le){return(oe?ge:Me)(Z,K,le,ue)}):(K=w(K,"gm"),!ie||ie.multiline!==!1?this.matches=function(oe,le){return(oe?V:L)(Z,K,le)}:this.matches=function(oe,le){return(oe?X:I)(Z,K,le)})}ye.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(Z){var K=this.doc.clipPos(Z?this.pos.from:this.pos.to);if(this.afterEmptyMatch&&this.atOccurrence&&(K=A(K.line,K.ch),Z?(K.ch--,K.ch<0&&(K.line--,K.ch=(this.doc.getLine(K.line)||"").length)):(K.ch++,K.ch>(this.doc.getLine(K.line)||"").length&&(K.ch=0,K.line++)),c.cmpPos(K,this.doc.clipPos(K))!=0))return this.atOccurrence=!1;var G=this.matches(Z,K);if(this.afterEmptyMatch=G&&c.cmpPos(G.from,G.to)==0,G)return this.pos=G,this.atOccurrence=!0,this.pos.match||!0;var ie=A(Z?this.doc.firstLine():this.doc.lastLine()+1,0);return this.pos={from:ie,to:ie},this.atOccurrence=!1},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(Z,K){if(this.atOccurrence){var G=c.splitLines(Z);this.doc.replaceRange(G,this.pos.from,this.pos.to,K),this.pos.to=A(this.pos.from.line+G.length-1,G[G.length-1].length+(G.length==1?this.pos.from.ch:0))}}},c.defineExtension("getSearchCursor",function(Z,K,G){return new ye(this.doc,Z,K,G)}),c.defineDocExtension("getSearchCursor",function(Z,K,G){return new ye(this,Z,K,G)}),c.defineExtension("selectMatches",function(Z,K){for(var G=[],ie=this.getSearchCursor(Z,this.getCursor("from"),K);ie.findNext()&&!(c.cmpPos(ie.to(),this.getCursor("to"))>0);)G.push({anchor:ie.from(),head:ie.to()});G.length&&this.setSelections(G,0)})})})()),kg.exports}var Dg={exports:{}},zs;function Sg(){return zs||(zs=1,(function(D,S){(function(c){c(dn(),ru(),au())})(function(c){var A=/^((?:(?:aaas?|about|acap|adiumxtra|af[ps]|aim|apt|attachment|aw|beshare|bitcoin|bolo|callto|cap|chrome(?:-extension)?|cid|coap|com-eventbrite-attendee|content|crid|cvs|data|dav|dict|dlna-(?:playcontainer|playsingle)|dns|doi|dtn|dvb|ed2k|facetime|feed|file|finger|fish|ftp|geo|gg|git|gizmoproject|go|gopher|gtalk|h323|hcp|https?|iax|icap|icon|im|imap|info|ipn|ipp|irc[6s]?|iris(?:\.beep|\.lwz|\.xpc|\.xpcs)?|itms|jar|javascript|jms|keyparc|lastfm|ldaps?|magnet|mailto|maps|market|message|mid|mms|ms-help|msnim|msrps?|mtqp|mumble|mupdate|mvn|news|nfs|nih?|nntp|notes|oid|opaquelocktoken|palm|paparazzi|platform|pop|pres|proxy|psyc|query|res(?:ource)?|rmi|rsync|rtmp|rtsp|secondlife|service|session|sftp|sgn|shttp|sieve|sips?|skype|sm[bs]|snmp|soap\.beeps?|soldat|spotify|ssh|steam|svn|tag|teamspeak|tel(?:net)?|tftp|things|thismessage|tip|tn3270|tv|udp|unreal|urn|ut2004|vemmi|ventrilo|view-source|webcal|wss?|wtai|wyciwyg|xcon(?:-userid)?|xfire|xmlrpc\.beeps?|xmpp|xri|ymsgr|z39\.50[rs]?):(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]|\([^\s()<>]*\))+(?:\([^\s()<>]*\)|[^\s`*!()\[\]{};:'".,<>?Â«Â»â€œâ€â€˜â€™]))/i;c.defineMode("gfm",function(x,w){var y=0;function I(V){return V.code=!1,null}var L={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(V){return{code:V.code,codeBlock:V.codeBlock,ateSpace:V.ateSpace}},token:function(V,R){if(R.combineTokens=null,R.codeBlock)return V.match(/^```+/)?(R.codeBlock=!1,null):(V.skipToEnd(),null);if(V.sol()&&(R.code=!1),V.sol()&&V.match(/^```+/))return V.skipToEnd(),R.codeBlock=!0,null;if(V.peek()==="`"){V.next();var he=V.pos;V.eatWhile("`");var fe=1+V.pos-he;return R.code?fe===y&&(R.code=!1):(y=fe,R.code=!0),null}else if(R.code)return V.next(),null;return V.eatSpace()?(R.ateSpace=!0,null):(V.sol()||R.ateSpace)&&(R.ateSpace=!1,w.gitHubSpice!==!1)&&(V.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+@)?(?=.{0,6}\d)(?:[a-f0-9]{7,40}\b)/)||V.match(/^(?:[a-zA-Z0-9\-_]+\/)?(?:[a-zA-Z0-9\-_]+)?#[0-9]+\b/))||V.match(A)&&V.string.slice(V.start-2,V.start)!="]("&&(V.start==0||/\W/.test(V.string.charAt(V.start-1)))?(R.combineTokens=!0,"link"):(V.next(),null)},blankLine:I},$={taskLists:!0,strikethrough:!0,emoji:!0};for(var X in w)$[X]=w[X];return $.name="markdown",c.overlayMode(c.getMode(x,$),L)},"markdown"),c.defineMIME("text/x-gfm","gfm")})})()),Dg.exports}function Ag(D){throw new Error('Could not dynamically require "'+D+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Is={exports:{}},Fg=null;const Lg=Object.freeze(Object.defineProperty({__proto__:null,default:Fg},Symbol.toStringTag,{value:"Module"})),Eg=Cd(Lg);var Ns;function Mg(){return Ns||(Ns=1,(function(D){var S;(function(){S=function(c,A,x,w){w=w||{},this.dictionary=null,this.rules={},this.dictionaryTable={},this.compoundRules=[],this.compoundRuleCodes={},this.replacementTable=[],this.flags=w.flags||{},this.memoized={},this.loaded=!1;var y=this,I,L,$,X,V;if(c)if(y.dictionary=c,A&&x)ge();else if(typeof window<"u"&&(window.chrome&&window.chrome.runtime||window.browser&&window.browser.runtime)){var R=window.chrome&&window.chrome.runtime?window.chrome.runtime:window.browser.runtime;w.dictionaryPath?I=w.dictionaryPath:I="typo/dictionaries",A||he(R.getURL(I+"/"+c+"/"+c+".aff"),fe),x||he(R.getURL(I+"/"+c+"/"+c+".dic"),Me)}else w.dictionaryPath?I=w.dictionaryPath:typeof __dirname<"u"?I=__dirname+"/dictionaries":I="./dictionaries",A||he(I+"/"+c+"/"+c+".aff",fe),x||he(I+"/"+c+"/"+c+".dic",Me);function he(ye,Z){var K=y._readFile(ye,null,w?.asyncLoad);w?.asyncLoad?K.then(function(G){Z(G)}):Z(K)}function fe(ye){A=ye,x&&ge()}function Me(ye){x=ye,A&&ge()}function ge(){for(y.rules=y._parseAFF(A),y.compoundRuleCodes={},L=0,X=y.compoundRules.length;L<X;L++){var ye=y.compoundRules[L];for($=0,V=ye.length;$<V;$++)y.compoundRuleCodes[ye[$]]=[]}"ONLYINCOMPOUND"in y.flags&&(y.compoundRuleCodes[y.flags.ONLYINCOMPOUND]=[]),y.dictionaryTable=y._parseDIC(x);for(L in y.compoundRuleCodes)y.compoundRuleCodes[L].length===0&&delete y.compoundRuleCodes[L];for(L=0,X=y.compoundRules.length;L<X;L++){var Z=y.compoundRules[L],K="";for($=0,V=Z.length;$<V;$++){var G=Z[$];G in y.compoundRuleCodes?K+="("+y.compoundRuleCodes[G].join("|")+")":K+=G}y.compoundRules[L]=new RegExp("^"+K+"$","i")}y.loaded=!0,w?.asyncLoad&&w?.loadedCallback&&w.loadedCallback(y)}return this},S.prototype={load:function(c){for(var A in c)c.hasOwnProperty(A)&&(this[A]=c[A]);return this},_readFile:function(c,A,x){var w;if(A=A||"utf8",typeof XMLHttpRequest<"u"){var y=new XMLHttpRequest;if(y.open("GET",c,!!x),(w=y.overrideMimeType)===null||w===void 0||w.call(y,"text/plain; charset="+A),x){var I=new Promise(function($,X){y.onload=function(){y.status===200?$(y.responseText):X(y.statusText)},y.onerror=function(){X(y.statusText)}});return y.send(null),I}else return y.send(null),y.responseText}else if(typeof Ag<"u"){var L=Eg;try{if(L.existsSync(c))return L.readFileSync(c,A);console.log("Path "+c+" does not exist.")}catch($){console.log($)}return""}return""},_parseAFF:function(c){var A={},x,w,y,I,L,$,X,V,R=c.split(/\r?\n/);for(L=0,X=R.length;L<X;L++)if(x=this._removeAffixComments(R[L]),x=x.trim(),!!x){var he=x.split(/\s+/),fe=he[0];if(fe==="PFX"||fe==="SFX"){var Me=he[1],ge=he[2];y=parseInt(he[3],10);var ye=[];for($=L+1,V=L+1+y;$<V;$++){w=R[$],I=w.split(/\s+/);var Z=I[2],K=I[3].split("/"),G=K[0];G==="0"&&(G="");var ie=this.parseRuleCodes(K[1]),ue=I[4],oe={add:G};ie.length>0&&(oe.continuationClasses=ie),ue!=="."&&(fe==="SFX"?oe.match=new RegExp(ue+"$"):oe.match=new RegExp("^"+ue)),Z!="0"&&(fe==="SFX"?oe.remove=new RegExp(Z+"$"):oe.remove=Z),ye.push(oe)}A[Me]={type:fe,combineable:ge==="Y",entries:ye},L+=y}else if(fe==="COMPOUNDRULE"){for(y=parseInt(he[1],10),$=L+1,V=L+1+y;$<V;$++)x=R[$],I=x.split(/\s+/),this.compoundRules.push(I[1]);L+=y}else fe==="REP"?(I=x.split(/\s+/),I.length===3&&this.replacementTable.push([I[1],I[2]])):this.flags[fe]=he[1]}return A},_removeAffixComments:function(c){return c.match(/^\s*#/)?"":c},_parseDIC:function(c){c=this._removeDicComments(c);var A=c.split(/\r?\n/),x={};function w(pe,De){x.hasOwnProperty(pe)||(x[pe]=null),De.length>0&&(x[pe]===null&&(x[pe]=[]),x[pe].push(De))}for(var y=1,I=A.length;y<I;y++){var L=A[y];if(L){var $=L.replace(/\s.*$/,""),X=$.split("/",2),V=X[0];if(X.length>1){var R=this.parseRuleCodes(X[1]);(!("NEEDAFFIX"in this.flags)||R.indexOf(this.flags.NEEDAFFIX)===-1)&&w(V,R);for(var he=0,fe=R.length;he<fe;he++){var Me=R[he],ge=this.rules[Me];if(ge)for(var ye=this._applyRule(V,ge),Z=0,K=ye.length;Z<K;Z++){var G=ye[Z];if(w(G,[]),ge.combineable)for(var ie=he+1;ie<fe;ie++){var ue=R[ie],oe=this.rules[ue];if(oe&&oe.combineable&&ge.type!=oe.type)for(var le=this._applyRule(G,oe),be=0,Xe=le.length;be<Xe;be++){var Se=le[be];w(Se,[])}}}Me in this.compoundRuleCodes&&this.compoundRuleCodes[Me].push(V)}}else w(V.trim(),[])}}return x},_removeDicComments:function(c){return c=c.replace(/^\t.*$/mg,""),c},parseRuleCodes:function(c){if(c)if("FLAG"in this.flags)if(this.flags.FLAG==="long"){for(var A=[],x=0,w=c.length;x<w;x+=2)A.push(c.substr(x,2));return A}else return this.flags.FLAG==="num"?c.split(","):this.flags.FLAG==="UTF-8"?Array.from(c):c.split("");else return c.split("");else return[]},_applyRule:function(c,A){for(var x=A.entries,w=[],y=0,I=x.length;y<I;y++){var L=x[y];if(!L.match||c.match(L.match)){var $=c;if(L.remove&&($=$.replace(L.remove,"")),A.type==="SFX"?$=$+L.add:$=L.add+$,w.push($),"continuationClasses"in L)for(var X=0,V=L.continuationClasses.length;X<V;X++){var R=this.rules[L.continuationClasses[X]];R&&(w=w.concat(this._applyRule($,R)))}}}return w},check:function(c){if(!this.loaded)throw"Dictionary not loaded.";if(!c)return!1;var A=c.replace(/^\s\s*/,"").replace(/\s\s*$/,"");if(this.checkExact(A))return!0;if(A.toUpperCase()===A){var x=A[0]+A.substring(1).toLowerCase();if(this.hasFlag(x,"KEEPCASE"))return!1;if(this.checkExact(x)||this.checkExact(A.toLowerCase()))return!0}var w=A[0].toLowerCase()+A.substring(1);if(w!==A){if(this.hasFlag(w,"KEEPCASE"))return!1;if(this.checkExact(w))return!0}return!1},checkExact:function(c){if(!this.loaded)throw"Dictionary not loaded.";var A=this.dictionaryTable[c],x,w;if(typeof A>"u"){if("COMPOUNDMIN"in this.flags&&c.length>=this.flags.COMPOUNDMIN){for(x=0,w=this.compoundRules.length;x<w;x++)if(c.match(this.compoundRules[x]))return!0}}else{if(A===null)return!0;if(typeof A=="object"){for(x=0,w=A.length;x<w;x++)if(!this.hasFlag(c,"ONLYINCOMPOUND",A[x]))return!0}}return!1},hasFlag:function(c,A,x){if(!this.loaded)throw"Dictionary not loaded.";return!!(A in this.flags&&(typeof x>"u"&&(x=Array.prototype.concat.apply([],this.dictionaryTable[c])),x&&x.indexOf(this.flags[A])!==-1))},alphabet:"",suggest:function(c,A){if(!this.loaded)throw"Dictionary not loaded.";if(A=A||5,this.memoized.hasOwnProperty(c)){var x=this.memoized[c].limit;if(A<=x||this.memoized[c].suggestions.length<x)return this.memoized[c].suggestions.slice(0,A)}if(this.check(c))return[];for(var w=0,y=this.replacementTable.length;w<y;w++){var I=this.replacementTable[w];if(c.indexOf(I[0])!==-1){var L=c.replace(I[0],I[1]);if(this.check(L))return[L]}}if(!this.alphabet){this.alphabet="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ","TRY"in this.flags&&(this.alphabet+=this.flags.TRY),"WORDCHARS"in this.flags&&(this.alphabet+=this.flags.WORDCHARS);var $=this.alphabet.split("");$.sort();for(var X={},w=0;w<$.length;w++)X[$[w]]=!0;this.alphabet="";for(var w in X)this.alphabet+=w}var V=this;function R(fe,Me){var ge={},ye,Z,K,G,ie=V.alphabet.length;for(var ue in fe)for(ye=0,K=ue.length+1;ye<K;ye++){var oe=[ue.substring(0,ye),ue.substring(ye)];if(oe[1]&&(G=oe[0]+oe[1].substring(1),(!Me||V.check(G))&&(G in ge?ge[G]+=1:ge[G]=1)),oe[1].length>1&&oe[1][1]!==oe[1][0]&&(G=oe[0]+oe[1][1]+oe[1][0]+oe[1].substring(2),(!Me||V.check(G))&&(G in ge?ge[G]+=1:ge[G]=1)),oe[1]){var le=oe[1].substring(0,1).toUpperCase()===oe[1].substring(0,1)?"uppercase":"lowercase";for(Z=0;Z<ie;Z++){var be=V.alphabet[Z];le==="uppercase"&&(be=be.toUpperCase()),be!=oe[1].substring(0,1)&&(G=oe[0]+be+oe[1].substring(1),(!Me||V.check(G))&&(G in ge?ge[G]+=1:ge[G]=1))}}if(oe[1])for(Z=0;Z<ie;Z++){var le=oe[0].substring(-1).toUpperCase()===oe[0].substring(-1)&&oe[1].substring(0,1).toUpperCase()===oe[1].substring(0,1)?"uppercase":"lowercase",be=V.alphabet[Z];le==="uppercase"&&(be=be.toUpperCase()),G=oe[0]+be+oe[1],(!Me||V.check(G))&&(G in ge?ge[G]+=1:ge[G]=1)}}return ge}function he(fe){var Me,ge=R((Me={},Me[fe]=!0,Me)),ye=R(ge,!0),Z=ye;for(var K in ge)V.check(K)&&(K in Z?Z[K]+=ge[K]:Z[K]=ge[K]);var G,ie=[];for(G in Z)Z.hasOwnProperty(G)&&(V.hasFlag(G,"PRIORITYSUGGEST")&&(Z[G]+=1e3),ie.push([G,Z[G]]));function ue(Xe,Se){var pe=Xe[1],De=Se[1];return pe<De?-1:pe>De?1:Se[0].localeCompare(Xe[0])}ie.sort(ue).reverse();var oe=[],le="lowercase";fe.toUpperCase()===fe?le="uppercase":fe.substr(0,1).toUpperCase()+fe.substr(1).toLowerCase()===fe&&(le="capitalized");var be=A;for(G=0;G<Math.min(be,ie.length);G++)le==="uppercase"?ie[G][0]=ie[G][0].toUpperCase():le==="capitalized"&&(ie[G][0]=ie[G][0].substr(0,1).toUpperCase()+ie[G][0].substr(1)),!V.hasFlag(ie[G][0],"NOSUGGEST")&&oe.indexOf(ie[G][0])===-1?oe.push(ie[G][0]):be++;return oe}return this.memoized[c]={suggestions:he(c),limit:A},this.memoized[c].suggestions}}})(),D.exports=S})(Is)),Is.exports}var no,Os;function Tg(){if(Os)return no;Os=1;var D=Mg();function S(c){if(c=c||{},typeof c.codeMirrorInstance!="function"||typeof c.codeMirrorInstance.defineMode!="function"){console.log("CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`");return}String.prototype.includes||(String.prototype.includes=function(){return String.prototype.indexOf.apply(this,arguments)!==-1}),c.codeMirrorInstance.defineMode("spell-checker",function(A){if(!S.aff_loading){S.aff_loading=!0;var x=new XMLHttpRequest;x.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff",!0),x.onload=function(){x.readyState===4&&x.status===200&&(S.aff_data=x.responseText,S.num_loaded++,S.num_loaded==2&&(S.typo=new D("en_US",S.aff_data,S.dic_data,{platform:"any"})))},x.send(null)}if(!S.dic_loading){S.dic_loading=!0;var w=new XMLHttpRequest;w.open("GET","https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic",!0),w.onload=function(){w.readyState===4&&w.status===200&&(S.dic_data=w.responseText,S.num_loaded++,S.num_loaded==2&&(S.typo=new D("en_US",S.aff_data,S.dic_data,{platform:"any"})))},w.send(null)}var y='!"#$%&()*+,-./:;<=>?@[\\]^_`{|}~ ',I={token:function($){var X=$.peek(),V="";if(y.includes(X))return $.next(),null;for(;(X=$.peek())!=null&&!y.includes(X);)V+=X,$.next();return S.typo&&!S.typo.check(V)?"spell-error":null}},L=c.codeMirrorInstance.getMode(A,A.backdrop||"text/plain");return c.codeMirrorInstance.overlayMode(L,I,!0)})}return S.num_loaded=0,S.aff_loading=!1,S.dic_loading=!1,S.aff_data="",S.dic_data="",S.typo,no=S,no}var Hs={},Rs;function _g(){return Rs||(Rs=1,(function(D){function S(Q,te){for(var m=0;m<te.length;m++){var g=te[m];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(Q,L(g.key),g)}}function c(Q,te,m){return m&&S(Q,m),Object.defineProperty(Q,"prototype",{writable:!1}),Q}function A(){return A=Object.assign?Object.assign.bind():function(Q){for(var te=1;te<arguments.length;te++){var m=arguments[te];for(var g in m)Object.prototype.hasOwnProperty.call(m,g)&&(Q[g]=m[g])}return Q},A.apply(this,arguments)}function x(Q,te){if(Q){if(typeof Q=="string")return w(Q,te);var m=Object.prototype.toString.call(Q).slice(8,-1);if(m==="Object"&&Q.constructor&&(m=Q.constructor.name),m==="Map"||m==="Set")return Array.from(Q);if(m==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(m))return w(Q,te)}}function w(Q,te){(te==null||te>Q.length)&&(te=Q.length);for(var m=0,g=new Array(te);m<te;m++)g[m]=Q[m];return g}function y(Q,te){var m=typeof Symbol<"u"&&Q[Symbol.iterator]||Q["@@iterator"];if(m)return(m=m.call(Q)).next.bind(m);if(Array.isArray(Q)||(m=x(Q))||te){m&&(Q=m);var g=0;return function(){return g>=Q.length?{done:!0}:{done:!1,value:Q[g++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(Q,te){if(typeof Q!="object"||Q===null)return Q;var m=Q[Symbol.toPrimitive];if(m!==void 0){var g=m.call(Q,te);if(typeof g!="object")return g;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(Q)}function L(Q){var te=I(Q,"string");return typeof te=="symbol"?te:String(te)}function $(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}D.defaults=$();function X(Q){D.defaults=Q}var V=/[&<>"']/,R=new RegExp(V.source,"g"),he=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,fe=new RegExp(he.source,"g"),Me={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ge=function(Q){return Me[Q]};function ye(Q,te){if(te){if(V.test(Q))return Q.replace(R,ge)}else if(he.test(Q))return Q.replace(fe,ge);return Q}var Z=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function K(Q){return Q.replace(Z,function(te,m){return m=m.toLowerCase(),m==="colon"?":":m.charAt(0)==="#"?m.charAt(1)==="x"?String.fromCharCode(parseInt(m.substring(2),16)):String.fromCharCode(+m.substring(1)):""})}var G=/(^|[^\[])\^/g;function ie(Q,te){Q=typeof Q=="string"?Q:Q.source,te=te||"";var m={replace:function(g,b){return b=b.source||b,b=b.replace(G,"$1"),Q=Q.replace(g,b),m},getRegex:function(){return new RegExp(Q,te)}};return m}var ue=/[^\w:]/g,oe=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function le(Q,te,m){if(Q){var g;try{g=decodeURIComponent(K(m)).replace(ue,"").toLowerCase()}catch{return null}if(g.indexOf("javascript:")===0||g.indexOf("vbscript:")===0||g.indexOf("data:")===0)return null}te&&!oe.test(m)&&(m=De(te,m));try{m=encodeURI(m).replace(/%25/g,"%")}catch{return null}return m}var be={},Xe=/^[^:]+:\/*[^/]*$/,Se=/^([^:]+:)[\s\S]*$/,pe=/^([^:]+:\/*[^/]*)[\s\S]*$/;function De(Q,te){be[" "+Q]||(Xe.test(Q)?be[" "+Q]=Q+"/":be[" "+Q]=W(Q,"/",!0)),Q=be[" "+Q];var m=Q.indexOf(":")===-1;return te.substring(0,2)==="//"?m?te:Q.replace(Se,"$1")+te:te.charAt(0)==="/"?m?te:Q.replace(pe,"$1")+te:Q+te}var ve={exec:function(){}};function T(Q,te){var m=Q.replace(/\|/g,function(M,u,v){for(var k=!1,E=u;--E>=0&&v[E]==="\\";)k=!k;return k?"|":" |"}),g=m.split(/ \|/),b=0;if(g[0].trim()||g.shift(),g.length>0&&!g[g.length-1].trim()&&g.pop(),g.length>te)g.splice(te);else for(;g.length<te;)g.push("");for(;b<g.length;b++)g[b]=g[b].trim().replace(/\\\|/g,"|");return g}function W(Q,te,m){var g=Q.length;if(g===0)return"";for(var b=0;b<g;){var M=Q.charAt(g-b-1);if(M===te&&!m)b++;else if(M!==te&&m)b++;else break}return Q.slice(0,g-b)}function re(Q,te){if(Q.indexOf(te[1])===-1)return-1;for(var m=Q.length,g=0,b=0;b<m;b++)if(Q[b]==="\\")b++;else if(Q[b]===te[0])g++;else if(Q[b]===te[1]&&(g--,g<0))return b;return-1}function we(Q){Q&&Q.sanitize&&!Q.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function Je(Q,te){if(te<1)return"";for(var m="";te>1;)te&1&&(m+=Q),te>>=1,Q+=Q;return m+Q}function ne(Q,te,m,g){var b=te.href,M=te.title?ye(te.title):null,u=Q[1].replace(/\\([\[\]])/g,"$1");if(Q[0].charAt(0)!=="!"){g.state.inLink=!0;var v={type:"link",raw:m,href:b,title:M,text:u,tokens:g.inlineTokens(u)};return g.state.inLink=!1,v}return{type:"image",raw:m,href:b,title:M,text:ye(u)}}function U(Q,te){var m=Q.match(/^(\s+)(?:```)/);if(m===null)return te;var g=m[1];return te.split(`
`).map(function(b){var M=b.match(/^\s+/);if(M===null)return b;var u=M[0];return u.length>=g.length?b.slice(g.length):b}).join(`
`)}var f=(function(){function Q(m){this.options=m||D.defaults}var te=Q.prototype;return te.space=function(m){var g=this.rules.block.newline.exec(m);if(g&&g[0].length>0)return{type:"space",raw:g[0]}},te.code=function(m){var g=this.rules.block.code.exec(m);if(g){var b=g[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:g[0],codeBlockStyle:"indented",text:this.options.pedantic?b:W(b,`
`)}}},te.fences=function(m){var g=this.rules.block.fences.exec(m);if(g){var b=g[0],M=U(b,g[3]||"");return{type:"code",raw:b,lang:g[2]?g[2].trim().replace(this.rules.inline._escapes,"$1"):g[2],text:M}}},te.heading=function(m){var g=this.rules.block.heading.exec(m);if(g){var b=g[2].trim();if(/#$/.test(b)){var M=W(b,"#");(this.options.pedantic||!M||/ $/.test(M))&&(b=M.trim())}return{type:"heading",raw:g[0],depth:g[1].length,text:b,tokens:this.lexer.inline(b)}}},te.hr=function(m){var g=this.rules.block.hr.exec(m);if(g)return{type:"hr",raw:g[0]}},te.blockquote=function(m){var g=this.rules.block.blockquote.exec(m);if(g){var b=g[0].replace(/^ *>[ \t]?/gm,""),M=this.lexer.state.top;this.lexer.state.top=!0;var u=this.lexer.blockTokens(b);return this.lexer.state.top=M,{type:"blockquote",raw:g[0],tokens:u,text:b}}},te.list=function(m){var g=this.rules.block.list.exec(m);if(g){var b,M,u,v,k,E,N,ee,O,B,H,se,Ie=g[1].trim(),Ve=Ie.length>1,_e={type:"list",raw:"",ordered:Ve,start:Ve?+Ie.slice(0,-1):"",loose:!1,items:[]};Ie=Ve?"\\d{1,9}\\"+Ie.slice(-1):"\\"+Ie,this.options.pedantic&&(Ie=Ve?Ie:"[*+-]");for(var Te=new RegExp("^( {0,3}"+Ie+")((?:[	 ][^\\n]*)?(?:\\n|$))");m&&(se=!1,!(!(g=Te.exec(m))||this.rules.block.hr.test(m)));){if(b=g[0],m=m.substring(b.length),ee=g[2].split(`
`,1)[0].replace(/^\t+/,function(Ot){return" ".repeat(3*Ot.length)}),O=m.split(`
`,1)[0],this.options.pedantic?(v=2,H=ee.trimLeft()):(v=g[2].search(/[^ ]/),v=v>4?1:v,H=ee.slice(v),v+=g[1].length),E=!1,!ee&&/^ *$/.test(O)&&(b+=O+`
`,m=m.substring(O.length+1),se=!0),!se)for(var ut=new RegExp("^ {0,"+Math.min(3,v-1)+"}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))"),it=new RegExp("^ {0,"+Math.min(3,v-1)+"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)"),et=new RegExp("^ {0,"+Math.min(3,v-1)+"}(?:```|~~~)"),Qe=new RegExp("^ {0,"+Math.min(3,v-1)+"}#");m&&(B=m.split(`
`,1)[0],O=B,this.options.pedantic&&(O=O.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(et.test(O)||Qe.test(O)||ut.test(O)||it.test(m)));){if(O.search(/[^ ]/)>=v||!O.trim())H+=`
`+O.slice(v);else{if(E||ee.search(/[^ ]/)>=4||et.test(ee)||Qe.test(ee)||it.test(ee))break;H+=`
`+O}!E&&!O.trim()&&(E=!0),b+=B+`
`,m=m.substring(B.length+1),ee=O.slice(v)}_e.loose||(N?_e.loose=!0:/\n *\n *$/.test(b)&&(N=!0)),this.options.gfm&&(M=/^\[[ xX]\] /.exec(H),M&&(u=M[0]!=="[ ] ",H=H.replace(/^\[[ xX]\] +/,""))),_e.items.push({type:"list_item",raw:b,task:!!M,checked:u,loose:!1,text:H}),_e.raw+=b}_e.items[_e.items.length-1].raw=b.trimRight(),_e.items[_e.items.length-1].text=H.trimRight(),_e.raw=_e.raw.trimRight();var bt=_e.items.length;for(k=0;k<bt;k++)if(this.lexer.state.top=!1,_e.items[k].tokens=this.lexer.blockTokens(_e.items[k].text,[]),!_e.loose){var xt=_e.items[k].tokens.filter(function(Ot){return Ot.type==="space"}),Wt=xt.length>0&&xt.some(function(Ot){return/\n.*\n/.test(Ot.raw)});_e.loose=Wt}if(_e.loose)for(k=0;k<bt;k++)_e.items[k].loose=!0;return _e}},te.html=function(m){var g=this.rules.block.html.exec(m);if(g){var b={type:"html",raw:g[0],pre:!this.options.sanitizer&&(g[1]==="pre"||g[1]==="script"||g[1]==="style"),text:g[0]};if(this.options.sanitize){var M=this.options.sanitizer?this.options.sanitizer(g[0]):ye(g[0]);b.type="paragraph",b.text=M,b.tokens=this.lexer.inline(M)}return b}},te.def=function(m){var g=this.rules.block.def.exec(m);if(g){var b=g[1].toLowerCase().replace(/\s+/g," "),M=g[2]?g[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",u=g[3]?g[3].substring(1,g[3].length-1).replace(this.rules.inline._escapes,"$1"):g[3];return{type:"def",tag:b,raw:g[0],href:M,title:u}}},te.table=function(m){var g=this.rules.block.table.exec(m);if(g){var b={type:"table",header:T(g[1]).map(function(N){return{text:N}}),align:g[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:g[3]&&g[3].trim()?g[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(b.header.length===b.align.length){b.raw=g[0];var M=b.align.length,u,v,k,E;for(u=0;u<M;u++)/^ *-+: *$/.test(b.align[u])?b.align[u]="right":/^ *:-+: *$/.test(b.align[u])?b.align[u]="center":/^ *:-+ *$/.test(b.align[u])?b.align[u]="left":b.align[u]=null;for(M=b.rows.length,u=0;u<M;u++)b.rows[u]=T(b.rows[u],b.header.length).map(function(N){return{text:N}});for(M=b.header.length,v=0;v<M;v++)b.header[v].tokens=this.lexer.inline(b.header[v].text);for(M=b.rows.length,v=0;v<M;v++)for(E=b.rows[v],k=0;k<E.length;k++)E[k].tokens=this.lexer.inline(E[k].text);return b}}},te.lheading=function(m){var g=this.rules.block.lheading.exec(m);if(g)return{type:"heading",raw:g[0],depth:g[2].charAt(0)==="="?1:2,text:g[1],tokens:this.lexer.inline(g[1])}},te.paragraph=function(m){var g=this.rules.block.paragraph.exec(m);if(g){var b=g[1].charAt(g[1].length-1)===`
`?g[1].slice(0,-1):g[1];return{type:"paragraph",raw:g[0],text:b,tokens:this.lexer.inline(b)}}},te.text=function(m){var g=this.rules.block.text.exec(m);if(g)return{type:"text",raw:g[0],text:g[0],tokens:this.lexer.inline(g[0])}},te.escape=function(m){var g=this.rules.inline.escape.exec(m);if(g)return{type:"escape",raw:g[0],text:ye(g[1])}},te.tag=function(m){var g=this.rules.inline.tag.exec(m);if(g)return!this.lexer.state.inLink&&/^<a /i.test(g[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(g[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(g[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(g[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:g[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(g[0]):ye(g[0]):g[0]}},te.link=function(m){var g=this.rules.inline.link.exec(m);if(g){var b=g[2].trim();if(!this.options.pedantic&&/^</.test(b)){if(!/>$/.test(b))return;var M=W(b.slice(0,-1),"\\");if((b.length-M.length)%2===0)return}else{var u=re(g[2],"()");if(u>-1){var v=g[0].indexOf("!")===0?5:4,k=v+g[1].length+u;g[2]=g[2].substring(0,u),g[0]=g[0].substring(0,k).trim(),g[3]=""}}var E=g[2],N="";if(this.options.pedantic){var ee=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(E);ee&&(E=ee[1],N=ee[3])}else N=g[3]?g[3].slice(1,-1):"";return E=E.trim(),/^</.test(E)&&(this.options.pedantic&&!/>$/.test(b)?E=E.slice(1):E=E.slice(1,-1)),ne(g,{href:E&&E.replace(this.rules.inline._escapes,"$1"),title:N&&N.replace(this.rules.inline._escapes,"$1")},g[0],this.lexer)}},te.reflink=function(m,g){var b;if((b=this.rules.inline.reflink.exec(m))||(b=this.rules.inline.nolink.exec(m))){var M=(b[2]||b[1]).replace(/\s+/g," ");if(M=g[M.toLowerCase()],!M){var u=b[0].charAt(0);return{type:"text",raw:u,text:u}}return ne(b,M,b[0],this.lexer)}},te.emStrong=function(m,g,b){b===void 0&&(b="");var M=this.rules.inline.emStrong.lDelim.exec(m);if(M&&!(M[3]&&b.match(/(?:[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u0660-\u0669\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0966-\u096F\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09F9\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AE6-\u0AEF\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B6F\u0B71-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0BE6-\u0BF2\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C78-\u0C7E\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D58-\u0D61\u0D66-\u0D78\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DE6-\u0DEF\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F20-\u0F33\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F-\u1049\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u1090-\u1099\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A20-\u1A54\u1A80-\u1A89\u1A90-\u1A99\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B50-\u1B59\u1B83-\u1BA0\u1BAE-\u1BE5\u1C00-\u1C23\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA830-\uA835\uA840-\uA873\uA882-\uA8B3\uA8D0-\uA8D9\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA900-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF-\uA9D9\uA9E0-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA50-\uAA59\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDE80-\uDE9C\uDEA0-\uDED0\uDEE1-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE40-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE4\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD23\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF27\uDF30-\uDF45\uDF51-\uDF54\uDF70-\uDF81\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC52-\uDC6F\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD03-\uDD26\uDD36-\uDD3F\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDD0-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDEF0-\uDEF9\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC50-\uDC59\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE50-\uDE59\uDE80-\uDEAA\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF2\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD50-\uDD52\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD837[\uDF00-\uDF1E]|\uD838[\uDD00-\uDD2C\uDD37-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB\uDEF0-\uDEF9]|\uD839[\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCCF\uDD00-\uDD43\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF38\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A])/))){var u=M[1]||M[2]||"";if(!u||u&&(b===""||this.rules.inline.punctuation.exec(b))){var v=M[0].length-1,k,E,N=v,ee=0,O=M[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(O.lastIndex=0,g=g.slice(-1*m.length+v);(M=O.exec(g))!=null;)if(k=M[1]||M[2]||M[3]||M[4]||M[5]||M[6],!!k){if(E=k.length,M[3]||M[4]){N+=E;continue}else if((M[5]||M[6])&&v%3&&!((v+E)%3)){ee+=E;continue}if(N-=E,!(N>0)){E=Math.min(E,E+N+ee);var B=m.slice(0,v+M.index+(M[0].length-k.length)+E);if(Math.min(v,E)%2){var H=B.slice(1,-1);return{type:"em",raw:B,text:H,tokens:this.lexer.inlineTokens(H)}}var se=B.slice(2,-2);return{type:"strong",raw:B,text:se,tokens:this.lexer.inlineTokens(se)}}}}}},te.codespan=function(m){var g=this.rules.inline.code.exec(m);if(g){var b=g[2].replace(/\n/g," "),M=/[^ ]/.test(b),u=/^ /.test(b)&&/ $/.test(b);return M&&u&&(b=b.substring(1,b.length-1)),b=ye(b,!0),{type:"codespan",raw:g[0],text:b}}},te.br=function(m){var g=this.rules.inline.br.exec(m);if(g)return{type:"br",raw:g[0]}},te.del=function(m){var g=this.rules.inline.del.exec(m);if(g)return{type:"del",raw:g[0],text:g[2],tokens:this.lexer.inlineTokens(g[2])}},te.autolink=function(m,g){var b=this.rules.inline.autolink.exec(m);if(b){var M,u;return b[2]==="@"?(M=ye(this.options.mangle?g(b[1]):b[1]),u="mailto:"+M):(M=ye(b[1]),u=M),{type:"link",raw:b[0],text:M,href:u,tokens:[{type:"text",raw:M,text:M}]}}},te.url=function(m,g){var b;if(b=this.rules.inline.url.exec(m)){var M,u;if(b[2]==="@")M=ye(this.options.mangle?g(b[0]):b[0]),u="mailto:"+M;else{var v;do v=b[0],b[0]=this.rules.inline._backpedal.exec(b[0])[0];while(v!==b[0]);M=ye(b[0]),b[1]==="www."?u="http://"+b[0]:u=b[0]}return{type:"link",raw:b[0],text:M,href:u,tokens:[{type:"text",raw:M,text:M}]}}},te.inlineText=function(m,g){var b=this.rules.inline.text.exec(m);if(b){var M;return this.lexer.state.inRawBlock?M=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(b[0]):ye(b[0]):b[0]:M=ye(this.options.smartypants?g(b[0]):b[0]),{type:"text",raw:b[0],text:M}}},Q})(),p={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ve,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};p._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,p._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,p.def=ie(p.def).replace("label",p._label).replace("title",p._title).getRegex(),p.bullet=/(?:[*+-]|\d{1,9}[.)])/,p.listItemStart=ie(/^( *)(bull) */).replace("bull",p.bullet).getRegex(),p.list=ie(p.list).replace(/bull/g,p.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+p.def.source+")").getRegex(),p._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",p._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,p.html=ie(p.html,"i").replace("comment",p._comment).replace("tag",p._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),p.paragraph=ie(p._paragraph).replace("hr",p.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",p._tag).getRegex(),p.blockquote=ie(p.blockquote).replace("paragraph",p.paragraph).getRegex(),p.normal=A({},p),p.gfm=A({},p.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),p.gfm.table=ie(p.gfm.table).replace("hr",p.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",p._tag).getRegex(),p.gfm.paragraph=ie(p._paragraph).replace("hr",p.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",p.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",p._tag).getRegex(),p.pedantic=A({},p.normal,{html:ie(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",p._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ve,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ie(p.normal._paragraph).replace("hr",p.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",p.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var z={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ve,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ve,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};z._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",z.punctuation=ie(z.punctuation).replace(/punctuation/g,z._punctuation).getRegex(),z.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,z.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g,z._comment=ie(p._comment).replace("(?:-->|$)","-->").getRegex(),z.emStrong.lDelim=ie(z.emStrong.lDelim).replace(/punct/g,z._punctuation).getRegex(),z.emStrong.rDelimAst=ie(z.emStrong.rDelimAst,"g").replace(/punct/g,z._punctuation).getRegex(),z.emStrong.rDelimUnd=ie(z.emStrong.rDelimUnd,"g").replace(/punct/g,z._punctuation).getRegex(),z._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,z._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,z._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,z.autolink=ie(z.autolink).replace("scheme",z._scheme).replace("email",z._email).getRegex(),z._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,z.tag=ie(z.tag).replace("comment",z._comment).replace("attribute",z._attribute).getRegex(),z._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,z._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,z._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,z.link=ie(z.link).replace("label",z._label).replace("href",z._href).replace("title",z._title).getRegex(),z.reflink=ie(z.reflink).replace("label",z._label).replace("ref",p._label).getRegex(),z.nolink=ie(z.nolink).replace("ref",p._label).getRegex(),z.reflinkSearch=ie(z.reflinkSearch,"g").replace("reflink",z.reflink).replace("nolink",z.nolink).getRegex(),z.normal=A({},z),z.pedantic=A({},z.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ie(/^!?\[(label)\]\((.*?)\)/).replace("label",z._label).getRegex(),reflink:ie(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",z._label).getRegex()}),z.gfm=A({},z.normal,{escape:ie(z.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),z.gfm.url=ie(z.gfm.url,"i").replace("email",z.gfm._extended_email).getRegex(),z.breaks=A({},z.gfm,{br:ie(z.br).replace("{2,}","*").getRegex(),text:ie(z.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});function Ce(Q){return Q.replace(/---/g,"â€”").replace(/--/g,"â€“").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1â€˜").replace(/'/g,"â€™").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1â€œ").replace(/"/g,"â€").replace(/\.{3}/g,"â€¦")}function xe(Q){var te="",m,g,b=Q.length;for(m=0;m<b;m++)g=Q.charCodeAt(m),Math.random()>.5&&(g="x"+g.toString(16)),te+="&#"+g+";";return te}var Fe=(function(){function Q(m){this.tokens=[],this.tokens.links=Object.create(null),this.options=m||D.defaults,this.options.tokenizer=this.options.tokenizer||new f,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};var g={block:p.normal,inline:z.normal};this.options.pedantic?(g.block=p.pedantic,g.inline=z.pedantic):this.options.gfm&&(g.block=p.gfm,this.options.breaks?g.inline=z.breaks:g.inline=z.gfm),this.tokenizer.rules=g}Q.lex=function(m,g){var b=new Q(g);return b.lex(m)},Q.lexInline=function(m,g){var b=new Q(g);return b.inlineTokens(m)};var te=Q.prototype;return te.lex=function(m){m=m.replace(/\r\n|\r/g,`
`),this.blockTokens(m,this.tokens);for(var g;g=this.inlineQueue.shift();)this.inlineTokens(g.src,g.tokens);return this.tokens},te.blockTokens=function(m,g){var b=this;g===void 0&&(g=[]),this.options.pedantic?m=m.replace(/\t/g,"    ").replace(/^ +$/gm,""):m=m.replace(/^( *)(\t+)/gm,function(N,ee,O){return ee+"    ".repeat(O.length)});for(var M,u,v,k;m;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(function(N){return(M=N.call({lexer:b},m,g))?(m=m.substring(M.raw.length),g.push(M),!0):!1}))){if(M=this.tokenizer.space(m)){m=m.substring(M.raw.length),M.raw.length===1&&g.length>0?g[g.length-1].raw+=`
`:g.push(M);continue}if(M=this.tokenizer.code(m)){m=m.substring(M.raw.length),u=g[g.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+M.raw,u.text+=`
`+M.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):g.push(M);continue}if(M=this.tokenizer.fences(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.heading(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.hr(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.blockquote(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.list(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.html(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.def(m)){m=m.substring(M.raw.length),u=g[g.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+M.raw,u.text+=`
`+M.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[M.tag]||(this.tokens.links[M.tag]={href:M.href,title:M.title});continue}if(M=this.tokenizer.table(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.lheading(m)){m=m.substring(M.raw.length),g.push(M);continue}if(v=m,this.options.extensions&&this.options.extensions.startBlock&&(function(){var N=1/0,ee=m.slice(1),O=void 0;b.options.extensions.startBlock.forEach(function(B){O=B.call({lexer:this},ee),typeof O=="number"&&O>=0&&(N=Math.min(N,O))}),N<1/0&&N>=0&&(v=m.substring(0,N+1))})(),this.state.top&&(M=this.tokenizer.paragraph(v))){u=g[g.length-1],k&&u.type==="paragraph"?(u.raw+=`
`+M.raw,u.text+=`
`+M.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):g.push(M),k=v.length!==m.length,m=m.substring(M.raw.length);continue}if(M=this.tokenizer.text(m)){m=m.substring(M.raw.length),u=g[g.length-1],u&&u.type==="text"?(u.raw+=`
`+M.raw,u.text+=`
`+M.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):g.push(M);continue}if(m){var E="Infinite loop on byte: "+m.charCodeAt(0);if(this.options.silent){console.error(E);break}else throw new Error(E)}}return this.state.top=!0,g},te.inline=function(m,g){return g===void 0&&(g=[]),this.inlineQueue.push({src:m,tokens:g}),g},te.inlineTokens=function(m,g){var b=this;g===void 0&&(g=[]);var M,u,v,k=m,E,N,ee;if(this.tokens.links){var O=Object.keys(this.tokens.links);if(O.length>0)for(;(E=this.tokenizer.rules.inline.reflinkSearch.exec(k))!=null;)O.includes(E[0].slice(E[0].lastIndexOf("[")+1,-1))&&(k=k.slice(0,E.index)+"["+Je("a",E[0].length-2)+"]"+k.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(E=this.tokenizer.rules.inline.blockSkip.exec(k))!=null;)k=k.slice(0,E.index)+"["+Je("a",E[0].length-2)+"]"+k.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(E=this.tokenizer.rules.inline.escapedEmSt.exec(k))!=null;)k=k.slice(0,E.index+E[0].length-2)+"++"+k.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;m;)if(N||(ee=""),N=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(function(H){return(M=H.call({lexer:b},m,g))?(m=m.substring(M.raw.length),g.push(M),!0):!1}))){if(M=this.tokenizer.escape(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.tag(m)){m=m.substring(M.raw.length),u=g[g.length-1],u&&M.type==="text"&&u.type==="text"?(u.raw+=M.raw,u.text+=M.text):g.push(M);continue}if(M=this.tokenizer.link(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.reflink(m,this.tokens.links)){m=m.substring(M.raw.length),u=g[g.length-1],u&&M.type==="text"&&u.type==="text"?(u.raw+=M.raw,u.text+=M.text):g.push(M);continue}if(M=this.tokenizer.emStrong(m,k,ee)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.codespan(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.br(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.del(m)){m=m.substring(M.raw.length),g.push(M);continue}if(M=this.tokenizer.autolink(m,xe)){m=m.substring(M.raw.length),g.push(M);continue}if(!this.state.inLink&&(M=this.tokenizer.url(m,xe))){m=m.substring(M.raw.length),g.push(M);continue}if(v=m,this.options.extensions&&this.options.extensions.startInline&&(function(){var H=1/0,se=m.slice(1),Ie=void 0;b.options.extensions.startInline.forEach(function(Ve){Ie=Ve.call({lexer:this},se),typeof Ie=="number"&&Ie>=0&&(H=Math.min(H,Ie))}),H<1/0&&H>=0&&(v=m.substring(0,H+1))})(),M=this.tokenizer.inlineText(v,Ce)){m=m.substring(M.raw.length),M.raw.slice(-1)!=="_"&&(ee=M.raw.slice(-1)),N=!0,u=g[g.length-1],u&&u.type==="text"?(u.raw+=M.raw,u.text+=M.text):g.push(M);continue}if(m){var B="Infinite loop on byte: "+m.charCodeAt(0);if(this.options.silent){console.error(B);break}else throw new Error(B)}}return g},c(Q,null,[{key:"rules",get:function(){return{block:p,inline:z}}}]),Q})(),Ue=(function(){function Q(m){this.options=m||D.defaults}var te=Q.prototype;return te.code=function(m,g,b){var M=(g||"").match(/\S*/)[0];if(this.options.highlight){var u=this.options.highlight(m,M);u!=null&&u!==m&&(b=!0,m=u)}return m=m.replace(/\n$/,"")+`
`,M?'<pre><code class="'+this.options.langPrefix+ye(M)+'">'+(b?m:ye(m,!0))+`</code></pre>
`:"<pre><code>"+(b?m:ye(m,!0))+`</code></pre>
`},te.blockquote=function(m){return`<blockquote>
`+m+`</blockquote>
`},te.html=function(m){return m},te.heading=function(m,g,b,M){if(this.options.headerIds){var u=this.options.headerPrefix+M.slug(b);return"<h"+g+' id="'+u+'">'+m+"</h"+g+`>
`}return"<h"+g+">"+m+"</h"+g+`>
`},te.hr=function(){return this.options.xhtml?`<hr/>
`:`<hr>
`},te.list=function(m,g,b){var M=g?"ol":"ul",u=g&&b!==1?' start="'+b+'"':"";return"<"+M+u+`>
`+m+"</"+M+`>
`},te.listitem=function(m){return"<li>"+m+`</li>
`},te.checkbox=function(m){return"<input "+(m?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},te.paragraph=function(m){return"<p>"+m+`</p>
`},te.table=function(m,g){return g&&(g="<tbody>"+g+"</tbody>"),`<table>
<thead>
`+m+`</thead>
`+g+`</table>
`},te.tablerow=function(m){return`<tr>
`+m+`</tr>
`},te.tablecell=function(m,g){var b=g.header?"th":"td",M=g.align?"<"+b+' align="'+g.align+'">':"<"+b+">";return M+m+("</"+b+`>
`)},te.strong=function(m){return"<strong>"+m+"</strong>"},te.em=function(m){return"<em>"+m+"</em>"},te.codespan=function(m){return"<code>"+m+"</code>"},te.br=function(){return this.options.xhtml?"<br/>":"<br>"},te.del=function(m){return"<del>"+m+"</del>"},te.link=function(m,g,b){if(m=le(this.options.sanitize,this.options.baseUrl,m),m===null)return b;var M='<a href="'+m+'"';return g&&(M+=' title="'+g+'"'),M+=">"+b+"</a>",M},te.image=function(m,g,b){if(m=le(this.options.sanitize,this.options.baseUrl,m),m===null)return b;var M='<img src="'+m+'" alt="'+b+'"';return g&&(M+=' title="'+g+'"'),M+=this.options.xhtml?"/>":">",M},te.text=function(m){return m},Q})(),qe=(function(){function Q(){}var te=Q.prototype;return te.strong=function(m){return m},te.em=function(m){return m},te.codespan=function(m){return m},te.del=function(m){return m},te.html=function(m){return m},te.text=function(m){return m},te.link=function(m,g,b){return""+b},te.image=function(m,g,b){return""+b},te.br=function(){return""},Q})(),nt=(function(){function Q(){this.seen={}}var te=Q.prototype;return te.serialize=function(m){return m.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},te.getNextSafeSlug=function(m,g){var b=m,M=0;if(this.seen.hasOwnProperty(b)){M=this.seen[m];do M++,b=m+"-"+M;while(this.seen.hasOwnProperty(b))}return g||(this.seen[m]=M,this.seen[b]=0),b},te.slug=function(m,g){g===void 0&&(g={});var b=this.serialize(m);return this.getNextSafeSlug(b,g.dryrun)},Q})(),Pe=(function(){function Q(m){this.options=m||D.defaults,this.options.renderer=this.options.renderer||new Ue,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new qe,this.slugger=new nt}Q.parse=function(m,g){var b=new Q(g);return b.parse(m)},Q.parseInline=function(m,g){var b=new Q(g);return b.parseInline(m)};var te=Q.prototype;return te.parse=function(m,g){g===void 0&&(g=!0);var b="",M,u,v,k,E,N,ee,O,B,H,se,Ie,Ve,_e,Te,ut,it,et,Qe,bt=m.length;for(M=0;M<bt;M++){if(H=m[M],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[H.type]&&(Qe=this.options.extensions.renderers[H.type].call({parser:this},H),Qe!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(H.type))){b+=Qe||"";continue}switch(H.type){case"space":continue;case"hr":{b+=this.renderer.hr();continue}case"heading":{b+=this.renderer.heading(this.parseInline(H.tokens),H.depth,K(this.parseInline(H.tokens,this.textRenderer)),this.slugger);continue}case"code":{b+=this.renderer.code(H.text,H.lang,H.escaped);continue}case"table":{for(O="",ee="",k=H.header.length,u=0;u<k;u++)ee+=this.renderer.tablecell(this.parseInline(H.header[u].tokens),{header:!0,align:H.align[u]});for(O+=this.renderer.tablerow(ee),B="",k=H.rows.length,u=0;u<k;u++){for(N=H.rows[u],ee="",E=N.length,v=0;v<E;v++)ee+=this.renderer.tablecell(this.parseInline(N[v].tokens),{header:!1,align:H.align[v]});B+=this.renderer.tablerow(ee)}b+=this.renderer.table(O,B);continue}case"blockquote":{B=this.parse(H.tokens),b+=this.renderer.blockquote(B);continue}case"list":{for(se=H.ordered,Ie=H.start,Ve=H.loose,k=H.items.length,B="",u=0;u<k;u++)Te=H.items[u],ut=Te.checked,it=Te.task,_e="",Te.task&&(et=this.renderer.checkbox(ut),Ve?Te.tokens.length>0&&Te.tokens[0].type==="paragraph"?(Te.tokens[0].text=et+" "+Te.tokens[0].text,Te.tokens[0].tokens&&Te.tokens[0].tokens.length>0&&Te.tokens[0].tokens[0].type==="text"&&(Te.tokens[0].tokens[0].text=et+" "+Te.tokens[0].tokens[0].text)):Te.tokens.unshift({type:"text",text:et}):_e+=et),_e+=this.parse(Te.tokens,Ve),B+=this.renderer.listitem(_e,it,ut);b+=this.renderer.list(B,se,Ie);continue}case"html":{b+=this.renderer.html(H.text);continue}case"paragraph":{b+=this.renderer.paragraph(this.parseInline(H.tokens));continue}case"text":{for(B=H.tokens?this.parseInline(H.tokens):H.text;M+1<bt&&m[M+1].type==="text";)H=m[++M],B+=`
`+(H.tokens?this.parseInline(H.tokens):H.text);b+=g?this.renderer.paragraph(B):B;continue}default:{var xt='Token with "'+H.type+'" type was not found.';if(this.options.silent){console.error(xt);return}else throw new Error(xt)}}}return b},te.parseInline=function(m,g){g=g||this.renderer;var b="",M,u,v,k=m.length;for(M=0;M<k;M++){if(u=m[M],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[u.type]&&(v=this.options.extensions.renderers[u.type].call({parser:this},u),v!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(u.type))){b+=v||"";continue}switch(u.type){case"escape":{b+=g.text(u.text);break}case"html":{b+=g.html(u.text);break}case"link":{b+=g.link(u.href,u.title,this.parseInline(u.tokens,g));break}case"image":{b+=g.image(u.href,u.title,u.text);break}case"strong":{b+=g.strong(this.parseInline(u.tokens,g));break}case"em":{b+=g.em(this.parseInline(u.tokens,g));break}case"codespan":{b+=g.codespan(u.text);break}case"br":{b+=g.br();break}case"del":{b+=g.del(this.parseInline(u.tokens,g));break}case"text":{b+=g.text(u.text);break}default:{var E='Token with "'+u.type+'" type was not found.';if(this.options.silent){console.error(E);return}else throw new Error(E)}}}return b},Q})(),Ze=(function(){function Q(m){this.options=m||D.defaults}var te=Q.prototype;return te.preprocess=function(m){return m},te.postprocess=function(m){return m},Q})();Ze.passThroughHooks=new Set(["preprocess","postprocess"]);function lt(Q,te,m){return function(g){if(g.message+=`
Please report this to https://github.com/markedjs/marked.`,Q){var b="<p>An error occurred:</p><pre>"+ye(g.message+"",!0)+"</pre>";if(te)return Promise.resolve(b);if(m){m(null,b);return}return b}if(te)return Promise.reject(g);if(m){m(g);return}throw g}}function Ge(Q,te){return function(m,g,b){typeof g=="function"&&(b=g,g=null);var M=A({},g);g=A({},He.defaults,M);var u=lt(g.silent,g.async,b);if(typeof m>"u"||m===null)return u(new Error("marked(): input parameter is undefined or null"));if(typeof m!="string")return u(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(m)+", string expected"));if(we(g),g.hooks&&(g.hooks.options=g),b){var v=g.highlight,k;try{g.hooks&&(m=g.hooks.preprocess(m)),k=Q(m,g)}catch(B){return u(B)}var E=function(B){var H;if(!B)try{g.walkTokens&&He.walkTokens(k,g.walkTokens),H=te(k,g),g.hooks&&(H=g.hooks.postprocess(H))}catch(se){B=se}return g.highlight=v,B?u(B):b(null,H)};if(!v||v.length<3||(delete g.highlight,!k.length))return E();var N=0;He.walkTokens(k,function(B){B.type==="code"&&(N++,setTimeout(function(){v(B.text,B.lang,function(H,se){if(H)return E(H);se!=null&&se!==B.text&&(B.text=se,B.escaped=!0),N--,N===0&&E()})},0))}),N===0&&E();return}if(g.async)return Promise.resolve(g.hooks?g.hooks.preprocess(m):m).then(function(B){return Q(B,g)}).then(function(B){return g.walkTokens?Promise.all(He.walkTokens(B,g.walkTokens)).then(function(){return B}):B}).then(function(B){return te(B,g)}).then(function(B){return g.hooks?g.hooks.postprocess(B):B}).catch(u);try{g.hooks&&(m=g.hooks.preprocess(m));var ee=Q(m,g);g.walkTokens&&He.walkTokens(ee,g.walkTokens);var O=te(ee,g);return g.hooks&&(O=g.hooks.postprocess(O)),O}catch(B){return u(B)}}}function He(Q,te,m){return Ge(Fe.lex,Pe.parse)(Q,te,m)}He.options=He.setOptions=function(Q){return He.defaults=A({},He.defaults,Q),X(He.defaults),He},He.getDefaults=$,He.defaults=D.defaults,He.use=function(){for(var Q=He.defaults.extensions||{renderers:{},childTokens:{}},te=arguments.length,m=new Array(te),g=0;g<te;g++)m[g]=arguments[g];m.forEach(function(b){var M=A({},b);if(M.async=He.defaults.async||M.async||!1,b.extensions&&(b.extensions.forEach(function(v){if(!v.name)throw new Error("extension name required");if(v.renderer){var k=Q.renderers[v.name];k?Q.renderers[v.name]=function(){for(var E=arguments.length,N=new Array(E),ee=0;ee<E;ee++)N[ee]=arguments[ee];var O=v.renderer.apply(this,N);return O===!1&&(O=k.apply(this,N)),O}:Q.renderers[v.name]=v.renderer}if(v.tokenizer){if(!v.level||v.level!=="block"&&v.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");Q[v.level]?Q[v.level].unshift(v.tokenizer):Q[v.level]=[v.tokenizer],v.start&&(v.level==="block"?Q.startBlock?Q.startBlock.push(v.start):Q.startBlock=[v.start]:v.level==="inline"&&(Q.startInline?Q.startInline.push(v.start):Q.startInline=[v.start]))}v.childTokens&&(Q.childTokens[v.name]=v.childTokens)}),M.extensions=Q),b.renderer&&(function(){var v=He.defaults.renderer||new Ue,k=function(N){var ee=v[N];v[N]=function(){for(var O=arguments.length,B=new Array(O),H=0;H<O;H++)B[H]=arguments[H];var se=b.renderer[N].apply(v,B);return se===!1&&(se=ee.apply(v,B)),se}};for(var E in b.renderer)k(E);M.renderer=v})(),b.tokenizer&&(function(){var v=He.defaults.tokenizer||new f,k=function(N){var ee=v[N];v[N]=function(){for(var O=arguments.length,B=new Array(O),H=0;H<O;H++)B[H]=arguments[H];var se=b.tokenizer[N].apply(v,B);return se===!1&&(se=ee.apply(v,B)),se}};for(var E in b.tokenizer)k(E);M.tokenizer=v})(),b.hooks&&(function(){var v=He.defaults.hooks||new Ze,k=function(N){var ee=v[N];Ze.passThroughHooks.has(N)?v[N]=function(O){if(He.defaults.async)return Promise.resolve(b.hooks[N].call(v,O)).then(function(H){return ee.call(v,H)});var B=b.hooks[N].call(v,O);return ee.call(v,B)}:v[N]=function(){for(var O=arguments.length,B=new Array(O),H=0;H<O;H++)B[H]=arguments[H];var se=b.hooks[N].apply(v,B);return se===!1&&(se=ee.apply(v,B)),se}};for(var E in b.hooks)k(E);M.hooks=v})(),b.walkTokens){var u=He.defaults.walkTokens;M.walkTokens=function(v){var k=[];return k.push(b.walkTokens.call(this,v)),u&&(k=k.concat(u.call(this,v))),k}}He.setOptions(M)})},He.walkTokens=function(Q,te){for(var m=[],g=function(){var u=M.value;switch(m=m.concat(te.call(He,u)),u.type){case"table":{for(var v=y(u.header),k;!(k=v()).done;){var E=k.value;m=m.concat(He.walkTokens(E.tokens,te))}for(var N=y(u.rows),ee;!(ee=N()).done;)for(var O=ee.value,B=y(O),H;!(H=B()).done;){var se=H.value;m=m.concat(He.walkTokens(se.tokens,te))}break}case"list":{m=m.concat(He.walkTokens(u.items,te));break}default:He.defaults.extensions&&He.defaults.extensions.childTokens&&He.defaults.extensions.childTokens[u.type]?He.defaults.extensions.childTokens[u.type].forEach(function(Ie){m=m.concat(He.walkTokens(u[Ie],te))}):u.tokens&&(m=m.concat(He.walkTokens(u.tokens,te)))}},b=y(Q),M;!(M=b()).done;)g();return m},He.parseInline=Ge(Fe.lexInline,Pe.parseInline),He.Parser=Pe,He.parser=Pe.parse,He.Renderer=Ue,He.TextRenderer=qe,He.Lexer=Fe,He.lexer=Fe.lex,He.Tokenizer=f,He.Slugger=nt,He.Hooks=Ze,He.parse=He;var yt=He.options,wt=He.setOptions,ct=He.use,_t=He.walkTokens,Oe=He.parseInline,Lt=He,rn=Pe.parse,bn=Fe.lex;D.Hooks=Ze,D.Lexer=Fe,D.Parser=Pe,D.Renderer=Ue,D.Slugger=nt,D.TextRenderer=qe,D.Tokenizer=f,D.getDefaults=$,D.lexer=bn,D.marked=He,D.options=yt,D.parse=Lt,D.parseInline=Oe,D.parser=rn,D.setOptions=wt,D.use=ct,D.walkTokens=_t})(Hs)),Hs}var io,Ps;function Bg(){if(Ps)return io;Ps=1;var D=dn();lg(),sg(),cg(),ru(),au(),vg(),bg(),Cg(),wg(),Sg(),iu();var S=Tg(),c=_g().marked,A=/Mac/.test(navigator.platform),x=new RegExp(/(<a.*?https?:\/\/.*?[^a]>)+?/g),w={toggleBold:K,toggleItalic:G,drawLink:Je,toggleHeadingSmaller:le,toggleHeadingBigger:be,drawImage:ne,toggleBlockquote:oe,toggleOrderedList:re,toggleUnorderedList:W,toggleCodeBlock:ue,togglePreview:qe,toggleStrikethrough:ie,toggleHeading1:Xe,toggleHeading2:Se,toggleHeading3:pe,toggleHeading4:De,toggleHeading5:ve,toggleHeading6:T,cleanBlock:we,drawTable:z,drawHorizontalRule:Ce,undo:xe,redo:Fe,toggleSideBySide:Ue,toggleFullScreen:Z},y={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",toggleHeading1:"Ctrl+Alt+1",toggleHeading2:"Ctrl+Alt+2",toggleHeading3:"Ctrl+Alt+3",toggleHeading4:"Ctrl+Alt+4",toggleHeading5:"Ctrl+Alt+5",toggleHeading6:"Ctrl+Alt+6",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},I=function(u){for(var v in w)if(w[v]===u)return v;return null},L=function(){var u=!1;return(function(v){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(v)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(v.substr(0,4)))&&(u=!0)})(navigator.userAgent||navigator.vendor||window.opera),u};function $(u){for(var v;(v=x.exec(u))!==null;){var k=v[0];if(k.indexOf("target=")===-1){var E=k.replace(/>$/,' target="_blank">');u=u.replace(k,E)}}return u}function X(u){for(var v=new DOMParser,k=v.parseFromString(u,"text/html"),E=k.getElementsByTagName("li"),N=0;N<E.length;N++)for(var ee=E[N],O=0;O<ee.children.length;O++){var B=ee.children[O];B instanceof HTMLInputElement&&B.type==="checkbox"&&(ee.style.marginLeft="-1.5em",ee.style.listStyleType="none")}return k.documentElement.innerHTML}function V(u){return A?u=u.replace("Ctrl","Cmd"):u=u.replace("Cmd","Ctrl"),u}function R(u,v,k,E){var N=he(u,!1,v,k,"button",E);N.classList.add("easymde-dropdown"),N.onclick=function(){N.focus()};var ee=document.createElement("div");ee.className="easymde-dropdown-content";for(var O=0;O<u.children.length;O++){var B=u.children[O],H;typeof B=="string"&&B in Lt?H=he(Lt[B],!0,v,k,"button",E):H=he(B,!0,v,k,"button",E),H.addEventListener("click",function(se){se.stopPropagation()},!1),ee.appendChild(H)}return N.appendChild(ee),N}function he(u,v,k,E,N,ee){u=u||{};var O=document.createElement(N);if(u.attributes)for(var B in u.attributes)Object.prototype.hasOwnProperty.call(u.attributes,B)&&O.setAttribute(B,u.attributes[B]);var H=ee.options.toolbarButtonClassPrefix?ee.options.toolbarButtonClassPrefix+"-":"";O.className=H+u.name,O.setAttribute("type",N),k=k??!0,u.text&&(O.innerText=u.text),u.name&&u.name in E&&(w[u.name]=u.action),u.title&&k&&(O.title=Me(u.title,u.action,E),A&&(O.title=O.title.replace("Ctrl","âŒ˜"),O.title=O.title.replace("Alt","âŒ¥"))),u.title&&O.setAttribute("aria-label",u.title),u.noDisable&&O.classList.add("no-disable"),u.noMobile&&O.classList.add("no-mobile");var se=[];typeof u.className<"u"&&(se=u.className.split(" "));for(var Ie=[],Ve=0;Ve<se.length;Ve++){var _e=se[Ve];_e.match(/^fa([srlb]|(-[\w-]*)|$)/)?Ie.push(_e):O.classList.add(_e)}if(O.tabIndex=-1,Ie.length>0){for(var Te=document.createElement("i"),ut=0;ut<Ie.length;ut++){var it=Ie[ut];Te.classList.add(it)}O.appendChild(Te)}return typeof u.icon<"u"&&(O.innerHTML=u.icon),u.action&&v&&(typeof u.action=="function"?O.onclick=function(et){et.preventDefault(),u.action(ee)}:typeof u.action=="string"&&(O.onclick=function(et){et.preventDefault(),window.open(u.action,"_blank")})),O}function fe(){var u=document.createElement("i");return u.className="separator",u.innerHTML="|",u}function Me(u,v,k){var E,N=u;return v&&(E=I(v),k[E]&&(N+=" ("+V(k[E])+")")),N}function ge(u,v){v=v||u.getCursor("start");var k=u.getTokenAt(v);if(!k.type)return{};for(var E=k.type.split(" "),N={},ee,O,B=0;B<E.length;B++)ee=E[B],ee==="strong"?N.bold=!0:ee==="variable-2"?(O=u.getLine(v.line),/^\s*\d+\.\s/.test(O)?N["ordered-list"]=!0:N["unordered-list"]=!0):ee==="atom"?N.quote=!0:ee==="em"?N.italic=!0:ee==="quote"?N.quote=!0:ee==="strikethrough"?N.strikethrough=!0:ee==="comment"?N.code=!0:ee==="link"&&!N.image?N.link=!0:ee==="image"?N.image=!0:ee.match(/^header(-[1-6])?$/)&&(N[ee.replace("header","heading")]=!0);return N}var ye="";function Z(u){var v=u.codemirror;v.setOption("fullScreen",!v.getOption("fullScreen")),v.getOption("fullScreen")?(ye=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=ye;var k=v.getWrapperElement(),E=k.nextSibling;if(E.classList.contains("editor-preview-active-side"))if(u.options.sideBySideFullscreen===!1){var N=k.parentNode;v.getOption("fullScreen")?N.classList.remove("sided--no-fullscreen"):N.classList.add("sided--no-fullscreen")}else Ue(u);if(u.options.onToggleFullScreen&&u.options.onToggleFullScreen(v.getOption("fullScreen")||!1),typeof u.options.maxHeight<"u"&&(v.getOption("fullScreen")?(v.getScrollerElement().style.removeProperty("height"),E.style.removeProperty("height")):(v.getScrollerElement().style.height=u.options.maxHeight,u.setPreviewMaxHeight())),u.toolbar_div.classList.toggle("fullscreen"),u.toolbarElements&&u.toolbarElements.fullscreen){var ee=u.toolbarElements.fullscreen;ee.classList.toggle("active")}}function K(u){Ge(u,"bold",u.options.blockStyles.bold)}function G(u){Ge(u,"italic",u.options.blockStyles.italic)}function ie(u){Ge(u,"strikethrough","~~")}function ue(u){var v=u.options.blockStyles.code;function k(qt){if(typeof qt!="object")throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof qt+": "+qt;return qt.styles&&qt.styles[2]&&qt.styles[2].indexOf("formatting-code-block")!==-1}function E(qt){return qt.state.base.base||qt.state.base}function N(qt,xn,fn,un,an){fn=fn||qt.getLineHandle(xn),un=un||qt.getTokenAt({line:xn,ch:1}),an=an||!!fn.text&&qt.getTokenAt({line:xn,ch:fn.text.length-1});var Gn=un.type?un.type.split(" "):[];return an&&E(an).indentedCode?"indented":Gn.indexOf("comment")===-1?!1:E(un).fencedChars||E(an).fencedChars||k(fn)?"fenced":"single"}function ee(qt,xn,fn,un){var an=xn.line+1,Gn=fn.line+1,mr=xn.line!==fn.line,di=un+`
`,pi=`
`+un;mr&&Gn++,mr&&fn.ch===0&&(pi=un+`
`,Gn--),nt(qt,!1,[di,pi]),qt.setSelection({line:an,ch:0},{line:Gn,ch:0})}var O=u.codemirror,B=O.getCursor("start"),H=O.getCursor("end"),se=O.getTokenAt({line:B.line,ch:B.ch||1}),Ie=O.getLineHandle(B.line),Ve=N(O,B.line,Ie,se),_e,Te,ut;if(Ve==="single"){var it=Ie.text.slice(0,B.ch).replace("`",""),et=Ie.text.slice(B.ch).replace("`","");O.replaceRange(it+et,{line:B.line,ch:0},{line:B.line,ch:99999999999999}),B.ch--,B!==H&&H.ch--,O.setSelection(B,H),O.focus()}else if(Ve==="fenced")if(B.line!==H.line||B.ch!==H.ch){for(_e=B.line;_e>=0&&(Ie=O.getLineHandle(_e),!k(Ie));_e--);var Qe=O.getTokenAt({line:_e,ch:1}),bt=E(Qe).fencedChars,xt,Wt,Ot,hn;k(O.getLineHandle(B.line))?(xt="",Wt=B.line):k(O.getLineHandle(B.line-1))?(xt="",Wt=B.line-1):(xt=bt+`
`,Wt=B.line),k(O.getLineHandle(H.line))?(Ot="",hn=H.line,H.ch===0&&(hn+=1)):H.ch!==0&&k(O.getLineHandle(H.line+1))?(Ot="",hn=H.line+1):(Ot=bt+`
`,hn=H.line+1),H.ch===0&&(hn-=1),O.operation(function(){O.replaceRange(Ot,{line:hn,ch:0},{line:hn+(Ot?0:1),ch:0}),O.replaceRange(xt,{line:Wt,ch:0},{line:Wt+(xt?0:1),ch:0})}),O.setSelection({line:Wt+(xt?1:0),ch:0},{line:hn+(xt?1:-1),ch:0}),O.focus()}else{var ui=B.line;if(k(O.getLineHandle(B.line))&&(N(O,B.line+1)==="fenced"?(_e=B.line,ui=B.line+1):(Te=B.line,ui=B.line-1)),_e===void 0)for(_e=ui;_e>=0&&(Ie=O.getLineHandle(_e),!k(Ie));_e--);if(Te===void 0)for(ut=O.lineCount(),Te=ui;Te<ut&&(Ie=O.getLineHandle(Te),!k(Ie));Te++);O.operation(function(){O.replaceRange("",{line:_e,ch:0},{line:_e+1,ch:0}),O.replaceRange("",{line:Te-1,ch:0},{line:Te,ch:0})}),O.focus()}else if(Ve==="indented"){if(B.line!==H.line||B.ch!==H.ch)_e=B.line,Te=H.line,H.ch===0&&Te--;else{for(_e=B.line;_e>=0;_e--)if(Ie=O.getLineHandle(_e),!Ie.text.match(/^\s*$/)&&N(O,_e,Ie)!=="indented"){_e+=1;break}for(ut=O.lineCount(),Te=B.line;Te<ut;Te++)if(Ie=O.getLineHandle(Te),!Ie.text.match(/^\s*$/)&&N(O,Te,Ie)!=="indented"){Te-=1;break}}var ci=O.getLineHandle(Te+1),fr=ci&&O.getTokenAt({line:Te+1,ch:ci.text.length-1}),Bi=fr&&E(fr).indentedCode;Bi&&O.replaceRange(`
`,{line:Te+1,ch:0});for(var zi=_e;zi<=Te;zi++)O.indentLine(zi,"subtract");O.focus()}else{var Ii=B.line===H.line&&B.ch===H.ch&&B.ch===0,ta=B.line!==H.line;Ii||ta?ee(O,B,H,v):nt(O,!1,["`","`"])}}function oe(u){Ze(u.codemirror,"quote")}function le(u){Pe(u.codemirror,"smaller")}function be(u){Pe(u.codemirror,"bigger")}function Xe(u){Pe(u.codemirror,void 0,1)}function Se(u){Pe(u.codemirror,void 0,2)}function pe(u){Pe(u.codemirror,void 0,3)}function De(u){Pe(u.codemirror,void 0,4)}function ve(u){Pe(u.codemirror,void 0,5)}function T(u){Pe(u.codemirror,void 0,6)}function W(u){var v=u.codemirror,k="*";["-","+","*"].includes(u.options.unorderedListStyle)&&(k=u.options.unorderedListStyle),Ze(v,"unordered-list",k)}function re(u){Ze(u.codemirror,"ordered-list")}function we(u){He(u.codemirror)}function Je(u){var v=u.options,k="https://";if(v.promptURLs){var E=prompt(v.promptTexts.link,k);if(!E)return!1;k=U(E)}lt(u,"link",v.insertTexts.link,k)}function ne(u){var v=u.options,k="https://";if(v.promptURLs){var E=prompt(v.promptTexts.image,k);if(!E)return!1;k=U(E)}lt(u,"image",v.insertTexts.image,k)}function U(u){return encodeURI(u).replace(/([\\()])/g,"\\$1")}function f(u){u.openBrowseFileWindow()}function p(u,v){var k=u.codemirror,E=ge(k),N=u.options,ee=v.substr(v.lastIndexOf("/")+1),O=ee.substring(ee.lastIndexOf(".")+1).replace(/\?.*$/,"").toLowerCase();if(["png","jpg","jpeg","gif","svg","apng","avif","webp"].includes(O))nt(k,E.image,N.insertTexts.uploadedImage,v);else{var B=N.insertTexts.link;B[0]="["+ee,nt(k,E.link,B,v)}u.updateStatusBar("upload-image",u.options.imageTexts.sbOnUploaded.replace("#image_name#",ee)),setTimeout(function(){u.updateStatusBar("upload-image",u.options.imageTexts.sbInit)},1e3)}function z(u){var v=u.codemirror,k=ge(v),E=u.options;nt(v,k.table,E.insertTexts.table)}function Ce(u){var v=u.codemirror,k=ge(v),E=u.options;nt(v,k.image,E.insertTexts.horizontalRule)}function xe(u){var v=u.codemirror;v.undo(),v.focus()}function Fe(u){var v=u.codemirror;v.redo(),v.focus()}function Ue(u){var v=u.codemirror,k=v.getWrapperElement(),E=k.nextSibling,N=u.toolbarElements&&u.toolbarElements["side-by-side"],ee=!1,O=k.parentNode;E.classList.contains("editor-preview-active-side")?(u.options.sideBySideFullscreen===!1&&O.classList.remove("sided--no-fullscreen"),E.classList.remove("editor-preview-active-side"),N&&N.classList.remove("active"),k.classList.remove("CodeMirror-sided")):(setTimeout(function(){v.getOption("fullScreen")||(u.options.sideBySideFullscreen===!1?O.classList.add("sided--no-fullscreen"):Z(u)),E.classList.add("editor-preview-active-side")},1),N&&N.classList.add("active"),k.classList.add("CodeMirror-sided"),ee=!0);var B=k.lastChild;if(B.classList.contains("editor-preview-active")){B.classList.remove("editor-preview-active");var H=u.toolbarElements.preview,se=u.toolbar_div;H.classList.remove("active"),se.classList.remove("disabled-for-preview")}var Ie=function(){var _e=u.options.previewRender(u.value(),E);_e!=null&&(E.innerHTML=_e)};if(v.sideBySideRenderingFunction||(v.sideBySideRenderingFunction=Ie),ee){var Ve=u.options.previewRender(u.value(),E);Ve!=null&&(E.innerHTML=Ve),v.on("update",v.sideBySideRenderingFunction)}else v.off("update",v.sideBySideRenderingFunction);v.refresh()}function qe(u){var v=u.codemirror,k=v.getWrapperElement(),E=u.toolbar_div,N=u.options.toolbar?u.toolbarElements.preview:!1,ee=k.lastChild,O=v.getWrapperElement().nextSibling;if(O.classList.contains("editor-preview-active-side")&&Ue(u),!ee||!ee.classList.contains("editor-preview-full")){if(ee=document.createElement("div"),ee.className="editor-preview-full",u.options.previewClass)if(Array.isArray(u.options.previewClass))for(var B=0;B<u.options.previewClass.length;B++)ee.classList.add(u.options.previewClass[B]);else typeof u.options.previewClass=="string"&&ee.classList.add(u.options.previewClass);k.appendChild(ee)}ee.classList.contains("editor-preview-active")?(ee.classList.remove("editor-preview-active"),N&&(N.classList.remove("active"),E.classList.remove("disabled-for-preview"))):(setTimeout(function(){ee.classList.add("editor-preview-active")},1),N&&(N.classList.add("active"),E.classList.add("disabled-for-preview")));var H=u.options.previewRender(u.value(),ee);H!==null&&(ee.innerHTML=H)}function nt(u,v,k,E){if(!u.getWrapperElement().lastChild.classList.contains("editor-preview-active")){var N,ee=k[0],O=k[1],B={},H={};Object.assign(B,u.getCursor("start")),Object.assign(H,u.getCursor("end")),E&&(ee=ee.replace("#url#",E),O=O.replace("#url#",E)),v?(N=u.getLine(B.line),ee=N.slice(0,B.ch),O=N.slice(B.ch),u.replaceRange(ee+O,{line:B.line,ch:0})):(N=u.getSelection(),u.replaceSelection(ee+N+O),B.ch+=ee.length,B!==H&&(H.ch+=ee.length)),u.setSelection(B,H),u.focus()}}function Pe(u,v,k){if(!u.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var E=u.getCursor("start"),N=u.getCursor("end"),ee=E.line;ee<=N.line;ee++)(function(O){var B=u.getLine(O),H=B.search(/[^#]/);v!==void 0?H<=0?v=="bigger"?B="###### "+B:B="# "+B:H==6&&v=="smaller"?B=B.substr(7):H==1&&v=="bigger"?B=B.substr(2):v=="bigger"?B=B.substr(1):B="#"+B:H<=0?B="#".repeat(k)+" "+B:H==k?B=B.substr(H+1):B="#".repeat(k)+" "+B.substr(H+1),u.replaceRange(B,{line:O,ch:0},{line:O,ch:99999999999999})})(ee);u.focus()}}function Ze(u,v,k){if(!u.getWrapperElement().lastChild.classList.contains("editor-preview-active")){for(var E=/^(\s*)(\*|-|\+|\d*\.)(\s+)/,N=/^\s*/,ee=ge(u),O=u.getCursor("start"),B=u.getCursor("end"),H={quote:/^(\s*)>\s+/,"unordered-list":E,"ordered-list":E},se=function(ut,it){var et={quote:">","unordered-list":k,"ordered-list":"%%i."};return et[ut].replace("%%i",it)},Ie=function(ut,it){var et={quote:">","unordered-list":"\\"+k,"ordered-list":"\\d+."},Qe=new RegExp(et[ut]);return it&&Qe.test(it)},Ve=function(ut,it,et){var Qe=E.exec(it),bt=se(ut,_e);return Qe!==null?(Ie(ut,Qe[2])&&(bt=""),it=Qe[1]+bt+Qe[3]+it.replace(N,"").replace(H[ut],"$1")):et==!1&&(it=bt+" "+it),it},_e=1,Te=O.line;Te<=B.line;Te++)(function(ut){var it=u.getLine(ut);ee[v]?it=it.replace(H[v],"$1"):(v=="unordered-list"&&(it=Ve("ordered-list",it,!0)),it=Ve(v,it,!1),_e+=1),u.replaceRange(it,{line:ut,ch:0},{line:ut,ch:99999999999999})})(Te);u.focus()}}function lt(u,v,k,E){if(!(!u.codemirror||u.isPreviewActive())){var N=u.codemirror,ee=ge(N),O=ee[v];if(!O){nt(N,O,k,E);return}var B=N.getCursor("start"),H=N.getCursor("end"),se=N.getLine(B.line),Ie=se.slice(0,B.ch),Ve=se.slice(B.ch);v=="link"?Ie=Ie.replace(/(.*)[^!]\[/,"$1"):v=="image"&&(Ie=Ie.replace(/(.*)!\[$/,"$1")),Ve=Ve.replace(/]\(.*?\)/,""),N.replaceRange(Ie+Ve,{line:B.line,ch:0},{line:B.line,ch:99999999999999}),B.ch-=k[0].length,B!==H&&(H.ch-=k[0].length),N.setSelection(B,H),N.focus()}}function Ge(u,v,k,E){if(!(!u.codemirror||u.isPreviewActive())){E=typeof E>"u"?k:E;var N=u.codemirror,ee=ge(N),O,B=k,H=E,se=N.getCursor("start"),Ie=N.getCursor("end");ee[v]?(O=N.getLine(se.line),B=O.slice(0,se.ch),H=O.slice(se.ch),v=="bold"?(B=B.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),H=H.replace(/(\*\*|__)/,"")):v=="italic"?(B=B.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),H=H.replace(/(\*|_)/,"")):v=="strikethrough"&&(B=B.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),H=H.replace(/(\*\*|~~)/,"")),N.replaceRange(B+H,{line:se.line,ch:0},{line:se.line,ch:99999999999999}),v=="bold"||v=="strikethrough"?(se.ch-=2,se!==Ie&&(Ie.ch-=2)):v=="italic"&&(se.ch-=1,se!==Ie&&(Ie.ch-=1))):(O=N.getSelection(),v=="bold"?(O=O.split("**").join(""),O=O.split("__").join("")):v=="italic"?(O=O.split("*").join(""),O=O.split("_").join("")):v=="strikethrough"&&(O=O.split("~~").join("")),N.replaceSelection(B+O+H),se.ch+=k.length,Ie.ch=se.ch+O.length),N.setSelection(se,Ie),N.focus()}}function He(u){if(!u.getWrapperElement().lastChild.classList.contains("editor-preview-active"))for(var v=u.getCursor("start"),k=u.getCursor("end"),E,N=v.line;N<=k.line;N++)E=u.getLine(N),E=E.replace(/^[ ]*([# ]+|\*|-|[> ]+|[0-9]+(.|\)))[ ]*/,""),u.replaceRange(E,{line:N,ch:0},{line:N,ch:99999999999999})}function yt(u,v){if(Math.abs(u)<1024)return""+u+v[0];var k=0;do u/=1024,++k;while(Math.abs(u)>=1024&&k<v.length);return""+u.toFixed(1)+v[k]}function wt(u,v){for(var k in v)Object.prototype.hasOwnProperty.call(v,k)&&(v[k]instanceof Array?u[k]=v[k].concat(u[k]instanceof Array?u[k]:[]):v[k]!==null&&typeof v[k]=="object"&&v[k].constructor===Object?u[k]=wt(u[k]||{},v[k]):u[k]=v[k]);return u}function ct(u){for(var v=1;v<arguments.length;v++)u=wt(u,arguments[v]);return u}function _t(u){var v=/[a-zA-Z0-9_\u00A0-\u02AF\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,k=u.match(v),E=0;if(k===null)return E;for(var N=0;N<k.length;N++)k[N].charCodeAt(0)>=19968?E+=k[N].length:E+=1;return E}var Oe={bold:"fa fa-bold",italic:"fa fa-italic",strikethrough:"fa fa-strikethrough",heading:"fa fa-header fa-heading","heading-smaller":"fa fa-header fa-heading header-smaller","heading-bigger":"fa fa-header fa-heading header-bigger","heading-1":"fa fa-header fa-heading header-1","heading-2":"fa fa-header fa-heading header-2","heading-3":"fa fa-header fa-heading header-3",code:"fa fa-code",quote:"fa fa-quote-left","ordered-list":"fa fa-list-ol","unordered-list":"fa fa-list-ul","clean-block":"fa fa-eraser",link:"fa fa-link",image:"fa fa-image","upload-image":"fa fa-image",table:"fa fa-table","horizontal-rule":"fa fa-minus",preview:"fa fa-eye","side-by-side":"fa fa-columns",fullscreen:"fa fa-arrows-alt",guide:"fa fa-question-circle",undo:"fa fa-undo",redo:"fa fa-repeat fa-redo"},Lt={bold:{name:"bold",action:K,className:Oe.bold,title:"Bold",default:!0},italic:{name:"italic",action:G,className:Oe.italic,title:"Italic",default:!0},strikethrough:{name:"strikethrough",action:ie,className:Oe.strikethrough,title:"Strikethrough"},heading:{name:"heading",action:le,className:Oe.heading,title:"Heading",default:!0},"heading-smaller":{name:"heading-smaller",action:le,className:Oe["heading-smaller"],title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:be,className:Oe["heading-bigger"],title:"Bigger Heading"},"heading-1":{name:"heading-1",action:Xe,className:Oe["heading-1"],title:"Big Heading"},"heading-2":{name:"heading-2",action:Se,className:Oe["heading-2"],title:"Medium Heading"},"heading-3":{name:"heading-3",action:pe,className:Oe["heading-3"],title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:ue,className:Oe.code,title:"Code"},quote:{name:"quote",action:oe,className:Oe.quote,title:"Quote",default:!0},"unordered-list":{name:"unordered-list",action:W,className:Oe["unordered-list"],title:"Generic List",default:!0},"ordered-list":{name:"ordered-list",action:re,className:Oe["ordered-list"],title:"Numbered List",default:!0},"clean-block":{name:"clean-block",action:we,className:Oe["clean-block"],title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:Je,className:Oe.link,title:"Create Link",default:!0},image:{name:"image",action:ne,className:Oe.image,title:"Insert Image",default:!0},"upload-image":{name:"upload-image",action:f,className:Oe["upload-image"],title:"Import an image"},table:{name:"table",action:z,className:Oe.table,title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:Ce,className:Oe["horizontal-rule"],title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:qe,className:Oe.preview,noDisable:!0,title:"Toggle Preview",default:!0},"side-by-side":{name:"side-by-side",action:Ue,className:Oe["side-by-side"],noDisable:!0,noMobile:!0,title:"Toggle Side by Side",default:!0},fullscreen:{name:"fullscreen",action:Z,className:Oe.fullscreen,noDisable:!0,noMobile:!0,title:"Toggle Fullscreen",default:!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://www.markdownguide.org/basic-syntax/",className:Oe.guide,noDisable:!0,title:"Markdown Guide",default:!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:xe,className:Oe.undo,noDisable:!0,title:"Undo"},redo:{name:"redo",action:Fe,className:Oe.redo,noDisable:!0,title:"Redo"}},rn={link:["[","](#url#)"],image:["![","](#url#)"],uploadedImage:["![](#url#)",""],table:["",`

| Column 1 | Column 2 | Column 3 |
| -------- | -------- | -------- |
| Text     | Text     | Text     |

`],horizontalRule:["",`

-----

`]},bn={link:"URL for the link:",image:"URL of the image:"},Q={locale:"en-US",format:{hour:"2-digit",minute:"2-digit"}},te={bold:"**",code:"```",italic:"*"},m={sbInit:"Attach files by drag and dropping or pasting from clipboard.",sbOnDragEnter:"Drop image to upload it.",sbOnDrop:"Uploading image #images_names#...",sbProgress:"Uploading #file_name#: #progress#%",sbOnUploaded:"Uploaded #image_name#",sizeUnits:" B, KB, MB"},g={noFileGiven:"You must select a file.",typeNotAllowed:"This image type is not allowed.",fileTooLarge:`Image #image_name# is too big (#image_size#).
Maximum file size is #image_max_size#.`,importError:"Something went wrong when uploading the image #image_name#."};function b(u){u=u||{},u.parent=this;var v=!0;if(u.autoDownloadFontAwesome===!1&&(v=!1),u.autoDownloadFontAwesome!==!0)for(var k=document.styleSheets,E=0;E<k.length;E++)k[E].href&&k[E].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(v=!1);if(v){var N=document.createElement("link");N.rel="stylesheet",N.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(N)}if(u.element)this.element=u.element;else if(u.element===null){console.log("EasyMDE: Error. No element was found.");return}if(u.toolbar===void 0){u.toolbar=[];for(var ee in Lt)Object.prototype.hasOwnProperty.call(Lt,ee)&&(ee.indexOf("separator-")!=-1&&u.toolbar.push("|"),(Lt[ee].default===!0||u.showIcons&&u.showIcons.constructor===Array&&u.showIcons.indexOf(ee)!=-1)&&u.toolbar.push(ee))}if(Object.prototype.hasOwnProperty.call(u,"previewClass")||(u.previewClass="editor-preview"),Object.prototype.hasOwnProperty.call(u,"status")||(u.status=["autosave","lines","words","cursor"],u.uploadImage&&u.status.unshift("upload-image")),u.previewRender||(u.previewRender=function(B){return this.parent.markdown(B)}),u.parsingConfig=ct({highlightFormatting:!0},u.parsingConfig||{}),u.insertTexts=ct({},rn,u.insertTexts||{}),u.promptTexts=ct({},bn,u.promptTexts||{}),u.blockStyles=ct({},te,u.blockStyles||{}),u.autosave!=null&&(u.autosave.timeFormat=ct({},Q,u.autosave.timeFormat||{})),u.iconClassMap=ct({},Oe,u.iconClassMap||{}),u.shortcuts=ct({},y,u.shortcuts||{}),u.maxHeight=u.maxHeight||void 0,u.direction=u.direction||"ltr",typeof u.maxHeight<"u"?u.minHeight=u.maxHeight:u.minHeight=u.minHeight||"300px",u.errorCallback=u.errorCallback||function(B){alert(B)},u.uploadImage=u.uploadImage||!1,u.imageMaxSize=u.imageMaxSize||2097152,u.imageAccept=u.imageAccept||"image/png, image/jpeg, image/gif, image/avif",u.imageTexts=ct({},m,u.imageTexts||{}),u.errorMessages=ct({},g,u.errorMessages||{}),u.imagePathAbsolute=u.imagePathAbsolute||!1,u.imageCSRFName=u.imageCSRFName||"csrfmiddlewaretoken",u.imageCSRFHeader=u.imageCSRFHeader||!1,u.imageInputName=u.imageInputName||"image",u.autosave!=null&&u.autosave.unique_id!=null&&u.autosave.unique_id!=""&&(u.autosave.uniqueId=u.autosave.unique_id),u.overlayMode&&u.overlayMode.combine===void 0&&(u.overlayMode.combine=!0),this.options=u,this.render(),u.initialValue&&(!this.options.autosave||this.options.autosave.foundSavedValue!==!0)&&this.value(u.initialValue),u.uploadImage){var O=this;this.codemirror.on("dragenter",function(B,H){O.updateStatusBar("upload-image",O.options.imageTexts.sbOnDragEnter),H.stopPropagation(),H.preventDefault()}),this.codemirror.on("dragend",function(B,H){O.updateStatusBar("upload-image",O.options.imageTexts.sbInit),H.stopPropagation(),H.preventDefault()}),this.codemirror.on("dragleave",function(B,H){O.updateStatusBar("upload-image",O.options.imageTexts.sbInit),H.stopPropagation(),H.preventDefault()}),this.codemirror.on("dragover",function(B,H){O.updateStatusBar("upload-image",O.options.imageTexts.sbOnDragEnter),H.stopPropagation(),H.preventDefault()}),this.codemirror.on("drop",function(B,H){H.stopPropagation(),H.preventDefault(),u.imageUploadFunction?O.uploadImagesUsingCustomFunction(u.imageUploadFunction,H.dataTransfer.files):O.uploadImages(H.dataTransfer.files)}),this.codemirror.on("paste",function(B,H){u.imageUploadFunction?O.uploadImagesUsingCustomFunction(u.imageUploadFunction,H.clipboardData.files):O.uploadImages(H.clipboardData.files)})}}b.prototype.uploadImages=function(u,v,k){if(u.length!==0){for(var E=[],N=0;N<u.length;N++)E.push(u[N].name),this.uploadImage(u[N],v,k);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",E.join(", ")))}},b.prototype.uploadImagesUsingCustomFunction=function(u,v){if(v.length!==0){for(var k=[],E=0;E<v.length;E++)k.push(v[E].name),this.uploadImageUsingCustomFunction(u,v[E]);this.updateStatusBar("upload-image",this.options.imageTexts.sbOnDrop.replace("#images_names#",k.join(", ")))}},b.prototype.updateStatusBar=function(u,v){if(this.gui.statusbar){var k=this.gui.statusbar.getElementsByClassName(u);k.length===1?this.gui.statusbar.getElementsByClassName(u)[0].textContent=v:k.length===0?console.log("EasyMDE: status bar item "+u+" was not found."):console.log("EasyMDE: Several status bar items named "+u+" was found.")}},b.prototype.markdown=function(u){if(c){var v;if(this.options&&this.options.renderingConfig&&this.options.renderingConfig.markedOptions?v=this.options.renderingConfig.markedOptions:v={},this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?v.breaks=!1:v.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0){var k=this.options.renderingConfig.hljs||window.hljs;k&&(v.highlight=function(N,ee){return ee&&k.getLanguage(ee)?k.highlight(ee,N).value:k.highlightAuto(N).value})}c.use(v);var E=c.parse(u);return this.options.renderingConfig&&typeof this.options.renderingConfig.sanitizerFunction=="function"&&(E=this.options.renderingConfig.sanitizerFunction.call(this,E)),E=$(E),E=X(E),E}},b.prototype.render=function(u){if(u||(u=this.element||document.getElementsByTagName("textarea")[0]),this._rendered&&this._rendered===u)return;this.element=u;var v=this.options,k=this,E={};for(var N in v.shortcuts)v.shortcuts[N]!==null&&w[N]!==null&&(function(et){E[V(v.shortcuts[et])]=function(){var Qe=w[et];typeof Qe=="function"?Qe(k):typeof Qe=="string"&&window.open(Qe,"_blank")}})(N);E.Enter="newlineAndIndentContinueMarkdownList",E.Tab="tabAndIndentMarkdownList",E["Shift-Tab"]="shiftTabAndUnindentMarkdownList",E.Esc=function(et){et.getOption("fullScreen")&&Z(k)},this.documentOnKeyDown=function(et){et=et||window.event,et.keyCode==27&&k.codemirror.getOption("fullScreen")&&Z(k)},document.addEventListener("keydown",this.documentOnKeyDown,!1);var ee,O;v.overlayMode?(D.defineMode("overlay-mode",function(et){return D.overlayMode(D.getMode(et,v.spellChecker!==!1?"spell-checker":"gfm"),v.overlayMode.mode,v.overlayMode.combine)}),ee="overlay-mode",O=v.parsingConfig,O.gitHubSpice=!1):(ee=v.parsingConfig,ee.name="gfm",ee.gitHubSpice=!1),v.spellChecker!==!1&&(ee="spell-checker",O=v.parsingConfig,O.name="gfm",O.gitHubSpice=!1,typeof v.spellChecker=="function"?v.spellChecker({codeMirrorInstance:D}):S({codeMirrorInstance:D}));function B(et,Qe,bt){return{addNew:!1}}if(this.codemirror=D.fromTextArea(u,{mode:ee,backdrop:O,theme:v.theme!=null?v.theme:"easymde",tabSize:v.tabSize!=null?v.tabSize:2,indentUnit:v.tabSize!=null?v.tabSize:2,indentWithTabs:v.indentWithTabs!==!1,lineNumbers:v.lineNumbers===!0,autofocus:v.autofocus===!0,extraKeys:E,direction:v.direction,lineWrapping:v.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:v.placeholder||u.getAttribute("placeholder")||"",styleSelectedText:v.styleSelectedText!=null?v.styleSelectedText:!L(),scrollbarStyle:v.scrollbarStyle!=null?v.scrollbarStyle:"native",configureMouse:B,inputStyle:v.inputStyle!=null?v.inputStyle:L()?"contenteditable":"textarea",spellcheck:v.nativeSpellcheck!=null?v.nativeSpellcheck:!0,autoRefresh:v.autoRefresh!=null?v.autoRefresh:!1}),this.codemirror.getScrollerElement().style.minHeight=v.minHeight,typeof v.maxHeight<"u"&&(this.codemirror.getScrollerElement().style.height=v.maxHeight),v.forceSync===!0){var H=this.codemirror;H.on("change",function(){H.save()})}this.gui={};var se=document.createElement("div");se.classList.add("EasyMDEContainer"),se.setAttribute("role","application");var Ie=this.codemirror.getWrapperElement();Ie.parentNode.insertBefore(se,Ie),se.appendChild(Ie),v.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),v.status!==!1&&(this.gui.statusbar=this.createStatusbar()),v.autosave!=null&&v.autosave.enabled===!0&&(this.autosave(),this.codemirror.on("change",function(){clearTimeout(k._autosave_timeout),k._autosave_timeout=setTimeout(function(){k.autosave()},k.options.autosave.submit_delay||k.options.autosave.delay||1e3)}));function Ve(et,Qe){var bt,xt=window.getComputedStyle(document.querySelector(".CodeMirror-sizer")).width.replace("px","");return et<xt?bt=Qe+"px":bt=Qe/et*100+"%",bt}var _e=this;function Te(et,Qe){var bt=new URL(Qe.url,document.baseURI).href;et.setAttribute("data-img-src",bt),et.setAttribute("style","--bg-image:url("+bt+");--width:"+Qe.naturalWidth+"px;--height:"+Ve(Qe.naturalWidth,Qe.naturalHeight)),_e.codemirror.setSize()}function ut(){v.previewImagesInEditor&&se.querySelectorAll(".cm-image-marker").forEach(function(et){var Qe=et.parentElement;if(Qe.innerText.match(/^!\[.*?\]\(.*\)/g)&&!Qe.hasAttribute("data-img-src")){var bt=Qe.innerText.match(/!\[.*?\]\((.*?)\)/);if(window.EMDEimagesCache||(window.EMDEimagesCache={}),bt&&bt.length>=2){var xt=bt[1];if(v.imagesPreviewHandler){var Wt=v.imagesPreviewHandler(bt[1]);typeof Wt=="string"&&(xt=Wt)}if(window.EMDEimagesCache[xt])Te(Qe,window.EMDEimagesCache[xt]);else{window.EMDEimagesCache[xt]={};var Ot=document.createElement("img");Ot.onload=function(){window.EMDEimagesCache[xt]={naturalWidth:Ot.naturalWidth,naturalHeight:Ot.naturalHeight,url:xt},Te(Qe,window.EMDEimagesCache[xt])},Ot.src=xt}}}})}this.codemirror.on("update",function(){ut()}),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element,(v.autofocus===!0||u.autofocus)&&this.codemirror.focus();var it=this.codemirror;setTimeout(function(){it.refresh()}.bind(it),0)},b.prototype.cleanup=function(){document.removeEventListener("keydown",this.documentOnKeyDown)};function M(){if(typeof localStorage=="object")try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch{return!1}else return!1;return!0}return b.prototype.autosave=function(){if(M()){var u=this;if(this.options.autosave.uniqueId==null||this.options.autosave.uniqueId==""){console.log("EasyMDE: You must set a uniqueId to use the autosave feature");return}this.options.autosave.binded!==!0&&(u.element.form!=null&&u.element.form!=null&&u.element.form.addEventListener("submit",function(){clearTimeout(u.autosaveTimeoutId),u.autosaveTimeoutId=void 0,localStorage.removeItem("smde_"+u.options.autosave.uniqueId)}),this.options.autosave.binded=!0),this.options.autosave.loaded!==!0&&(typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)=="string"&&localStorage.getItem("smde_"+this.options.autosave.uniqueId)!=""&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0);var v=u.value();v!==""?localStorage.setItem("smde_"+this.options.autosave.uniqueId,v):localStorage.removeItem("smde_"+this.options.autosave.uniqueId);var k=document.getElementById("autosaved");if(k!=null&&k!=null&&k!=""){var E=new Date,N=new Intl.DateTimeFormat([this.options.autosave.timeFormat.locale,"en-US"],this.options.autosave.timeFormat.format).format(E),ee=this.options.autosave.text==null?"Autosaved: ":this.options.autosave.text;k.innerHTML=ee+N}}else console.log("EasyMDE: localStorage not available, cannot autosave")},b.prototype.clearAutosavedValue=function(){if(M()){if(this.options.autosave==null||this.options.autosave.uniqueId==null||this.options.autosave.uniqueId==""){console.log("EasyMDE: You must set a uniqueId to clear the autosave value");return}localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("EasyMDE: localStorage not available, cannot autosave")},b.prototype.openBrowseFileWindow=function(u,v){var k=this,E=this.gui.toolbar.getElementsByClassName("imageInput")[0];E.click();function N(ee){k.options.imageUploadFunction?k.uploadImagesUsingCustomFunction(k.options.imageUploadFunction,ee.target.files):k.uploadImages(ee.target.files,u,v),E.removeEventListener("change",N)}E.addEventListener("change",N)},b.prototype.uploadImage=function(u,v,k){var E=this;v=v||function(H){p(E,H)};function N(H){E.updateStatusBar("upload-image",H),setTimeout(function(){E.updateStatusBar("upload-image",E.options.imageTexts.sbInit)},1e4),k&&typeof k=="function"&&k(H),E.options.errorCallback(H)}function ee(H){var se=E.options.imageTexts.sizeUnits.split(",");return H.replace("#image_name#",u.name).replace("#image_size#",yt(u.size,se)).replace("#image_max_size#",yt(E.options.imageMaxSize,se))}if(u.size>this.options.imageMaxSize){N(ee(this.options.errorMessages.fileTooLarge));return}var O=new FormData;O.append("image",u),E.options.imageCSRFToken&&!E.options.imageCSRFHeader&&O.append(E.options.imageCSRFName,E.options.imageCSRFToken);var B=new XMLHttpRequest;B.upload.onprogress=function(H){if(H.lengthComputable){var se=""+Math.round(H.loaded*100/H.total);E.updateStatusBar("upload-image",E.options.imageTexts.sbProgress.replace("#file_name#",u.name).replace("#progress#",se))}},B.open("POST",this.options.imageUploadEndpoint),E.options.imageCSRFToken&&E.options.imageCSRFHeader&&B.setRequestHeader(E.options.imageCSRFName,E.options.imageCSRFToken),B.onload=function(){try{var H=JSON.parse(this.responseText)}catch{console.error("EasyMDE: The server did not return a valid json."),N(ee(E.options.errorMessages.importError));return}this.status===200&&H&&!H.error&&H.data&&H.data.filePath?v((E.options.imagePathAbsolute?"":window.location.origin+"/")+H.data.filePath):H.error&&H.error in E.options.errorMessages?N(ee(E.options.errorMessages[H.error])):H.error?N(ee(H.error)):(console.error("EasyMDE: Received an unexpected response after uploading the image."+this.status+" ("+this.statusText+")"),N(ee(E.options.errorMessages.importError)))},B.onerror=function(H){console.error("EasyMDE: An unexpected error occurred when trying to upload the image."+H.target.status+" ("+H.target.statusText+")"),N(E.options.errorMessages.importError)},B.send(O)},b.prototype.uploadImageUsingCustomFunction=function(u,v){var k=this;function E(O){p(k,O)}function N(O){var B=ee(O);k.updateStatusBar("upload-image",B),setTimeout(function(){k.updateStatusBar("upload-image",k.options.imageTexts.sbInit)},1e4),k.options.errorCallback(B)}function ee(O){var B=k.options.imageTexts.sizeUnits.split(",");return O.replace("#image_name#",v.name).replace("#image_size#",yt(v.size,B)).replace("#image_max_size#",yt(k.options.imageMaxSize,B))}u.apply(this,[v,E,N])},b.prototype.setPreviewMaxHeight=function(){var u=this.codemirror,v=u.getWrapperElement(),k=v.nextSibling,E=parseInt(window.getComputedStyle(v).paddingTop),N=parseInt(window.getComputedStyle(v).borderTopWidth),ee=parseInt(this.options.maxHeight),O=ee+E*2+N*2,B=O.toString()+"px";k.style.height=B},b.prototype.createSideBySide=function(){var u=this.codemirror,v=u.getWrapperElement(),k=v.nextSibling;if(!k||!k.classList.contains("editor-preview-side")){if(k=document.createElement("div"),k.className="editor-preview-side",this.options.previewClass)if(Array.isArray(this.options.previewClass))for(var E=0;E<this.options.previewClass.length;E++)k.classList.add(this.options.previewClass[E]);else typeof this.options.previewClass=="string"&&k.classList.add(this.options.previewClass);v.parentNode.insertBefore(k,v.nextSibling)}if(typeof this.options.maxHeight<"u"&&this.setPreviewMaxHeight(),this.options.syncSideBySidePreviewScroll===!1)return k;var N=!1,ee=!1;return u.on("scroll",function(O){if(N){N=!1;return}ee=!0;var B=O.getScrollInfo().height-O.getScrollInfo().clientHeight,H=parseFloat(O.getScrollInfo().top)/B,se=(k.scrollHeight-k.clientHeight)*H;k.scrollTop=se}),k.onscroll=function(){if(ee){ee=!1;return}N=!0;var O=k.scrollHeight-k.clientHeight,B=parseFloat(k.scrollTop)/O,H=(u.getScrollInfo().height-u.getScrollInfo().clientHeight)*B;u.scrollTo(0,H)},k},b.prototype.createToolbar=function(u){if(u=u||this.options.toolbar,!(!u||u.length===0)){var v;for(v=0;v<u.length;v++)Lt[u[v]]!=null&&(u[v]=Lt[u[v]]);var k=document.createElement("div");k.className="editor-toolbar",k.setAttribute("role","toolbar");var E=this,N={};for(E.toolbar=u,v=0;v<u.length;v++)if(!(u[v].name=="guide"&&E.options.toolbarGuideIcon===!1)&&!(E.options.hideIcons&&E.options.hideIcons.indexOf(u[v].name)!=-1)&&!((u[v].name=="fullscreen"||u[v].name=="side-by-side")&&L())){if(u[v]==="|"){for(var ee=!1,O=v+1;O<u.length;O++)u[O]!=="|"&&(!E.options.hideIcons||E.options.hideIcons.indexOf(u[O].name)==-1)&&(ee=!0);if(!ee)continue}(function(se){var Ie;if(se==="|"?Ie=fe():se.children?Ie=R(se,E.options.toolbarTips,E.options.shortcuts,E):Ie=he(se,!0,E.options.toolbarTips,E.options.shortcuts,"button",E),N[se.name||se]=Ie,k.appendChild(Ie),se.name==="upload-image"){var Ve=document.createElement("input");Ve.className="imageInput",Ve.type="file",Ve.multiple=!0,Ve.name=E.options.imageInputName,Ve.accept=E.options.imageAccept,Ve.style.display="none",Ve.style.opacity=0,k.appendChild(Ve)}})(u[v])}E.toolbar_div=k,E.toolbarElements=N;var B=this.codemirror;B.on("cursorActivity",function(){var se=ge(B);for(var Ie in N)(function(Ve){var _e=N[Ve];se[Ve]?_e.classList.add("active"):Ve!="fullscreen"&&Ve!="side-by-side"&&_e.classList.remove("active")})(Ie)});var H=B.getWrapperElement();return H.parentNode.insertBefore(k,H),k}},b.prototype.createStatusbar=function(u){u=u||this.options.status;var v=this.options,k=this.codemirror;if(!(!u||u.length===0)){var E=[],N,ee,O,B;for(N=0;N<u.length;N++)if(ee=void 0,O=void 0,B=void 0,typeof u[N]=="object")E.push({className:u[N].className,defaultValue:u[N].defaultValue,onUpdate:u[N].onUpdate,onActivity:u[N].onActivity});else{var H=u[N];H==="words"?(B=function(Te){Te.innerHTML=_t(k.getValue())},ee=function(Te){Te.innerHTML=_t(k.getValue())}):H==="lines"?(B=function(Te){Te.innerHTML=k.lineCount()},ee=function(Te){Te.innerHTML=k.lineCount()}):H==="cursor"?(B=function(Te){Te.innerHTML="1:1"},O=function(Te){var ut=k.getCursor(),it=ut.line+1,et=ut.ch+1;Te.innerHTML=it+":"+et}):H==="autosave"?B=function(Te){v.autosave!=null&&v.autosave.enabled===!0&&Te.setAttribute("id","autosaved")}:H==="upload-image"&&(B=function(Te){Te.innerHTML=v.imageTexts.sbInit}),E.push({className:H,defaultValue:B,onUpdate:ee,onActivity:O})}var se=document.createElement("div");for(se.className="editor-statusbar",N=0;N<E.length;N++){var Ie=E[N],Ve=document.createElement("span");Ve.className=Ie.className,typeof Ie.defaultValue=="function"&&Ie.defaultValue(Ve),typeof Ie.onUpdate=="function"&&this.codemirror.on("update",(function(Te,ut){return function(){ut.onUpdate(Te)}})(Ve,Ie)),typeof Ie.onActivity=="function"&&this.codemirror.on("cursorActivity",(function(Te,ut){return function(){ut.onActivity(Te)}})(Ve,Ie)),se.appendChild(Ve)}var _e=this.codemirror.getWrapperElement();return _e.parentNode.insertBefore(se,_e.nextSibling),se}},b.prototype.value=function(u){var v=this.codemirror;if(u===void 0)return v.getValue();if(v.getDoc().setValue(u),this.isPreviewActive()){var k=v.getWrapperElement(),E=k.lastChild,N=this.options.previewRender(u,E);N!==null&&(E.innerHTML=N)}return this},b.toggleBold=K,b.toggleItalic=G,b.toggleStrikethrough=ie,b.toggleBlockquote=oe,b.toggleHeadingSmaller=le,b.toggleHeadingBigger=be,b.toggleHeading1=Xe,b.toggleHeading2=Se,b.toggleHeading3=pe,b.toggleHeading4=De,b.toggleHeading5=ve,b.toggleHeading6=T,b.toggleCodeBlock=ue,b.toggleUnorderedList=W,b.toggleOrderedList=re,b.cleanBlock=we,b.drawLink=Je,b.drawImage=ne,b.drawUploadedImage=f,b.drawTable=z,b.drawHorizontalRule=Ce,b.undo=xe,b.redo=Fe,b.togglePreview=qe,b.toggleSideBySide=Ue,b.toggleFullScreen=Z,b.prototype.toggleBold=function(){K(this)},b.prototype.toggleItalic=function(){G(this)},b.prototype.toggleStrikethrough=function(){ie(this)},b.prototype.toggleBlockquote=function(){oe(this)},b.prototype.toggleHeadingSmaller=function(){le(this)},b.prototype.toggleHeadingBigger=function(){be(this)},b.prototype.toggleHeading1=function(){Xe(this)},b.prototype.toggleHeading2=function(){Se(this)},b.prototype.toggleHeading3=function(){pe(this)},b.prototype.toggleHeading4=function(){De(this)},b.prototype.toggleHeading5=function(){ve(this)},b.prototype.toggleHeading6=function(){T(this)},b.prototype.toggleCodeBlock=function(){ue(this)},b.prototype.toggleUnorderedList=function(){W(this)},b.prototype.toggleOrderedList=function(){re(this)},b.prototype.cleanBlock=function(){we(this)},b.prototype.drawLink=function(){Je(this)},b.prototype.drawImage=function(){ne(this)},b.prototype.drawUploadedImage=function(){f(this)},b.prototype.drawTable=function(){z(this)},b.prototype.drawHorizontalRule=function(){Ce(this)},b.prototype.undo=function(){xe(this)},b.prototype.redo=function(){Fe(this)},b.prototype.togglePreview=function(){qe(this)},b.prototype.toggleSideBySide=function(){Ue(this)},b.prototype.toggleFullScreen=function(){Z(this)},b.prototype.isPreviewActive=function(){var u=this.codemirror,v=u.getWrapperElement(),k=v.lastChild;return k.classList.contains("editor-preview-active")},b.prototype.isSideBySideActive=function(){var u=this.codemirror,v=u.getWrapperElement(),k=v.nextSibling;return k.classList.contains("editor-preview-active-side")},b.prototype.isFullscreenActive=function(){var u=this.codemirror;return u.getOption("fullScreen")},b.prototype.getState=function(){var u=this.codemirror;return ge(u)},b.prototype.toTextArea=function(){var u=this.codemirror,v=u.getWrapperElement(),k=v.parentNode;k&&(this.gui.toolbar&&k.removeChild(this.gui.toolbar),this.gui.statusbar&&k.removeChild(this.gui.statusbar),this.gui.sideBySide&&k.removeChild(this.gui.sideBySide)),k.parentNode.insertBefore(v,k),k.remove(),u.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},io=b,io}var zg=Bg();const qn=kd(zg),Ig={key:0,class:"markdown-editor__label"},Ng={__name:"MarkdownEditor",props:{modelValue:{type:String,default:""},label:{type:String,default:""},placeholder:{type:String,default:""},minHeight:{type:String,default:"150px"}},emits:["update:modelValue"],setup(D,{emit:S}){const c=D,A=S,x=je(null),w=je(!1);let y=null,I=!1;const L=()=>{w.value=!0},$=X=>{const V=x.value;if(!V){w.value=!1;return}const R=X.relatedTarget;R&&V.contains(R)||(w.value=!1)};return si(()=>{const X=document.createElement("textarea");x.value.appendChild(X),x.value.addEventListener("focusin",L),x.value.addEventListener("focusout",$);const V={bold:"M13.5,15.5H10V12.5H13.5A1.5,1.5 0 0,1 15,14A1.5,1.5 0 0,1 13.5,15.5M10,6.5H13A1.5,1.5 0 0,1 14.5,8A1.5,1.5 0 0,1 13,9.5H10M15.6,10.79C16.57,10.11 17.25,9 17.25,8C17.25,5.74 15.5,4 13.25,4H7V18H14.04C16.14,18 17.75,16.3 17.75,14.21C17.75,12.69 16.89,11.39 15.6,10.79Z",italic:"M10,4V7H12.21L8.79,15H6V18H14V15H11.79L15.21,7H18V4H10Z",strikethrough:"M3,14H21V12H3M5,4V7H10V10H14V7H19V4M10,19H14V16H10V19Z",bulletList:"M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z",numberedList:"M7,13V11H21V13H7M7,19V17H21V19H7M7,7V5H21V7H7M3,8V5H2V4H4V8H3M2,17V16H5V20H2V19H4V18.5H3V17.5H4V17H2M4.25,10A0.75,0.75 0 0,1 5,10.75C5,10.95 4.92,11.14 4.79,11.27L3.12,13H5V14H2V13.08L4,11H2V10H4.25Z",link:"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",quote:"M14,17H17L19,13V7H13V13H16M6,17H9L11,13V7H5V13H8L6,17Z"};y=new qn({element:X,autoDownloadFontAwesome:!1,initialValue:c.modelValue,placeholder:c.placeholder,spellChecker:!1,status:!1,minHeight:c.minHeight,toolbar:[{name:"bold",action:qn.toggleBold,className:"mde-btn-bold",title:t("attendance","Bold")},{name:"italic",action:qn.toggleItalic,className:"mde-btn-italic",title:t("attendance","Italic")},{name:"strikethrough",action:qn.toggleStrikethrough,className:"mde-btn-strikethrough",title:t("attendance","Strikethrough")},"|",{name:"unordered-list",action:qn.toggleUnorderedList,className:"mde-btn-bullet",title:t("attendance","Bullet list")},{name:"ordered-list",action:qn.toggleOrderedList,className:"mde-btn-numbered",title:t("attendance","Numbered list")},{name:"quote",action:qn.toggleBlockquote,className:"mde-btn-quote",title:t("attendance","Quote")},"|",{name:"link",action:qn.drawLink,className:"mde-btn-link",title:t("attendance","Insert link")}],shortcuts:{toggleSideBySide:null,toggleFullScreen:null}});const R=(he,fe)=>{const Me=x.value.querySelector(`.${he}`);Me&&(Me.innerHTML=`<svg viewBox="0 0 24 24" width="20" height="20"><path fill="currentColor" d="${fe}"/></svg>`)};R("mde-btn-bold",V.bold),R("mde-btn-italic",V.italic),R("mde-btn-strikethrough",V.strikethrough),R("mde-btn-bullet",V.bulletList),R("mde-btn-numbered",V.numberedList),R("mde-btn-quote",V.quote),R("mde-btn-link",V.link),y.codemirror.on("change",()=>{I||A("update:modelValue",y.value())}),y.codemirror.on("focus",()=>{w.value=!0}),y.codemirror.on("blur",()=>{w.value=!1})}),Fn(()=>c.modelValue,X=>{if(y&&y.value()!==X){I=!0;const V=y.codemirror.getCursor();y.value(X||""),y.codemirror.setCursor(V),I=!1}}),wd(()=>{y&&(y.toTextArea(),y=null),x.value&&(x.value.removeEventListener("focusin",L),x.value.removeEventListener("focusout",$))}),(X,V)=>(_(),q("div",{class:Nt(["markdown-editor",{"markdown-editor--focused":w.value}])},[D.label?(_(),q("label",Ig,ae(D.label),1)):Le("",!0),J("div",{ref_key:"editorContainer",ref:x,class:"markdown-editor__container"},null,512)],2))}},Og={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Hg=["aria-hidden","aria-label"],Rg=["fill","width","height"],Pg={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},Vg={key:0};function Ug(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Pg,[c.title?(_(),q("title",Vg,ae(c.title),1)):Le("",!0)])],8,Rg))],16,Hg)}const ou=ot(Og,[["render",Ug]]),$g={name:"CalendarBlankOutlineIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},qg=["aria-hidden","aria-label"],jg=["fill","width","height"],Wg={d:"M19 3H18V1H16V3H8V1H6V3H5C3.89 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3M19 19H5V9H19V19M19 7H5V5H19V7Z"},Gg={key:0};function Yg(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon calendar-blank-outline-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Wg,[c.title?(_(),q("title",Gg,ae(c.title),1)):Le("",!0)])],8,jg))],16,qg)}const Vs=ot($g,[["render",Yg]]);function Xg(){const D=je([]),S=je([]),c=je(!1),A=je(!1),x=je(null);return{calendars:D,events:S,loadingCalendars:c,loadingEvents:A,error:x,loadCalendars:async()=>{c.value=!0,x.value=null;try{const w=dt("/apps/attendance/api/calendar/calendars"),y=await At.get(w);D.value=y.data||[]}catch(w){console.error("Failed to load calendars:",w),x.value=w,D.value=[],nn(St("attendance","Failed to load calendars"))}finally{c.value=!1}},loadEvents:async(w,y=60)=>{A.value=!0,x.value=null,S.value=[];try{const I=dt("/apps/attendance/api/calendar/events"),L=await At.get(I,{params:{calendarUri:w,days:y}});S.value=L.data.events||[]}catch(I){console.error("Failed to load calendar events:",I),x.value=I,S.value=[],nn(St("attendance","Failed to load calendar events"))}finally{A.value=!1}},clearEvents:()=>{S.value=[]},reset:()=>{D.value=[],S.value=[],c.value=!1,A.value=!1,x.value=null}}}const Zg={class:"calendar-event-picker"},Kg={class:"description"},Qg={key:0,class:"loading-container"},Jg={class:"loading-text"},e0={class:"section-label"},t0={class:"calendar-list"},n0=["onClick"],i0={class:"calendar-name"},r0={key:1,class:"empty-state"},a0={key:2,class:"empty-state"},o0={class:"back-navigation"},l0={class:"selected-calendar-name"},s0={key:0,class:"loading-container"},u0={class:"loading-text"},c0={class:"event-selection-header"},d0={class:"section-label"},p0={class:"event-list"},h0=["onClick"],f0={class:"event-info"},m0={class:"event-name"},g0={class:"event-date"},v0={key:1,class:"empty-state"},y0={key:2,class:"empty-state"},b0={key:3,class:"import-actions"},x0={__name:"CalendarEventPicker",props:{show:{type:Boolean,default:!1}},emits:["close","select"],setup(D,{emit:S}){const c=D,A=S,x=je(null),w=je(""),y=je(""),I=je([]),{calendars:L,events:$,loadingCalendars:X,loadingEvents:V,loadCalendars:R,loadEvents:he,clearEvents:fe,reset:Me}=Xg(),ge=ve=>{if(!ve)return ve;const T=St("calendar",ve);return T!==ve?T:ve},ye=vt(()=>L.value.length>5),Z=vt(()=>{if(!w.value.trim())return L.value;const ve=w.value.toLowerCase().trim();return L.value.filter(T=>ge(T.displayName)?.toLowerCase().includes(ve))}),K=vt(()=>$.value.length>5),G=vt(()=>{if(!y.value.trim())return $.value;const ve=y.value.toLowerCase().trim();return $.value.filter(T=>T.summary?.toLowerCase().includes(ve))}),ie=vt(()=>x.value?St("attendance","Select events"):St("attendance","Import from calendar")),ue=ve=>I.value.some(T=>T.uid===ve.uid),oe=ve=>{ue(ve)?I.value=I.value.filter(T=>T.uid!==ve.uid):I.value=[...I.value,ve]},le=vt(()=>G.value.length>0&&G.value.every(ve=>ue(ve))),be=()=>{if(le.value){const ve=new Set(G.value.map(T=>T.uid));I.value=I.value.filter(T=>!ve.has(T.uid))}else{const ve=new Set(I.value.map(W=>W.uid)),T=G.value.filter(W=>!ve.has(W.uid));I.value=[...I.value,...T]}};Fn(()=>c.show,async ve=>{ve&&(x.value=null,w.value="",I.value=[],Me(),await R())});const Xe=()=>{A("close")},Se=async ve=>{x.value=ve,y.value="",I.value=[],await he(ve.uri)},pe=()=>{x.value=null,I.value=[],fe()},De=()=>{const ve=I.value.map(T=>({name:T.summary||"",description:T.description||"",startDatetime:T.dtstart,endDatetime:T.dtend,calendarUri:x.value.uri,calendarEventUid:T.uri||T.uid}));A("select",ve),A("close")};return(ve,T)=>(_(),tt(Y(Kr),{open:D.show,name:ie.value,"onUpdate:open":Xe},{default:Ee(()=>[J("div",Zg,[J("p",Kg,ae(Y(St)("attendance","Select calendar events to import as appointments.")),1),x.value?(_(),q(Mt,{key:1},[J("div",o0,[de(Y(ft),{variant:"tertiary",onClick:pe},{icon:Ee(()=>[de(ho,{size:20})]),default:Ee(()=>[Ke(" "+ae(Y(St)("attendance","Back")),1)]),_:1}),J("span",l0,[J("span",{class:"calendar-color",style:ys({backgroundColor:x.value.color})},null,4),Ke(" "+ae(ge(x.value.displayName)),1)])]),Y(V)?(_(),q("div",s0,[de(Y(dr),{size:32}),J("span",u0,ae(Y(St)("attendance","Loading events â€¦")),1)])):Y($).length>0?(_(),q(Mt,{key:1},[J("div",c0,[J("label",d0,ae(Y(St)("attendance","Select events")),1),de(Y(ft),{variant:"tertiary",onClick:be},{default:Ee(()=>[Ke(ae(le.value?Y(St)("attendance","Deselect all"):Y(St)("attendance","Select all")),1)]),_:1})]),K.value?(_(),tt(Y(Xr),{key:0,modelValue:y.value,"onUpdate:modelValue":T[1]||(T[1]=W=>y.value=W),placeholder:Y(St)("attendance","Search events â€¦"),class:"calendar-search"},null,8,["modelValue","placeholder"])):Le("",!0),J("ul",p0,[(_(!0),q(Mt,null,sn(G.value,W=>(_(),q("li",{key:W.uid,class:Nt(["event-item",{"event-item--selected":ue(W)}]),onClick:re=>oe(W)},[de(Y(Gs),{"model-value":ue(W),class:"event-checkbox","onUpdate:modelValue":re=>oe(W),onClick:T[2]||(T[2]=pn(()=>{},["stop"]))},null,8,["model-value","onUpdate:modelValue"]),J("div",f0,[J("span",m0,ae(W.summary||Y(St)("attendance","Untitled event")),1),J("span",g0,ae(Y(Md)(W.dtstart,W.dtend)),1)])],10,h0))),128))]),K.value&&G.value.length===0?(_(),q("div",v0,[J("p",null,ae(Y(St)("attendance","No events match your search")),1)])):Le("",!0)],64)):(_(),q("div",y0,[de(Vs,{size:48,class:"empty-icon"}),J("p",null,ae(Y(St)("attendance","No upcoming events in this calendar")),1)])),I.value.length>0?(_(),q("div",b0,[de(Y(ft),{variant:"primary",onClick:De},{default:Ee(()=>[Ke(ae(Y(uo)("attendance","Import {count} event","Import {count} events",I.value.length,{count:I.value.length})),1)]),_:1})])):Le("",!0)],64)):(_(),q(Mt,{key:0},[Y(X)?(_(),q("div",Qg,[de(Y(dr),{size:32}),J("span",Jg,ae(Y(St)("attendance","Loading calendars â€¦")),1)])):Y(L).length>0?(_(),q(Mt,{key:1},[J("label",e0,ae(Y(St)("attendance","Select calendar")),1),ye.value?(_(),tt(Y(Xr),{key:0,modelValue:w.value,"onUpdate:modelValue":T[0]||(T[0]=W=>w.value=W),placeholder:Y(St)("attendance","Search calendars â€¦"),class:"calendar-search"},null,8,["modelValue","placeholder"])):Le("",!0),J("ul",t0,[(_(!0),q(Mt,null,sn(Z.value,W=>(_(),q("li",{key:W.uri,class:"calendar-item",onClick:re=>Se(W)},[J("span",{class:"calendar-color",style:ys({backgroundColor:W.color})},null,4),J("span",i0,ae(ge(W.displayName)),1),de(ou,{size:20,class:"calendar-arrow"})],8,n0))),128))]),ye.value&&Z.value.length===0?(_(),q("div",r0,[J("p",null,ae(Y(St)("attendance","No calendars match your search")),1)])):Le("",!0)],64)):(_(),q("div",a0,[de(Vs,{size:48,class:"empty-icon"}),J("p",null,ae(Y(St)("attendance","No calendars found")),1)]))],64))])]),_:1},8,["open","name"]))}},C0=ot(x0,[["__scopeId","data-v-1fb76fb4"]]),k0={name:"AccountIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},w0=["aria-hidden","aria-label"],D0=["fill","width","height"],S0={d:"M12,4A4,4 0 0,1 16,8A4,4 0 0,1 12,12A4,4 0 0,1 8,8A4,4 0 0,1 12,4M12,14C16.42,14 20,15.79 20,18V20H4V18C4,15.79 7.58,14 12,14Z"},A0={key:0};function F0(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon account-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",S0,[c.title?(_(),q("title",A0,ae(c.title),1)):Le("",!0)])],8,D0))],16,w0)}const Us=ot(k0,[["render",F0]]),L0={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},E0=["aria-hidden","aria-label"],M0=["fill","width","height"],T0={d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"},_0={key:0};function B0(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon plus-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",T0,[c.title?(_(),q("title",_0,ae(c.title),1)):Le("",!0)])],8,M0))],16,E0)}const lu=ot(L0,[["render",B0]]),z0={name:"CalendarImportIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},I0=["aria-hidden","aria-label"],N0=["fill","width","height"],O0={d:"M12 12L8 16H11V22H13V16H16M19 3H18V1H16V3H8V1H6V3H5C3.9 3 3 3.9 3 5V19C3 20.11 3.9 21 5 21H9V19H5V8H19V19H15V21H19C20.11 21 21 20.11 21 19V5C21 3.9 20.11 3 19 3Z"},H0={key:0};function R0(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon calendar-import-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",O0,[c.title?(_(),q("title",H0,ae(c.title),1)):Le("",!0)])],8,N0))],16,I0)}const P0=ot(z0,[["render",R0]]),V0={name:"CalendarSyncIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},U0=["aria-hidden","aria-label"],$0=["fill","width","height"],q0={d:"M18,11V12.5C21.19,12.5 23.09,16.05 21.33,18.71L20.24,17.62C21.06,15.96 19.85,14 18,14V15.5L15.75,13.25L18,11M18,22V20.5C14.81,20.5 12.91,16.95 14.67,14.29L15.76,15.38C14.94,17.04 16.15,19 18,19V17.5L20.25,19.75L18,22M19,3H18V1H16V3H8V1H6V3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H14C13.36,20.45 12.86,19.77 12.5,19H5V8H19V10.59C19.71,10.7 20.39,10.94 21,11.31V5A2,2 0 0,0 19,3Z"},j0={key:0};function W0(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon calendar-sync-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",q0,[c.title?(_(),q("title",j0,ae(c.title),1)):Le("",!0)])],8,$0))],16,U0)}const su=ot(V0,[["render",W0]]),G0={name:"LinkVariantIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Y0=["aria-hidden","aria-label"],X0=["fill","width","height"],Z0={d:"M10.59,13.41C11,13.8 11,14.44 10.59,14.83C10.2,15.22 9.56,15.22 9.17,14.83C7.22,12.88 7.22,9.71 9.17,7.76V7.76L12.71,4.22C14.66,2.27 17.83,2.27 19.78,4.22C21.73,6.17 21.73,9.34 19.78,11.29L18.29,12.78C18.3,11.96 18.17,11.14 17.89,10.36L18.36,9.88C19.54,8.71 19.54,6.81 18.36,5.64C17.19,4.46 15.29,4.46 14.12,5.64L10.59,9.17C9.41,10.34 9.41,12.24 10.59,13.41M13.41,9.17C13.8,8.78 14.44,8.78 14.83,9.17C16.78,11.12 16.78,14.29 14.83,16.24V16.24L11.29,19.78C9.34,21.73 6.17,21.73 4.22,19.78C2.27,17.83 2.27,14.66 4.22,12.71L5.71,11.22C5.7,12.04 5.83,12.86 6.11,13.65L5.64,14.12C4.46,15.29 4.46,17.19 5.64,18.36C6.81,19.54 8.71,19.54 9.88,18.36L13.41,14.83C14.59,13.66 14.59,11.76 13.41,10.59C13,10.2 13,9.56 13.41,9.17Z"},K0={key:0};function Q0(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon link-variant-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Z0,[c.title?(_(),q("title",K0,ae(c.title),1)):Le("",!0)])],8,X0))],16,Y0)}const J0=ot(G0,[["render",Q0]]),e1={class:"appointment-form-view","data-test":"appointment-form-view"},t1={class:"form-header"},n1={class:"header-actions"},i1={"data-test":"form-title"},r1={key:0,class:"loading-state"},a1={key:0,class:"form-section"},o1={class:"calendar-link-header"},l1=["href"],s1={class:"hint-text"},u1=["href"],c1={class:"form-section"},d1={class:"form-section"},p1={class:"datetime-fields"},h1={key:1,class:"form-section"},f1={class:"hint-text"},m1={class:"form-section"},g1={class:"hint-text"},v1={key:0,class:"attachment-list","data-test":"attachment-list"},y1={class:"form-section"},b1={class:"hint-text"},x1=["title"],C1=["title"],k1=["href"],w1={class:"form-actions"},D1={__name:"AppointmentForm",props:{mode:{type:String,required:!0,validator:D=>["create","edit","copy"].includes(D)},appointmentId:{type:Number,default:null},notificationsAppEnabled:{type:Boolean,default:!1},calendarAvailable:{type:Boolean,default:!1},calendarSyncEnabled:{type:Boolean,default:!1}},emits:["saved","cancelled"],setup(D,{emit:S}){const c=D,A=S,x=je(c.mode==="edit"||c.mode==="copy"),w=je(!1),y=Zr({name:"",description:"",startDatetime:"",endDatetime:"",visibleUsers:[],visibleGroups:[],visibleTeams:[]}),I=je([]),L=je([]),$=je(!1),X=je(!1),V=je([]),R=je([]),he=je([]),fe=je(!1),Me=je({calendarUri:null,calendarEventUid:null}),ge=vt(()=>{switch(c.mode){case"edit":return t("attendance","Edit appointment");case"copy":return t("attendance","Copy appointment");default:return t("attendance","Create appointment")}}),ye=vt(()=>y.visibleGroups.length===0&&y.visibleUsers.length===0&&y.visibleTeams.length===0||V.value.length===0&&R.value.length===0?!1:!!(y.visibleUsers.length>0||y.visibleTeams.length>0&&y.visibleTeams.some(f=>!R.value.includes(f))||y.visibleGroups.length>0&&y.visibleGroups.some(f=>!V.value.includes(f)))),Z=vt(()=>dt("/settings/admin/attendance")),K=vt(()=>dt("/settings/admin/attendance#calendar-sync")),G=vt(()=>Me.value.calendarUri&&Me.value.calendarEventUid),ie=f=>{switch(f){case"user":return t("attendance","User");case"group":return t("attendance","Group");case"team":return t("attendance","Team");default:return""}},ue=vt(()=>{if(!y.startDatetime)return null;const f=new Date(y.startDatetime);return isNaN(f.getTime())?null:f}),oe=vt(()=>{if(!y.endDatetime)return null;const f=new Date(y.endDatetime);return isNaN(f.getTime())?null:f});Fn(I,f=>{const p=Array.isArray(f)?f:f?[f]:[];y.visibleUsers=p.filter(z=>z&&z.type==="user").map(z=>z.value),y.visibleGroups=p.filter(z=>z&&z.type==="group").map(z=>z.value),y.visibleTeams=p.filter(z=>z&&z.type==="team").map(z=>z.value)});const le=f=>{if(!f)return"";const p=new Date(f);if(isNaN(p.getTime()))return"";const z=p.getFullYear(),Ce=String(p.getMonth()+1).padStart(2,"0"),xe=String(p.getDate()).padStart(2,"0"),Fe=String(p.getHours()).padStart(2,"0"),Ue=String(p.getMinutes()).padStart(2,"0");return`${z}-${Ce}-${xe}T${Fe}:${Ue}`},be=async()=>{if(c.appointmentId){x.value=!0;try{const f=(await At.get(dt(`/apps/attendance/api/appointments/${c.appointmentId}`))).data;y.name=c.mode==="copy"?`${f.name} (${t("attendance","Copy")})`:f.name,y.description=f.description||"",c.mode==="copy"?(y.startDatetime="",y.endDatetime=""):(y.startDatetime=le(f.startDatetime),y.endDatetime=le(f.endDatetime));const p=f.visibleUsers||[],z=f.visibleGroups||[],Ce=f.visibleTeams||[];y.visibleUsers=p.map(Fe=>Fe.id),y.visibleGroups=z.map(Fe=>Fe.id),y.visibleTeams=Ce.map(Fe=>Fe.id);const xe=[];for(const Fe of p)xe.push({id:`user:${Fe.id}`,value:Fe.id,label:Fe.label,type:"user"});for(const Fe of z)xe.push({id:`group:${Fe.id}`,value:Fe.id,label:Fe.label,type:"group"});for(const Fe of Ce)xe.push({id:`team:${Fe.id}`,value:Fe.id,label:Fe.label,type:"team"});L.value=[...xe],I.value=[...xe],he.value=(f.attachments||[]).map(Fe=>({fileId:Fe.fileId,fileName:Fe.fileName,filePath:Fe.filePath})),c.mode==="edit"&&f.calendarUri&&f.calendarEventUid&&(Me.value={calendarUri:f.calendarUri,calendarEventUid:f.calendarEventUid})}catch(f){console.error("Failed to load appointment:",f),nn(t("attendance","Error loading appointment"))}finally{x.value=!1}}},Xe=async()=>{try{const f=await At.get(dt("/apps/attendance/api/admin/settings"));f.data.success&&(f.data.whitelistedGroups&&(V.value=f.data.whitelistedGroups),f.data.whitelistedTeams&&(R.value=f.data.whitelistedTeams.map(p=>p.id)))}catch(f){console.debug("Could not load tracking groups:",f)}},Se=f=>{y.startDatetime=f?le(f.toISOString()):""},pe=()=>{if(y.startDatetime&&!y.endDatetime){const f=new Date(y.startDatetime);if(!isNaN(f.getTime())){const p=new Date(f.getTime()+9e6);y.endDatetime=le(p.toISOString())}}},De=f=>{y.endDatetime=f?le(f.toISOString()):""},ve=()=>{A("cancelled")},T=async f=>{if(!f||f.length<1){L.value=[...I.value];return}$.value=!0;try{const p=(await At.get(dt("/apps/attendance/api/search/users-groups-teams"),{params:{search:f}})).data.map(Ce=>({id:`${Ce.type}:${Ce.id}`,value:Ce.id,label:Ce.label,type:Ce.type})),z=[...I.value];for(const Ce of p)I.value.some(xe=>xe.id===Ce.id)||z.push(Ce);L.value=z}catch(p){console.error("Failed to search:",p),L.value=[...I.value]}finally{$.value=!1}},W=async()=>{try{await _d(t("attendance","Choose files to attach")).setMultiSelect(!0).allowDirectories(!0).addButton({label:t("attendance","Attach"),callback:async f=>{for(const p of f)await re(p)}}).build().pick()}catch(f){console.debug("File picker cancelled:",f)}},re=async f=>{if(he.value.some(z=>z.fileId===f.fileid))return;const p={fileId:f.fileid,fileName:f.basename,filePath:f.path};if(c.mode==="edit"&&c.appointmentId)try{const z=await At.post(dt(`/apps/attendance/api/appointments/${c.appointmentId}/attachments`),{fileId:f.fileid});he.value.push(z.data),An(t("attendance","Attachment added"))}catch(z){console.error("Failed to add attachment:",z),nn(t("attendance","Failed to add attachment"))}else he.value.push(p)},we=async f=>{if(c.mode==="edit"&&c.appointmentId)try{await At.delete(dt(`/apps/attendance/api/appointments/${c.appointmentId}/attachments/${f}`)),he.value=he.value.filter(p=>p.fileId!==f),An(t("attendance","Attachment removed"))}catch(p){console.error("Failed to remove attachment:",p),nn(t("attendance","Failed to remove attachment"))}else he.value=he.value.filter(p=>p.fileId!==f)},Je=f=>f&&new Date(f).toISOString(),ne=async f=>{if(!(!Array.isArray(f)||f.length===0)){if(f.length===1){const p=f[0];y.name=p.name,y.description=p.description,y.startDatetime=le(p.startDatetime),y.endDatetime=le(p.endDatetime),Me.value={calendarUri:p.calendarUri,calendarEventUid:p.calendarEventUid};return}w.value=!0;try{const p=f.map(z=>({name:z.name,description:z.description,startDatetime:Je(z.startDatetime),endDatetime:Je(z.endDatetime),calendarUri:z.calendarUri,calendarEventUid:z.calendarEventUid}));await At.post(dt("/apps/attendance/api/appointments/bulk"),{events:p}),An(uo("attendance","{count} appointment imported","{count} appointments imported",f.length,{count:f.length})),A("saved")}catch(p){console.error("Failed to bulk import appointments:",p),nn(t("attendance","Error importing appointments"))}finally{w.value=!1}}},U=async()=>{if(!y.name?.trim()){nn(t("attendance","Please enter an appointment name"));return}if(!y.startDatetime){nn(t("attendance","Please select a start date and time"));return}if(!y.endDatetime){nn(t("attendance","Please select an end date and time"));return}w.value=!0;try{const f=Je(y.startDatetime),p=Je(y.endDatetime);let z=c.appointmentId;if(c.mode==="edit")await At.put(dt(`/apps/attendance/api/appointments/${c.appointmentId}`),{name:y.name,description:y.description,startDatetime:f,endDatetime:p,visibleUsers:y.visibleUsers||[],visibleGroups:y.visibleGroups||[],visibleTeams:y.visibleTeams||[]}),An(t("attendance","Appointment updated"));else{if(z=(await At.post(dt("/apps/attendance/api/appointments"),{name:y.name,description:y.description,startDatetime:f,endDatetime:p,visibleUsers:y.visibleUsers||[],visibleGroups:y.visibleGroups||[],visibleTeams:y.visibleTeams||[],sendNotification:X.value,calendarUri:Me.value.calendarUri,calendarEventUid:Me.value.calendarEventUid})).data?.id,z&&he.value.length>0)for(const Ce of he.value)try{await At.post(dt(`/apps/attendance/api/appointments/${z}/attachments`),{fileId:Ce.fileId})}catch(xe){console.error("Failed to add attachment:",xe)}An(t("attendance","Appointment created"))}A("saved",z)}catch(f){console.error("Failed to save appointment:",f),nn(c.mode==="edit"?t("attendance","Error updating appointment"):t("attendance","Error creating appointment"))}finally{w.value=!1}};return si(async()=>{await Xe(),(c.mode==="edit"||c.mode==="copy")&&await be()}),(f,p)=>(_(),q("div",e1,[J("div",t1,[J("div",n1,[de(Y(ft),{variant:"tertiary","data-test":"button-back",onClick:ve},{icon:Ee(()=>[de(ho,{size:20})]),default:Ee(()=>[Ke(" "+ae(f.t("attendance","Back")),1)]),_:1}),D.mode==="create"&&c.calendarAvailable?(_(),tt(Y(ft),{key:0,variant:"tertiary","data-test":"button-import-calendar",onClick:p[0]||(p[0]=z=>fe.value=!0)},{icon:Ee(()=>[de(P0,{size:20})]),default:Ee(()=>[Ke(" "+ae(f.t("attendance","Import from calendar")),1)]),_:1})):Le("",!0)]),J("h2",i1,ae(ge.value),1)]),x.value?(_(),q("div",r1,ae(f.t("attendance","LoadingÂ â€¦")),1)):(_(),q("form",{key:1,class:"appointment-form","data-test":"appointment-form",onSubmit:pn(U,["prevent"])},[G.value&&D.mode!=="copy"?(_(),q("div",a1,[J("div",o1,[de(J0,{size:20}),J("h3",null,ae(f.t("attendance","Linked to calendar")),1),J("a",{href:K.value,target:"_blank",class:"auto-sync-chip-link"},[c.calendarSyncEnabled?(_(),tt(Y(ht),{key:0,type:"success",text:f.t("attendance","Auto-sync enabled"),"no-close":""},{icon:Ee(()=>[de(su,{size:16})]),_:1},8,["text"])):Le("",!0)],8,l1)]),J("p",s1,[Ke(ae(f.t("attendance","This appointment is linked to a calendar event."))+" ",1),c.calendarSyncEnabled?(_(),q(Mt,{key:0},[Ke(ae(f.t("attendance","Changes to the calendar event will automatically overwrite title, description, and date/time of this appointment.")),1)],64)):(_(),q(Mt,{key:1},[Ke(ae(f.t("attendance","Changes to the calendar event will not be synced."))+" ",1),J("a",{href:K.value,target:"_blank"},ae(f.t("attendance","Enable auto-sync")),9,u1)],64))])])):Le("",!0),J("div",c1,[de(Y(Xr),{modelValue:y.name,"onUpdate:modelValue":p[1]||(p[1]=z=>y.name=z),label:f.t("attendance","Appointment name"),"data-test":"input-appointment-name"},null,8,["modelValue","label"]),de(Ng,{modelValue:y.description,"onUpdate:modelValue":p[2]||(p[2]=z=>y.description=z),label:f.t("attendance","Description"),placeholder:f.t("attendance","Write your description hereÂ â€¦"),"data-test":"input-appointment-description","min-height":"150px"},null,8,["modelValue","label","placeholder"])]),J("div",d1,[J("h3",null,ae(f.t("attendance","Date & Time")),1),J("div",p1,[de(Y(bs),{id:"start-datetime","model-value":ue.value,type:"datetime-local",label:f.t("attendance","Start date & time"),"data-test":"input-start-datetime","onUpdate:modelValue":Se,onBlur:pe},null,8,["model-value","label"]),de(Y(bs),{id:"end-datetime","model-value":oe.value,type:"datetime-local",label:f.t("attendance","End date & time"),"data-test":"input-end-datetime","onUpdate:modelValue":De},null,8,["model-value","label"])])]),D.notificationsAppEnabled&&D.mode==="create"?(_(),q("div",h1,[J("h3",null,ae(f.t("attendance","Notification")),1),J("p",f1,ae(f.t("attendance","Notify users who can see this appointment about its creation")),1),de(Y(Gs),{modelValue:X.value,"onUpdate:modelValue":p[3]||(p[3]=z=>X.value=z),"data-test":"checkbox-send-notification"},{default:Ee(()=>[Ke(ae(f.t("attendance","Send notification")),1)]),_:1},8,["modelValue"])])):Le("",!0),J("div",m1,[J("h3",null,ae(f.t("attendance","Attachments")),1),J("p",g1,ae(f.t("attendance","Files that are important for this appointment can be selected here.")),1),he.value.length>0?(_(),q("div",v1,[(_(!0),q(Mt,null,sn(he.value,z=>(_(),tt(Y(ht),{key:z.fileId,text:z.fileName,"data-test":`attachment-chip-${z.fileId}`,onClose:Ce=>we(z.fileId)},{icon:Ee(()=>[de(tu,{size:16})]),_:1},8,["text","data-test","onClose"]))),128))])):Le("",!0),de(Y(ft),{variant:"secondary","native-type":"button","data-test":"button-add-attachment",onClick:pn(W,["stop","prevent"])},{icon:Ee(()=>[de(lu,{size:20})]),default:Ee(()=>[Ke(" "+ae(f.t("attendance","Add from Files")),1)]),_:1})]),J("div",y1,[J("h3",null,ae(f.t("attendance","Restrict access")),1),J("p",b1,ae(f.t("attendance","Limits who can see this appointment. Leave empty for all users.")),1),de(Y(Ws),{modelValue:I.value,"onUpdate:modelValue":p[4]||(p[4]=z=>I.value=z),options:L.value,loading:$.value,multiple:!0,"close-on-select":!1,filterable:!1,label:"label",placeholder:f.t("attendance","Search users, groups or teamsÂ â€¦"),"data-test":"select-visibility",onSearch:T},{option:Ee(({label:z,type:Ce})=>[J("span",{style:{display:"flex","align-items":"center",gap:"8px"},title:ie(Ce)},[Ce==="team"?(_(),tt(oo,{key:0,size:20})):Ce==="group"?(_(),tt(ao,{key:1,size:20})):(_(),tt(Us,{key:2,size:20})),J("span",null,ae(z),1)],8,x1)]),"selected-option":Ee(({label:z,type:Ce})=>[J("span",{style:{display:"flex","align-items":"center",gap:"8px"},title:ie(Ce)},[Ce==="team"?(_(),tt(oo,{key:0,size:16})):Ce==="group"?(_(),tt(ao,{key:1,size:16})):(_(),tt(Us,{key:2,size:16})),J("span",null,ae(z),1)],8,C1)]),_:1},8,["modelValue","options","loading","placeholder"]),ye.value?(_(),tt(Y(Qs),{key:0,type:"warning",class:"visibility-warning"},{default:Ee(()=>[Ke(ae(f.t("attendance",'Some users may appear in the section "Others" in the response summary because they are not configured for tracking.'))+" ",1),J("a",{href:Z.value,target:"_blank"},ae(f.t("attendance","Configure in administration settings")),9,k1)]),_:1})):Le("",!0)]),J("div",w1,[de(Y(ft),{variant:"secondary","data-test":"button-cancel",onClick:ve},{default:Ee(()=>[Ke(ae(f.t("attendance","Cancel")),1)]),_:1}),de(Y(ft),{variant:"primary",disabled:w.value,"data-test":"button-save",onClick:U},Dd({default:Ee(()=>[Ke(" "+ae(f.t("attendance","Save")),1)]),_:2},[w.value?{name:"icon",fn:Ee(()=>[de(Y(dr),{size:20})]),key:"0"}:void 0]),1032,["disabled"])])],32)),de(C0,{show:fe.value,onClose:p[5]||(p[5]=z=>fe.value=!1),onSelect:ne},null,8,["show"])]))}},S1=ot(D1,[["__scopeId","data-v-98d1f270"]]),A1={name:"RefreshIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},F1=["aria-hidden","aria-label"],L1=["fill","width","height"],E1={d:"M17.65,6.35C16.2,4.9 14.21,4 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20C15.73,20 18.84,17.45 19.73,14H17.65C16.83,16.33 14.61,18 12,18A6,6 0 0,1 6,12A6,6 0 0,1 12,6C13.66,6 15.14,6.69 16.22,7.78L13,11H20V4L17.65,6.35Z"},M1={key:0};function T1(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon refresh-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",E1,[c.title?(_(),q("title",M1,ae(c.title),1)):Le("",!0)])],8,L1))],16,F1)}const _1=ot(A1,[["render",T1]]),B1={name:"GoogleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},z1=["aria-hidden","aria-label"],I1=["fill","width","height"],N1={d:"M21.35,11.1H12.18V13.83H18.69C18.36,17.64 15.19,19.27 12.19,19.27C8.36,19.27 5,16.25 5,12C5,7.9 8.2,4.73 12.2,4.73C15.29,4.73 17.1,6.7 17.1,6.7L19,4.72C19,4.72 16.56,2 12.1,2C6.42,2 2.03,6.8 2.03,12C2.03,17.05 6.16,22 12.25,22C17.6,22 21.5,18.33 21.5,12.91C21.5,11.76 21.35,11.1 21.35,11.1V11.1Z"},O1={key:0};function H1(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon google-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",N1,[c.title?(_(),q("title",O1,ae(c.title),1)):Le("",!0)])],8,I1))],16,z1)}const R1=ot(B1,[["render",H1]]),P1={name:"AppleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},V1=["aria-hidden","aria-label"],U1=["fill","width","height"],$1={d:"M18.71,19.5C17.88,20.74 17,21.95 15.66,21.97C14.32,22 13.89,21.18 12.37,21.18C10.84,21.18 10.37,21.95 9.1,22C7.79,22.05 6.8,20.68 5.96,19.47C4.25,17 2.94,12.45 4.7,9.39C5.57,7.87 7.13,6.91 8.82,6.88C10.1,6.86 11.32,7.75 12.11,7.75C12.89,7.75 14.37,6.68 15.92,6.84C16.57,6.87 18.39,7.1 19.56,8.82C19.47,8.88 17.39,10.1 17.41,12.63C17.44,15.65 20.06,16.66 20.09,16.67C20.06,16.74 19.67,18.11 18.71,19.5M13,3.5C13.73,2.67 14.94,2.04 15.94,2C16.07,3.17 15.6,4.35 14.9,5.19C14.21,6.04 13.07,6.7 11.95,6.61C11.8,5.46 12.36,4.26 13,3.5Z"},q1={key:0};function j1(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon apple-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",$1,[c.title?(_(),q("title",q1,ae(c.title),1)):Le("",!0)])],8,U1))],16,V1)}const W1=ot(P1,[["render",j1]]);function G1(){const D=je(""),S=je(null),c=je(null),A=je(!0),x=je(null);return{feedUrl:D,createdAt:S,lastUsedAt:c,loading:A,error:x,loadToken:async()=>{A.value=!0,x.value=null;try{const w=dt("/apps/attendance/api/ical/token"),y=await At.get(w);D.value=y.data.feedUrl||"",S.value=y.data.createdAt||null,c.value=y.data.lastUsedAt||null}catch(w){console.error("Failed to load iCal token:",w),x.value=w,D.value="",S.value=null,c.value=null}finally{A.value=!1}},regenerateToken:async()=>{A.value=!0,x.value=null;try{const w=dt("/apps/attendance/api/ical/token/regenerate"),y=await At.post(w);D.value=y.data.feedUrl||"",S.value=y.data.createdAt||null,c.value=y.data.lastUsedAt||null,An(St("attendance","Subscription URL regenerated"))}catch(w){console.error("Failed to regenerate iCal token:",w),x.value=w,nn(St("attendance","Failed to regenerate subscription URL"))}finally{A.value=!1}},copyToClipboard:async()=>{if(D.value)try{await navigator.clipboard.writeText(D.value),An(St("attendance","URL copied to clipboard"))}catch(w){console.error("Failed to copy to clipboard:",w),nn(St("attendance","Failed to copy URL"))}}}}const Y1={class:"ical-feed-modal"},X1={class:"description"},Z1={key:0,class:"loading-container"},K1={class:"feed-url-section"},Q1={class:"feed-url-label"},J1={class:"feed-url-display","data-test":"input-ical-feed-url"},ev={class:"quick-subscribe-section"},tv={class:"quick-subscribe-label"},nv={class:"quick-subscribe-buttons"},iv={key:0,class:"last-used-info"},rv={class:"last-used-label"},av={class:"last-used-date"},ov={class:"regenerate-section"},lv={__name:"IcalFeedModal",props:{show:{type:Boolean,default:!1}},emits:["close"],setup(D,{emit:S}){const c=D,A=S,x=je(!1),{feedUrl:w,lastUsedAt:y,loading:I,loadToken:L,regenerateToken:$,copyToClipboard:X}=G1(),V=vt(()=>w.value?w.value.replace(/^https?:\/\//,"webcal://"):""),R=vt(()=>V.value?`https://calendar.google.com/calendar/r?cid=${encodeURIComponent(V.value)}`:"");Fn(()=>c.show,async ye=>{ye&&await L()});const he=()=>{A("close")},fe=()=>{X()},Me=async()=>{x.value=!1,await $()},ge=ye=>ye?Jr(ye):"";return(ye,Z)=>(_(),tt(Y(Kr),{open:D.show,name:ye.t("attendance","Calendar subscription"),"onUpdate:open":he},{default:Ee(()=>[J("div",Y1,[J("p",X1,ae(ye.t("attendance","Subscribe to your appointments in external calendar apps like Google Calendar, Apple Calendar, or Thunderbird.")),1),Y(I)?(_(),q("div",Z1,[de(Y(dr),{size:32})])):(_(),q(Mt,{key:1},[J("div",K1,[J("label",Q1,ae(ye.t("attendance","Subscription URL")),1),J("code",J1,ae(Y(w)),1),de(Y(ft),{variant:"secondary","aria-label":ye.t("attendance","Copy URL"),"data-test":"button-copy-url",onClick:fe},{icon:Ee(()=>[de(eu,{size:20})]),default:Ee(()=>[Ke(" "+ae(ye.t("attendance","Copy")),1)]),_:1},8,["aria-label"])]),J("div",ev,[J("label",tv,ae(ye.t("attendance","Quick subscribe")),1),J("div",nv,[de(Y(ft),{variant:"secondary",href:R.value,target:"_blank","data-test":"button-google-calendar"},{icon:Ee(()=>[de(R1,{size:20})]),default:Ee(()=>[Ke(" "+ae(ye.t("attendance","Google Calendar")),1)]),_:1},8,["href"]),de(Y(ft),{variant:"secondary",href:V.value,"data-test":"button-apple-calendar"},{icon:Ee(()=>[de(W1,{size:20})]),default:Ee(()=>[Ke(" "+ae(ye.t("attendance","Apple Calendar")),1)]),_:1},8,["href"])])]),Y(y)?(_(),q("div",iv,[J("span",rv,ae(ye.t("attendance","Last accessed"))+":",1),J("span",av,ae(ge(Y(y))),1)])):Le("",!0),de(Y(Qs),{type:"warning",class:"security-warning"},{default:Ee(()=>[Ke(ae(ye.t("attendance","Keep this URL private! Anyone with this link can see your appointments.")),1)]),_:1}),J("div",ov,[de(Y(ft),{variant:"tertiary",disabled:Y(I),"data-test":"button-regenerate-url",onClick:Z[0]||(Z[0]=K=>x.value=!0)},{icon:Ee(()=>[de(_1,{size:20})]),default:Ee(()=>[Ke(" "+ae(ye.t("attendance","Regenerate URL")),1)]),_:1},8,["disabled"])])],64))]),de(Y(Kr),{open:x.value,name:ye.t("attendance","Regenerate Subscription URL?"),"onUpdate:open":Z[2]||(Z[2]=K=>x.value=!1)},{actions:Ee(()=>[de(Y(ft),{variant:"secondary",onClick:Z[1]||(Z[1]=K=>x.value=!1)},{default:Ee(()=>[Ke(ae(ye.t("attendance","Cancel")),1)]),_:1}),de(Y(ft),{variant:"error",onClick:Me},{default:Ee(()=>[Ke(ae(ye.t("attendance","Regenerate")),1)]),_:1})]),default:Ee(()=>[J("p",null,ae(ye.t("attendance","This will invalidate your current calendar subscription URL. Any calendar apps using the old URL will need to be updated with the new URL.")),1)]),_:1},8,["open","name"])]),_:1},8,["open","name"]))}},sv=ot(lv,[["__scopeId","data-v-dacc5044"]]),uv={name:"CalendarClockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},cv=["aria-hidden","aria-label"],dv=["fill","width","height"],pv={d:"M15,13H16.5V15.82L18.94,17.23L18.19,18.53L15,16.69V13M19,8H5V19H9.67C9.24,18.09 9,17.07 9,16A7,7 0 0,1 16,9C17.07,9 18.09,9.24 19,9.67V8M5,21C3.89,21 3,20.1 3,19V5C3,3.89 3.89,3 5,3H6V1H8V3H16V1H18V3H19A2,2 0 0,1 21,5V11.1C22.24,12.36 23,14.09 23,16A7,7 0 0,1 16,23C14.09,23 12.36,22.24 11.1,21H5M16,11.15A4.85,4.85 0 0,0 11.15,16C11.15,18.68 13.32,20.85 16,20.85A4.85,4.85 0 0,0 20.85,16C20.85,13.32 18.68,11.15 16,11.15Z"},hv={key:0};function fv(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon calendar-clock-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",pv,[c.title?(_(),q("title",hv,ae(c.title),1)):Le("",!0)])],8,dv))],16,cv)}const mv=ot(uv,[["render",fv]]),gv={name:"HelpCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},vv=["aria-hidden","aria-label"],yv=["fill","width","height"],bv={d:"M15.07,11.25L14.17,12.17C13.45,12.89 13,13.5 13,15H11V14.5C11,13.39 11.45,12.39 12.17,11.67L13.41,10.41C13.78,10.05 14,9.55 14,9C14,7.89 13.1,7 12,7A2,2 0 0,0 10,9H8A4,4 0 0,1 12,5A4,4 0 0,1 16,9C16,9.88 15.64,10.67 15.07,11.25M13,19H11V17H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"},xv={key:0};function Cv(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon help-circle-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",bv,[c.title?(_(),q("title",xv,ae(c.title),1)):Le("",!0)])],8,yv))],16,vv)}const kv=ot(gv,[["render",Cv]]),wv={name:"ProgressQuestionIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Dv=["aria-hidden","aria-label"],Sv=["fill","width","height"],Av={d:"M13 18H11V16H13V18M13 15H11C11 11.75 14 12 14 10C14 8.9 13.1 8 12 8C10.9 8 10 8.9 10 10H8C8 7.79 9.79 6 12 6C14.21 6 16 7.79 16 10C16 12.5 13 12.75 13 15M22 12C22 17.18 18.05 21.45 13 21.95V19.94C16.95 19.45 20 16.08 20 12C20 7.92 16.95 4.55 13 4.06V2.05C18.05 2.55 22 6.82 22 12M11 2.05V4.06C9.54 4.24 8.2 4.82 7.09 5.68L5.67 4.26C7.15 3.05 9 2.25 11 2.05M4.06 11H2.05C2.25 9 3.05 7.15 4.26 5.67L5.68 7.1C4.82 8.2 4.24 9.54 4.06 11M11 19.94V21.95C9 21.75 7.15 20.96 5.67 19.74L7.09 18.32C8.2 19.18 9.54 19.76 11 19.94M2.05 13H4.06C4.24 14.46 4.82 15.8 5.68 16.91L4.26 18.33C3.05 16.85 2.25 15 2.05 13Z"},Fv={key:0};function Lv(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon progress-question-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Av,[c.title?(_(),q("title",Fv,ae(c.title),1)):Le("",!0)])],8,Sv))],16,Dv)}const Ev=ot(wv,[["render",Lv]]),Mv={name:"CheckCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Tv=["aria-hidden","aria-label"],_v=["fill","width","height"],Bv={d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"},zv={key:0};function Iv(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon check-circle-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Bv,[c.title?(_(),q("title",zv,ae(c.title),1)):Le("",!0)])],8,_v))],16,Tv)}const Nv=ot(Mv,[["render",Iv]]),Ov={name:"DownloadIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Hv=["aria-hidden","aria-label"],Rv=["fill","width","height"],Pv={d:"M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z"},Vv={key:0};function Uv(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon download-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Pv,[c.title?(_(),q("title",Vv,ae(c.title),1)):Le("",!0)])],8,Rv))],16,Hv)}const $v=ot(Ov,[["render",Uv]]),qv={name:"BellAlertIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},jv=["aria-hidden","aria-label"],Wv=["fill","width","height"],Gv={d:"M23 7V13H21V7M21 15H23V17H21M12 2A2 2 0 0 0 10 4A2 2 0 0 0 10 4.29C7.12 5.14 5 7.82 5 11V17L3 19V20H21V19L19 17V11C19 7.82 16.88 5.14 14 4.29A2 2 0 0 0 14 4A2 2 0 0 0 12 2M10 21A2 2 0 0 0 12 23A2 2 0 0 0 14 21Z"},Yv={key:0};function Xv(D,S,c,A,x,w){return _(),q("span",kt(D.$attrs,{"aria-hidden":c.title?null:"true","aria-label":c.title,class:"material-design-icon bell-alert-icon",role:"img",onClick:S[0]||(S[0]=y=>D.$emit("click",y))}),[(_(),q("svg",{fill:c.fillColor,class:"material-design-icon__svg",width:c.size,height:c.size,viewBox:"0 0 24 24"},[J("path",Gv,[c.title?(_(),q("title",Yv,ae(c.title),1)):Le("",!0)])],8,Wv))],16,jv)}const Zv=ot(qv,[["render",Xv]]),Kv={key:4,class:"loading-state"},Qv={__name:"App",setup(D){const S=je(null),c=je(null),A=je(null),x=je(null),w=je([]),y=je([]),I=je(!1),L=je(!1),$=je(!1),{permissions:X,loadPermissions:V}=ea(),R=vt(()=>w.value.filter(pe=>!pe.userResponse||pe.userResponse===null)),he=vt(()=>w.value.filter(pe=>pe.userResponse&&pe.userResponse!==null)),fe=pe=>{S.value=pe;const De=window.location.pathname.replace(/\/(past|unanswered|appointment\/\d+|checkin\/\d+|create|edit\/\d+|copy\/\d+)?$/,"");let ve=De;pe==="past"?ve=De+"/past":pe==="unanswered"?ve=De+"/unanswered":pe==="current"&&(ve=De),window.history.pushState({view:pe},"",ve)},Me=pe=>{S.value="appointment",A.value=pe;const De=window.location.pathname.replace(/\/(past|unanswered|appointment\/\d+|checkin\/\d+|create|edit\/\d+|copy\/\d+)?$/,"")+"/appointment/"+pe;window.history.pushState({view:"appointment",appointmentId:pe},"",De)},ge=async()=>{try{const pe=await At.get(dt("/apps/attendance/api/appointments/navigation"));w.value=pe.data.current,y.value=pe.data.past}catch(pe){console.error("Failed to load appointments for navigation:",pe)}},ye=async()=>{try{const pe=await At.get(dt("/apps/attendance/api/admin/settings"));pe.data.success&&pe.data.reminders&&(L.value=pe.data.reminders.notificationsAppEnabled!==!1)}catch(pe){console.debug("Could not load notifications app status:",pe)}},Z=()=>{S.value="create",x.value=null;const pe=window.location.pathname.replace(/\/(past|unanswered|appointment\/\d+|checkin\/\d+|create|edit\/\d+|copy\/\d+)?$/,"")+"/create";window.history.pushState({view:"create"},"",pe)},K=pe=>{S.value="edit",x.value=pe.id;const De=window.location.pathname.replace(/\/(past|unanswered|appointment\/\d+|checkin\/\d+|create|edit\/\d+|copy\/\d+)?$/,"")+"/edit/"+pe.id;window.history.pushState({view:"edit",appointmentId:pe.id},"",De)},G=pe=>{S.value="copy",x.value=pe.id;const De=window.location.pathname.replace(/\/(past|unanswered|appointment\/\d+|checkin\/\d+|create|edit\/\d+|copy\/\d+)?$/,"")+"/copy/"+pe.id;window.history.pushState({view:"copy",appointmentId:pe.id},"",De)},ie=async pe=>{await ge(),pe?Me(pe):fe("current")},ue=()=>{window.history.length>1?window.history.back():fe("current")},oe=pe=>{if(!pe.startDatetime)return pe.name;const De=Jr(pe.startDatetime);return`${pe.name}
${De}`},le=async()=>{try{const pe=await At.post(dt("/apps/attendance/api/export"));if(pe.data.success){An(t("attendance","Export created: {filename}",{filename:pe.data.filename}));const De=dt("/apps/files/?dir=/Attendance");window.location.href=De}else nn(t("attendance","Failed to export appointments"))}catch(pe){console.error("Failed to export appointments:",pe);const De=pe.response?.data?.error||t("attendance","Failed to export appointments");nn(De)}},be=()=>{const pe=window.location.pathname,De=pe.match(/\/checkin\/(\d+)/),ve=pe.match(/\/appointment\/(\d+)/),T=pe.match(/\/edit\/(\d+)/),W=pe.match(/\/copy\/(\d+)/),re=pe.endsWith("/create"),we=pe.endsWith("/past"),Je=pe.endsWith("/unanswered");c.value=null,A.value=null,x.value=null,De?(S.value="checkin",c.value=parseInt(De[1])):re?S.value="create":T?(S.value="edit",x.value=parseInt(T[1])):W?(S.value="copy",x.value=parseInt(W[1])):ve?(S.value="appointment",A.value=parseInt(ve[1])):we?S.value="past":Je?S.value="unanswered":S.value="current"},Xe=je(!1),Se=async()=>{Xe.value||(await ge(),Xe.value=!0)};return Fn(S,async(pe,De)=>{De==="checkin"&&pe!=="checkin"&&await Se()}),si(async()=>{be(),await V(),await ye(),S.value!=="checkin"&&(await ge(),Xe.value=!0,S.value==="current"&&R.value.length>0&&fe("unanswered")),window.addEventListener("popstate",()=>{be()})}),(pe,De)=>(_(),tt(Y(Fd),{"app-name":"attendance"},{default:Ee(()=>[S.value!=="checkin"?(_(),tt(Y(Sd),{key:0},{list:Ee(()=>[R.value.length>0?(_(),tt(Y(zn),{key:0,name:pe.t("attendance","Unanswered"),active:S.value==="unanswered","data-test":"nav-unanswered",onClick:De[0]||(De[0]=pn(ve=>fe("unanswered"),["prevent"]))},{icon:Ee(()=>[de(Zv,{size:20})]),default:Ee(()=>[R.value.length>0?(_(!0),q(Mt,{key:0},sn(R.value,ve=>(_(),tt(Y(zn),{key:ve.id,name:oe(ve),active:S.value==="appointment"&&A.value===ve.id,"data-test":"nav-unanswered-appointment",onClick:pn(T=>Me(ve.id),["prevent"])},{icon:Ee(()=>[de(Ev,{size:20})]),_:1},8,["name","active","onClick"]))),128)):Le("",!0)]),_:1},8,["name","active"])):Le("",!0),de(Y(zn),{name:pe.t("attendance","Upcoming appointments"),active:S.value==="current","data-test":"nav-upcoming",onClick:De[1]||(De[1]=pn(ve=>fe("current"),["prevent"]))},{icon:Ee(()=>[de(Ys,{size:20})]),default:Ee(()=>[he.value.length>0?(_(!0),q(Mt,{key:0},sn(he.value,ve=>(_(),tt(Y(zn),{key:ve.id,name:oe(ve),active:S.value==="appointment"&&A.value===ve.id,"data-test":"nav-upcoming-appointment",onClick:pn(T=>Me(ve.id),["prevent"])},{icon:Ee(()=>[ve.userResponse?.response==="yes"?(_(),tt(Nv,{key:0,size:20})):ve.userResponse?.response==="maybe"?(_(),tt(kv,{key:1,size:20})):ve.userResponse?.response==="no"?(_(),tt(Ks,{key:2,size:20})):Le("",!0)]),_:2},1032,["name","active","onClick"]))),128)):Le("",!0)]),_:1},8,["name","active"]),de(Y(zn),{name:pe.t("attendance","Past appointments"),active:S.value==="past",open:$.value,"data-test":"nav-past","onUpdate:open":De[2]||(De[2]=ve=>$.value=ve),onClick:De[3]||(De[3]=pn(ve=>{fe("past"),$.value=!0},["prevent"]))},{icon:Ee(()=>[de(mv,{size:20})]),default:Ee(()=>[$.value&&y.value.length>0?(_(!0),q(Mt,{key:0},sn(y.value,ve=>(_(),tt(Y(zn),{key:ve.id,name:oe(ve),active:S.value==="appointment"&&A.value===ve.id,"data-test":`nav-past-appointment-${ve.id}`,onClick:pn(T=>Me(ve.id),["prevent"])},{icon:Ee(()=>[de(ou,{size:20})]),_:1},8,["name","active","data-test","onClick"]))),128)):Le("",!0)]),_:1},8,["name","active","open"])]),footer:Ee(()=>[Y(X).canManageAppointments?(_(),tt(Y(zn),{key:0,name:pe.t("attendance","Create appointment"),"data-test":"button-create-appointment",onClick:pn(Z,["prevent"])},{icon:Ee(()=>[de(lu,{size:20})]),_:1},8,["name"])):Le("",!0),Y(X).canManageAppointments?(_(),tt(Y(zn),{key:1,name:pe.t("attendance","Export"),"data-test":"button-export",onClick:pn(le,["prevent"])},{icon:Ee(()=>[de($v,{size:20})]),_:1},8,["name"])):Le("",!0),de(Y(zn),{name:pe.t("attendance","Calendar subscription"),"data-test":"button-calendar-feed",onClick:De[4]||(De[4]=pn(ve=>I.value=!0,["prevent"]))},{icon:Ee(()=>[de(su,{size:20})]),_:1},8,["name"])]),_:1})):Le("",!0),de(Y(Ad),null,{default:Ee(()=>[S.value==="checkin"?(_(),tt(Ph,{key:0,"appointment-id":c.value},null,8,["appointment-id"])):S.value==="create"||S.value==="edit"||S.value==="copy"?(_(),tt(S1,{key:1,mode:S.value,"appointment-id":x.value,"notifications-app-enabled":L.value,"calendar-available":Y(X).calendarAvailable,"calendar-sync-enabled":Y(X).calendarSyncEnabled,onSaved:ie,onCancelled:ue},null,8,["mode","appointment-id","notifications-app-enabled","calendar-available","calendar-sync-enabled"])):S.value==="appointment"?(_(),tt(rg,{key:2,"appointment-id":A.value,onResponseUpdated:ge,onEditAppointment:K,onCopyAppointment:G},null,8,["appointment-id"])):S.value==="current"||S.value==="past"||S.value==="unanswered"?(_(),tt(Qm,{key:S.value,"show-past":S.value==="past","show-unanswered":S.value==="unanswered",onResponseUpdated:ge,onEditAppointment:K,onCopyAppointment:G,onNavigateToUpcoming:De[5]||(De[5]=ve=>fe("current"))},null,8,["show-past","show-unanswered"])):(_(),q("div",Kv,[...De[7]||(De[7]=[J("div",{class:"loading-spinner"},null,-1)])]))]),_:1}),de(sv,{show:I.value,onClose:De[6]||(De[6]=ve=>I.value=!1)},null,8,["show"])]),_:1}))}},Jv=ot(Qv,[["__scopeId","data-v-4d18a359"]]),ro=Ld(Jv);ro.config.globalProperties.t=St,ro.config.globalProperties.n=uo,ro.mount("#attendance");
//# sourceMappingURL=attendance-main.mjs.map

import{_ as Xe,Q as ye,a5 as Mn,a6 as rn,f as z,o as V,x as dt,i as bt,h as ut,a7 as ai,y as st,r as on,g as X,n as ce,O as be,t as gt,A as Vt,a8 as xe,v as Ki,a9 as hr,aa as fr,ab as pr,F as qt,ac as dr,ad as ne,ae as Ji,af as to,ag as eo,ah as no,d as ee,c as K,ai as ro,aj as ke,ak as io,u as W,al as he,am as Se,a1 as oo,an as qe,ao as so,ap as ao,aq as lo,$ as uo,ar as sn,as as co,at as li,au as ho,w as ct,av as fo,aw as Pe,S as jn,ax as xn,W as ui,I as Ne,X as gr,ay as po,R as ci,q as go,az as mo,C as De,k as vo,l as mr,J as yo,aA as bo,M as hi,aB as wo,N as fi,H as Eo,B as To,aC as No}from"./index-BGCAAR9m.chunk.mjs";import{N as Co}from"./NcDialog-BY-1v8yi-C4-QLhBD.chunk.mjs";import{l as pi}from"./index-IgWYF-oH.chunk.mjs";import{e as _o,t as Y,l as Ee,s as Vn,j as Be}from"./index-hZPKu-D6-BXEfvOYf.chunk.mjs";const Oo={name:"ChevronRightIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Io=["aria-hidden","aria-label"],So=["fill","width","height"],Ao={d:"M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z"},Ro={key:0};function Lo(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon chevron-right-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",Ao,[n.title?(V(),z("title",Ro,gt(n.title),1)):bt("",!0)])],8,So))],16,Io)}const xo=Xe(Oo,[["render",Lo]]),Po={name:"NcBreadcrumb",components:{NcActions:Mn,ChevronRight:xo,NcButton:ye},inheritAttrs:!1,props:{name:{type:String,required:!0},title:{type:String,default:null},to:{type:[String,Object],default:void 0},href:{type:String,default:void 0},icon:{type:String,default:""},forceIconText:{type:Boolean,default:!1},disableDrop:{type:Boolean,default:!1},forceMenu:{type:Boolean,default:!1},open:{type:Boolean,default:!1},class:{type:[String,Array,Object],default:""}},emits:["dragenter","dragleave","dropped","update:open"],setup(){const e=Ki();return{actionsContainer:`.vue-crumb[data-crumb-id="${e}"]`,crumbId:e}},data(){return{hovering:!1}},computed:{linkAttributes(){return this.to?{to:this.to,...this.$attrs}:this.href?{href:this.href,...this.$attrs}:this.$attrs}},methods:{onOpenChange(e){this.$emit("update:open",e)},dropped(e){return this.disableDrop||(this.$emit("dropped",e,this.to||this.href),this.$parent.$emit("dropped",e,this.to||this.href),this.hovering=!1),!1},dragEnter(e){this.$emit("dragenter",e),!this.disableDrop&&(this.hovering=!0)},dragLeave(e){this.$emit("dragleave",e),!this.disableDrop&&(e.target.contains(e.relatedTarget)||this.$refs.crumb.contains(e.relatedTarget)||(this.hovering=!1))}}},$o=["data-crumb-id"];function ko(e,t,n,r,o,s){const l=rn("NcButton"),c=rn("NcActions"),d=rn("ChevronRight");return V(),z("li",{ref:"crumb",class:ce(["vue-crumb",[{"vue-crumb--hovered":o.hovering},e.$props.class]]),"data-crumb-id":r.crumbId,draggable:"false",onDragstart:xe(()=>{},["prevent"]),onDrop:t[0]||(t[0]=xe((...a)=>s.dropped&&s.dropped(...a),["prevent"])),onDragover:xe(()=>{},["prevent"]),onDragenter:t[1]||(t[1]=(...a)=>s.dragEnter&&s.dragEnter(...a)),onDragleave:t[2]||(t[2]=(...a)=>s.dragLeave&&s.dragLeave(...a))},[(n.name||n.icon||e.$slots.icon)&&!e.$slots.default?(V(),dt(l,Vt({key:0,"aria-label":n.icon?n.name:void 0,variant:"tertiary"},s.linkAttributes),ai({_:2},[e.$slots.icon||n.icon?{name:"icon",fn:st(()=>[on(e.$slots,"icon",{},()=>[X("span",{class:ce([n.icon,"icon"])},null,2)],!0)]),key:"0"}:void 0,!(e.$slots.icon||n.icon)||n.forceIconText?{name:"default",fn:st(()=>[be(gt(n.name),1)]),key:"1"}:void 0]),1040,["aria-label"])):bt("",!0),e.$slots.default?(V(),dt(c,{key:1,ref:"actions",container:r.actionsContainer,"force-menu":n.forceMenu,"force-name":"","menu-name":n.name,open:n.open,title:n.title,variant:"tertiary","onUpdate:open":s.onOpenChange},{icon:st(()=>[on(e.$slots,"menu-icon",{},void 0,!0)]),default:st(()=>[on(e.$slots,"default",{},void 0,!0)]),_:3},8,["container","force-menu","menu-name","open","title","onUpdate:open"])):bt("",!0),ut(d,{class:"vue-crumb__separator",size:20})],42,$o)}const Ue=Xe(Po,[["render",ko],["__scopeId","data-v-28ef52a4"]]),Do={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Bo=["aria-hidden","aria-label"],Uo=["fill","width","height"],Mo={d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"},jo={key:0};function Vo(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon folder-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",Mo,[n.title?(V(),z("title",jo,gt(n.title),1)):bt("",!0)])],8,Uo))],16,Bo)}const vr=Xe(Do,[["render",Vo]]),It="vue-crumb",Fo={name:"NcBreadcrumbs",components:{NcActions:Mn,NcActionButton:pr,NcActionRouter:fr,NcActionLink:hr,NcBreadcrumb:Ue,IconFolder:vr},props:{rootIcon:{type:String,default:"icon-home"},ariaLabel:{type:String,default:null}},emits:["dropped"],data(){return{hiddenIndices:[],menuBreadcrumbProps:{name:"",forceMenu:!0,disableDrop:!0,open:!1},breadcrumbsRefs:[]}},created(){window.addEventListener("resize",eo(()=>{this.handleWindowResize()},100)),no("navigation-toggled",this.delayedResize)},mounted(){this.handleWindowResize()},updated(){this.delayedResize(),this.$nextTick(()=>{this.hideCrumbs()})},beforeUnmount(){window.removeEventListener("resize",this.handleWindowResize),to("navigation-toggled",this.delayedResize)},methods:{closeActions(e){this.$refs.actionsBreadcrumb.$el.contains(e.relatedTarget)||(this.menuBreadcrumbProps.open=!1)},async delayedResize(){await this.$nextTick(),this.handleWindowResize()},handleWindowResize(){if(!this.$refs.container)return;const e=this.breadcrumbsRefs.length,t=[],n=this.$refs.container.offsetWidth;let r=this.getTotalWidth();this.$refs.breadcrumb__actions&&(r+=this.$refs.breadcrumb__actions.offsetWidth);let o=r-n;o+=o>0?64:0;let s=0;const l=Math.floor(e/2);for(;o>0&&s<e-2;){const c=l+(s%2?s+1:s)/2*Math.pow(-1,s+e%2);o-=this.getWidth(this.breadcrumbsRefs[c]?.$el,c===this.breadcrumbsRefs.length-1),t.push(c),s++}this.arraysEqual(this.hiddenIndices,t.sort((c,d)=>c-d))||(this.hiddenIndices=t)},arraysEqual(e,t){if(e.length!==t.length)return!1;if(e===t)return!0;if(e===null||t===null)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0},getTotalWidth(){return this.breadcrumbsRefs.reduce((e,t,n)=>e+this.getWidth(t.$el,n===this.breadcrumbsRefs.length-1),0)},getWidth(e,t){if(!e?.classList)return 0;const n=e.classList.contains(`${It}--hidden`);e.style.minWidth="auto",t&&(e.style.maxWidth="210px"),e.classList.remove(`${It}--hidden`);const r=e.offsetWidth;return n&&e.classList.add(`${It}--hidden`),e.style.minWidth="",e.style.maxWidth="",r},preventDefault(e){return e.preventDefault&&e.preventDefault(),!1},dragStart(e){return this.preventDefault(e)},dropped(e,t,n){n||this.$emit("dropped",e,t),this.menuBreadcrumbProps.open=!1;const r=document.querySelectorAll(`.${It}`);for(const o of r)o.classList.remove(`${It}--hovered`);return this.preventDefault(e)},dragOver(e){return this.preventDefault(e)},dragEnter(e,t){if(!t&&e.target.closest){const n=e.target.closest(`.${It}`);if(n.classList&&n.classList.contains(It)){const r=document.querySelectorAll(`.${It}`);for(const o of r)o.classList.remove(`${It}--hovered`);n.classList.add(`${It}--hovered`)}}},dragLeave(e,t){if(!t&&!e.target.contains(e.relatedTarget)&&e.target.closest){const n=e.target.closest(`.${It}`);if(n.contains(e.relatedTarget))return;n.classList&&n.classList.contains(It)&&n.classList.remove(`${It}--hovered`)}},hideCrumbs(){this.breadcrumbsRefs.forEach((e,t)=>{e?.$el?.classList&&(this.hiddenIndices.includes(t)?e.$el.classList.add(`${It}--hidden`):e.$el.classList.remove(`${It}--hidden`))})},isBreadcrumb(e){return e?.type?.name==="NcBreadcrumb"}},render(){let e=[];if(this.$slots.default?.().forEach(o=>{if(this.isBreadcrumb(o)){e.push(o);return}o?.type===qt&&o?.children?.forEach?.(s=>{this.isBreadcrumb(s)&&e.push(s)})}),e.length===0)return;e[0]=dr(e[0],{icon:this.rootIcon,ref:"breadcrumbs"});const t=[];e=e.map((o,s)=>dr(o,{ref:l=>{t[s]=l}}));const n=[...e];this.hiddenIndices.length&&n.splice(Math.round(e.length/2),0,ne(Ue,{class:"dropdown",...this.menuBreadcrumbProps,"aria-hidden":!0,ref:"actionsBreadcrumb",key:"actions-breadcrumb-1",onDragenter:()=>{this.menuBreadcrumbProps.open=!0},onDragleave:this.closeActions,"onUpdate:open":o=>{this.menuBreadcrumbProps.open=o}},{default:()=>this.hiddenIndices.filter(o=>o<=e.length-1).map(o=>{const s=e[o],{to:l,href:c,disableDrop:d,name:a,...u}=s.props;delete u.ref;let p=pr,f="";c&&(p=hr,f=c),l&&(p=fr,f=l);const b=ne(vr,{size:20});return ne(p,{...u,class:It,href:c||null,to:l||null,draggable:!1,onDragstart:this.dragStart,onDrop:v=>this.dropped(v,f,d),onDragover:this.dragOver,onDragenter:v=>this.dragEnter(v,d),onDragleave:v=>this.dragLeave(v,d)},{default:()=>a,icon:()=>b})})}));const r=[ne("nav",{"aria-label":this.ariaLabel},[ne("ul",{class:"breadcrumb__crumbs"},[n])])];return Ji(this.$slots.actions?.())&&r.push(ne("div",{class:"breadcrumb__actions",ref:"breadcrumb__actions"},this.$slots.actions?.())),this.breadcrumbsRefs=t,ne("div",{class:["breadcrumb",{"breadcrumb--collapsed":this.hiddenIndices.length===e.length-2}],ref:"container"},r)}},Go=Xe(Fo,[["__scopeId","data-v-af2b1226"]]),zo=["data-timestamp","title","textContent"],Ho=ee({__name:"NcDateTime",props:{timestamp:{},format:{default:()=>({timeStyle:"medium",dateStyle:"short"})},relativeTime:{type:[Boolean,String],default:"long"},ignoreSeconds:{type:Boolean}},setup(e){const t=e,n=K(()=>({format:t.format})),r=K(()=>({ignoreSeconds:t.ignoreSeconds,relativeTime:t.relativeTime||"long",update:t.relativeTime!==!1})),o=ro(ke(()=>t.timestamp),n),s=io(ke(()=>t.timestamp),r),l=K(()=>t.relativeTime?s.value:o.value);return(c,d)=>(V(),z("span",{class:"nc-datetime",dir:"auto","data-timestamp":c.timestamp,title:W(o),textContent:gt(l.value)},null,8,zo))}});function Wo(e,t,n){const r=`#initial-state-${e}-${t}`;if(window._nc_initial_state?.has(r))return window._nc_initial_state.get(r);window._nc_initial_state||(window._nc_initial_state=new Map);const o=document.querySelector(r);if(o===null)return n;try{const s=JSON.parse(atob(o.value));return window._nc_initial_state.set(r,s),s}catch(s){return console.error("[@nextcloud/initial-state] Could not parse initial state",{key:t,app:e,error:s}),n}}function di(){return Wo("files_sharing","isPublic",null)??document.querySelector('input#isPublic[type="hidden"][name="isPublic"][value="1"]')!==null}var yr="M15,14C12.33,14 7,15.33 7,18V20H23V18C23,15.33 17.67,14 15,14M6,10V7H4V10H1V12H4V15H6V12H9V10M15,12A4,4 0 0,0 19,8A4,4 0 0,0 15,4A4,4 0 0,0 11,8A4,4 0 0,0 15,12Z",Xo="M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z",qo="M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z",Yo="M1,1V5H2V19H1V23H5V22H19V23H23V19H22V5H23V1H19V2H5V1M5,4H19V5H20V19H19V20H5V19H4V5H5M6,6V14H9V18H18V9H14V6M8,8H12V12H8M14,11H16V16H11V14H14",Zo="M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z",Qo="M12,17A2,2 0 0,0 14,15C14,13.89 13.1,13 12,13A2,2 0 0,0 10,15A2,2 0 0,0 12,17M18,8A2,2 0 0,1 20,10V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V10C4,8.89 4.9,8 6,8H7V6A5,5 0 0,1 12,1A5,5 0 0,1 17,6V8H18M12,3A3,3 0 0,0 9,6V8H15V6A3,3 0 0,0 12,3Z",Ko="M17,3A2,2 0 0,1 19,5V15A2,2 0 0,1 17,17H13V19H14A1,1 0 0,1 15,20H22V22H15A1,1 0 0,1 14,23H10A1,1 0 0,1 9,22H2V20H9A1,1 0 0,1 10,19H11V17H7C5.89,17 5,16.1 5,15V5A2,2 0 0,1 7,3H17Z",Jo="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z",ts="M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M21.41,11.58L12.41,2.58C12.05,2.22 11.55,2 11,2H4C2.89,2 2,2.89 2,4V11C2,11.55 2.22,12.05 2.59,12.41L11.58,21.41C11.95,21.77 12.45,22 13,22C13.55,22 14.05,21.77 14.41,21.41L21.41,14.41C21.78,14.05 22,13.55 22,13C22,12.44 21.77,11.94 21.41,11.58Z";function Fn(){return pi("files_sharing","isPublic",null)??document.querySelector('input#isPublic[type="hidden"][name="isPublic"][value="1"]')!==null}function es(){return pi("files_sharing","sharingToken",null)??document.querySelector('input#sharingToken[type="hidden"]')?.value??null}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function br(e,t,n){ns(e,t),t.set(e,n)}function ns(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function _t(e,t){var n=gi(e,t,"get");return rs(e,n)}function rs(e,t){return t.get?t.get.call(e):t.value}function wr(e,t,n){var r=gi(e,t,"set");return is(e,r,n),n}function gi(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function is(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}var os=typeof Symbol<"u"?Symbol.toStringTag:"@@toStringTag",St=new WeakMap,de=new WeakMap;class Ye{constructor(t){var{executor:n=()=>{},internals:r=zn(),promise:o=new Promise((s,l)=>n(s,l,c=>{r.onCancelList.push(c)}))}=t;br(this,St,{writable:!0,value:void 0}),br(this,de,{writable:!0,value:void 0}),Jt(this,os,"CancelablePromise"),this.cancel=this.cancel.bind(this),wr(this,St,r),wr(this,de,o||new Promise((s,l)=>n(s,l,c=>{r.onCancelList.push(c)})))}then(t,n){return $e(_t(this,de).then(Ae(t,_t(this,St)),Ae(n,_t(this,St))),_t(this,St))}catch(t){return $e(_t(this,de).catch(Ae(t,_t(this,St))),_t(this,St))}finally(t,n){return n&&_t(this,St).onCancelList.push(t),$e(_t(this,de).finally(Ae(()=>{if(t)return n&&(_t(this,St).onCancelList=_t(this,St).onCancelList.filter(r=>r!==t)),t()},_t(this,St))),_t(this,St))}cancel(){_t(this,St).isCanceled=!0;var t=_t(this,St).onCancelList;_t(this,St).onCancelList=[];for(var n of t)if(typeof n=="function")try{n()}catch(r){console.error(r)}}isCanceled(){return _t(this,St).isCanceled===!0}}class zt extends Ye{constructor(t){super({executor:t})}}Jt(zt,"all",function(e){return Re(e,Promise.all(e))}),Jt(zt,"allSettled",function(e){return Re(e,Promise.allSettled(e))}),Jt(zt,"any",function(e){return Re(e,Promise.any(e))}),Jt(zt,"race",function(e){return Re(e,Promise.race(e))}),Jt(zt,"resolve",function(e){return Er(Promise.resolve(e))}),Jt(zt,"reject",function(e){return Er(Promise.reject(e))}),Jt(zt,"isCancelable",Gn);function Er(e){return $e(e,zn())}function Gn(e){return e instanceof zt||e instanceof Ye}function Ae(e,t){if(e)return n=>{if(!t.isCanceled){var r=e(n);return Gn(r)&&t.onCancelList.push(r.cancel),r}return n}}function $e(e,t){return new Ye({internals:t,promise:e})}function Re(e,t){var n=zn();return n.onCancelList.push(()=>{for(var r of e)Gn(r)&&r.cancel()}),new Ye({internals:n,promise:t})}function zn(){return{isCanceled:!1,onCancelList:[]}}var an={},ss={2:e=>{function t(o,s,l){o instanceof RegExp&&(o=n(o,l)),s instanceof RegExp&&(s=n(s,l));var c=r(o,s,l);return c&&{start:c[0],end:c[1],pre:l.slice(0,c[0]),body:l.slice(c[0]+o.length,c[1]),post:l.slice(c[1]+s.length)}}function n(o,s){var l=s.match(o);return l?l[0]:null}function r(o,s,l){var c,d,a,u,p,f=l.indexOf(o),b=l.indexOf(s,f+1),v=f;if(f>=0&&b>0){for(c=[],a=l.length;v>=0&&!p;)v==f?(c.push(v),f=l.indexOf(o,v+1)):c.length==1?p=[c.pop(),b]:((d=c.pop())<a&&(a=d,u=b),b=l.indexOf(s,v+1)),v=f<b&&f>=0?f:b;c.length&&(p=[a,u])}return p}e.exports=t,t.range=r},101:function(e,t,n){var r;e=n.nmd(e),(function(o){var s=(e&&e.exports,typeof Se=="object"&&Se);s.global!==s&&s.window;var l=function(p){this.message=p};(l.prototype=new Error).name="InvalidCharacterError";var c=function(p){throw new l(p)},d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=/[\t\n\f\r ]/g,u={encode:function(p){p=String(p),/[^\0-\xFF]/.test(p)&&c("The string to be encoded contains characters outside of the Latin1 range.");for(var f,b,v,E,N=p.length%3,_="",g=-1,w=p.length-N;++g<w;)f=p.charCodeAt(g)<<16,b=p.charCodeAt(++g)<<8,v=p.charCodeAt(++g),_+=d.charAt((E=f+b+v)>>18&63)+d.charAt(E>>12&63)+d.charAt(E>>6&63)+d.charAt(63&E);return N==2?(f=p.charCodeAt(g)<<8,b=p.charCodeAt(++g),_+=d.charAt((E=f+b)>>10)+d.charAt(E>>4&63)+d.charAt(E<<2&63)+"="):N==1&&(E=p.charCodeAt(g),_+=d.charAt(E>>2)+d.charAt(E<<4&63)+"=="),_},decode:function(p){var f=(p=String(p).replace(a,"")).length;f%4==0&&(f=(p=p.replace(/==?$/,"")).length),(f%4==1||/[^+a-zA-Z0-9/]/.test(p))&&c("Invalid character: the string to be decoded is not correctly encoded.");for(var b,v,E=0,N="",_=-1;++_<f;)v=d.indexOf(p.charAt(_)),b=E%4?64*b+v:v,E++%4&&(N+=String.fromCharCode(255&b>>(-2*E&6)));return N},version:"1.0.0"};(r=function(){return u}.call(t,n,t,e))===void 0||(e.exports=r)})()},172:(e,t)=>{t.d=function(n){if(!n)return 0;for(var r=(n=n.toString()).length,o=n.length;o--;){var s=n.charCodeAt(o);56320<=s&&s<=57343&&o--,127<s&&s<=2047?r++:2047<s&&s<=65535&&(r+=2)}return r}},526:e=>{var t={utf8:{stringToBytes:function(n){return t.bin.stringToBytes(unescape(encodeURIComponent(n)))},bytesToString:function(n){return decodeURIComponent(escape(t.bin.bytesToString(n)))}},bin:{stringToBytes:function(n){for(var r=[],o=0;o<n.length;o++)r.push(255&n.charCodeAt(o));return r},bytesToString:function(n){for(var r=[],o=0;o<n.length;o++)r.push(String.fromCharCode(n[o]));return r.join("")}}};e.exports=t},298:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(r,o){return r<<o|r>>>32-o},rotr:function(r,o){return r<<32-o|r>>>o},endian:function(r){if(r.constructor==Number)return 16711935&n.rotl(r,8)|4278255360&n.rotl(r,24);for(var o=0;o<r.length;o++)r[o]=n.endian(r[o]);return r},randomBytes:function(r){for(var o=[];r>0;r--)o.push(Math.floor(256*Math.random()));return o},bytesToWords:function(r){for(var o=[],s=0,l=0;s<r.length;s++,l+=8)o[l>>>5]|=r[s]<<24-l%32;return o},wordsToBytes:function(r){for(var o=[],s=0;s<32*r.length;s+=8)o.push(r[s>>>5]>>>24-s%32&255);return o},bytesToHex:function(r){for(var o=[],s=0;s<r.length;s++)o.push((r[s]>>>4).toString(16)),o.push((15&r[s]).toString(16));return o.join("")},hexToBytes:function(r){for(var o=[],s=0;s<r.length;s+=2)o.push(parseInt(r.substr(s,2),16));return o},bytesToBase64:function(r){for(var o=[],s=0;s<r.length;s+=3)for(var l=r[s]<<16|r[s+1]<<8|r[s+2],c=0;c<4;c++)8*s+6*c<=8*r.length?o.push(t.charAt(l>>>6*(3-c)&63)):o.push("=");return o.join("")},base64ToBytes:function(r){r=r.replace(/[^A-Z0-9+\/]/gi,"");for(var o=[],s=0,l=0;s<r.length;l=++s%4)l!=0&&o.push((t.indexOf(r.charAt(s-1))&Math.pow(2,-2*l+8)-1)<<2*l|t.indexOf(r.charAt(s))>>>6-2*l);return o}},e.exports=n},635:(e,t,n)=>{const r=n(31),o=n(338),s=n(221);e.exports={XMLParser:o,XMLValidator:r,XMLBuilder:s}},118:e=>{e.exports=function(t){return typeof t=="function"?t:Array.isArray(t)?n=>{for(const r of t)if(typeof r=="string"&&n===r||r instanceof RegExp&&r.test(n))return!0}:()=>!1}},705:(e,t)=>{const n=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r="["+n+"]["+n+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",o=new RegExp("^"+r+"$");t.isExist=function(s){return s!==void 0},t.isEmptyObject=function(s){return Object.keys(s).length===0},t.merge=function(s,l,c){if(l){const d=Object.keys(l),a=d.length;for(let u=0;u<a;u++)s[d[u]]=c==="strict"?[l[d[u]]]:l[d[u]]}},t.getValue=function(s){return t.isExist(s)?s:""},t.isName=function(s){return o.exec(s)!=null},t.getAllMatches=function(s,l){const c=[];let d=l.exec(s);for(;d;){const a=[];a.startIndex=l.lastIndex-d[0].length;const u=d.length;for(let p=0;p<u;p++)a.push(d[p]);c.push(a),d=l.exec(s)}return c},t.nameRegexp=r},31:(e,t,n)=>{const r=n(705),o={allowBooleanAttributes:!1,unpairedTags:[]};function s(g){return g===" "||g==="	"||g===`
`||g==="\r"}function l(g,w){const I=w;for(;w<g.length;w++)if(!(g[w]!="?"&&g[w]!=" ")){const R=g.substr(I,w-I);if(w>5&&R==="xml")return v("InvalidXml","XML declaration allowed only at the start of the document.",N(g,w));if(g[w]=="?"&&g[w+1]==">"){w++;break}}return w}function c(g,w){if(g.length>w+5&&g[w+1]==="-"&&g[w+2]==="-"){for(w+=3;w<g.length;w++)if(g[w]==="-"&&g[w+1]==="-"&&g[w+2]===">"){w+=2;break}}else if(g.length>w+8&&g[w+1]==="D"&&g[w+2]==="O"&&g[w+3]==="C"&&g[w+4]==="T"&&g[w+5]==="Y"&&g[w+6]==="P"&&g[w+7]==="E"){let I=1;for(w+=8;w<g.length;w++)if(g[w]==="<")I++;else if(g[w]===">"&&(I--,I===0))break}else if(g.length>w+9&&g[w+1]==="["&&g[w+2]==="C"&&g[w+3]==="D"&&g[w+4]==="A"&&g[w+5]==="T"&&g[w+6]==="A"&&g[w+7]==="["){for(w+=8;w<g.length;w++)if(g[w]==="]"&&g[w+1]==="]"&&g[w+2]===">"){w+=2;break}}return w}t.validate=function(g,w){w=Object.assign({},o,w);const I=[];let R=!1,O=!1;g[0]==="\uFEFF"&&(g=g.substr(1));for(let A=0;A<g.length;A++)if(g[A]==="<"&&g[A+1]==="?"){if(A+=2,A=l(g,A),A.err)return A}else{if(g[A]!=="<"){if(s(g[A]))continue;return v("InvalidChar","char '"+g[A]+"' is not expected.",N(g,A))}{let C=A;if(A++,g[A]==="!"){A=c(g,A);continue}{let B=!1;g[A]==="/"&&(B=!0,A++);let D="";for(;A<g.length&&g[A]!==">"&&g[A]!==" "&&g[A]!=="	"&&g[A]!==`
`&&g[A]!=="\r";A++)D+=g[A];if(D=D.trim(),D[D.length-1]==="/"&&(D=D.substring(0,D.length-1),A--),x=D,!r.isName(x)){let G;return G=D.trim().length===0?"Invalid space after '<'.":"Tag '"+D+"' is an invalid name.",v("InvalidTag",G,N(g,A))}const S=u(g,A);if(S===!1)return v("InvalidAttr","Attributes for '"+D+"' have open quote.",N(g,A));let $=S.value;if(A=S.index,$[$.length-1]==="/"){const G=A-$.length;$=$.substring(0,$.length-1);const F=f($,w);if(F!==!0)return v(F.err.code,F.err.msg,N(g,G+F.err.line));R=!0}else if(B){if(!S.tagClosed)return v("InvalidTag","Closing tag '"+D+"' doesn't have proper closing.",N(g,A));if($.trim().length>0)return v("InvalidTag","Closing tag '"+D+"' can't have attributes or invalid starting.",N(g,C));if(I.length===0)return v("InvalidTag","Closing tag '"+D+"' has not been opened.",N(g,C));{const G=I.pop();if(D!==G.tagName){let F=N(g,G.tagStartPos);return v("InvalidTag","Expected closing tag '"+G.tagName+"' (opened in line "+F.line+", col "+F.col+") instead of closing tag '"+D+"'.",N(g,C))}I.length==0&&(O=!0)}}else{const G=f($,w);if(G!==!0)return v(G.err.code,G.err.msg,N(g,A-$.length+G.err.line));if(O===!0)return v("InvalidXml","Multiple possible root nodes found.",N(g,A));w.unpairedTags.indexOf(D)!==-1||I.push({tagName:D,tagStartPos:C}),R=!0}for(A++;A<g.length;A++)if(g[A]==="<"){if(g[A+1]==="!"){A++,A=c(g,A);continue}if(g[A+1]!=="?")break;if(A=l(g,++A),A.err)return A}else if(g[A]==="&"){const G=b(g,A);if(G==-1)return v("InvalidChar","char '&' is not expected.",N(g,A));A=G}else if(O===!0&&!s(g[A]))return v("InvalidXml","Extra text at the end",N(g,A));g[A]==="<"&&A--}}}var x;return R?I.length==1?v("InvalidTag","Unclosed tag '"+I[0].tagName+"'.",N(g,I[0].tagStartPos)):!(I.length>0)||v("InvalidXml","Invalid '"+JSON.stringify(I.map((A=>A.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):v("InvalidXml","Start tag expected.",1)};const d='"',a="'";function u(g,w){let I="",R="",O=!1;for(;w<g.length;w++){if(g[w]===d||g[w]===a)R===""?R=g[w]:R!==g[w]||(R="");else if(g[w]===">"&&R===""){O=!0;break}I+=g[w]}return R===""&&{value:I,index:w,tagClosed:O}}const p=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function f(g,w){const I=r.getAllMatches(g,p),R={};for(let O=0;O<I.length;O++){if(I[O][1].length===0)return v("InvalidAttr","Attribute '"+I[O][2]+"' has no space in starting.",_(I[O]));if(I[O][3]!==void 0&&I[O][4]===void 0)return v("InvalidAttr","Attribute '"+I[O][2]+"' is without value.",_(I[O]));if(I[O][3]===void 0&&!w.allowBooleanAttributes)return v("InvalidAttr","boolean attribute '"+I[O][2]+"' is not allowed.",_(I[O]));const x=I[O][2];if(!E(x))return v("InvalidAttr","Attribute '"+x+"' is an invalid name.",_(I[O]));if(R.hasOwnProperty(x))return v("InvalidAttr","Attribute '"+x+"' is repeated.",_(I[O]));R[x]=1}return!0}function b(g,w){if(g[++w]===";")return-1;if(g[w]==="#")return(function(R,O){let x=/\d/;for(R[O]==="x"&&(O++,x=/[\da-fA-F]/);O<R.length;O++){if(R[O]===";")return O;if(!R[O].match(x))break}return-1})(g,++w);let I=0;for(;w<g.length;w++,I++)if(!(g[w].match(/\w/)&&I<20)){if(g[w]===";")break;return-1}return w}function v(g,w,I){return{err:{code:g,msg:w,line:I.line||I,col:I.col}}}function E(g){return r.isName(g)}function N(g,w){const I=g.substring(0,w).split(/\r?\n/);return{line:I.length,col:I[I.length-1].length+1}}function _(g){return g.startIndex+g[1].length}},221:(e,t,n)=>{const r=n(87),o=n(118),s={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(u,p){return p},attributeValueProcessor:function(u,p){return p},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function l(u){this.options=Object.assign({},s,u),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=o(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=a),this.processTextOrObjNode=c,this.options.format?(this.indentate=d,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function c(u,p,f,b){const v=this.j2x(u,f+1,b.concat(p));return u[this.options.textNodeName]!==void 0&&Object.keys(u).length===1?this.buildTextValNode(u[this.options.textNodeName],p,v.attrStr,f):this.buildObjectNode(v.val,p,v.attrStr,f)}function d(u){return this.options.indentBy.repeat(u)}function a(u){return!(!u.startsWith(this.options.attributeNamePrefix)||u===this.options.textNodeName)&&u.substr(this.attrPrefixLen)}l.prototype.build=function(u){return this.options.preserveOrder?r(u,this.options):(Array.isArray(u)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(u={[this.options.arrayNodeName]:u}),this.j2x(u,0,[]).val)},l.prototype.j2x=function(u,p,f){let b="",v="";const E=f.join(".");for(let N in u)if(Object.prototype.hasOwnProperty.call(u,N))if(u[N]===void 0)this.isAttribute(N)&&(v+="");else if(u[N]===null)this.isAttribute(N)?v+="":N[0]==="?"?v+=this.indentate(p)+"<"+N+"?"+this.tagEndChar:v+=this.indentate(p)+"<"+N+"/"+this.tagEndChar;else if(u[N]instanceof Date)v+=this.buildTextValNode(u[N],N,"",p);else if(typeof u[N]!="object"){const _=this.isAttribute(N);if(_&&!this.ignoreAttributesFn(_,E))b+=this.buildAttrPairStr(_,""+u[N]);else if(!_)if(N===this.options.textNodeName){let g=this.options.tagValueProcessor(N,""+u[N]);v+=this.replaceEntitiesValue(g)}else v+=this.buildTextValNode(u[N],N,"",p)}else if(Array.isArray(u[N])){const _=u[N].length;let g="",w="";for(let I=0;I<_;I++){const R=u[N][I];if(R!==void 0)if(R===null)N[0]==="?"?v+=this.indentate(p)+"<"+N+"?"+this.tagEndChar:v+=this.indentate(p)+"<"+N+"/"+this.tagEndChar;else if(typeof R=="object")if(this.options.oneListGroup){const O=this.j2x(R,p+1,f.concat(N));g+=O.val,this.options.attributesGroupName&&R.hasOwnProperty(this.options.attributesGroupName)&&(w+=O.attrStr)}else g+=this.processTextOrObjNode(R,N,p,f);else if(this.options.oneListGroup){let O=this.options.tagValueProcessor(N,R);O=this.replaceEntitiesValue(O),g+=O}else g+=this.buildTextValNode(R,N,"",p)}this.options.oneListGroup&&(g=this.buildObjectNode(g,N,w,p)),v+=g}else if(this.options.attributesGroupName&&N===this.options.attributesGroupName){const _=Object.keys(u[N]),g=_.length;for(let w=0;w<g;w++)b+=this.buildAttrPairStr(_[w],""+u[N][_[w]])}else v+=this.processTextOrObjNode(u[N],N,p,f);return{attrStr:b,val:v}},l.prototype.buildAttrPairStr=function(u,p){return p=this.options.attributeValueProcessor(u,""+p),p=this.replaceEntitiesValue(p),this.options.suppressBooleanAttributes&&p==="true"?" "+u:" "+u+'="'+p+'"'},l.prototype.buildObjectNode=function(u,p,f,b){if(u==="")return p[0]==="?"?this.indentate(b)+"<"+p+f+"?"+this.tagEndChar:this.indentate(b)+"<"+p+f+this.closeTag(p)+this.tagEndChar;{let v="</"+p+this.tagEndChar,E="";return p[0]==="?"&&(E="?",v=""),!f&&f!==""||u.indexOf("<")!==-1?this.options.commentPropName!==!1&&p===this.options.commentPropName&&E.length===0?this.indentate(b)+`<!--${u}-->`+this.newLine:this.indentate(b)+"<"+p+f+E+this.tagEndChar+u+this.indentate(b)+v:this.indentate(b)+"<"+p+f+E+">"+u+v}},l.prototype.closeTag=function(u){let p="";return this.options.unpairedTags.indexOf(u)!==-1?this.options.suppressUnpairedNode||(p="/"):p=this.options.suppressEmptyNode?"/":`></${u}`,p},l.prototype.buildTextValNode=function(u,p,f,b){if(this.options.cdataPropName!==!1&&p===this.options.cdataPropName)return this.indentate(b)+`<![CDATA[${u}]]>`+this.newLine;if(this.options.commentPropName!==!1&&p===this.options.commentPropName)return this.indentate(b)+`<!--${u}-->`+this.newLine;if(p[0]==="?")return this.indentate(b)+"<"+p+f+"?"+this.tagEndChar;{let v=this.options.tagValueProcessor(p,u);return v=this.replaceEntitiesValue(v),v===""?this.indentate(b)+"<"+p+f+this.closeTag(p)+this.tagEndChar:this.indentate(b)+"<"+p+f+">"+v+"</"+p+this.tagEndChar}},l.prototype.replaceEntitiesValue=function(u){if(u&&u.length>0&&this.options.processEntities)for(let p=0;p<this.options.entities.length;p++){const f=this.options.entities[p];u=u.replace(f.regex,f.val)}return u},e.exports=l},87:e=>{function t(l,c,d,a){let u="",p=!1;for(let f=0;f<l.length;f++){const b=l[f],v=n(b);if(v===void 0)continue;let E="";if(E=d.length===0?v:`${d}.${v}`,v===c.textNodeName){let w=b[v];o(E,c)||(w=c.tagValueProcessor(v,w),w=s(w,c)),p&&(u+=a),u+=w,p=!1;continue}if(v===c.cdataPropName){p&&(u+=a),u+=`<![CDATA[${b[v][0][c.textNodeName]}]]>`,p=!1;continue}if(v===c.commentPropName){u+=a+`<!--${b[v][0][c.textNodeName]}-->`,p=!0;continue}if(v[0]==="?"){const w=r(b[":@"],c),I=v==="?xml"?"":a;let R=b[v][0][c.textNodeName];R=R.length!==0?" "+R:"",u+=I+`<${v}${R}${w}?>`,p=!0;continue}let N=a;N!==""&&(N+=c.indentBy);const _=a+`<${v}${r(b[":@"],c)}`,g=t(b[v],c,E,N);c.unpairedTags.indexOf(v)!==-1?c.suppressUnpairedNode?u+=_+">":u+=_+"/>":g&&g.length!==0||!c.suppressEmptyNode?g&&g.endsWith(">")?u+=_+`>${g}${a}</${v}>`:(u+=_+">",g&&a!==""&&(g.includes("/>")||g.includes("</"))?u+=a+c.indentBy+g+a:u+=g,u+=`</${v}>`):u+=_+"/>",p=!0}return u}function n(l){const c=Object.keys(l);for(let d=0;d<c.length;d++){const a=c[d];if(l.hasOwnProperty(a)&&a!==":@")return a}}function r(l,c){let d="";if(l&&!c.ignoreAttributes)for(let a in l){if(!l.hasOwnProperty(a))continue;let u=c.attributeValueProcessor(a,l[a]);u=s(u,c),u===!0&&c.suppressBooleanAttributes?d+=` ${a.substr(c.attributeNamePrefix.length)}`:d+=` ${a.substr(c.attributeNamePrefix.length)}="${u}"`}return d}function o(l,c){let d=(l=l.substr(0,l.length-c.textNodeName.length-1)).substr(l.lastIndexOf(".")+1);for(let a in c.stopNodes)if(c.stopNodes[a]===l||c.stopNodes[a]==="*."+d)return!0;return!1}function s(l,c){if(l&&l.length>0&&c.processEntities)for(let d=0;d<c.entities.length;d++){const a=c.entities[d];l=l.replace(a.regex,a.val)}return l}e.exports=function(l,c){let d="";return c.format&&c.indentBy.length>0&&(d=`
`),t(l,c,"",d)}},193:(e,t,n)=>{const r=n(705);function o(p,f){let b="";for(;f<p.length&&p[f]!=="'"&&p[f]!=='"';f++)b+=p[f];if(b=b.trim(),b.indexOf(" ")!==-1)throw new Error("External entites are not supported");const v=p[f++];let E="";for(;f<p.length&&p[f]!==v;f++)E+=p[f];return[b,E,f]}function s(p,f){return p[f+1]==="!"&&p[f+2]==="-"&&p[f+3]==="-"}function l(p,f){return p[f+1]==="!"&&p[f+2]==="E"&&p[f+3]==="N"&&p[f+4]==="T"&&p[f+5]==="I"&&p[f+6]==="T"&&p[f+7]==="Y"}function c(p,f){return p[f+1]==="!"&&p[f+2]==="E"&&p[f+3]==="L"&&p[f+4]==="E"&&p[f+5]==="M"&&p[f+6]==="E"&&p[f+7]==="N"&&p[f+8]==="T"}function d(p,f){return p[f+1]==="!"&&p[f+2]==="A"&&p[f+3]==="T"&&p[f+4]==="T"&&p[f+5]==="L"&&p[f+6]==="I"&&p[f+7]==="S"&&p[f+8]==="T"}function a(p,f){return p[f+1]==="!"&&p[f+2]==="N"&&p[f+3]==="O"&&p[f+4]==="T"&&p[f+5]==="A"&&p[f+6]==="T"&&p[f+7]==="I"&&p[f+8]==="O"&&p[f+9]==="N"}function u(p){if(r.isName(p))return p;throw new Error(`Invalid entity name ${p}`)}e.exports=function(p,f){const b={};if(p[f+3]!=="O"||p[f+4]!=="C"||p[f+5]!=="T"||p[f+6]!=="Y"||p[f+7]!=="P"||p[f+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{f+=9;let v=1,E=!1,N=!1,_="";for(;f<p.length;f++)if(p[f]!=="<"||N)if(p[f]===">"){if(N?p[f-1]==="-"&&p[f-2]==="-"&&(N=!1,v--):v--,v===0)break}else p[f]==="["?E=!0:_+=p[f];else{if(E&&l(p,f)){let g,w;f+=7,[g,w,f]=o(p,f+1),w.indexOf("&")===-1&&(b[u(g)]={regx:RegExp(`&${g};`,"g"),val:w})}else if(E&&c(p,f))f+=8;else if(E&&d(p,f))f+=8;else if(E&&a(p,f))f+=9;else{if(!s)throw new Error("Invalid DOCTYPE");N=!0}v++,_=""}if(v!==0)throw new Error("Unclosed DOCTYPE")}return{entities:b,i:f}}},63:(e,t)=>{const n={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(r,o){return o},attributeValueProcessor:function(r,o){return o},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(r,o,s){return r}};t.buildOptions=function(r){return Object.assign({},n,r)},t.defaultOptions=n},299:(e,t,n)=>{const r=n(705),o=n(365),s=n(193),l=n(494),c=n(118);function d(O){const x=Object.keys(O);for(let A=0;A<x.length;A++){const C=x[A];this.lastEntities[C]={regex:new RegExp("&"+C+";","g"),val:O[C]}}}function a(O,x,A,C,B,D,S){if(O!==void 0&&(this.options.trimValues&&!C&&(O=O.trim()),O.length>0)){S||(O=this.replaceEntitiesValue(O));const $=this.options.tagValueProcessor(x,O,A,B,D);return $==null?O:typeof $!=typeof O||$!==O?$:this.options.trimValues||O.trim()===O?R(O,this.options.parseTagValue,this.options.numberParseOptions):O}}function u(O){if(this.options.removeNSPrefix){const x=O.split(":"),A=O.charAt(0)==="/"?"/":"";if(x[0]==="xmlns")return"";x.length===2&&(O=A+x[1])}return O}const p=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function f(O,x,A){if(this.options.ignoreAttributes!==!0&&typeof O=="string"){const C=r.getAllMatches(O,p),B=C.length,D={};for(let S=0;S<B;S++){const $=this.resolveNameSpace(C[S][1]);if(this.ignoreAttributesFn($,x))continue;let G=C[S][4],F=this.options.attributeNamePrefix+$;if($.length)if(this.options.transformAttributeName&&(F=this.options.transformAttributeName(F)),F==="__proto__"&&(F="#__proto__"),G!==void 0){this.options.trimValues&&(G=G.trim()),G=this.replaceEntitiesValue(G);const q=this.options.attributeValueProcessor($,G,x);D[F]=q==null?G:typeof q!=typeof G||q!==G?q:R(G,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(D[F]=!0)}if(!Object.keys(D).length)return;if(this.options.attributesGroupName){const S={};return S[this.options.attributesGroupName]=D,S}return D}}const b=function(O){O=O.replace(/\r\n?/g,`
`);const x=new o("!xml");let A=x,C="",B="";for(let D=0;D<O.length;D++)if(O[D]==="<")if(O[D+1]==="/"){const S=g(O,">",D,"Closing Tag is not closed.");let $=O.substring(D+2,S).trim();if(this.options.removeNSPrefix){const q=$.indexOf(":");q!==-1&&($=$.substr(q+1))}this.options.transformTagName&&($=this.options.transformTagName($)),A&&(C=this.saveTextToParentTag(C,A,B));const G=B.substring(B.lastIndexOf(".")+1);if($&&this.options.unpairedTags.indexOf($)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${$}>`);let F=0;G&&this.options.unpairedTags.indexOf(G)!==-1?(F=B.lastIndexOf(".",B.lastIndexOf(".")-1),this.tagsNodeStack.pop()):F=B.lastIndexOf("."),B=B.substring(0,F),A=this.tagsNodeStack.pop(),C="",D=S}else if(O[D+1]==="?"){let S=w(O,D,!1,"?>");if(!S)throw new Error("Pi Tag is not closed.");if(C=this.saveTextToParentTag(C,A,B),!(this.options.ignoreDeclaration&&S.tagName==="?xml"||this.options.ignorePiTags)){const $=new o(S.tagName);$.add(this.options.textNodeName,""),S.tagName!==S.tagExp&&S.attrExpPresent&&($[":@"]=this.buildAttributesMap(S.tagExp,B,S.tagName)),this.addChild(A,$,B)}D=S.closeIndex+1}else if(O.substr(D+1,3)==="!--"){const S=g(O,"-->",D+4,"Comment is not closed.");if(this.options.commentPropName){const $=O.substring(D+4,S-2);C=this.saveTextToParentTag(C,A,B),A.add(this.options.commentPropName,[{[this.options.textNodeName]:$}])}D=S}else if(O.substr(D+1,2)==="!D"){const S=s(O,D);this.docTypeEntities=S.entities,D=S.i}else if(O.substr(D+1,2)==="!["){const S=g(O,"]]>",D,"CDATA is not closed.")-2,$=O.substring(D+9,S);C=this.saveTextToParentTag(C,A,B);let G=this.parseTextData($,A.tagname,B,!0,!1,!0,!0);G==null&&(G=""),this.options.cdataPropName?A.add(this.options.cdataPropName,[{[this.options.textNodeName]:$}]):A.add(this.options.textNodeName,G),D=S+2}else{let S=w(O,D,this.options.removeNSPrefix),$=S.tagName;const G=S.rawTagName;let F=S.tagExp,q=S.attrExpPresent,H=S.closeIndex;this.options.transformTagName&&($=this.options.transformTagName($)),A&&C&&A.tagname!=="!xml"&&(C=this.saveTextToParentTag(C,A,B,!1));const nt=A;if(nt&&this.options.unpairedTags.indexOf(nt.tagname)!==-1&&(A=this.tagsNodeStack.pop(),B=B.substring(0,B.lastIndexOf("."))),$!==x.tagname&&(B+=B?"."+$:$),this.isItStopNode(this.options.stopNodes,B,$)){let J="";if(F.length>0&&F.lastIndexOf("/")===F.length-1)$[$.length-1]==="/"?($=$.substr(0,$.length-1),B=B.substr(0,B.length-1),F=$):F=F.substr(0,F.length-1),D=S.closeIndex;else if(this.options.unpairedTags.indexOf($)!==-1)D=S.closeIndex;else{const Q=this.readStopNodeData(O,G,H+1);if(!Q)throw new Error(`Unexpected end of ${G}`);D=Q.i,J=Q.tagContent}const vt=new o($);$!==F&&q&&(vt[":@"]=this.buildAttributesMap(F,B,$)),J&&(J=this.parseTextData(J,$,B,!0,q,!0,!0)),B=B.substr(0,B.lastIndexOf(".")),vt.add(this.options.textNodeName,J),this.addChild(A,vt,B)}else{if(F.length>0&&F.lastIndexOf("/")===F.length-1){$[$.length-1]==="/"?($=$.substr(0,$.length-1),B=B.substr(0,B.length-1),F=$):F=F.substr(0,F.length-1),this.options.transformTagName&&($=this.options.transformTagName($));const J=new o($);$!==F&&q&&(J[":@"]=this.buildAttributesMap(F,B,$)),this.addChild(A,J,B),B=B.substr(0,B.lastIndexOf("."))}else{const J=new o($);this.tagsNodeStack.push(A),$!==F&&q&&(J[":@"]=this.buildAttributesMap(F,B,$)),this.addChild(A,J,B),A=J}C="",D=H}}else C+=O[D];return x.child};function v(O,x,A){const C=this.options.updateTag(x.tagname,A,x[":@"]);C===!1||(typeof C=="string"&&(x.tagname=C),O.addChild(x))}const E=function(O){if(this.options.processEntities){for(let x in this.docTypeEntities){const A=this.docTypeEntities[x];O=O.replace(A.regx,A.val)}for(let x in this.lastEntities){const A=this.lastEntities[x];O=O.replace(A.regex,A.val)}if(this.options.htmlEntities)for(let x in this.htmlEntities){const A=this.htmlEntities[x];O=O.replace(A.regex,A.val)}O=O.replace(this.ampEntity.regex,this.ampEntity.val)}return O};function N(O,x,A,C){return O&&(C===void 0&&(C=Object.keys(x.child).length===0),(O=this.parseTextData(O,x.tagname,A,!1,!!x[":@"]&&Object.keys(x[":@"]).length!==0,C))!==void 0&&O!==""&&x.add(this.options.textNodeName,O),O=""),O}function _(O,x,A){const C="*."+A;for(const B in O){const D=O[B];if(C===D||x===D)return!0}return!1}function g(O,x,A,C){const B=O.indexOf(x,A);if(B===-1)throw new Error(C);return B+x.length-1}function w(O,x,A){const C=(function(q,H){let nt,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",vt="";for(let Q=H;Q<q.length;Q++){let rt=q[Q];if(nt)rt===nt&&(nt="");else if(rt==='"'||rt==="'")nt=rt;else if(rt===J[0]){if(!J[1])return{data:vt,index:Q};if(q[Q+1]===J[1])return{data:vt,index:Q}}else rt==="	"&&(rt=" ");vt+=rt}})(O,x+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!C)return;let B=C.data;const D=C.index,S=B.search(/\s/);let $=B,G=!0;S!==-1&&($=B.substring(0,S),B=B.substring(S+1).trimStart());const F=$;if(A){const q=$.indexOf(":");q!==-1&&($=$.substr(q+1),G=$!==C.data.substr(q+1))}return{tagName:$,tagExp:B,closeIndex:D,attrExpPresent:G,rawTagName:F}}function I(O,x,A){const C=A;let B=1;for(;A<O.length;A++)if(O[A]==="<")if(O[A+1]==="/"){const D=g(O,">",A,`${x} is not closed`);if(O.substring(A+2,D).trim()===x&&(B--,B===0))return{tagContent:O.substring(C,A),i:D};A=D}else if(O[A+1]==="?")A=g(O,"?>",A+1,"StopNode is not closed.");else if(O.substr(A+1,3)==="!--")A=g(O,"-->",A+3,"StopNode is not closed.");else if(O.substr(A+1,2)==="![")A=g(O,"]]>",A,"StopNode is not closed.")-2;else{const D=w(O,A,">");D&&((D&&D.tagName)===x&&D.tagExp[D.tagExp.length-1]!=="/"&&B++,A=D.closeIndex)}}function R(O,x,A){if(x&&typeof O=="string"){const C=O.trim();return C==="true"||C!=="false"&&l(O,A)}return r.isExist(O)?O:""}e.exports=class{constructor(O){this.options=O,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(x,A)=>String.fromCharCode(Number.parseInt(A,10))},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(x,A)=>String.fromCharCode(Number.parseInt(A,16))}},this.addExternalEntities=d,this.parseXml=b,this.parseTextData=a,this.resolveNameSpace=u,this.buildAttributesMap=f,this.isItStopNode=_,this.replaceEntitiesValue=E,this.readStopNodeData=I,this.saveTextToParentTag=N,this.addChild=v,this.ignoreAttributesFn=c(this.options.ignoreAttributes)}}},338:(e,t,n)=>{const{buildOptions:r}=n(63),o=n(299),{prettify:s}=n(728),l=n(31);e.exports=class{constructor(c){this.externalEntities={},this.options=r(c)}parse(c,d){if(typeof c!="string"){if(!c.toString)throw new Error("XML data is accepted in String or Bytes[] form.");c=c.toString()}if(d){d===!0&&(d={});const p=l.validate(c,d);if(p!==!0)throw Error(`${p.err.msg}:${p.err.line}:${p.err.col}`)}const a=new o(this.options);a.addExternalEntities(this.externalEntities);const u=a.parseXml(c);return this.options.preserveOrder||u===void 0?u:s(u,this.options)}addEntity(c,d){if(d.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(c.indexOf("&")!==-1||c.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(d==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[c]=d}}},728:(e,t)=>{function n(l,c,d){let a;const u={};for(let p=0;p<l.length;p++){const f=l[p],b=r(f);let v="";if(v=d===void 0?b:d+"."+b,b===c.textNodeName)a===void 0?a=f[b]:a+=""+f[b];else{if(b===void 0)continue;if(f[b]){let E=n(f[b],c,v);const N=s(E,c);f[":@"]?o(E,f[":@"],v,c):Object.keys(E).length!==1||E[c.textNodeName]===void 0||c.alwaysCreateTextNode?Object.keys(E).length===0&&(c.alwaysCreateTextNode?E[c.textNodeName]="":E=""):E=E[c.textNodeName],u[b]!==void 0&&u.hasOwnProperty(b)?(Array.isArray(u[b])||(u[b]=[u[b]]),u[b].push(E)):c.isArray(b,v,N)?u[b]=[E]:u[b]=E}}}return typeof a=="string"?a.length>0&&(u[c.textNodeName]=a):a!==void 0&&(u[c.textNodeName]=a),u}function r(l){const c=Object.keys(l);for(let d=0;d<c.length;d++){const a=c[d];if(a!==":@")return a}}function o(l,c,d,a){if(c){const u=Object.keys(c),p=u.length;for(let f=0;f<p;f++){const b=u[f];a.isArray(b,d+"."+b,!0,!0)?l[b]=[c[b]]:l[b]=c[b]}}}function s(l,c){const{textNodeName:d}=c,a=Object.keys(l).length;return a===0||!(a!==1||!l[d]&&typeof l[d]!="boolean"&&l[d]!==0)}t.prettify=function(l,c){return n(l,c)}},365:e=>{e.exports=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,n){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:n})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}},135:e=>{function t(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}e.exports=function(n){return n!=null&&(t(n)||(function(r){return typeof r.readFloatLE=="function"&&typeof r.slice=="function"&&t(r.slice(0,0))})(n)||!!n._isBuffer)}},542:(e,t,n)=>{(function(){var r=n(298),o=n(526).utf8,s=n(135),l=n(526).bin,c=function(d,a){d.constructor==String?d=a&&a.encoding==="binary"?l.stringToBytes(d):o.stringToBytes(d):s(d)?d=Array.prototype.slice.call(d,0):Array.isArray(d)||d.constructor===Uint8Array||(d=d.toString());for(var u=r.bytesToWords(d),p=8*d.length,f=1732584193,b=-271733879,v=-1732584194,E=271733878,N=0;N<u.length;N++)u[N]=16711935&(u[N]<<8|u[N]>>>24)|4278255360&(u[N]<<24|u[N]>>>8);u[p>>>5]|=128<<p%32,u[14+(p+64>>>9<<4)]=p;var _=c._ff,g=c._gg,w=c._hh,I=c._ii;for(N=0;N<u.length;N+=16){var R=f,O=b,x=v,A=E;f=_(f,b,v,E,u[N+0],7,-680876936),E=_(E,f,b,v,u[N+1],12,-389564586),v=_(v,E,f,b,u[N+2],17,606105819),b=_(b,v,E,f,u[N+3],22,-1044525330),f=_(f,b,v,E,u[N+4],7,-176418897),E=_(E,f,b,v,u[N+5],12,1200080426),v=_(v,E,f,b,u[N+6],17,-1473231341),b=_(b,v,E,f,u[N+7],22,-45705983),f=_(f,b,v,E,u[N+8],7,1770035416),E=_(E,f,b,v,u[N+9],12,-1958414417),v=_(v,E,f,b,u[N+10],17,-42063),b=_(b,v,E,f,u[N+11],22,-1990404162),f=_(f,b,v,E,u[N+12],7,1804603682),E=_(E,f,b,v,u[N+13],12,-40341101),v=_(v,E,f,b,u[N+14],17,-1502002290),f=g(f,b=_(b,v,E,f,u[N+15],22,1236535329),v,E,u[N+1],5,-165796510),E=g(E,f,b,v,u[N+6],9,-1069501632),v=g(v,E,f,b,u[N+11],14,643717713),b=g(b,v,E,f,u[N+0],20,-373897302),f=g(f,b,v,E,u[N+5],5,-701558691),E=g(E,f,b,v,u[N+10],9,38016083),v=g(v,E,f,b,u[N+15],14,-660478335),b=g(b,v,E,f,u[N+4],20,-405537848),f=g(f,b,v,E,u[N+9],5,568446438),E=g(E,f,b,v,u[N+14],9,-1019803690),v=g(v,E,f,b,u[N+3],14,-187363961),b=g(b,v,E,f,u[N+8],20,1163531501),f=g(f,b,v,E,u[N+13],5,-1444681467),E=g(E,f,b,v,u[N+2],9,-51403784),v=g(v,E,f,b,u[N+7],14,1735328473),f=w(f,b=g(b,v,E,f,u[N+12],20,-1926607734),v,E,u[N+5],4,-378558),E=w(E,f,b,v,u[N+8],11,-2022574463),v=w(v,E,f,b,u[N+11],16,1839030562),b=w(b,v,E,f,u[N+14],23,-35309556),f=w(f,b,v,E,u[N+1],4,-1530992060),E=w(E,f,b,v,u[N+4],11,1272893353),v=w(v,E,f,b,u[N+7],16,-155497632),b=w(b,v,E,f,u[N+10],23,-1094730640),f=w(f,b,v,E,u[N+13],4,681279174),E=w(E,f,b,v,u[N+0],11,-358537222),v=w(v,E,f,b,u[N+3],16,-722521979),b=w(b,v,E,f,u[N+6],23,76029189),f=w(f,b,v,E,u[N+9],4,-640364487),E=w(E,f,b,v,u[N+12],11,-421815835),v=w(v,E,f,b,u[N+15],16,530742520),f=I(f,b=w(b,v,E,f,u[N+2],23,-995338651),v,E,u[N+0],6,-198630844),E=I(E,f,b,v,u[N+7],10,1126891415),v=I(v,E,f,b,u[N+14],15,-1416354905),b=I(b,v,E,f,u[N+5],21,-57434055),f=I(f,b,v,E,u[N+12],6,1700485571),E=I(E,f,b,v,u[N+3],10,-1894986606),v=I(v,E,f,b,u[N+10],15,-1051523),b=I(b,v,E,f,u[N+1],21,-2054922799),f=I(f,b,v,E,u[N+8],6,1873313359),E=I(E,f,b,v,u[N+15],10,-30611744),v=I(v,E,f,b,u[N+6],15,-1560198380),b=I(b,v,E,f,u[N+13],21,1309151649),f=I(f,b,v,E,u[N+4],6,-145523070),E=I(E,f,b,v,u[N+11],10,-1120210379),v=I(v,E,f,b,u[N+2],15,718787259),b=I(b,v,E,f,u[N+9],21,-343485551),f=f+R>>>0,b=b+O>>>0,v=v+x>>>0,E=E+A>>>0}return r.endian([f,b,v,E])};c._ff=function(d,a,u,p,f,b,v){var E=d+(a&u|~a&p)+(f>>>0)+v;return(E<<b|E>>>32-b)+a},c._gg=function(d,a,u,p,f,b,v){var E=d+(a&p|u&~p)+(f>>>0)+v;return(E<<b|E>>>32-b)+a},c._hh=function(d,a,u,p,f,b,v){var E=d+(a^u^p)+(f>>>0)+v;return(E<<b|E>>>32-b)+a},c._ii=function(d,a,u,p,f,b,v){var E=d+(u^(a|~p))+(f>>>0)+v;return(E<<b|E>>>32-b)+a},c._blocksize=16,c._digestsize=16,e.exports=function(d,a){if(d==null)throw new Error("Illegal argument "+d);var u=r.wordsToBytes(c(d,a));return a&&a.asBytes?u:a&&a.asString?l.bytesToString(u):r.bytesToHex(u)}})()},285:(e,t,n)=>{var r=n(2);e.exports=function(_){return _?(_.substr(0,2)==="{}"&&(_="\\{\\}"+_.substr(2)),N((function(g){return g.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(l).split("\\,").join(c).split("\\.").join(d)})(_),!0).map(u)):[]};var o="\0SLASH"+Math.random()+"\0",s="\0OPEN"+Math.random()+"\0",l="\0CLOSE"+Math.random()+"\0",c="\0COMMA"+Math.random()+"\0",d="\0PERIOD"+Math.random()+"\0";function a(_){return parseInt(_,10)==_?parseInt(_,10):_.charCodeAt(0)}function u(_){return _.split(o).join("\\").split(s).join("{").split(l).join("}").split(c).join(",").split(d).join(".")}function p(_){if(!_)return[""];var g=[],w=r("{","}",_);if(!w)return _.split(",");var I=w.pre,R=w.body,O=w.post,x=I.split(",");x[x.length-1]+="{"+R+"}";var A=p(O);return O.length&&(x[x.length-1]+=A.shift(),x.push.apply(x,A)),g.push.apply(g,x),g}function f(_){return"{"+_+"}"}function b(_){return/^-?0\d/.test(_)}function v(_,g){return _<=g}function E(_,g){return _>=g}function N(_,g){var w=[],I=r("{","}",_);if(!I)return[_];var R=I.pre,O=I.post.length?N(I.post,!1):[""];if(/\$$/.test(I.pre))for(var x=0;x<O.length;x++){var A=R+"{"+I.body+"}"+O[x];w.push(A)}else{var C,B,D=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(I.body),S=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(I.body),$=D||S,G=I.body.indexOf(",")>=0;if(!$&&!G)return I.post.match(/,.*\}/)?N(_=I.pre+"{"+I.body+l+I.post):[_];if($)C=I.body.split(/\.\./);else if((C=p(I.body)).length===1&&(C=N(C[0],!1).map(f)).length===1)return O.map((function(Ft){return I.pre+C[0]+Ft}));if($){var F=a(C[0]),q=a(C[1]),H=Math.max(C[0].length,C[1].length),nt=C.length==3?Math.abs(a(C[2])):1,J=v;q<F&&(nt*=-1,J=E);var vt=C.some(b);B=[];for(var Q=F;J(Q,q);Q+=nt){var rt;if(S)(rt=String.fromCharCode(Q))==="\\"&&(rt="");else if(rt=String(Q),vt){var oe=H-rt.length;if(oe>0){var Zt=new Array(oe+1).join("0");rt=Q<0?"-"+Zt+rt.slice(1):Zt+rt}}B.push(rt)}}else{B=[];for(var Bt=0;Bt<C.length;Bt++)B.push.apply(B,N(C[Bt],!1))}for(Bt=0;Bt<B.length;Bt++)for(x=0;x<O.length;x++)A=R+B[Bt]+O[x],(!g||$||A)&&w.push(A)}return w}},829:e=>{function t(a){return t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},t(a)}function n(a){var u=typeof Map=="function"?new Map:void 0;return n=function(p){if(p===null||(f=p,Function.toString.call(f).indexOf("[native code]")===-1))return p;var f;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(u!==void 0){if(u.has(p))return u.get(p);u.set(p,b)}function b(){return r(p,arguments,s(this).constructor)}return b.prototype=Object.create(p.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),o(b,p)},n(a)}function r(a,u,p){return r=(function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch{return!1}})()?Reflect.construct:function(f,b,v){var E=[null];E.push.apply(E,b);var N=new(Function.bind.apply(f,E));return v&&o(N,v.prototype),N},r.apply(null,arguments)}function o(a,u){return o=Object.setPrototypeOf||function(p,f){return p.__proto__=f,p},o(a,u)}function s(a){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},s(a)}var l=(function(a){function u(p){var f;return(function(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")})(this,u),(f=(function(b,v){return!v||t(v)!=="object"&&typeof v!="function"?(function(E){if(E===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E})(b):v})(this,s(u).call(this,p))).name="ObjectPrototypeMutationError",f}return(function(p,f){if(typeof f!="function"&&f!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(f&&f.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),f&&o(p,f)})(u,a),u})(n(Error));function c(a,u){for(var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},f=u.split("."),b=f.length,v=function(_){var g=f[_];if(!a)return{v:void 0};if(g==="+"){if(Array.isArray(a))return{v:a.map((function(I,R){var O=f.slice(_+1);return O.length>0?c(I,O.join("."),p):p(a,R,f,_)}))};var w=f.slice(0,_).join(".");throw new Error("Object at wildcard (".concat(w,") is not an array"))}a=p(a,g,f,_)},E=0;E<b;E++){var N=v(E);if(t(N)==="object")return N.v}return a}function d(a,u){return a.length===u+1}e.exports={set:function(a,u,p){if(t(a)!="object"||a===null||u===void 0)return a;if(typeof u=="number")return a[u]=p,a[u];try{return c(a,u,(function(f,b,v,E){if(f===Reflect.getPrototypeOf({}))throw new l("Attempting to mutate Object.prototype");if(!f[b]){var N=Number.isInteger(Number(v[E+1])),_=v[E+1]==="+";f[b]=N||_?[]:{}}return d(v,E)&&(f[b]=p),f[b]}))}catch(f){if(f instanceof l)throw f;return a}},get:function(a,u){if(t(a)!="object"||a===null||u===void 0)return a;if(typeof u=="number")return a[u];try{return c(a,u,(function(p,f){return p[f]}))}catch{return a}},has:function(a,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t(a)!="object"||a===null||u===void 0)return!1;if(typeof u=="number")return u in a;try{var f=!1;return c(a,u,(function(b,v,E,N){if(!d(E,N))return b&&b[v];f=p.own?b.hasOwnProperty(v):v in b})),f}catch{return!1}},hasOwn:function(a,u,p){return this.has(a,u,p||{own:!0})},isIn:function(a,u,p){var f=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(t(a)!="object"||a===null||u===void 0)return!1;try{var b=!1,v=!1;return c(a,u,(function(E,N,_,g){return b=b||E===p||!!E&&E[N]===p,v=d(_,g)&&t(E)==="object"&&N in E,E&&E[N]})),f.validPath?b&&v:b}catch{return!1}},ObjectPrototypeMutationError:l}},47:(e,t,n)=>{var r=n(410),o=function(a){return typeof a=="string"};function s(a,u){for(var p=[],f=0;f<a.length;f++){var b=a[f];b&&b!=="."&&(b===".."?p.length&&p[p.length-1]!==".."?p.pop():u&&p.push(".."):p.push(b))}return p}var l=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,c={};function d(a){return l.exec(a).slice(1)}c.resolve=function(){for(var a="",u=!1,p=arguments.length-1;p>=-1&&!u;p--){var f=p>=0?arguments[p]:he.cwd();if(!o(f))throw new TypeError("Arguments to path.resolve must be strings");f&&(a=f+"/"+a,u=f.charAt(0)==="/")}return(u?"/":"")+(a=s(a.split("/"),!u).join("/"))||"."},c.normalize=function(a){var u=c.isAbsolute(a),p=a.substr(-1)==="/";return(a=s(a.split("/"),!u).join("/"))||u||(a="."),a&&p&&(a+="/"),(u?"/":"")+a},c.isAbsolute=function(a){return a.charAt(0)==="/"},c.join=function(){for(var a="",u=0;u<arguments.length;u++){var p=arguments[u];if(!o(p))throw new TypeError("Arguments to path.join must be strings");p&&(a+=a?"/"+p:p)}return c.normalize(a)},c.relative=function(a,u){function p(g){for(var w=0;w<g.length&&g[w]==="";w++);for(var I=g.length-1;I>=0&&g[I]==="";I--);return w>I?[]:g.slice(w,I+1)}a=c.resolve(a).substr(1),u=c.resolve(u).substr(1);for(var f=p(a.split("/")),b=p(u.split("/")),v=Math.min(f.length,b.length),E=v,N=0;N<v;N++)if(f[N]!==b[N]){E=N;break}var _=[];for(N=E;N<f.length;N++)_.push("..");return(_=_.concat(b.slice(E))).join("/")},c._makeLong=function(a){return a},c.dirname=function(a){var u=d(a),p=u[0],f=u[1];return p||f?(f&&(f=f.substr(0,f.length-1)),p+f):"."},c.basename=function(a,u){var p=d(a)[2];return u&&p.substr(-1*u.length)===u&&(p=p.substr(0,p.length-u.length)),p},c.extname=function(a){return d(a)[3]},c.format=function(a){if(!r.isObject(a))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof a);var u=a.root||"";if(!o(u))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof a.root);return(a.dir?a.dir+c.sep:"")+(a.base||"")},c.parse=function(a){if(!o(a))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof a);var u=d(a);if(!u||u.length!==4)throw new TypeError("Invalid path '"+a+"'");return u[1]=u[1]||"",u[2]=u[2]||"",u[3]=u[3]||"",{root:u[0],dir:u[0]+u[1].slice(0,u[1].length-1),base:u[2],ext:u[3],name:u[2].slice(0,u[2].length-u[3].length)}},c.sep="/",c.delimiter=":",e.exports=c},647:(e,t)=>{var n=Object.prototype.hasOwnProperty;function r(s){try{return decodeURIComponent(s.replace(/\+/g," "))}catch{return null}}function o(s){try{return encodeURIComponent(s)}catch{return null}}t.stringify=function(s,l){l=l||"";var c,d,a=[];for(d in typeof l!="string"&&(l="?"),s)if(n.call(s,d)){if((c=s[d])||c!=null&&!isNaN(c)||(c=""),d=o(d),c=o(c),d===null||c===null)continue;a.push(d+"="+c)}return a.length?l+a.join("&"):""},t.parse=function(s){for(var l,c=/([^=?#&]+)=?([^&]*)/g,d={};l=c.exec(s);){var a=r(l[1]),u=r(l[2]);a===null||u===null||a in d||(d[a]=u)}return d}},670:e=>{e.exports=function(t,n){if(n=n.split(":")[0],!(t=+t))return!1;switch(n){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0}},494:e=>{const t=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const r={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};e.exports=function(o){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(s=Object.assign({},r,s),!o||typeof o!="string")return o;let l=o.trim();if(s.skipLike!==void 0&&s.skipLike.test(l))return o;if(s.hex&&t.test(l))return Number.parseInt(l,16);{const d=n.exec(l);if(d){const a=d[1],u=d[2];let p=((c=d[3])&&c.indexOf(".")!==-1&&((c=c.replace(/0+$/,""))==="."?c="0":c[0]==="."?c="0"+c:c[c.length-1]==="."&&(c=c.substr(0,c.length-1))),c);const f=d[4]||d[6];if(!s.leadingZeros&&u.length>0&&a&&l[2]!=="."||!s.leadingZeros&&u.length>0&&!a&&l[1]!==".")return o;{const b=Number(l),v=""+b;return v.search(/[eE]/)!==-1||f?s.eNotation?b:o:l.indexOf(".")!==-1?v==="0"&&p===""||v===p||a&&v==="-"+p?b:o:u?p===v||a+p===v?b:o:l===v||l===a+v?b:o}}return o}var c}},737:(e,t,n)=>{var r=n(670),o=n(647),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,l=/[\n\r\t]/g,c=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,d=/:\d+$/,a=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,u=/^[a-zA-Z]:/;function p(g){return(g||"").toString().replace(s,"")}var f=[["#","hash"],["?","query"],function(g,w){return E(w.protocol)?g.replace(/\\/g,"/"):g},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],b={hash:1,query:1};function v(g){var w,I=(typeof window<"u"?window:typeof Se<"u"?Se:typeof self<"u"?self:{}).location||{},R={},O=typeof(g=g||I);if(g.protocol==="blob:")R=new _(unescape(g.pathname),{});else if(O==="string")for(w in R=new _(g,{}),b)delete R[w];else if(O==="object"){for(w in g)w in b||(R[w]=g[w]);R.slashes===void 0&&(R.slashes=c.test(g.href))}return R}function E(g){return g==="file:"||g==="ftp:"||g==="http:"||g==="https:"||g==="ws:"||g==="wss:"}function N(g,w){g=(g=p(g)).replace(l,""),w=w||{};var I,R=a.exec(g),O=R[1]?R[1].toLowerCase():"",x=!!R[2],A=!!R[3],C=0;return x?A?(I=R[2]+R[3]+R[4],C=R[2].length+R[3].length):(I=R[2]+R[4],C=R[2].length):A?(I=R[3]+R[4],C=R[3].length):I=R[4],O==="file:"?C>=2&&(I=I.slice(2)):E(O)?I=R[4]:O?x&&(I=I.slice(2)):C>=2&&E(w.protocol)&&(I=R[4]),{protocol:O,slashes:x||E(O),slashesCount:C,rest:I}}function _(g,w,I){if(g=(g=p(g)).replace(l,""),!(this instanceof _))return new _(g,w,I);var R,O,x,A,C,B,D=f.slice(),S=typeof w,$=this,G=0;for(S!=="object"&&S!=="string"&&(I=w,w=null),I&&typeof I!="function"&&(I=o.parse),R=!(O=N(g||"",w=v(w))).protocol&&!O.slashes,$.slashes=O.slashes||R&&w.slashes,$.protocol=O.protocol||w.protocol||"",g=O.rest,(O.protocol==="file:"&&(O.slashesCount!==2||u.test(g))||!O.slashes&&(O.protocol||O.slashesCount<2||!E($.protocol)))&&(D[3]=[/(.*)/,"pathname"]);G<D.length;G++)typeof(A=D[G])!="function"?(x=A[0],B=A[1],x!=x?$[B]=g:typeof x=="string"?~(C=x==="@"?g.lastIndexOf(x):g.indexOf(x))&&(typeof A[2]=="number"?($[B]=g.slice(0,C),g=g.slice(C+A[2])):($[B]=g.slice(C),g=g.slice(0,C))):(C=x.exec(g))&&($[B]=C[1],g=g.slice(0,C.index)),$[B]=$[B]||R&&A[3]&&w[B]||"",A[4]&&($[B]=$[B].toLowerCase())):g=A(g,$);I&&($.query=I($.query)),R&&w.slashes&&$.pathname.charAt(0)!=="/"&&($.pathname!==""||w.pathname!=="")&&($.pathname=(function(F,q){if(F==="")return q;for(var H=(q||"/").split("/").slice(0,-1).concat(F.split("/")),nt=H.length,J=H[nt-1],vt=!1,Q=0;nt--;)H[nt]==="."?H.splice(nt,1):H[nt]===".."?(H.splice(nt,1),Q++):Q&&(nt===0&&(vt=!0),H.splice(nt,1),Q--);return vt&&H.unshift(""),J!=="."&&J!==".."||H.push(""),H.join("/")})($.pathname,w.pathname)),$.pathname.charAt(0)!=="/"&&E($.protocol)&&($.pathname="/"+$.pathname),r($.port,$.protocol)||($.host=$.hostname,$.port=""),$.username=$.password="",$.auth&&(~(C=$.auth.indexOf(":"))?($.username=$.auth.slice(0,C),$.username=encodeURIComponent(decodeURIComponent($.username)),$.password=$.auth.slice(C+1),$.password=encodeURIComponent(decodeURIComponent($.password))):$.username=encodeURIComponent(decodeURIComponent($.auth)),$.auth=$.password?$.username+":"+$.password:$.username),$.origin=$.protocol!=="file:"&&E($.protocol)&&$.host?$.protocol+"//"+$.host:"null",$.href=$.toString()}_.prototype={set:function(g,w,I){var R=this;switch(g){case"query":typeof w=="string"&&w.length&&(w=(I||o.parse)(w)),R[g]=w;break;case"port":R[g]=w,r(w,R.protocol)?w&&(R.host=R.hostname+":"+w):(R.host=R.hostname,R[g]="");break;case"hostname":R[g]=w,R.port&&(w+=":"+R.port),R.host=w;break;case"host":R[g]=w,d.test(w)?(w=w.split(":"),R.port=w.pop(),R.hostname=w.join(":")):(R.hostname=w,R.port="");break;case"protocol":R.protocol=w.toLowerCase(),R.slashes=!I;break;case"pathname":case"hash":if(w){var O=g==="pathname"?"/":"#";R[g]=w.charAt(0)!==O?O+w:w}else R[g]=w;break;case"username":case"password":R[g]=encodeURIComponent(w);break;case"auth":var x=w.indexOf(":");~x?(R.username=w.slice(0,x),R.username=encodeURIComponent(decodeURIComponent(R.username)),R.password=w.slice(x+1),R.password=encodeURIComponent(decodeURIComponent(R.password))):R.username=encodeURIComponent(decodeURIComponent(w))}for(var A=0;A<f.length;A++){var C=f[A];C[4]&&(R[C[1]]=R[C[1]].toLowerCase())}return R.auth=R.password?R.username+":"+R.password:R.username,R.origin=R.protocol!=="file:"&&E(R.protocol)&&R.host?R.protocol+"//"+R.host:"null",R.href=R.toString(),R},toString:function(g){g&&typeof g=="function"||(g=o.stringify);var w,I=this,R=I.host,O=I.protocol;O&&O.charAt(O.length-1)!==":"&&(O+=":");var x=O+(I.protocol&&I.slashes||E(I.protocol)?"//":"");return I.username?(x+=I.username,I.password&&(x+=":"+I.password),x+="@"):I.password?(x+=":"+I.password,x+="@"):I.protocol!=="file:"&&E(I.protocol)&&!R&&I.pathname!=="/"&&(x+="@"),(R[R.length-1]===":"||d.test(I.hostname)&&!I.port)&&(R+=":"),x+=R+I.pathname,(w=typeof I.query=="object"?g(I.query):I.query)&&(x+=w.charAt(0)!=="?"?"?"+w:w),I.hash&&(x+=I.hash),x}},_.extractProtocol=N,_.location=v,_.trimLeft=p,_.qs=o,e.exports=_},410:()=>{},388:()=>{},805:()=>{},345:()=>{},800:()=>{}},Tr={};function tt(e){var t=Tr[e];if(t!==void 0)return t.exports;var n=Tr[e]={id:e,loaded:!1,exports:{}};return ss[e].call(n.exports,n,n.exports,tt),n.loaded=!0,n.exports}tt.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return tt.d(t,{a:t}),t},tt.d=(e,t)=>{for(var n in t)tt.o(t,n)&&!tt.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},tt.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),tt.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var jt={};tt.d(jt,{hT:()=>Lt,O4:()=>Yt,Kd:()=>gs,YK:()=>ms,UU:()=>Ta,Gu:()=>bi,ky:()=>Si,h4:()=>Ce,ch:()=>Ze,hq:()=>ie,i5:()=>Ai});var as=tt(737),ls=tt.n(as);function ln(e){if(!Pn(e))throw new Error("Parameter was not an error")}function Pn(e){return!!e&&typeof e=="object"&&(t=e,Object.prototype.toString.call(t)==="[object Error]")||e instanceof Error;var t}class Pt extends Error{constructor(t,n){const r=[...arguments],{options:o,shortMessage:s}=(function(c){let d,a="";if(c.length===0)d={};else if(Pn(c[0]))d={cause:c[0]},a=c.slice(1).join(" ")||"";else if(c[0]&&typeof c[0]=="object")d=Object.assign({},c[0]),a=c.slice(1).join(" ")||"";else{if(typeof c[0]!="string")throw new Error("Invalid arguments passed to Layerr");d={},a=a=c.join(" ")||""}return{options:d,shortMessage:a}})(r);let l=s;if(o.cause&&(l=`${l}: ${o.cause.message}`),super(l),this.message=l,o.name&&typeof o.name=="string"?this.name=o.name:this.name="Layerr",o.cause&&Object.defineProperty(this,"_cause",{value:o.cause}),Object.defineProperty(this,"_info",{value:{}}),o.info&&typeof o.info=="object"&&Object.assign(this._info,o.info),Error.captureStackTrace){const c=o.constructorOpt||this.constructor;Error.captureStackTrace(this,c)}}static cause(t){return ln(t),t._cause&&Pn(t._cause)?t._cause:null}static fullStack(t){ln(t);const n=Pt.cause(t);return n?`${t.stack}
caused by: ${Pt.fullStack(n)}`:t.stack??""}static info(t){ln(t);const n={},r=Pt.cause(t);return r&&Object.assign(n,Pt.info(r)),t._info&&Object.assign(n,t._info),n}toString(){let t=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(t=`${t}: ${this.message}`),t}}var us=tt(47),Me=tt.n(us);const Nr="__PATH_SEPARATOR_POSIX__",Cr="__PATH_SEPARATOR_WINDOWS__";function at(e){try{const t=e.replace(/\//g,Nr).replace(/\\\\/g,Cr);return encodeURIComponent(t).split(Cr).join("\\\\").split(Nr).join("/")}catch(t){throw new Pt(t,"Failed encoding path")}}function _r(e){return e.startsWith("/")?e:"/"+e}function Te(e){let t=e;return t[0]!=="/"&&(t="/"+t),/^.+\/$/.test(t)&&(t=t.substr(0,t.length-1)),t}function cs(e){let t=new(ls())(e).pathname;return t.length<=0&&(t="/"),Te(t)}function lt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(function(){return(function(r){var o=[];if(r.length===0)return"";if(typeof r[0]!="string")throw new TypeError("Url must be a string. Received "+r[0]);if(r[0].match(/^[^/:]+:\/*$/)&&r.length>1){var s=r.shift();r[0]=s+r[0]}r[0].match(/^file:\/\/\//)?r[0]=r[0].replace(/^([^/:]+):\/*/,"$1:///"):r[0]=r[0].replace(/^([^/:]+):\/*/,"$1://");for(var l=0;l<r.length;l++){var c=r[l];if(typeof c!="string")throw new TypeError("Url must be a string. Received "+c);c!==""&&(l>0&&(c=c.replace(/^[\/]+/,"")),c=l<r.length-1?c.replace(/[\/]+$/,""):c.replace(/[\/]+$/,"/"),o.push(c))}var d=o.join("/"),a=(d=d.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return a.shift()+(a.length>0?"?":"")+a.join("&")})(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))})(t.reduce(((r,o,s)=>((s===0||o!=="/"||o==="/"&&r[r.length-1]!=="/")&&r.push(o),r)),[]))}var hs=tt(542),ge=tt.n(hs);const fs="abcdef0123456789";function Or(e,t){const n=e.url.replace("//",""),r=n.indexOf("/")==-1?"/":n.slice(n.indexOf("/")),o=e.method?e.method.toUpperCase():"GET",s=!!/(^|,)\s*auth\s*($|,)/.test(t.qop)&&"auth",l=`00000000${t.nc}`.slice(-8),c=(function(f,b,v,E,N,_,g){const w=g||ge()(`${b}:${v}:${E}`);return f&&f.toLowerCase()==="md5-sess"?ge()(`${w}:${N}:${_}`):w})(t.algorithm,t.username,t.realm,t.password,t.nonce,t.cnonce,t.ha1),d=ge()(`${o}:${r}`),a=s?ge()(`${c}:${t.nonce}:${l}:${t.cnonce}:${s}:${d}`):ge()(`${c}:${t.nonce}:${d}`),u={username:t.username,realm:t.realm,nonce:t.nonce,uri:r,qop:s,response:a,nc:l,cnonce:t.cnonce,algorithm:t.algorithm,opaque:t.opaque},p=[];for(const f in u)u[f]&&(f==="qop"||f==="nc"||f==="algorithm"?p.push(`${f}=${u[f]}`):p.push(`${f}="${u[f]}"`));return`Digest ${p.join(", ")}`}function mi(e){return(e.headers&&e.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var ps=tt(101),vi=tt.n(ps);function Ir(e){return vi().decode(e)}function Sr(e,t){var n;return`Basic ${n=`${e}:${t}`,vi().encode(n)}`}const je=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,ds=je.fetch.bind(je),gs=je.Request,ms=je.Response;let Lt=(function(e){return e.Auto="auto",e.Digest="digest",e.None="none",e.Password="password",e.Token="token",e})({}),Yt=(function(e){return e.DataTypeNoLength="data-type-no-length",e.InvalidAuthType="invalid-auth-type",e.InvalidOutputFormat="invalid-output-format",e.LinkUnsupportedAuthType="link-unsupported-auth",e.InvalidUpdateRange="invalid-update-range",e.NotSupported="not-supported",e})({});function yi(e,t,n,r,o){switch(e.authType){case Lt.Auto:t&&n&&(e.headers.Authorization=Sr(t,n));break;case Lt.Digest:e.digest=(function(l,c,d){return{username:l,password:c,ha1:d,nc:0,algorithm:"md5",hasDigestAuth:!1}})(t,n,o);break;case Lt.None:break;case Lt.Password:e.headers.Authorization=Sr(t,n);break;case Lt.Token:e.headers.Authorization=`${(s=r).token_type} ${s.access_token}`;break;default:throw new Pt({info:{code:Yt.InvalidAuthType}},`Invalid auth type: ${e.authType}`)}var s}tt(345),tt(800);const Ar="@@HOTPATCHER",vs=()=>{};function un(e){return{original:e,methods:[e],final:!1}}class ys{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=Ar}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(t){this.configuration.getEmptyAction=t}control(t){let n=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!t||t.__type__!==Ar)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(t.configuration.registry).forEach((r=>{this.configuration.registry.hasOwnProperty(r)?n&&(this.configuration.registry[r]=Object.assign({},t.configuration.registry[r])):this.configuration.registry[r]=Object.assign({},t.configuration.registry[r])})),t._configuration=this.configuration,this}execute(t){const n=this.get(t)||vs;for(var r=arguments.length,o=new Array(r>1?r-1:0),s=1;s<r;s++)o[s-1]=arguments[s];return n(...o)}get(t){const n=this.configuration.registry[t];if(!n)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error(`Failed handling method request: No method provided for override: ${t}`);default:throw new Error(`Failed handling request which resulted in an empty method: Invalid empty-action specified: ${this.getEmptyAction}`)}return(function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];if(o.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];let a=c;const u=this;for(;o.length>0;)a=[o.shift().apply(u,a)];return a[0]}})(...n.methods)}isPatched(t){return!!this.configuration.registry[t]}patch(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:o=!1}=r;if(this.configuration.registry[t]&&this.configuration.registry[t].final)throw new Error(`Failed patching '${t}': Method marked as being final`);if(typeof n!="function")throw new Error(`Failed patching '${t}': Provided method is not a function`);if(o)this.configuration.registry[t]?this.configuration.registry[t].methods.push(n):this.configuration.registry[t]=un(n);else if(this.isPatched(t)){const{original:s}=this.configuration.registry[t];this.configuration.registry[t]=Object.assign(un(n),{original:s})}else this.configuration.registry[t]=un(n);return this}patchInline(t,n){this.isPatched(t)||this.patch(t,n);for(var r=arguments.length,o=new Array(r>2?r-2:0),s=2;s<r;s++)o[s-2]=arguments[s];return this.execute(t,...o)}plugin(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.forEach((s=>{this.patch(t,s,{chain:!0})})),this}restore(t){if(!this.isPatched(t))throw new Error(`Failed restoring method: No method present for key: ${t}`);if(typeof this.configuration.registry[t].original!="function")throw new Error(`Failed restoring method: Original method not found or of invalid type for key: ${t}`);return this.configuration.registry[t].methods=[this.configuration.registry[t].original],this}setFinal(t){if(!this.configuration.registry.hasOwnProperty(t))throw new Error(`Failed marking '${t}' as final: No method found for key`);return this.configuration.registry[t].final=!0,this}}let cn=null;function bi(){return cn||(cn=new ys),cn}function Ve(e){return(function(t){if(typeof t!="object"||t===null||Object.prototype.toString.call(t)!="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let n=t;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(t)===n})(e)?Object.assign({},e):Object.setPrototypeOf(Object.assign({},e),Object.getPrototypeOf(e))}function Rr(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=null,o=[...t];for(;o.length>0;){const s=o.shift();r=r?wi(r,s):Ve(s)}return r}function wi(e,t){const n=Ve(e);return Object.keys(t).forEach((r=>{n.hasOwnProperty(r)?Array.isArray(t[r])?n[r]=Array.isArray(n[r])?[...n[r],...t[r]]:[...t[r]]:typeof t[r]=="object"&&t[r]?n[r]=typeof n[r]=="object"&&n[r]?wi(n[r],t[r]):Ve(t[r]):n[r]=t[r]:n[r]=t[r]})),n}function bs(e){const t={};for(const n of e.keys())t[n]=e.get(n);return t}function $n(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length===0)return{};const r={};return t.reduce(((o,s)=>(Object.keys(s).forEach((l=>{const c=l.toLowerCase();r.hasOwnProperty(c)?o[r[c]]=s[l]:(r[c]=l,o[l]=s[l])})),o)),{})}tt(805);const ws=typeof ArrayBuffer=="function",{toString:Es}=Object.prototype;function Ei(e){return ws&&(e instanceof ArrayBuffer||Es.call(e)==="[object ArrayBuffer]")}function Ti(e){return e!=null&&e.constructor!=null&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Hn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function kn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Ni=Hn((function(e){const t=e._digest;return delete e._digest,t.hasDigestAuth&&(e=Rr(e,{headers:{Authorization:Or(e,t)}})),kn(Fe(e),(function(n){let r=!1;return o=function(l){return r?l:n},(s=(function(){if(n.status==401)return t.hasDigestAuth=(function(l,c){if(!mi(l))return!1;const d=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const a=l.headers&&l.headers.get("www-authenticate")||"",u=d.exec(a);if(!u)break;c[u[1]]=u[2]||u[3]}return c.nc+=1,c.cnonce=(function(){let a="";for(let u=0;u<32;++u)a=`${a}${fs[Math.floor(16*Math.random())]}`;return a})(),!0})(n,t),(function(){if(t.hasDigestAuth)return kn(Fe(e=Rr(e,{headers:{Authorization:Or(e,t)}})),(function(l){return l.status==401?t.hasDigestAuth=!1:t.nc++,r=!0,l}))})();t.nc++})())&&s.then?s.then(o):o(s);var o,s}))})),Ts=Hn((function(e,t){return kn(Fe(e),(function(n){return n.ok?(t.authType=Lt.Password,n):n.status==401&&mi(n)?(t.authType=Lt.Digest,yi(t,t.username,t.password,void 0,void 0),e._digest=t.digest,Ni(e)):n}))})),wt=Hn((function(e,t){return t.authType===Lt.Auto?Ts(e,t):e._digest?Ni(e):Fe(e)}));function Et(e,t,n){const r=Ve(e);return r.headers=$n(t.headers,r.headers||{},n.headers||{}),n.data!==void 0&&(r.data=n.data),n.signal&&(r.signal=n.signal),t.httpAgent&&(r.httpAgent=t.httpAgent),t.httpsAgent&&(r.httpsAgent=t.httpsAgent),t.digest&&(r._digest=t.digest),typeof t.withCredentials=="boolean"&&(r.withCredentials=t.withCredentials),r}function Fe(e){const t=bi();return t.patchInline("request",(n=>t.patchInline("fetch",ds,n.url,(function(r){let o={};const s={method:r.method};if(r.headers&&(o=$n(o,r.headers)),r.data!==void 0){const[l,c]=(function(d){if(typeof d=="string")return[d,{}];if(Ti(d))return[d,{}];if(Ei(d))return[d,{}];if(d&&typeof d=="object")return[JSON.stringify(d),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: "+typeof d)})(r.data);s.body=l,o=$n(o,c)}return r.signal&&(s.signal=r.signal),r.withCredentials&&(s.credentials="include"),s.headers=o,s})(n))),e)}var Ns=tt(285);const Ge=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>65536)throw new TypeError("pattern is too long")},Cs={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},me=e=>e.replace(/[[\]\\-]/g,"\\$&"),Lr=e=>e.join(""),_s=(e,t)=>{const n=t;if(e.charAt(n)!=="[")throw new Error("not in a brace expression");const r=[],o=[];let s=n+1,l=!1,c=!1,d=!1,a=!1,u=n,p="";t:for(;s<e.length;){const E=e.charAt(s);if(E!=="!"&&E!=="^"||s!==n+1){if(E==="]"&&l&&!d){u=s+1;break}if(l=!0,E!=="\\"||d){if(E==="["&&!d){for(const[N,[_,g,w]]of Object.entries(Cs))if(e.startsWith(N,s)){if(p)return["$.",!1,e.length-n,!0];s+=N.length,w?o.push(_):r.push(_),c=c||g;continue t}}d=!1,p?(E>p?r.push(me(p)+"-"+me(E)):E===p&&r.push(me(E)),p="",s++):e.startsWith("-]",s+1)?(r.push(me(E+"-")),s+=2):e.startsWith("-",s+1)?(p=E,s+=2):(r.push(me(E)),s++)}else d=!0,s++}else a=!0,s++}if(u<s)return["",!1,0,!1];if(!r.length&&!o.length)return["$.",!1,e.length-n,!0];if(o.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!a)return[(f=r[0].length===2?r[0].slice(-1):r[0],f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,u-n,!1];var f;const b="["+(a?"^":"")+Lr(r)+"]",v="["+(a?"":"^")+Lr(o)+"]";return[r.length&&o.length?"("+b+"|"+v+")":r.length?b:v,c,u-n,!0]},ve=function(e){let{windowsPathsNoEscape:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t?e.replace(/\[([^\/\\])\]/g,"$1"):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")},Os=new Set(["!","?","+","*","@"]),xr=e=>Os.has(e),hn="(?!\\.)",Is=new Set(["[","."]),Ss=new Set(["..","."]),As=new Set("().*{}+?[]^$\\!"),Wn="[^/]",Pr=Wn+"*?",$r=Wn+"+?";class Rt{type;#n;#r;#o=!1;#t=[];#e;#s;#l;#a=!1;#i;#u;#h=!1;constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.type=t,t&&(this.#r=!0),this.#e=n,this.#n=this.#e?this.#e.#n:this,this.#i=this.#n===this?r:this.#n.#i,this.#l=this.#n===this?[]:this.#n.#l,t!=="!"||this.#n.#a||this.#l.push(this),this.#s=this.#e?this.#e.#t.length:0}get hasMagic(){if(this.#r!==void 0)return this.#r;for(const t of this.#t)if(typeof t!="string"&&(t.type||t.hasMagic))return this.#r=!0;return this.#r}toString(){return this.#u!==void 0?this.#u:this.type?this.#u=this.type+"("+this.#t.map((t=>String(t))).join("|")+")":this.#u=this.#t.map((t=>String(t))).join("")}#p(){if(this!==this.#n)throw new Error("should only call on root");if(this.#a)return this;let t;for(this.toString(),this.#a=!0;t=this.#l.pop();){if(t.type!=="!")continue;let n=t,r=n.#e;for(;r;){for(let o=n.#s+1;!r.type&&o<r.#t.length;o++)for(const s of t.#t){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(r.#t[o])}n=r,r=n.#e}}return this}push(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const o of n)if(o!==""){if(typeof o!="string"&&!(o instanceof Rt&&o.#e===this))throw new Error("invalid part: "+o);this.#t.push(o)}}toJSON(){const t=this.type===null?this.#t.slice().map((n=>typeof n=="string"?n:n.toJSON())):[this.type,...this.#t.map((n=>n.toJSON()))];return this.isStart()&&!this.type&&t.unshift([]),this.isEnd()&&(this===this.#n||this.#n.#a&&this.#e?.type==="!")&&t.push({}),t}isStart(){if(this.#n===this)return!0;if(!this.#e?.isStart())return!1;if(this.#s===0)return!0;const t=this.#e;for(let n=0;n<this.#s;n++){const r=t.#t[n];if(!(r instanceof Rt&&r.type==="!"))return!1}return!0}isEnd(){if(this.#n===this||this.#e?.type==="!")return!0;if(!this.#e?.isEnd())return!1;if(!this.type)return this.#e?.isEnd();const t=this.#e?this.#e.#t.length:0;return this.#s===t-1}copyIn(t){typeof t=="string"?this.push(t):this.push(t.clone(this))}clone(t){const n=new Rt(this.type,t);for(const r of this.#t)n.copyIn(r);return n}static#c(t,n,r,o){let s=!1,l=!1,c=-1,d=!1;if(n.type===null){let b=r,v="";for(;b<t.length;){const E=t.charAt(b++);if(s||E==="\\")s=!s,v+=E;else if(l)b===c+1?E!=="^"&&E!=="!"||(d=!0):E!=="]"||b===c+2&&d||(l=!1),v+=E;else if(E!=="[")if(o.noext||!xr(E)||t.charAt(b)!=="(")v+=E;else{n.push(v),v="";const N=new Rt(E,n);b=Rt.#c(t,N,b,o),n.push(N)}else l=!0,c=b,d=!1,v+=E}return n.push(v),b}let a=r+1,u=new Rt(null,n);const p=[];let f="";for(;a<t.length;){const b=t.charAt(a++);if(s||b==="\\")s=!s,f+=b;else if(l)a===c+1?b!=="^"&&b!=="!"||(d=!0):b!=="]"||a===c+2&&d||(l=!1),f+=b;else if(b!=="[")if(xr(b)&&t.charAt(a)==="("){u.push(f),f="";const v=new Rt(b,u);u.push(v),a=Rt.#c(t,v,a,o)}else if(b!=="|"){if(b===")")return f===""&&n.#t.length===0&&(n.#h=!0),u.push(f),f="",n.push(...p,u),a;f+=b}else u.push(f),f="",p.push(u),u=new Rt(null,n);else l=!0,c=a,d=!1,f+=b}return n.type=null,n.#r=void 0,n.#t=[t.substring(r-1)],a}static fromGlob(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=new Rt(null,void 0,n);return Rt.#c(t,r,0,n),r}toMMPattern(){if(this!==this.#n)return this.#n.toMMPattern();const t=this.toString(),[n,r,o,s]=this.toRegExpSource();if(!(o||this.#r||this.#i.nocase&&!this.#i.nocaseMagicOnly&&t.toUpperCase()!==t.toLowerCase()))return r;const l=(this.#i.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${n}$`,l),{_src:n,_glob:t})}get options(){return this.#i}toRegExpSource(t){const n=t??!!this.#i.dot;if(this.#n===this&&this.#p(),!this.type){const d=this.isStart()&&this.isEnd(),a=this.#t.map((f=>{const[b,v,E,N]=typeof f=="string"?Rt.#d(f,this.#r,d):f.toRegExpSource(t);return this.#r=this.#r||E,this.#o=this.#o||N,b})).join("");let u="";if(this.isStart()&&typeof this.#t[0]=="string"&&(this.#t.length!==1||!Ss.has(this.#t[0]))){const f=Is,b=n&&f.has(a.charAt(0))||a.startsWith("\\.")&&f.has(a.charAt(2))||a.startsWith("\\.\\.")&&f.has(a.charAt(4)),v=!n&&!t&&f.has(a.charAt(0));u=b?"(?!(?:^|/)\\.\\.?(?:$|/))":v?hn:""}let p="";return this.isEnd()&&this.#n.#a&&this.#e?.type==="!"&&(p="(?:$|\\/)"),[u+a+p,ve(a),this.#r=!!this.#r,this.#o]}const r=this.type==="*"||this.type==="+",o=this.type==="!"?"(?:(?!(?:":"(?:";let s=this.#f(n);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){const d=this.toString();return this.#t=[d],this.type=null,this.#r=void 0,[d,ve(this.toString()),!1,!1]}let l=!r||t||n?"":this.#f(!0);l===s&&(l=""),l&&(s=`(?:${s})(?:${l})*?`);let c="";return c=this.type==="!"&&this.#h?(this.isStart()&&!n?hn:"")+$r:o+s+(this.type==="!"?"))"+(!this.isStart()||n||t?"":hn)+Pr+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&l?")":this.type==="*"&&l?")?":`)${this.type}`),[c,ve(s),this.#r=!!this.#r,this.#o]}#f(t){return this.#t.map((n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");const[r,o,s,l]=n.toRegExpSource(t);return this.#o=this.#o||l,r})).filter((n=>!(this.isStart()&&this.isEnd()&&!n))).join("|")}static#d(t,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=!1,s="",l=!1;for(let c=0;c<t.length;c++){const d=t.charAt(c);if(o)o=!1,s+=(As.has(d)?"\\":"")+d;else if(d!=="\\"){if(d==="["){const[a,u,p,f]=_s(t,c);if(p){s+=a,l=l||u,c+=p-1,n=n||f;continue}}d!=="*"?d!=="?"?s+=d.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(s+=Wn,n=!0):(s+=r&&t==="*"?$r:Pr,n=!0)}else c===t.length-1?s+="\\\\":o=!0}return[s,ve(t),!!n,l]}}const At=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Ge(t),!(!n.nocomment&&t.charAt(0)==="#")&&new ze(t,n).match(e)},Rs=/^\*+([^+@!?\*\[\(]*)$/,Ls=e=>t=>!t.startsWith(".")&&t.endsWith(e),xs=e=>t=>t.endsWith(e),Ps=e=>(e=e.toLowerCase(),t=>!t.startsWith(".")&&t.toLowerCase().endsWith(e)),$s=e=>(e=e.toLowerCase(),t=>t.toLowerCase().endsWith(e)),ks=/^\*+\.\*+$/,Ds=e=>!e.startsWith(".")&&e.includes("."),Bs=e=>e!=="."&&e!==".."&&e.includes("."),Us=/^\.\*+$/,Ms=e=>e!=="."&&e!==".."&&e.startsWith("."),js=/^\*+$/,Vs=e=>e.length!==0&&!e.startsWith("."),Fs=e=>e.length!==0&&e!=="."&&e!=="..",Gs=/^\?+([^+@!?\*\[\(]*)?$/,zs=e=>{let[t,n=""]=e;const r=Ci([t]);return n?(n=n.toLowerCase(),o=>r(o)&&o.toLowerCase().endsWith(n)):r},Hs=e=>{let[t,n=""]=e;const r=_i([t]);return n?(n=n.toLowerCase(),o=>r(o)&&o.toLowerCase().endsWith(n)):r},Ws=e=>{let[t,n=""]=e;const r=_i([t]);return n?o=>r(o)&&o.endsWith(n):r},Xs=e=>{let[t,n=""]=e;const r=Ci([t]);return n?o=>r(o)&&o.endsWith(n):r},Ci=e=>{let[t]=e;const n=t.length;return r=>r.length===n&&!r.startsWith(".")},_i=e=>{let[t]=e;const n=t.length;return r=>r.length===n&&r!=="."&&r!==".."},Oi=typeof he=="object"&&he?typeof an=="object"&&an&&an.__MINIMATCH_TESTING_PLATFORM__||he.platform:"posix";At.sep=Oi==="win32"?"\\":"/";const Mt=Symbol("globstar **");At.GLOBSTAR=Mt,At.filter=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return n=>At(n,e,t)};const Ut=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},e,t)};At.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return At;const t=At;return Object.assign((function(n,r){return t(n,r,Ut(e,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))}),{Minimatch:class extends t.Minimatch{constructor(n){super(n,Ut(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(n){return t.defaults(Ut(e,n)).Minimatch}},AST:class extends t.AST{constructor(n,r){super(n,r,Ut(e,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))}static fromGlob(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.AST.fromGlob(n,Ut(e,r))}},unescape:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.unescape(n,Ut(e,r))},escape:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.escape(n,Ut(e,r))},filter:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.filter(n,Ut(e,r))},defaults:n=>t.defaults(Ut(e,n)),makeRe:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.makeRe(n,Ut(e,r))},braceExpand:function(n){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t.braceExpand(n,Ut(e,r))},match:function(n,r){let o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return t.match(n,r,Ut(e,o))},sep:t.sep,GLOBSTAR:Mt})};const Ii=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ge(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Ns(e)};At.braceExpand=Ii,At.makeRe=function(e){return new ze(e,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},At.match=function(e,t){const n=new ze(t,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return e=e.filter((r=>n.match(r))),n.options.nonull&&!e.length&&e.push(t),e};const kr=/[?*]|[+@!]\(.*?\)|\[|\]/;class ze{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ge(t),n=n||{},this.options=n,this.pattern=t,this.platform=n.platform||Oi,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const t of this.set)for(const n of t)if(typeof n!="string")return!0;return!1}debug(){}make(){const t=this.pattern,n=this.options;if(!n.nocomment&&t.charAt(0)==="#")return void(this.comment=!0);if(!t)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const r=this.globSet.map((s=>this.slashSplit(s)));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let o=this.globParts.map(((s,l,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){const d=!(s[0]!==""||s[1]!==""||s[2]!=="?"&&kr.test(s[2])||kr.test(s[3])),a=/^[a-z]:/i.test(s[0]);if(d)return[...s.slice(0,4),...s.slice(4).map((u=>this.parse(u)))];if(a)return[s[0],...s.slice(1).map((u=>this.parse(u)))]}return s.map((d=>this.parse(d)))}));if(this.debug(this.pattern,o),this.set=o.filter((s=>s.indexOf(!1)===-1)),this.isWindows)for(let s=0;s<this.set.length;s++){const l=this.set[s];l[0]===""&&l[1]===""&&this.globParts[s][2]==="?"&&typeof l[3]=="string"&&/^[a-z]:$/i.test(l[3])&&(l[2]="?")}this.debug(this.pattern,this.set)}preprocess(t){if(this.options.noglobstar)for(let r=0;r<t.length;r++)for(let o=0;o<t[r].length;o++)t[r][o]==="**"&&(t[r][o]="*");const{optimizationLevel:n=1}=this.options;return n>=2?(t=this.firstPhasePreProcess(t),t=this.secondPhasePreProcess(t)):t=n>=1?this.levelOneOptimize(t):this.adjascentGlobstarOptimize(t),t}adjascentGlobstarOptimize(t){return t.map((n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let o=r;for(;n[o+1]==="**";)o++;o!==r&&n.splice(r,o-r)}return n}))}levelOneOptimize(t){return t.map((n=>(n=n.reduce(((r,o)=>{const s=r[r.length-1];return o==="**"&&s==="**"?r:o===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(r.pop(),r):(r.push(o),r)}),[])).length===0?[""]:n))}levelTwoFileOptimize(t){Array.isArray(t)||(t=this.slashSplit(t));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let o=1;o<t.length-1;o++){const s=t[o];o===1&&s===""&&t[0]===""||s!=="."&&s!==""||(n=!0,t.splice(o,1),o--)}t[0]!=="."||t.length!==2||t[1]!=="."&&t[1]!==""||(n=!0,t.pop())}let r=0;for(;(r=t.indexOf("..",r+1))!==-1;){const o=t[r-1];o&&o!=="."&&o!==".."&&o!=="**"&&(n=!0,t.splice(r-1,2),r-=2)}}while(n);return t.length===0?[""]:t}firstPhasePreProcess(t){let n=!1;do{n=!1;for(let r of t){let o=-1;for(;(o=r.indexOf("**",o+1))!==-1;){let l=o;for(;r[l+1]==="**";)l++;l>o&&r.splice(o+1,l-o);let c=r[o+1];const d=r[o+2],a=r[o+3];if(c!==".."||!d||d==="."||d===".."||!a||a==="."||a==="..")continue;n=!0,r.splice(o,1);const u=r.slice(0);u[o]="**",t.push(u),o--}if(!this.preserveMultipleSlashes){for(let l=1;l<r.length-1;l++){const c=r[l];l===1&&c===""&&r[0]===""||c!=="."&&c!==""||(n=!0,r.splice(l,1),l--)}r[0]!=="."||r.length!==2||r[1]!=="."&&r[1]!==""||(n=!0,r.pop())}let s=0;for(;(s=r.indexOf("..",s+1))!==-1;){const l=r[s-1];if(l&&l!=="."&&l!==".."&&l!=="**"){n=!0;const c=s===1&&r[s+1]==="**"?["."]:[];r.splice(s-1,2,...c),r.length===0&&r.push(""),s-=2}}}}while(n);return t}secondPhasePreProcess(t){for(let n=0;n<t.length-1;n++)for(let r=n+1;r<t.length;r++){const o=this.partsMatch(t[n],t[r],!this.preserveMultipleSlashes);if(o){t[n]=[],t[r]=o;break}}return t.filter((n=>n.length))}partsMatch(t,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2],o=0,s=0,l=[],c="";for(;o<t.length&&s<n.length;)if(t[o]===n[s])l.push(c==="b"?n[s]:t[o]),o++,s++;else if(r&&t[o]==="**"&&n[s]===t[o+1])l.push(t[o]),o++;else if(r&&n[s]==="**"&&t[o]===n[s+1])l.push(n[s]),s++;else if(t[o]!=="*"||!n[s]||!this.options.dot&&n[s].startsWith(".")||n[s]==="**"){if(n[s]!=="*"||!t[o]||!this.options.dot&&t[o].startsWith(".")||t[o]==="**"||c==="a")return!1;c="b",l.push(n[s]),o++,s++}else{if(c==="b")return!1;c="a",l.push(t[o]),o++,s++}return t.length===n.length&&l}parseNegate(){if(this.nonegate)return;const t=this.pattern;let n=!1,r=0;for(let o=0;o<t.length&&t.charAt(o)==="!";o++)n=!n,r++;r&&(this.pattern=t.slice(r)),this.negate=n}matchOne(t,n){let r=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const o=this.options;if(this.isWindows){const E=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),N=!E&&t[0]===""&&t[1]===""&&t[2]==="?"&&/^[a-z]:$/i.test(t[3]),_=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),g=N?3:E?0:void 0,w=!_&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3])?3:_?0:void 0;if(typeof g=="number"&&typeof w=="number"){const[I,R]=[t[g],n[w]];I.toLowerCase()===R.toLowerCase()&&(n[w]=I,w>g?n=n.slice(w):g>w&&(t=t.slice(g)))}}const{optimizationLevel:s=1}=this.options;s>=2&&(t=this.levelTwoFileOptimize(t)),this.debug("matchOne",this,{file:t,pattern:n}),this.debug("matchOne",t.length,n.length);for(var l=0,c=0,d=t.length,a=n.length;l<d&&c<a;l++,c++){this.debug("matchOne loop");var u=n[c],p=t[l];if(this.debug(n,u,p),u===!1)return!1;if(u===Mt){this.debug("GLOBSTAR",[n,u,p]);var f=l,b=c+1;if(b===a){for(this.debug("** at the end");l<d;l++)if(t[l]==="."||t[l]===".."||!o.dot&&t[l].charAt(0)===".")return!1;return!0}for(;f<d;){var v=t[f];if(this.debug(`
globstar while`,t,f,n,b,v),this.matchOne(t.slice(f),n.slice(b),r))return this.debug("globstar found match!",f,d,v),!0;if(v==="."||v===".."||!o.dot&&v.charAt(0)==="."){this.debug("dot detected!",t,f,n,b);break}this.debug("globstar swallow a segment, and continue"),f++}return!(!r||(this.debug(`
>>> no match, partial?`,t,f,n,b),f!==d))}let E;if(typeof u=="string"?(E=p===u,this.debug("string match",u,p,E)):(E=u.test(p),this.debug("pattern match",u,p,E)),!E)return!1}if(l===d&&c===a)return!0;if(l===d)return r;if(c===a)return l===d-1&&t[l]==="";throw new Error("wtf?")}braceExpand(){return Ii(this.pattern,this.options)}parse(t){Ge(t);const n=this.options;if(t==="**")return Mt;if(t==="")return"";let r,o=null;(r=t.match(js))?o=n.dot?Fs:Vs:(r=t.match(Rs))?o=(n.nocase?n.dot?$s:Ps:n.dot?xs:Ls)(r[1]):(r=t.match(Gs))?o=(n.nocase?n.dot?Hs:zs:n.dot?Ws:Xs)(r):(r=t.match(ks))?o=n.dot?Bs:Ds:(r=t.match(Us))&&(o=Ms);const s=Rt.fromGlob(t,this.options).toMMPattern();return o&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:o}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const n=this.options,r=n.noglobstar?"[^/]*?":n.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",o=new Set(n.nocase?["i"]:[]);let s=t.map((d=>{const a=d.map((u=>{if(u instanceof RegExp)for(const p of u.flags.split(""))o.add(p);return typeof u=="string"?u.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):u===Mt?Mt:u._src}));return a.forEach(((u,p)=>{const f=a[p+1],b=a[p-1];u===Mt&&b!==Mt&&(b===void 0?f!==void 0&&f!==Mt?a[p+1]="(?:\\/|"+r+"\\/)?"+f:a[p]=r:f===void 0?a[p-1]=b+"(?:\\/|"+r+")?":f!==Mt&&(a[p-1]=b+"(?:\\/|\\/"+r+"\\/)"+f,a[p+1]=Mt))})),a.filter((u=>u!==Mt)).join("/")})).join("|");const[l,c]=t.length>1?["(?:",")"]:["",""];s="^"+l+s+c+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...o].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(t){return this.preserveMultipleSlashes?t.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(t)?["",...t.split(/\/+/)]:t.split(/\/+/)}match(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&n)return!0;const r=this.options;this.isWindows&&(t=t.split("\\").join("/"));const o=this.slashSplit(t);this.debug(this.pattern,"split",o);const s=this.set;this.debug(this.pattern,"set",s);let l=o[o.length-1];if(!l)for(let c=o.length-2;!l&&c>=0;c--)l=o[c];for(let c=0;c<s.length;c++){const d=s[c];let a=o;if(r.matchBase&&d.length===1&&(a=[l]),this.matchOne(a,d,n))return!!r.flipNegate||!this.negate}return!r.flipNegate&&this.negate}static defaults(t){return At.defaults(t).Minimatch}}function Xn(e){const t=new Error(`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:""}Invalid response: ${e.status} ${e.statusText}`);return t.status=e.status,t.response=e,t}function Tt(e,t){const{status:n}=t;if(n===401&&e.digest)return t;if(n>=400)throw Xn(t);return t}function ie(e,t){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:t,headers:e.headers?bs(e.headers):{},status:e.status,statusText:e.statusText}:t}At.AST=Rt,At.Minimatch=ze,At.escape=function(e){let{windowsPathsNoEscape:t=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t?e.replace(/[?*()[\]]/g,"[$&]"):e.replace(/[?*()[\]\\]/g,"\\$&")},At.unescape=ve;const qs=(Dr=function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=Et({url:lt(e.remoteURL,at(t)),method:"COPY",headers:{Destination:lt(e.remoteURL,at(n)),Overwrite:r.overwrite===!1?"F":"T",Depth:r.shallow?"0":"infinity"}},e,r);return l=function(c){Tt(e,c)},(s=wt(o,e))&&s.then||(s=Promise.resolve(s)),l?s.then(l):s;var s,l},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(Dr.apply(this,e))}catch(n){return Promise.reject(n)}});var Dr,qn=tt(635),Ys=tt(829),Xt=tt.n(Ys),le=(function(e){return e.Array="array",e.Object="object",e.Original="original",e})(le||{});function Le(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:le.Original;const r=Xt().get(e,t);return n==="array"&&Array.isArray(r)===!1?[r]:n==="object"&&Array.isArray(r)?r[0]:r}function Ce(e){return new Promise((t=>{t((function(n){const{multistatus:r}=n;if(r==="")return{multistatus:{response:[]}};if(!r)throw new Error("Invalid response: No root multistatus found");const o={multistatus:Array.isArray(r)?r[0]:r};return Xt().set(o,"multistatus.response",Le(o,"multistatus.response",le.Array)),Xt().set(o,"multistatus.response",Xt().get(o,"multistatus.response").map((s=>(function(l){const c=Object.assign({},l);return c.status?Xt().set(c,"status",Le(c,"status",le.Object)):(Xt().set(c,"propstat",Le(c,"propstat",le.Object)),Xt().set(c,"propstat.prop",Le(c,"propstat.prop",le.Object))),c})(s)))),o})(new qn.XMLParser({allowBooleanAttributes:!0,attributeNamePrefix:"",textNodeName:"text",ignoreAttributes:!1,removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1},attributeValueProcessor:(n,r,o)=>r==="true"||r==="false"?r==="true":r,tagValueProcessor(n,r,o){if(!o.endsWith("propstat.prop.displayname"))return r}}).parse(e)))}))}function Ze(e,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:r=null,getcontentlength:o="0",resourcetype:s=null,getcontenttype:l=null,getetag:c=null}=e,d=s&&typeof s=="object"&&s.collection!==void 0?"directory":"file",a={filename:t,basename:Me().basename(t),lastmod:r,size:parseInt(o,10),type:d,etag:typeof c=="string"?c.replace(/"/g,""):null};return d==="file"&&(a.mime=l&&typeof l=="string"?l.split(";")[0]:""),n&&(e.displayname!==void 0&&(e.displayname=String(e.displayname)),a.props=e),a}function Si(e,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],r=null;try{e.multistatus.response[0].propstat&&(r=e.multistatus.response[0])}catch{}if(!r)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:o,status:s}}=r,[l,c,d]=s.split(" ",3),a=parseInt(c,10);if(a>=400){const u=new Error(`Invalid response: ${a} ${d}`);throw u.status=a,u}return Ze(o,Te(t),n)}function Ai(e){switch(String(e)){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(String(e),10)}}function fn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Yn=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=n,o=Et({url:lt(e.remoteURL,at(t)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},e,n);return fn(wt(o,e),(function(s){return Tt(e,s),fn(s.text(),(function(l){return fn(Ce(l),(function(c){const d=Si(c,t,r);return ie(s,d,r)}))}))}))}));function Ri(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const Zs=Li((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=(function(s){if(!s||s==="/")return[];let l=s;const c=[];do c.push(l),l=Me().dirname(l);while(l&&l!=="/");return c})(Te(t));r.sort(((s,l)=>s.length>l.length?1:l.length>s.length?-1:0));let o=!1;return(function(s,l,c){if(typeof s[Ur]=="function"){let E=function(N){try{for(;!(d=p.next()).done;)if((N=l(d.value))&&N.then){if(!Mr(N))return void N.then(E,u||(u=xt.bind(null,a=new ue,2)));N=N.v}a?xt(a,1,N):a=N}catch(_){xt(a||(a=new ue),2,_)}};var d,a,u,p=s[Ur]();if(E(),p.return){var f=function(N){try{d.done||p.return()}catch{}return N};if(a&&a.then)return a.then(f,(function(N){throw f(N)}));f()}return a}if(!("length"in s))throw new TypeError("Object is not iterable");for(var b=[],v=0;v<s.length;v++)b.push(s[v]);return(function(E,N,_){var g,w,I=-1;return(function R(O){try{for(;++I<E.length&&(!_||!_());)if((O=N(I))&&O.then){if(!Mr(O))return void O.then(R,w||(w=xt.bind(null,g=new ue,2)));O=O.v}g?xt(g,1,O):g=O}catch(x){xt(g||(g=new ue),2,x)}})(),g})(b,(function(E){return l(b[E])}),c)})(r,(function(s){return l=function(){return(function(d,a){try{var u=Ri(Yn(e,s),(function(p){if(p.type!=="directory")throw new Error(`Path includes a file: ${t}`)}))}catch(p){return a(p)}return u&&u.then?u.then(void 0,a):u})(0,(function(d){const a=d;return(function(){if(a.status===404)return o=!0,Br(Dn(e,s,{...n,recursive:!1}));throw d})()}))},(c=(function(){if(o)return Br(Dn(e,s,{...n,recursive:!1}))})())&&c.then?c.then(l):l();var l,c}),(function(){return!1}))}));function Li(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}function Qs(){}function Br(e,t){return e&&e.then?e.then(Qs):Promise.resolve()}const Ur=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function xt(e,t,n){if(!e.s){if(n instanceof ue){if(!n.s)return void(n.o=xt.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(xt.bind(null,e,t),xt.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const ue=(function(){function e(){}return e.prototype.then=function(t,n){const r=new e,o=this.s;if(o){const s=1&o?t:n;if(s){try{xt(r,1,s(this.v))}catch(l){xt(r,2,l)}return r}return this}return this.o=function(s){try{const l=s.v;1&s.s?xt(r,1,t?t(l):l):n?xt(r,1,n(l)):xt(r,2,l)}catch(l){xt(r,2,l)}},r},e})();function Mr(e){return e instanceof ue&&1&e.s}const Dn=Li((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.recursive===!0)return Zs(e,t,n);const r=Et({url:lt(e.remoteURL,(o=at(t),o.endsWith("/")?o:o+"/")),method:"MKCOL"},e,n);var o;return Ri(wt(r,e),(function(s){Tt(e,s)}))}));var Ks=tt(388),jr=tt.n(Ks);const Js=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r={};if(typeof n.range=="object"&&typeof n.range.start=="number"){let c=`bytes=${n.range.start}-`;typeof n.range.end=="number"&&(c=`${c}${n.range.end}`),r.Range=c}const o=Et({url:lt(e.remoteURL,at(t)),method:"GET",headers:r},e,n);return l=function(c){if(Tt(e,c),r.Range&&c.status!==206){const d=new Error(`Invalid response code for partial request: ${c.status}`);throw d.status=c.status,d}return n.callback&&setTimeout((()=>{n.callback(c)}),0),c.body},(s=wt(o,e))&&s.then||(s=Promise.resolve(s)),l?s.then(l):s;var s,l})),ta=()=>{},ea=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t,n){n.url||(n.url=lt(e.remoteURL,at(t)));const r=Et(n,e,{});return s=function(l){return Tt(e,l),l},(o=wt(r,e))&&o.then||(o=Promise.resolve(o)),s?o.then(s):o;var o,s})),na=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Et({url:lt(e.remoteURL,at(t)),method:"DELETE"},e,n);return s=function(l){Tt(e,l)},(o=wt(r,e))&&o.then||(o=Promise.resolve(o)),s?o.then(s):o;var o,s})),ra=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function(r,o){try{var s=(l=Yn(e,t,n),c=function(){return!0},d?c?c(l):l:(l&&l.then||(l=Promise.resolve(l)),c?l.then(c):l))}catch(a){return o(a)}var l,c,d;return s&&s.then?s.then(void 0,o):s})(0,(function(r){if(r.status===404)return!1;throw r}))}));function pn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const ia=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Et({url:lt(e.remoteURL,at(t),"/"),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:n.deep?"infinity":"1"}},e,n);return pn(wt(r,e),(function(o){return Tt(e,o),pn(o.text(),(function(s){if(!s)throw new Error("Failed parsing directory contents: Empty response");return pn(Ce(s),(function(l){const c=_r(t);let d=(function(a,u,p){let f=arguments.length>3&&arguments[3]!==void 0&&arguments[3],b=arguments.length>4&&arguments[4]!==void 0&&arguments[4];const v=Me().join(u,"/"),{multistatus:{response:E}}=a,N=E.map((_=>{const g=(function(I){try{return I.replace(/^https?:\/\/[^\/]+/,"")}catch(R){throw new Pt(R,"Failed normalising HREF")}})(_.href),{propstat:{prop:w}}=_;return Ze(w,v==="/"?decodeURIComponent(Te(g)):Te(Me().relative(decodeURIComponent(v),decodeURIComponent(g))),f)}));return b?N:N.filter((_=>_.basename&&(_.type==="file"||_.filename!==p.replace(/\/$/,""))))})(l,_r(e.remoteBasePath||e.remotePath),c,n.details,n.includeSelf);return n.glob&&(d=(function(a,u){return a.filter((p=>At(p.filename,u,{matchBase:!0})))})(d,n.glob)),ie(o,d,n.details)}))}))}))}));function Zn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}const oa=Zn((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Et({url:lt(e.remoteURL,at(t)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[la]},e,n);return He(wt(r,e),(function(o){return Tt(e,o),He(o.text(),(function(s){return ie(o,s,n.details)}))}))}));function He(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const sa=Zn((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Et({url:lt(e.remoteURL,at(t)),method:"GET"},e,n);return He(wt(r,e),(function(o){let s;return Tt(e,o),(function(l,c){var d=l();return d&&d.then?d.then(c):c()})((function(){return He(o.arrayBuffer(),(function(l){s=l}))}),(function(){return ie(o,s,n.details)}))}))})),aa=Zn((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:r="binary"}=n;if(r!=="binary"&&r!=="text")throw new Pt({info:{code:Yt.InvalidOutputFormat}},`Invalid output format: ${r}`);return r==="text"?oa(e,t,n):sa(e,t,n)})),la=e=>e;function ua(e){return new qn.XMLBuilder({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(xi({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:e}}},"d"))}function xi(e,t){const n={...e};for(const r in n)n.hasOwnProperty(r)&&(n[r]&&typeof n[r]=="object"&&r.indexOf(":")===-1?(n[`${t}:${r}`]=xi(n[r],t),delete n[r]):/^@_/.test(r)===!1&&(n[`${t}:${r}`]=n[r],delete n[r]));return n}function Bn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}function Pi(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}const ca=Pi((function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=Et({url:lt(e.remoteURL,at(t)),method:"UNLOCK",headers:{"Lock-Token":n}},e,r);return Bn(wt(o,e),(function(s){if(Tt(e,s),s.status!==204&&s.status!==200)throw Xn(s)}))})),ha=Pi((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:r,timeout:o=fa}=n,s={Accept:"text/plain,application/xml",Timeout:o};r&&(s.If=r);const l=Et({url:lt(e.remoteURL,at(t)),method:"LOCK",headers:s,data:ua(e.contactHref)},e,n);return Bn(wt(l,e),(function(c){return Tt(e,c),Bn(c.text(),(function(d){const a=(f=d,new qn.XMLParser({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(f)),u=Xt().get(a,"prop.lockdiscovery.activelock.locktoken.href"),p=Xt().get(a,"prop.lockdiscovery.activelock.timeout");var f;if(!u)throw Xn(c,"No lock token received: ");return{token:u,serverTimeout:p}}))}))})),fa="Infinite, Second-4100000000";function dn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const pa=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=t.path||"/",r=Et({url:lt(e.remoteURL,n),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},e,t);return dn(wt(r,e),(function(o){return Tt(e,o),dn(o.text(),(function(s){return dn(Ce(s),(function(l){const c=(function(d){try{const[a]=d.multistatus.response,{propstat:{prop:{"quota-used-bytes":u,"quota-available-bytes":p}}}=a;return u!==void 0&&p!==void 0?{used:parseInt(String(u),10),available:Ai(p)}:null}catch{}return null})(l);return ie(o,c,t.details)}))}))}))}));function gn(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const da=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:r=!1}=n,o=Et({url:lt(e.remoteURL,at(t)),method:"SEARCH",headers:{Accept:"text/plain,application/xml","Content-Type":e.headers["Content-Type"]||"application/xml; charset=utf-8"}},e,n);return gn(wt(o,e),(function(s){return Tt(e,s),gn(s.text(),(function(l){return gn(Ce(l),(function(c){const d=(function(a,u,p){const f={truncated:!1,results:[]};return f.truncated=a.multistatus.response.some((b=>(b.status||b.propstat?.status).split(" ",3)?.[1]==="507"&&b.href.replace(/\/$/,"").endsWith(at(u).replace(/\/$/,"")))),a.multistatus.response.forEach((b=>{if(b.propstat===void 0)return;const v=b.href.split("/").map(decodeURIComponent).join("/");f.results.push(Ze(b.propstat.prop,v,p))})),f})(c,t,r);return ie(s,d,r)}))}))}))})),ga=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=Et({url:lt(e.remoteURL,at(t)),method:"MOVE",headers:{Destination:lt(e.remoteURL,at(n)),Overwrite:r.overwrite===!1?"F":"T"}},e,r);return l=function(c){Tt(e,c)},(s=wt(o,e))&&s.then||(s=Promise.resolve(s)),l?s.then(l):s;var s,l}));var ma=tt(172);const va=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const{contentLength:o=!0,overwrite:s=!0}=r,l={"Content-Type":"application/octet-stream"};o===!1||(l["Content-Length"]=typeof o=="number"?`${o}`:`${(function(u){if(Ei(u))return u.byteLength;if(Ti(u))return u.length;if(typeof u=="string")return(0,ma.d)(u);throw new Pt({info:{code:Yt.DataTypeNoLength}},"Cannot calculate data length: Invalid type")})(n)}`),s||(l["If-None-Match"]="*");const c=Et({url:lt(e.remoteURL,at(t)),method:"PUT",headers:l,data:n},e,r);return a=function(u){try{Tt(e,u)}catch(p){const f=p;if(f.status!==412||s)throw f;return!1}return!0},(d=wt(c,e))&&d.then||(d=Promise.resolve(d)),a?d.then(a):d;var d,a})),$i=(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}})((function(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=Et({url:lt(e.remoteURL,at(t)),method:"OPTIONS"},e,n);return s=function(l){try{Tt(e,l)}catch(c){throw c}return{compliance:(l.headers.get("DAV")??"").split(",").map((c=>c.trim())),server:l.headers.get("Server")??""}},(o=wt(r,e))&&o.then||(o=Promise.resolve(o)),s?o.then(s):o;var o,s}));function we(e,t,n){return n?t?t(e):e:(e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e)}const ya=Qn((function(e,t,n,r,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(n>r||n<0)throw new Pt({info:{code:Yt.InvalidUpdateRange}},`Invalid update range ${n} for partial update`);const l={"Content-Type":"application/octet-stream","Content-Length":""+(r-n+1),"Content-Range":`bytes ${n}-${r}/*`},c=Et({url:lt(e.remoteURL,at(t)),method:"PUT",headers:l,data:o},e,s);return we(wt(c,e),(function(d){Tt(e,d)}))}));function Vr(e,t){var n=e();return n&&n.then?n.then(t):t(n)}const ba=Qn((function(e,t,n,r,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(n>r||n<0)throw new Pt({info:{code:Yt.InvalidUpdateRange}},`Invalid update range ${n} for partial update`);const l={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":""+(r-n+1),"X-Update-Range":`bytes=${n}-${r}`},c=Et({url:lt(e.remoteURL,at(t)),method:"PATCH",headers:l,data:o},e,s);return we(wt(c,e),(function(d){Tt(e,d)}))}));function Qn(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(r){return Promise.reject(r)}}}const wa=Qn((function(e,t,n,r,o){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return we($i(e,t,s),(function(l){let c=!1;return Vr((function(){if(l.compliance.includes("sabredav-partialupdate"))return we(ba(e,t,n,r,o,s),(function(d){return c=!0,d}))}),(function(d){let a=!1;return c?d:Vr((function(){if(l.server.includes("Apache")&&l.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return we(ya(e,t,n,r,o,s),(function(u){return a=!0,u}))}),(function(u){if(a)return u;throw new Pt({info:{code:Yt.NotSupported}},"Not supported")}))}))}))})),Ea="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md";function Ta(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:n=null,remoteBasePath:r,contactHref:o=Ea,ha1:s,headers:l={},httpAgent:c,httpsAgent:d,password:a,token:u,username:p,withCredentials:f}=t;let b=n;b||(b=p||a?Lt.Password:Lt.None);const v={authType:b,remoteBasePath:r,contactHref:o,ha1:s,headers:Object.assign({},l),httpAgent:c,httpsAgent:d,password:a,remotePath:cs(e),remoteURL:e,token:u,username:p,withCredentials:f};return yi(v,p,a,u,s),{copyFile:(E,N,_)=>qs(v,E,N,_),createDirectory:(E,N)=>Dn(v,E,N),createReadStream:(E,N)=>(function(_,g){let w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const I=new(jr()).PassThrough;return Js(_,g,w).then((R=>{R.pipe(I)})).catch((R=>{I.emit("error",R)})),I})(v,E,N),createWriteStream:(E,N,_)=>(function(g,w){let I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ta;const O=new(jr()).PassThrough,x={};I.overwrite===!1&&(x["If-None-Match"]="*");const A=Et({url:lt(g.remoteURL,at(w)),method:"PUT",headers:x,data:O,maxRedirects:0},g,I);return wt(A,g).then((C=>Tt(g,C))).then((C=>{setTimeout((()=>{R(C)}),0)})).catch((C=>{O.emit("error",C)})),O})(v,E,N,_),customRequest:(E,N)=>ea(v,E,N),deleteFile:(E,N)=>na(v,E,N),exists:(E,N)=>ra(v,E,N),getDirectoryContents:(E,N)=>ia(v,E,N),getFileContents:(E,N)=>aa(v,E,N),getFileDownloadLink:E=>(function(N,_){let g=lt(N.remoteURL,at(_));const w=/^https:/i.test(g)?"https":"http";switch(N.authType){case Lt.None:break;case Lt.Password:{const I=Ir(N.headers.Authorization.replace(/^Basic /i,"").trim());g=g.replace(/^https?:\/\//,`${w}://${I}@`);break}default:throw new Pt({info:{code:Yt.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${N.authType}`)}return g})(v,E),getFileUploadLink:E=>(function(N,_){let g=`${lt(N.remoteURL,at(_))}?Content-Type=application/octet-stream`;const w=/^https:/i.test(g)?"https":"http";switch(N.authType){case Lt.None:break;case Lt.Password:{const I=Ir(N.headers.Authorization.replace(/^Basic /i,"").trim());g=g.replace(/^https?:\/\//,`${w}://${I}@`);break}default:throw new Pt({info:{code:Yt.LinkUnsupportedAuthType}},`Unsupported auth type for file link: ${N.authType}`)}return g})(v,E),getHeaders:()=>Object.assign({},v.headers),getQuota:E=>pa(v,E),lock:(E,N)=>ha(v,E,N),moveFile:(E,N,_)=>ga(v,E,N,_),putFileContents:(E,N,_)=>va(v,E,N,_),partialUpdateFileContents:(E,N,_,g,w)=>wa(v,E,N,_,g,w),getDAVCompliance:E=>$i(v,E),search:(E,N)=>da(v,E,N),setHeaders:E=>{v.headers=Object.assign({},E)},stat:(E,N)=>Yn(v,E,N),unlock:(E,N,_)=>ca(v,E,N,_)}}jt.hT,jt.O4,jt.Kd,jt.YK;var Na=jt.UU,Ca=jt.Gu;jt.ky,jt.h4,jt.ch,jt.hq,jt.i5;var mn,Fr;function _a(){if(Fr)return mn;Fr=1;function e(o){if(typeof o!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(o))}function t(o,s){for(var l="",c=0,d=-1,a=0,u,p=0;p<=o.length;++p){if(p<o.length)u=o.charCodeAt(p);else{if(u===47)break;u=47}if(u===47){if(!(d===p-1||a===1))if(d!==p-1&&a===2){if(l.length<2||c!==2||l.charCodeAt(l.length-1)!==46||l.charCodeAt(l.length-2)!==46){if(l.length>2){var f=l.lastIndexOf("/");if(f!==l.length-1){f===-1?(l="",c=0):(l=l.slice(0,f),c=l.length-1-l.lastIndexOf("/")),d=p,a=0;continue}}else if(l.length===2||l.length===1){l="",c=0,d=p,a=0;continue}}s&&(l.length>0?l+="/..":l="..",c=2)}else l.length>0?l+="/"+o.slice(d+1,p):l=o.slice(d+1,p),c=p-d-1;d=p,a=0}else u===46&&a!==-1?++a:a=-1}return l}function n(o,s){var l=s.dir||s.root,c=s.base||(s.name||"")+(s.ext||"");return l?l===s.root?l+c:l+o+c:c}var r={resolve:function(){for(var o="",s=!1,l,c=arguments.length-1;c>=-1&&!s;c--){var d;c>=0?d=arguments[c]:(l===void 0&&(l=he.cwd()),d=l),e(d),d.length!==0&&(o=d+"/"+o,s=d.charCodeAt(0)===47)}return o=t(o,!s),s?o.length>0?"/"+o:"/":o.length>0?o:"."},normalize:function(o){if(e(o),o.length===0)return".";var s=o.charCodeAt(0)===47,l=o.charCodeAt(o.length-1)===47;return o=t(o,!s),o.length===0&&!s&&(o="."),o.length>0&&l&&(o+="/"),s?"/"+o:o},isAbsolute:function(o){return e(o),o.length>0&&o.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var o,s=0;s<arguments.length;++s){var l=arguments[s];e(l),l.length>0&&(o===void 0?o=l:o+="/"+l)}return o===void 0?".":r.normalize(o)},relative:function(o,s){if(e(o),e(s),o===s||(o=r.resolve(o),s=r.resolve(s),o===s))return"";for(var l=1;l<o.length&&o.charCodeAt(l)===47;++l);for(var c=o.length,d=c-l,a=1;a<s.length&&s.charCodeAt(a)===47;++a);for(var u=s.length,p=u-a,f=d<p?d:p,b=-1,v=0;v<=f;++v){if(v===f){if(p>f){if(s.charCodeAt(a+v)===47)return s.slice(a+v+1);if(v===0)return s.slice(a+v)}else d>f&&(o.charCodeAt(l+v)===47?b=v:v===0&&(b=0));break}var E=o.charCodeAt(l+v),N=s.charCodeAt(a+v);if(E!==N)break;E===47&&(b=v)}var _="";for(v=l+b+1;v<=c;++v)(v===c||o.charCodeAt(v)===47)&&(_.length===0?_+="..":_+="/..");return _.length>0?_+s.slice(a+b):(a+=b,s.charCodeAt(a)===47&&++a,s.slice(a))},_makeLong:function(o){return o},dirname:function(o){if(e(o),o.length===0)return".";for(var s=o.charCodeAt(0),l=s===47,c=-1,d=!0,a=o.length-1;a>=1;--a)if(s=o.charCodeAt(a),s===47){if(!d){c=a;break}}else d=!1;return c===-1?l?"/":".":l&&c===1?"//":o.slice(0,c)},basename:function(o,s){if(s!==void 0&&typeof s!="string")throw new TypeError('"ext" argument must be a string');e(o);var l=0,c=-1,d=!0,a;if(s!==void 0&&s.length>0&&s.length<=o.length){if(s.length===o.length&&s===o)return"";var u=s.length-1,p=-1;for(a=o.length-1;a>=0;--a){var f=o.charCodeAt(a);if(f===47){if(!d){l=a+1;break}}else p===-1&&(d=!1,p=a+1),u>=0&&(f===s.charCodeAt(u)?--u===-1&&(c=a):(u=-1,c=p))}return l===c?c=p:c===-1&&(c=o.length),o.slice(l,c)}else{for(a=o.length-1;a>=0;--a)if(o.charCodeAt(a)===47){if(!d){l=a+1;break}}else c===-1&&(d=!1,c=a+1);return c===-1?"":o.slice(l,c)}},extname:function(o){e(o);for(var s=-1,l=0,c=-1,d=!0,a=0,u=o.length-1;u>=0;--u){var p=o.charCodeAt(u);if(p===47){if(!d){l=u+1;break}continue}c===-1&&(d=!1,c=u+1),p===46?s===-1?s=u:a!==1&&(a=1):s!==-1&&(a=-1)}return s===-1||c===-1||a===0||a===1&&s===c-1&&s===l+1?"":o.slice(s,c)},format:function(o){if(o===null||typeof o!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof o);return n("/",o)},parse:function(o){e(o);var s={root:"",dir:"",base:"",ext:"",name:""};if(o.length===0)return s;var l=o.charCodeAt(0),c=l===47,d;c?(s.root="/",d=1):d=0;for(var a=-1,u=0,p=-1,f=!0,b=o.length-1,v=0;b>=d;--b){if(l=o.charCodeAt(b),l===47){if(!f){u=b+1;break}continue}p===-1&&(f=!1,p=b+1),l===46?a===-1?a=b:v!==1&&(v=1):a!==-1&&(v=-1)}return a===-1||p===-1||v===0||v===1&&a===p-1&&a===u+1?p!==-1&&(u===0&&c?s.base=s.name=o.slice(1,p):s.base=s.name=o.slice(u,p)):(u===0&&c?(s.name=o.slice(1,a),s.base=o.slice(1,p)):(s.name=o.slice(u,a),s.base=o.slice(u,p)),s.ext=o.slice(a,p)),u>0?s.dir=o.slice(0,u-1):c&&(s.dir="/"),s},sep:"/",delimiter:":",win32:null,posix:null};return r.posix=r,mn=r,mn}var re=_a();const Oa=oo().setApp("@nextcloud/files").detectUser().build();var te=(e=>(e.Folder="folder",e.File="file",e))(te||{}),Dt=(e=>(e[e.NONE=0]="NONE",e[e.CREATE=4]="CREATE",e[e.READ=1]="READ",e[e.UPDATE=2]="UPDATE",e[e.DELETE=8]="DELETE",e[e.SHARE=16]="SHARE",e[e.ALL=31]="ALL",e))(Dt||{});const ki=function(e,t){return e.match(t)!==null},Kt=(e,t)=>{if(e.id&&typeof e.id!="number")throw new Error("Invalid id type of value");if(!e.source)throw new Error("Missing mandatory source");try{new URL(e.source)}catch{throw new Error("Invalid source format, source must be a valid URL")}if(!e.source.startsWith("http"))throw new Error("Invalid source format, only http(s) is supported");if(e.displayname&&typeof e.displayname!="string")throw new Error("Invalid displayname type");if(e.mtime&&!(e.mtime instanceof Date))throw new Error("Invalid mtime type");if(e.crtime&&!(e.crtime instanceof Date))throw new Error("Invalid crtime type");if(!e.mime||typeof e.mime!="string"||!e.mime.match(/^[-\w.]+\/[-+\w.]+$/gi))throw new Error("Missing or invalid mandatory mime");if("size"in e&&typeof e.size!="number"&&e.size!==void 0)throw new Error("Invalid size type");if("permissions"in e&&e.permissions!==void 0&&!(typeof e.permissions=="number"&&e.permissions>=Dt.NONE&&e.permissions<=Dt.ALL))throw new Error("Invalid permissions");if(e.owner&&e.owner!==null&&typeof e.owner!="string")throw new Error("Invalid owner type");if(e.attributes&&typeof e.attributes!="object")throw new Error("Invalid attributes type");if(e.root&&typeof e.root!="string")throw new Error("Invalid root type");if(e.root&&!e.root.startsWith("/"))throw new Error("Root must start with a leading slash");if(e.root&&!e.source.includes(e.root))throw new Error("Root must be part of the source");if(e.root&&ki(e.source,t)){const n=e.source.match(t)[0];if(!e.source.includes(re.join(n,e.root)))throw new Error("The root must be relative to the service. e.g /files/emma")}if(e.status&&!Object.values(Kn).includes(e.status))throw new Error("Status must be a valid NodeStatus")};var Kn=(e=>(e.NEW="new",e.FAILED="failed",e.LOADING="loading",e.LOCKED="locked",e))(Kn||{});class Qe{_data;_attributes;_knownDavService=/(remote|public)\.php\/(web)?dav/i;readonlyAttributes=Object.entries(Object.getOwnPropertyDescriptors(Qe.prototype)).filter(t=>typeof t[1].get=="function"&&t[0]!=="__proto__").map(t=>t[0]);handler={set:(t,n,r)=>this.readonlyAttributes.includes(n)?!1:Reflect.set(t,n,r),deleteProperty:(t,n)=>this.readonlyAttributes.includes(n)?!1:Reflect.deleteProperty(t,n),get:(t,n,r)=>this.readonlyAttributes.includes(n)?(Oa.warn(`Accessing "Node.attributes.${n}" is deprecated, access it directly on the Node instance.`),Reflect.get(this,n)):Reflect.get(t,n,r)};constructor(t,n){t.mime||(t.mime="application/octet-stream"),Kt(t,n||this._knownDavService),this._data={displayname:t.attributes?.displayname,...t,attributes:{}},this._attributes=new Proxy(this._data.attributes,this.handler),this.update(t.attributes??{}),n&&(this._knownDavService=n)}get source(){return this._data.source.replace(/\/$/i,"")}get encodedSource(){const{origin:t}=new URL(this.source);return t+_o(this.source.slice(t.length))}get basename(){return re.basename(this.source)}get displayname(){return this._data.displayname||this.basename}set displayname(t){Kt({...this._data,displayname:t},this._knownDavService),this._data.displayname=t}get extension(){return re.extname(this.source)}get dirname(){if(this.root){let n=this.source;this.isDavResource&&(n=n.split(this._knownDavService).pop());const r=n.indexOf(this.root),o=this.root.replace(/\/$/,"");return re.dirname(n.slice(r+o.length)||"/")}const t=new URL(this.source);return re.dirname(t.pathname)}get mime(){return this._data.mime||"application/octet-stream"}set mime(t){t??="application/octet-stream",Kt({...this._data,mime:t},this._knownDavService),this._data.mime=t}get mtime(){return this._data.mtime}set mtime(t){Kt({...this._data,mtime:t},this._knownDavService),this._data.mtime=t}get crtime(){return this._data.crtime}get size(){return this._data.size}set size(t){Kt({...this._data,size:t},this._knownDavService),this.updateMtime(),this._data.size=t}get attributes(){return this._attributes}get permissions(){return this.owner===null&&!this.isDavResource?Dt.READ:this._data.permissions!==void 0?this._data.permissions:Dt.NONE}set permissions(t){Kt({...this._data,permissions:t},this._knownDavService),this.updateMtime(),this._data.permissions=t}get owner(){return this.isDavResource?this._data.owner:null}get isDavResource(){return ki(this.source,this._knownDavService)}get isDavRessource(){return this.isDavResource}get root(){return this._data.root?this._data.root.replace(/^(.+)\/$/,"$1"):this.isDavResource&&re.dirname(this.source).split(this._knownDavService).pop()||null}get path(){if(this.root){let t=this.source;this.isDavResource&&(t=t.split(this._knownDavService).pop());const n=t.indexOf(this.root),r=this.root.replace(/\/$/,"");return t.slice(n+r.length)||"/"}return(this.dirname+"/"+this.basename).replace(/\/\//g,"/")}get fileid(){return this._data?.id}get status(){return this._data?.status}set status(t){Kt({...this._data,status:t},this._knownDavService),this._data.status=t}get data(){return structuredClone(this._data)}move(t){Kt({...this._data,source:t},this._knownDavService);const n=this.basename;this._data.source=t,this.displayname===n&&this.basename!==n&&(this.displayname=this.basename)}rename(t){if(t.includes("/"))throw new Error("Invalid basename");this.move(re.dirname(this.source)+"/"+t)}updateMtime(){this._data.mtime&&(this._data.mtime=new Date)}update(t){for(const[n,r]of Object.entries(t))try{r===void 0?delete this.attributes[n]:this.attributes[n]=r}catch(o){if(o instanceof TypeError)continue;throw o}}}class Jn extends Qe{get type(){return te.File}clone(){return new Jn(this.data)}}class tr extends Qe{constructor(t){super({...t,mime:"httpd/unix-directory"})}get type(){return te.Folder}get extension(){return null}get mime(){return"httpd/unix-directory"}clone(){return new tr(this.data)}}const Ia=function(e=""){let t=Dt.NONE;return e&&((e.includes("C")||e.includes("K"))&&(t|=Dt.CREATE),e.includes("G")&&(t|=Dt.READ),(e.includes("W")||e.includes("N")||e.includes("V"))&&(t|=Dt.UPDATE),e.includes("D")&&(t|=Dt.DELETE),e.includes("R")&&(t|=Dt.SHARE)),t},Sa=["d:getcontentlength","d:getcontenttype","d:getetag","d:getlastmodified","d:creationdate","d:displayname","d:quota-available-bytes","d:resourcetype","nc:has-preview","nc:is-encrypted","nc:mount-type","oc:comments-unread","oc:favorite","oc:fileid","oc:owner-display-name","oc:owner-id","oc:permissions","oc:size"],Aa={d:"DAV:",nc:"http://nextcloud.org/ns",oc:"http://owncloud.org/ns",ocs:"http://open-collaboration-services.org/ns"},er=function(){return typeof window._nc_dav_properties>"u"&&(window._nc_dav_properties=[...Sa]),window._nc_dav_properties.map(e=>`<${e} />`).join(" ")},nr=function(){return typeof window._nc_dav_namespaces>"u"&&(window._nc_dav_namespaces={...Aa}),Object.keys(window._nc_dav_namespaces).map(e=>`xmlns:${e}="${window._nc_dav_namespaces?.[e]}"`).join(" ")},Di=function(){return`<?xml version="1.0"?>
		<d:propfind ${nr()}>
			<d:prop>
				${er()}
			</d:prop>
		</d:propfind>`},Ra=function(){return`<?xml version="1.0"?>
		<oc:filter-files ${nr()}>
			<d:prop>
				${er()}
			</d:prop>
			<oc:filter-rules>
				<oc:favorite>1</oc:favorite>
			</oc:filter-rules>
		</oc:filter-files>`},La=function(e){return`<?xml version="1.0" encoding="UTF-8"?>
<d:searchrequest ${nr()}
	xmlns:ns="https://github.com/icewind1991/SearchDAV/ns">
	<d:basicsearch>
		<d:select>
			<d:prop>
				${er()}
			</d:prop>
		</d:select>
		<d:from>
			<d:scope>
				<d:href>/files/${qe()?.uid}/</d:href>
				<d:depth>infinity</d:depth>
			</d:scope>
		</d:from>
		<d:where>
			<d:and>
				<d:or>
					<d:not>
						<d:eq>
							<d:prop>
								<d:getcontenttype/>
							</d:prop>
							<d:literal>httpd/unix-directory</d:literal>
						</d:eq>
					</d:not>
					<d:eq>
						<d:prop>
							<oc:size/>
						</d:prop>
						<d:literal>0</d:literal>
					</d:eq>
				</d:or>
				<d:gt>
					<d:prop>
						<d:getlastmodified/>
					</d:prop>
					<d:literal>${e}</d:literal>
				</d:gt>
			</d:and>
		</d:where>
		<d:orderby>
			<d:order>
				<d:prop>
					<d:getlastmodified/>
				</d:prop>
				<d:descending/>
			</d:order>
		</d:orderby>
		<d:limit>
			<d:nresults>100</d:nresults>
			<ns:firstresult>0</ns:firstresult>
		</d:limit>
	</d:basicsearch>
</d:searchrequest>`};function xa(){return Fn()?`/files/${es()}`:`/files/${qe()?.uid}`}const _e=xa();function Pa(){const e=so("dav");return Fn()?e.replace("remote.php","public.php"):e}const Bi=Pa(),$a=function(e=Bi,t={}){const n=Na(e,{headers:t});function r(o){n.setHeaders({...t,"X-Requested-With":"XMLHttpRequest",requesttoken:o??""})}return lo(r),r(ao()),Ca().patch("fetch",(o,s)=>{const l=s.headers;return l?.method&&(s.method=l.method,delete l.method),fetch(o,s)}),n},ka=(e,t="/",n=_e)=>{const r=new AbortController;return new zt(async(o,s,l)=>{l(()=>r.abort());try{const c=(await e.getDirectoryContents(`${n}${t}`,{signal:r.signal,details:!0,data:Ra(),headers:{method:"REPORT"},includeSelf:!0})).data.filter(d=>d.filename!==t).map(d=>Ke(d,n));o(c)}catch(c){s(c)}})},Ke=function(e,t=_e,n=Bi){let r=qe()?.uid;if(Fn())r=r??"anonymous";else if(!r)throw new Error("No user id found");const o=e.props,s=Ia(o?.permissions),l=String(o?.["owner-id"]||r),c=o.fileid||0,d=new Date(Date.parse(e.lastmod)),a=new Date(Date.parse(o.creationdate)),u={id:c,source:`${n}${e.filename}`,mtime:!isNaN(d.getTime())&&d.getTime()!==0?d:void 0,crtime:!isNaN(a.getTime())&&a.getTime()!==0?a:void 0,mime:e.mime||"application/octet-stream",displayname:o.displayname!==void 0?String(o.displayname):void 0,size:o?.size||Number.parseInt(o.getcontentlength||"0"),status:c<0?Kn.FAILED:void 0,permissions:s,owner:l,root:t,attributes:{...e,...o,hasPreview:o?.["has-preview"]}};return delete u.attributes?.props,e.type==="file"?new Jn(u):new tr(u)};var vn={},yn={exports:{}},Gr={},zr;function Da(){return zr||(zr=1,(function(e){Object.defineProperties(e,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var t={},n={};n.byteLength=u,n.toByteArray=f,n.fromByteArray=E;for(var r=[],o=[],s=typeof Uint8Array<"u"?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,d=l.length;c<d;++c)r[c]=l[c],o[l.charCodeAt(c)]=c;o[45]=62,o[95]=63;function a(g){var w=g.length;if(w%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var I=g.indexOf("=");I===-1&&(I=w);var R=I===w?0:4-I%4;return[I,R]}function u(g){var w=a(g),I=w[0],R=w[1];return(I+R)*3/4-R}function p(g,w,I){return(w+I)*3/4-I}function f(g){var w,I=a(g),R=I[0],O=I[1],x=new s(p(g,R,O)),A=0,C=O>0?R-4:R,B;for(B=0;B<C;B+=4)w=o[g.charCodeAt(B)]<<18|o[g.charCodeAt(B+1)]<<12|o[g.charCodeAt(B+2)]<<6|o[g.charCodeAt(B+3)],x[A++]=w>>16&255,x[A++]=w>>8&255,x[A++]=w&255;return O===2&&(w=o[g.charCodeAt(B)]<<2|o[g.charCodeAt(B+1)]>>4,x[A++]=w&255),O===1&&(w=o[g.charCodeAt(B)]<<10|o[g.charCodeAt(B+1)]<<4|o[g.charCodeAt(B+2)]>>2,x[A++]=w>>8&255,x[A++]=w&255),x}function b(g){return r[g>>18&63]+r[g>>12&63]+r[g>>6&63]+r[g&63]}function v(g,w,I){for(var R,O=[],x=w;x<I;x+=3)R=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(g[x+2]&255),O.push(b(R));return O.join("")}function E(g){for(var w,I=g.length,R=I%3,O=[],x=16383,A=0,C=I-R;A<C;A+=x)O.push(v(g,A,A+x>C?C:A+x));return R===1?(w=g[I-1],O.push(r[w>>2]+r[w<<4&63]+"==")):R===2&&(w=(g[I-2]<<8)+g[I-1],O.push(r[w>>10]+r[w>>4&63]+r[w<<2&63]+"=")),O.join("")}var N={};N.read=function(g,w,I,R,O){var x,A,C=O*8-R-1,B=(1<<C)-1,D=B>>1,S=-7,$=I?O-1:0,G=I?-1:1,F=g[w+$];for($+=G,x=F&(1<<-S)-1,F>>=-S,S+=C;S>0;x=x*256+g[w+$],$+=G,S-=8);for(A=x&(1<<-S)-1,x>>=-S,S+=R;S>0;A=A*256+g[w+$],$+=G,S-=8);if(x===0)x=1-D;else{if(x===B)return A?NaN:(F?-1:1)*(1/0);A=A+Math.pow(2,R),x=x-D}return(F?-1:1)*A*Math.pow(2,x-R)},N.write=function(g,w,I,R,O,x){var A,C,B,D=x*8-O-1,S=(1<<D)-1,$=S>>1,G=O===23?Math.pow(2,-24)-Math.pow(2,-77):0,F=R?0:x-1,q=R?1:-1,H=w<0||w===0&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(C=isNaN(w)?1:0,A=S):(A=Math.floor(Math.log(w)/Math.LN2),w*(B=Math.pow(2,-A))<1&&(A--,B*=2),A+$>=1?w+=G/B:w+=G*Math.pow(2,1-$),w*B>=2&&(A++,B/=2),A+$>=S?(C=0,A=S):A+$>=1?(C=(w*B-1)*Math.pow(2,O),A=A+$):(C=w*Math.pow(2,$-1)*Math.pow(2,O),A=0));O>=8;g[I+F]=C&255,F+=q,C/=256,O-=8);for(A=A<<O|C,D+=O;D>0;g[I+F]=A&255,F+=q,A/=256,D-=8);g[I+F-q]|=H*128},(function(g){const w=n,I=N,R=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;g.Buffer=S,g.SlowBuffer=oe,g.INSPECT_MAX_BYTES=50;const O=2147483647;g.kMaxLength=O;const{Uint8Array:x,ArrayBuffer:A,SharedArrayBuffer:C}=globalThis;S.TYPED_ARRAY_SUPPORT=B(),!S.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function B(){try{const i=new x(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,x.prototype),Object.setPrototypeOf(i,h),i.foo()===42}catch{return!1}}Object.defineProperty(S.prototype,"parent",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.buffer}}),Object.defineProperty(S.prototype,"offset",{enumerable:!0,get:function(){if(S.isBuffer(this))return this.byteOffset}});function D(i){if(i>O)throw new RangeError('The value "'+i+'" is invalid for option "size"');const h=new x(i);return Object.setPrototypeOf(h,S.prototype),h}function S(i,h,m){if(typeof i=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return q(i)}return $(i,h,m)}S.poolSize=8192;function $(i,h,m){if(typeof i=="string")return H(i,h);if(A.isView(i))return J(i);if(i==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i);if(Ht(i,A)||i&&Ht(i.buffer,A)||typeof C<"u"&&(Ht(i,C)||i&&Ht(i.buffer,C)))return vt(i,h,m);if(typeof i=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const L=i.valueOf&&i.valueOf();if(L!=null&&L!==i)return S.from(L,h,m);const k=Q(i);if(k)return k;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof i[Symbol.toPrimitive]=="function")return S.from(i[Symbol.toPrimitive]("string"),h,m);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof i)}S.from=function(i,h,m){return $(i,h,m)},Object.setPrototypeOf(S.prototype,x.prototype),Object.setPrototypeOf(S,x);function G(i){if(typeof i!="number")throw new TypeError('"size" argument must be of type number');if(i<0)throw new RangeError('The value "'+i+'" is invalid for option "size"')}function F(i,h,m){return G(i),i<=0?D(i):h!==void 0?typeof m=="string"?D(i).fill(h,m):D(i).fill(h):D(i)}S.alloc=function(i,h,m){return F(i,h,m)};function q(i){return G(i),D(i<0?0:rt(i)|0)}S.allocUnsafe=function(i){return q(i)},S.allocUnsafeSlow=function(i){return q(i)};function H(i,h){if((typeof h!="string"||h==="")&&(h="utf8"),!S.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const m=Zt(i,h)|0;let L=D(m);const k=L.write(i,h);return k!==m&&(L=L.slice(0,k)),L}function nt(i){const h=i.length<0?0:rt(i.length)|0,m=D(h);for(let L=0;L<h;L+=1)m[L]=i[L]&255;return m}function J(i){if(Ht(i,x)){const h=new x(i);return vt(h.buffer,h.byteOffset,h.byteLength)}return nt(i)}function vt(i,h,m){if(h<0||i.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(i.byteLength<h+(m||0))throw new RangeError('"length" is outside of buffer bounds');let L;return h===void 0&&m===void 0?L=new x(i):m===void 0?L=new x(i,h):L=new x(i,h,m),Object.setPrototypeOf(L,S.prototype),L}function Q(i){if(S.isBuffer(i)){const h=rt(i.length)|0,m=D(h);return m.length===0||i.copy(m,0,0,h),m}if(i.length!==void 0)return typeof i.length!="number"||nn(i.length)?D(0):nt(i);if(i.type==="Buffer"&&Array.isArray(i.data))return nt(i.data)}function rt(i){if(i>=O)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+O.toString(16)+" bytes");return i|0}function oe(i){return+i!=i&&(i=0),S.alloc(+i)}S.isBuffer=function(i){return i!=null&&i._isBuffer===!0&&i!==S.prototype},S.compare=function(i,h){if(Ht(i,x)&&(i=S.from(i,i.offset,i.byteLength)),Ht(h,x)&&(h=S.from(h,h.offset,h.byteLength)),!S.isBuffer(i)||!S.isBuffer(h))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(i===h)return 0;let m=i.length,L=h.length;for(let k=0,U=Math.min(m,L);k<U;++k)if(i[k]!==h[k]){m=i[k],L=h[k];break}return m<L?-1:L<m?1:0},S.isEncoding=function(i){switch(String(i).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},S.concat=function(i,h){if(!Array.isArray(i))throw new TypeError('"list" argument must be an Array of Buffers');if(i.length===0)return S.alloc(0);let m;if(h===void 0)for(h=0,m=0;m<i.length;++m)h+=i[m].length;const L=S.allocUnsafe(h);let k=0;for(m=0;m<i.length;++m){let U=i[m];if(Ht(U,x))k+U.length>L.length?(S.isBuffer(U)||(U=S.from(U)),U.copy(L,k)):x.prototype.set.call(L,U,k);else if(S.isBuffer(U))U.copy(L,k);else throw new TypeError('"list" argument must be an Array of Buffers');k+=U.length}return L};function Zt(i,h){if(S.isBuffer(i))return i.length;if(A.isView(i)||Ht(i,A))return i.byteLength;if(typeof i!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof i);const m=i.length,L=arguments.length>2&&arguments[2]===!0;if(!L&&m===0)return 0;let k=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return m;case"utf8":case"utf-8":return en(i).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m*2;case"hex":return m>>>1;case"base64":return cr(i).length;default:if(k)return L?-1:en(i).length;h=(""+h).toLowerCase(),k=!0}}S.byteLength=Zt;function Bt(i,h,m){let L=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((m===void 0||m>this.length)&&(m=this.length),m<=0)||(m>>>=0,h>>>=0,m<=h))return"";for(i||(i="utf8");;)switch(i){case"hex":return Oe(this,h,m);case"utf8":case"utf-8":return Nt(this,h,m);case"ascii":return Gt(this,h,m);case"latin1":case"binary":return Je(this,h,m);case"base64":return Ot(this,h,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,h,m);default:if(L)throw new TypeError("Unknown encoding: "+i);i=(i+"").toLowerCase(),L=!0}}S.prototype._isBuffer=!0;function Ft(i,h,m){const L=i[h];i[h]=i[m],i[m]=L}S.prototype.swap16=function(){const i=this.length;if(i%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let h=0;h<i;h+=2)Ft(this,h,h+1);return this},S.prototype.swap32=function(){const i=this.length;if(i%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let h=0;h<i;h+=4)Ft(this,h,h+3),Ft(this,h+1,h+2);return this},S.prototype.swap64=function(){const i=this.length;if(i%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let h=0;h<i;h+=8)Ft(this,h,h+7),Ft(this,h+1,h+6),Ft(this,h+2,h+5),Ft(this,h+3,h+4);return this},S.prototype.toString=function(){const i=this.length;return i===0?"":arguments.length===0?Nt(this,0,i):Bt.apply(this,arguments)},S.prototype.toLocaleString=S.prototype.toString,S.prototype.equals=function(i){if(!S.isBuffer(i))throw new TypeError("Argument must be a Buffer");return this===i?!0:S.compare(this,i)===0},S.prototype.inspect=function(){let i="";const h=g.INSPECT_MAX_BYTES;return i=this.toString("hex",0,h).replace(/(.{2})/g,"$1 ").trim(),this.length>h&&(i+=" ... "),"<Buffer "+i+">"},R&&(S.prototype[R]=S.prototype.inspect),S.prototype.compare=function(i,h,m,L,k){if(Ht(i,x)&&(i=S.from(i,i.offset,i.byteLength)),!S.isBuffer(i))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof i);if(h===void 0&&(h=0),m===void 0&&(m=i?i.length:0),L===void 0&&(L=0),k===void 0&&(k=this.length),h<0||m>i.length||L<0||k>this.length)throw new RangeError("out of range index");if(L>=k&&h>=m)return 0;if(L>=k)return-1;if(h>=m)return 1;if(h>>>=0,m>>>=0,L>>>=0,k>>>=0,this===i)return 0;let U=k-L,j=m-h;const it=Math.min(U,j),Ct=this.slice(L,k),ot=i.slice(h,m);for(let et=0;et<it;++et)if(Ct[et]!==ot[et]){U=Ct[et],j=ot[et];break}return U<j?-1:j<U?1:0};function T(i,h,m,L,k){if(i.length===0)return-1;if(typeof m=="string"?(L=m,m=0):m>2147483647?m=2147483647:m<-2147483648&&(m=-2147483648),m=+m,nn(m)&&(m=k?0:i.length-1),m<0&&(m=i.length+m),m>=i.length){if(k)return-1;m=i.length-1}else if(m<0)if(k)m=0;else return-1;if(typeof h=="string"&&(h=S.from(h,L)),S.isBuffer(h))return h.length===0?-1:y(i,h,m,L,k);if(typeof h=="number")return h=h&255,typeof x.prototype.indexOf=="function"?k?x.prototype.indexOf.call(i,h,m):x.prototype.lastIndexOf.call(i,h,m):y(i,[h],m,L,k);throw new TypeError("val must be string, number or Buffer")}function y(i,h,m,L,k){let U=1,j=i.length,it=h.length;if(L!==void 0&&(L=String(L).toLowerCase(),L==="ucs2"||L==="ucs-2"||L==="utf16le"||L==="utf-16le")){if(i.length<2||h.length<2)return-1;U=2,j/=2,it/=2,m/=2}function Ct(et,mt){return U===1?et[mt]:et.readUInt16BE(mt*U)}let ot;if(k){let et=-1;for(ot=m;ot<j;ot++)if(Ct(i,ot)===Ct(h,et===-1?0:ot-et)){if(et===-1&&(et=ot),ot-et+1===it)return et*U}else et!==-1&&(ot-=ot-et),et=-1}else for(m+it>j&&(m=j-it),ot=m;ot>=0;ot--){let et=!0;for(let mt=0;mt<it;mt++)if(Ct(i,ot+mt)!==Ct(h,mt)){et=!1;break}if(et)return ot}return-1}S.prototype.includes=function(i,h,m){return this.indexOf(i,h,m)!==-1},S.prototype.indexOf=function(i,h,m){return T(this,i,h,m,!0)},S.prototype.lastIndexOf=function(i,h,m){return T(this,i,h,m,!1)};function M(i,h,m,L){m=Number(m)||0;const k=i.length-m;L?(L=Number(L),L>k&&(L=k)):L=k;const U=h.length;L>U/2&&(L=U/2);let j;for(j=0;j<L;++j){const it=parseInt(h.substr(j*2,2),16);if(nn(it))return j;i[m+j]=it}return j}function P(i,h,m,L){return Ie(en(h,i.length-m),i,m,L)}function Z(i,h,m,L){return Ie(qi(h),i,m,L)}function ht(i,h,m,L){return Ie(cr(h),i,m,L)}function ft(i,h,m,L){return Ie(Yi(h,i.length-m),i,m,L)}S.prototype.write=function(i,h,m,L){if(h===void 0)L="utf8",m=this.length,h=0;else if(m===void 0&&typeof h=="string")L=h,m=this.length,h=0;else if(isFinite(h))h=h>>>0,isFinite(m)?(m=m>>>0,L===void 0&&(L="utf8")):(L=m,m=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const k=this.length-h;if((m===void 0||m>k)&&(m=k),i.length>0&&(m<0||h<0)||h>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let U=!1;for(;;)switch(L){case"hex":return M(this,i,h,m);case"utf8":case"utf-8":return P(this,i,h,m);case"ascii":case"latin1":case"binary":return Z(this,i,h,m);case"base64":return ht(this,i,h,m);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ft(this,i,h,m);default:if(U)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),U=!0}},S.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ot(i,h,m){return h===0&&m===i.length?w.fromByteArray(i):w.fromByteArray(i.slice(h,m))}function Nt(i,h,m){m=Math.min(i.length,m);const L=[];let k=h;for(;k<m;){const U=i[k];let j=null,it=U>239?4:U>223?3:U>191?2:1;if(k+it<=m){let Ct,ot,et,mt;switch(it){case 1:U<128&&(j=U);break;case 2:Ct=i[k+1],(Ct&192)===128&&(mt=(U&31)<<6|Ct&63,mt>127&&(j=mt));break;case 3:Ct=i[k+1],ot=i[k+2],(Ct&192)===128&&(ot&192)===128&&(mt=(U&15)<<12|(Ct&63)<<6|ot&63,mt>2047&&(mt<55296||mt>57343)&&(j=mt));break;case 4:Ct=i[k+1],ot=i[k+2],et=i[k+3],(Ct&192)===128&&(ot&192)===128&&(et&192)===128&&(mt=(U&15)<<18|(Ct&63)<<12|(ot&63)<<6|et&63,mt>65535&&mt<1114112&&(j=mt))}}j===null?(j=65533,it=1):j>65535&&(j-=65536,L.push(j>>>10&1023|55296),j=56320|j&1023),L.push(j),k+=it}return yt(L)}const Wt=4096;function yt(i){const h=i.length;if(h<=Wt)return String.fromCharCode.apply(String,i);let m="",L=0;for(;L<h;)m+=String.fromCharCode.apply(String,i.slice(L,L+=Wt));return m}function Gt(i,h,m){let L="";m=Math.min(i.length,m);for(let k=h;k<m;++k)L+=String.fromCharCode(i[k]&127);return L}function Je(i,h,m){let L="";m=Math.min(i.length,m);for(let k=h;k<m;++k)L+=String.fromCharCode(i[k]);return L}function Oe(i,h,m){const L=i.length;(!h||h<0)&&(h=0),(!m||m<0||m>L)&&(m=L);let k="";for(let U=h;U<m;++U)k+=Zi[i[U]];return k}function fe(i,h,m){const L=i.slice(h,m);let k="";for(let U=0;U<L.length-1;U+=2)k+=String.fromCharCode(L[U]+L[U+1]*256);return k}S.prototype.slice=function(i,h){const m=this.length;i=~~i,h=h===void 0?m:~~h,i<0?(i+=m,i<0&&(i=0)):i>m&&(i=m),h<0?(h+=m,h<0&&(h=0)):h>m&&(h=m),h<i&&(h=i);const L=this.subarray(i,h);return Object.setPrototypeOf(L,S.prototype),L};function pt(i,h,m){if(i%1!==0||i<0)throw new RangeError("offset is not uint");if(i+h>m)throw new RangeError("Trying to access beyond buffer length")}S.prototype.readUintLE=S.prototype.readUIntLE=function(i,h,m){i=i>>>0,h=h>>>0,m||pt(i,h,this.length);let L=this[i],k=1,U=0;for(;++U<h&&(k*=256);)L+=this[i+U]*k;return L},S.prototype.readUintBE=S.prototype.readUIntBE=function(i,h,m){i=i>>>0,h=h>>>0,m||pt(i,h,this.length);let L=this[i+--h],k=1;for(;h>0&&(k*=256);)L+=this[i+--h]*k;return L},S.prototype.readUint8=S.prototype.readUInt8=function(i,h){return i=i>>>0,h||pt(i,1,this.length),this[i]},S.prototype.readUint16LE=S.prototype.readUInt16LE=function(i,h){return i=i>>>0,h||pt(i,2,this.length),this[i]|this[i+1]<<8},S.prototype.readUint16BE=S.prototype.readUInt16BE=function(i,h){return i=i>>>0,h||pt(i,2,this.length),this[i]<<8|this[i+1]},S.prototype.readUint32LE=S.prototype.readUInt32LE=function(i,h){return i=i>>>0,h||pt(i,4,this.length),(this[i]|this[i+1]<<8|this[i+2]<<16)+this[i+3]*16777216},S.prototype.readUint32BE=S.prototype.readUInt32BE=function(i,h){return i=i>>>0,h||pt(i,4,this.length),this[i]*16777216+(this[i+1]<<16|this[i+2]<<8|this[i+3])},S.prototype.readBigUInt64LE=Qt(function(i){i=i>>>0,ae(i,"offset");const h=this[i],m=this[i+7];(h===void 0||m===void 0)&&pe(i,this.length-8);const L=h+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24,k=this[++i]+this[++i]*2**8+this[++i]*2**16+m*2**24;return BigInt(L)+(BigInt(k)<<BigInt(32))}),S.prototype.readBigUInt64BE=Qt(function(i){i=i>>>0,ae(i,"offset");const h=this[i],m=this[i+7];(h===void 0||m===void 0)&&pe(i,this.length-8);const L=h*2**24+this[++i]*2**16+this[++i]*2**8+this[++i],k=this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+m;return(BigInt(L)<<BigInt(32))+BigInt(k)}),S.prototype.readIntLE=function(i,h,m){i=i>>>0,h=h>>>0,m||pt(i,h,this.length);let L=this[i],k=1,U=0;for(;++U<h&&(k*=256);)L+=this[i+U]*k;return k*=128,L>=k&&(L-=Math.pow(2,8*h)),L},S.prototype.readIntBE=function(i,h,m){i=i>>>0,h=h>>>0,m||pt(i,h,this.length);let L=h,k=1,U=this[i+--L];for(;L>0&&(k*=256);)U+=this[i+--L]*k;return k*=128,U>=k&&(U-=Math.pow(2,8*h)),U},S.prototype.readInt8=function(i,h){return i=i>>>0,h||pt(i,1,this.length),this[i]&128?(255-this[i]+1)*-1:this[i]},S.prototype.readInt16LE=function(i,h){i=i>>>0,h||pt(i,2,this.length);const m=this[i]|this[i+1]<<8;return m&32768?m|4294901760:m},S.prototype.readInt16BE=function(i,h){i=i>>>0,h||pt(i,2,this.length);const m=this[i+1]|this[i]<<8;return m&32768?m|4294901760:m},S.prototype.readInt32LE=function(i,h){return i=i>>>0,h||pt(i,4,this.length),this[i]|this[i+1]<<8|this[i+2]<<16|this[i+3]<<24},S.prototype.readInt32BE=function(i,h){return i=i>>>0,h||pt(i,4,this.length),this[i]<<24|this[i+1]<<16|this[i+2]<<8|this[i+3]},S.prototype.readBigInt64LE=Qt(function(i){i=i>>>0,ae(i,"offset");const h=this[i],m=this[i+7];(h===void 0||m===void 0)&&pe(i,this.length-8);const L=this[i+4]+this[i+5]*2**8+this[i+6]*2**16+(m<<24);return(BigInt(L)<<BigInt(32))+BigInt(h+this[++i]*2**8+this[++i]*2**16+this[++i]*2**24)}),S.prototype.readBigInt64BE=Qt(function(i){i=i>>>0,ae(i,"offset");const h=this[i],m=this[i+7];(h===void 0||m===void 0)&&pe(i,this.length-8);const L=(h<<24)+this[++i]*2**16+this[++i]*2**8+this[++i];return(BigInt(L)<<BigInt(32))+BigInt(this[++i]*2**24+this[++i]*2**16+this[++i]*2**8+m)}),S.prototype.readFloatLE=function(i,h){return i=i>>>0,h||pt(i,4,this.length),I.read(this,i,!0,23,4)},S.prototype.readFloatBE=function(i,h){return i=i>>>0,h||pt(i,4,this.length),I.read(this,i,!1,23,4)},S.prototype.readDoubleLE=function(i,h){return i=i>>>0,h||pt(i,8,this.length),I.read(this,i,!0,52,8)},S.prototype.readDoubleBE=function(i,h){return i=i>>>0,h||pt(i,8,this.length),I.read(this,i,!1,52,8)};function $t(i,h,m,L,k,U){if(!S.isBuffer(i))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>k||h<U)throw new RangeError('"value" argument is out of bounds');if(m+L>i.length)throw new RangeError("Index out of range")}S.prototype.writeUintLE=S.prototype.writeUIntLE=function(i,h,m,L){if(i=+i,h=h>>>0,m=m>>>0,!L){const j=Math.pow(2,8*m)-1;$t(this,i,h,m,j,0)}let k=1,U=0;for(this[h]=i&255;++U<m&&(k*=256);)this[h+U]=i/k&255;return h+m},S.prototype.writeUintBE=S.prototype.writeUIntBE=function(i,h,m,L){if(i=+i,h=h>>>0,m=m>>>0,!L){const j=Math.pow(2,8*m)-1;$t(this,i,h,m,j,0)}let k=m-1,U=1;for(this[h+k]=i&255;--k>=0&&(U*=256);)this[h+k]=i/U&255;return h+m},S.prototype.writeUint8=S.prototype.writeUInt8=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,1,255,0),this[h]=i&255,h+1},S.prototype.writeUint16LE=S.prototype.writeUInt16LE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,2,65535,0),this[h]=i&255,this[h+1]=i>>>8,h+2},S.prototype.writeUint16BE=S.prototype.writeUInt16BE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,2,65535,0),this[h]=i>>>8,this[h+1]=i&255,h+2},S.prototype.writeUint32LE=S.prototype.writeUInt32LE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,4,4294967295,0),this[h+3]=i>>>24,this[h+2]=i>>>16,this[h+1]=i>>>8,this[h]=i&255,h+4},S.prototype.writeUint32BE=S.prototype.writeUInt32BE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,4,4294967295,0),this[h]=i>>>24,this[h+1]=i>>>16,this[h+2]=i>>>8,this[h+3]=i&255,h+4};function rr(i,h,m,L,k){ur(h,L,k,i,m,7);let U=Number(h&BigInt(4294967295));i[m++]=U,U=U>>8,i[m++]=U,U=U>>8,i[m++]=U,U=U>>8,i[m++]=U;let j=Number(h>>BigInt(32)&BigInt(4294967295));return i[m++]=j,j=j>>8,i[m++]=j,j=j>>8,i[m++]=j,j=j>>8,i[m++]=j,m}function ir(i,h,m,L,k){ur(h,L,k,i,m,7);let U=Number(h&BigInt(4294967295));i[m+7]=U,U=U>>8,i[m+6]=U,U=U>>8,i[m+5]=U,U=U>>8,i[m+4]=U;let j=Number(h>>BigInt(32)&BigInt(4294967295));return i[m+3]=j,j=j>>8,i[m+2]=j,j=j>>8,i[m+1]=j,j=j>>8,i[m]=j,m+8}S.prototype.writeBigUInt64LE=Qt(function(i,h=0){return rr(this,i,h,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeBigUInt64BE=Qt(function(i,h=0){return ir(this,i,h,BigInt(0),BigInt("0xffffffffffffffff"))}),S.prototype.writeIntLE=function(i,h,m,L){if(i=+i,h=h>>>0,!L){const it=Math.pow(2,8*m-1);$t(this,i,h,m,it-1,-it)}let k=0,U=1,j=0;for(this[h]=i&255;++k<m&&(U*=256);)i<0&&j===0&&this[h+k-1]!==0&&(j=1),this[h+k]=(i/U>>0)-j&255;return h+m},S.prototype.writeIntBE=function(i,h,m,L){if(i=+i,h=h>>>0,!L){const it=Math.pow(2,8*m-1);$t(this,i,h,m,it-1,-it)}let k=m-1,U=1,j=0;for(this[h+k]=i&255;--k>=0&&(U*=256);)i<0&&j===0&&this[h+k+1]!==0&&(j=1),this[h+k]=(i/U>>0)-j&255;return h+m},S.prototype.writeInt8=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,1,127,-128),i<0&&(i=255+i+1),this[h]=i&255,h+1},S.prototype.writeInt16LE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,2,32767,-32768),this[h]=i&255,this[h+1]=i>>>8,h+2},S.prototype.writeInt16BE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,2,32767,-32768),this[h]=i>>>8,this[h+1]=i&255,h+2},S.prototype.writeInt32LE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,4,2147483647,-2147483648),this[h]=i&255,this[h+1]=i>>>8,this[h+2]=i>>>16,this[h+3]=i>>>24,h+4},S.prototype.writeInt32BE=function(i,h,m){return i=+i,h=h>>>0,m||$t(this,i,h,4,2147483647,-2147483648),i<0&&(i=4294967295+i+1),this[h]=i>>>24,this[h+1]=i>>>16,this[h+2]=i>>>8,this[h+3]=i&255,h+4},S.prototype.writeBigInt64LE=Qt(function(i,h=0){return rr(this,i,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),S.prototype.writeBigInt64BE=Qt(function(i,h=0){return ir(this,i,h,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function or(i,h,m,L,k,U){if(m+L>i.length)throw new RangeError("Index out of range");if(m<0)throw new RangeError("Index out of range")}function sr(i,h,m,L,k){return h=+h,m=m>>>0,k||or(i,h,m,4),I.write(i,h,m,L,23,4),m+4}S.prototype.writeFloatLE=function(i,h,m){return sr(this,i,h,!0,m)},S.prototype.writeFloatBE=function(i,h,m){return sr(this,i,h,!1,m)};function ar(i,h,m,L,k){return h=+h,m=m>>>0,k||or(i,h,m,8),I.write(i,h,m,L,52,8),m+8}S.prototype.writeDoubleLE=function(i,h,m){return ar(this,i,h,!0,m)},S.prototype.writeDoubleBE=function(i,h,m){return ar(this,i,h,!1,m)},S.prototype.copy=function(i,h,m,L){if(!S.isBuffer(i))throw new TypeError("argument should be a Buffer");if(m||(m=0),!L&&L!==0&&(L=this.length),h>=i.length&&(h=i.length),h||(h=0),L>0&&L<m&&(L=m),L===m||i.length===0||this.length===0)return 0;if(h<0)throw new RangeError("targetStart out of bounds");if(m<0||m>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),i.length-h<L-m&&(L=i.length-h+m);const k=L-m;return this===i&&typeof x.prototype.copyWithin=="function"?this.copyWithin(h,m,L):x.prototype.set.call(i,this.subarray(m,L),h),k},S.prototype.fill=function(i,h,m,L){if(typeof i=="string"){if(typeof h=="string"?(L=h,h=0,m=this.length):typeof m=="string"&&(L=m,m=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!S.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(i.length===1){const U=i.charCodeAt(0);(L==="utf8"&&U<128||L==="latin1")&&(i=U)}}else typeof i=="number"?i=i&255:typeof i=="boolean"&&(i=Number(i));if(h<0||this.length<h||this.length<m)throw new RangeError("Out of range index");if(m<=h)return this;h=h>>>0,m=m===void 0?this.length:m>>>0,i||(i=0);let k;if(typeof i=="number")for(k=h;k<m;++k)this[k]=i;else{const U=S.isBuffer(i)?i:S.from(i,L),j=U.length;if(j===0)throw new TypeError('The value "'+i+'" is invalid for argument "value"');for(k=0;k<m-h;++k)this[k+h]=U[k%j]}return this};const se={};function tn(i,h,m){se[i]=class extends m{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${i}]`,this.stack,delete this.name}get code(){return i}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${i}]: ${this.message}`}}}tn("ERR_BUFFER_OUT_OF_BOUNDS",function(i){return i?`${i} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),tn("ERR_INVALID_ARG_TYPE",function(i,h){return`The "${i}" argument must be of type number. Received type ${typeof h}`},TypeError),tn("ERR_OUT_OF_RANGE",function(i,h,m){let L=`The value of "${i}" is out of range.`,k=m;return Number.isInteger(m)&&Math.abs(m)>2**32?k=lr(String(m)):typeof m=="bigint"&&(k=String(m),(m>BigInt(2)**BigInt(32)||m<-(BigInt(2)**BigInt(32)))&&(k=lr(k)),k+="n"),L+=` It must be ${h}. Received ${k}`,L},RangeError);function lr(i){let h="",m=i.length;const L=i[0]==="-"?1:0;for(;m>=L+4;m-=3)h=`_${i.slice(m-3,m)}${h}`;return`${i.slice(0,m)}${h}`}function Hi(i,h,m){ae(h,"offset"),(i[h]===void 0||i[h+m]===void 0)&&pe(h,i.length-(m+1))}function ur(i,h,m,L,k,U){if(i>m||i<h){const j=typeof h=="bigint"?"n":"";let it;throw h===0||h===BigInt(0)?it=`>= 0${j} and < 2${j} ** ${(U+1)*8}${j}`:it=`>= -(2${j} ** ${(U+1)*8-1}${j}) and < 2 ** ${(U+1)*8-1}${j}`,new se.ERR_OUT_OF_RANGE("value",it,i)}Hi(L,k,U)}function ae(i,h){if(typeof i!="number")throw new se.ERR_INVALID_ARG_TYPE(h,"number",i)}function pe(i,h,m){throw Math.floor(i)!==i?(ae(i,m),new se.ERR_OUT_OF_RANGE("offset","an integer",i)):h<0?new se.ERR_BUFFER_OUT_OF_BOUNDS:new se.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,i)}const Wi=/[^+/0-9A-Za-z-_]/g;function Xi(i){if(i=i.split("=")[0],i=i.trim().replace(Wi,""),i.length<2)return"";for(;i.length%4!==0;)i=i+"=";return i}function en(i,h){h=h||1/0;let m;const L=i.length;let k=null;const U=[];for(let j=0;j<L;++j){if(m=i.charCodeAt(j),m>55295&&m<57344){if(!k){if(m>56319){(h-=3)>-1&&U.push(239,191,189);continue}else if(j+1===L){(h-=3)>-1&&U.push(239,191,189);continue}k=m;continue}if(m<56320){(h-=3)>-1&&U.push(239,191,189),k=m;continue}m=(k-55296<<10|m-56320)+65536}else k&&(h-=3)>-1&&U.push(239,191,189);if(k=null,m<128){if((h-=1)<0)break;U.push(m)}else if(m<2048){if((h-=2)<0)break;U.push(m>>6|192,m&63|128)}else if(m<65536){if((h-=3)<0)break;U.push(m>>12|224,m>>6&63|128,m&63|128)}else if(m<1114112){if((h-=4)<0)break;U.push(m>>18|240,m>>12&63|128,m>>6&63|128,m&63|128)}else throw new Error("Invalid code point")}return U}function qi(i){const h=[];for(let m=0;m<i.length;++m)h.push(i.charCodeAt(m)&255);return h}function Yi(i,h){let m,L,k;const U=[];for(let j=0;j<i.length&&!((h-=2)<0);++j)m=i.charCodeAt(j),L=m>>8,k=m%256,U.push(k),U.push(L);return U}function cr(i){return w.toByteArray(Xi(i))}function Ie(i,h,m,L){let k;for(k=0;k<L&&!(k+m>=h.length||k>=i.length);++k)h[k+m]=i[k];return k}function Ht(i,h){return i instanceof h||i!=null&&i.constructor!=null&&i.constructor.name!=null&&i.constructor.name===h.name}function nn(i){return i!==i}const Zi=(function(){const i="0123456789abcdef",h=new Array(256);for(let m=0;m<16;++m){const L=m*16;for(let k=0;k<16;++k)h[L+k]=i[m]+i[k]}return h})();function Qt(i){return typeof BigInt>"u"?Qi:i}function Qi(){throw new Error("BigInt not supported")}})(t);const _=t.Buffer;e.Blob=t.Blob,e.BlobOptions=t.BlobOptions,e.Buffer=t.Buffer,e.File=t.File,e.FileOptions=t.FileOptions,e.INSPECT_MAX_BYTES=t.INSPECT_MAX_BYTES,e.SlowBuffer=t.SlowBuffer,e.TranscodeEncoding=t.TranscodeEncoding,e.atob=t.atob,e.btoa=t.btoa,e.constants=t.constants,e.default=_,e.isAscii=t.isAscii,e.isUtf8=t.isUtf8,e.kMaxLength=t.kMaxLength,e.kStringMaxLength=t.kStringMaxLength,e.resolveObjectURL=t.resolveObjectURL,e.transcode=t.transcode})(Gr)),Gr}var Hr;function Ba(){return Hr||(Hr=1,(function(e,t){var n=Da(),r=n.Buffer;function o(l,c){for(var d in l)c[d]=l[d]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=n:(o(n,t),t.Buffer=s);function s(l,c,d){return r(l,c,d)}s.prototype=Object.create(r.prototype),o(r,s),s.from=function(l,c,d){if(typeof l=="number")throw new TypeError("Argument must not be a number");return r(l,c,d)},s.alloc=function(l,c,d){if(typeof l!="number")throw new TypeError("Argument must be a number");var a=r(l);return c!==void 0?typeof d=="string"?a.fill(c,d):a.fill(c):a.fill(0),a},s.allocUnsafe=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return r(l)},s.allocUnsafeSlow=function(l){if(typeof l!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(l)}})(yn,yn.exports)),yn.exports}var Wr;function Ua(){if(Wr)return vn;Wr=1;var e=Ba().Buffer,t=e.isEncoding||function(_){switch(_=""+_,_&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function n(_){if(!_)return"utf8";for(var g;;)switch(_){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return _;default:if(g)return;_=(""+_).toLowerCase(),g=!0}}function r(_){var g=n(_);if(typeof g!="string"&&(e.isEncoding===t||!t(_)))throw new Error("Unknown encoding: "+_);return g||_}vn.StringDecoder=o;function o(_){this.encoding=r(_);var g;switch(this.encoding){case"utf16le":this.text=p,this.end=f,g=4;break;case"utf8":this.fillLast=d,g=4;break;case"base64":this.text=b,this.end=v,g=3;break;default:this.write=E,this.end=N;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(g)}o.prototype.write=function(_){if(_.length===0)return"";var g,w;if(this.lastNeed){if(g=this.fillLast(_),g===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<_.length?g?g+this.text(_,w):this.text(_,w):g||""},o.prototype.end=u,o.prototype.text=a,o.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length};function s(_){return _<=127?0:_>>5===6?2:_>>4===14?3:_>>3===30?4:_>>6===2?-1:-2}function l(_,g,w){var I=g.length-1;if(I<w)return 0;var R=s(g[I]);return R>=0?(R>0&&(_.lastNeed=R-1),R):--I<w||R===-2?0:(R=s(g[I]),R>=0?(R>0&&(_.lastNeed=R-2),R):--I<w||R===-2?0:(R=s(g[I]),R>=0?(R>0&&(R===2?R=0:_.lastNeed=R-3),R):0))}function c(_,g,w){if((g[0]&192)!==128)return _.lastNeed=0,"�";if(_.lastNeed>1&&g.length>1){if((g[1]&192)!==128)return _.lastNeed=1,"�";if(_.lastNeed>2&&g.length>2&&(g[2]&192)!==128)return _.lastNeed=2,"�"}}function d(_){var g=this.lastTotal-this.lastNeed,w=c(this,_);if(w!==void 0)return w;if(this.lastNeed<=_.length)return _.copy(this.lastChar,g,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,g,0,_.length),this.lastNeed-=_.length}function a(_,g){var w=l(this,_,g);if(!this.lastNeed)return _.toString("utf8",g);this.lastTotal=w;var I=_.length-(w-this.lastNeed);return _.copy(this.lastChar,0,I),_.toString("utf8",g,I)}function u(_){var g=_&&_.length?this.write(_):"";return this.lastNeed?g+"�":g}function p(_,g){if((_.length-g)%2===0){var w=_.toString("utf16le",g);if(w){var I=w.charCodeAt(w.length-1);if(I>=55296&&I<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",g,_.length-1)}function f(_){var g=_&&_.length?this.write(_):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return g+this.lastChar.toString("utf16le",0,w)}return g}function b(_,g){var w=(_.length-g)%3;return w===0?_.toString("base64",g):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",g,_.length-w))}function v(_){var g=_&&_.length?this.write(_):"";return this.lastNeed?g+this.lastChar.toString("base64",0,3-this.lastNeed):g}function E(_){return _.toString(this.encoding)}function N(_){return _&&_.length?this.write(_):""}return vn}var Ma=Ua();const ja=uo(Ma);var bn={},Xr,qr;function Ui(){return qr||(qr=1,Xr=typeof he=="object"&&bn&&bn.NODE_DEBUG&&/\bsemver\b/i.test(bn.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{}),Xr}var wn,Yr;function Mi(){if(Yr)return wn;Yr=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,o=t-6;return wn={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:o,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},wn}var En={exports:{}},Zr;function Va(){return Zr||(Zr=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:o}=Mi(),s=Ui();t=e.exports={};const l=t.re=[],c=t.safeRe=[],d=t.src=[],a=t.t={};let u=0;const p="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",o],[p,r]],b=E=>{for(const[N,_]of f)E=E.split(`${N}*`).join(`${N}{0,${_}}`).split(`${N}+`).join(`${N}{1,${_}}`);return E},v=(E,N,_)=>{const g=b(N),w=u++;s(E,w,N),a[E]=w,d[w]=N,l[w]=new RegExp(N,_?"g":void 0),c[w]=new RegExp(g,_?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),v("MAINVERSION",`(${d[a.NUMERICIDENTIFIER]})\\.(${d[a.NUMERICIDENTIFIER]})\\.(${d[a.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${d[a.NUMERICIDENTIFIERLOOSE]})\\.(${d[a.NUMERICIDENTIFIERLOOSE]})\\.(${d[a.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${d[a.NUMERICIDENTIFIER]}|${d[a.NONNUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${d[a.NUMERICIDENTIFIERLOOSE]}|${d[a.NONNUMERICIDENTIFIER]})`),v("PRERELEASE",`(?:-(${d[a.PRERELEASEIDENTIFIER]}(?:\\.${d[a.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${d[a.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${d[a.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${p}+`),v("BUILD",`(?:\\+(${d[a.BUILDIDENTIFIER]}(?:\\.${d[a.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${d[a.MAINVERSION]}${d[a.PRERELEASE]}?${d[a.BUILD]}?`),v("FULL",`^${d[a.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${d[a.MAINVERSIONLOOSE]}${d[a.PRERELEASELOOSE]}?${d[a.BUILD]}?`),v("LOOSE",`^${d[a.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${d[a.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${d[a.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${d[a.XRANGEIDENTIFIER]})(?:\\.(${d[a.XRANGEIDENTIFIER]})(?:\\.(${d[a.XRANGEIDENTIFIER]})(?:${d[a.PRERELEASE]})?${d[a.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${d[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[a.XRANGEIDENTIFIERLOOSE]})(?:\\.(${d[a.XRANGEIDENTIFIERLOOSE]})(?:${d[a.PRERELEASELOOSE]})?${d[a.BUILD]}?)?)?`),v("XRANGE",`^${d[a.GTLT]}\\s*${d[a.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${d[a.GTLT]}\\s*${d[a.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),v("COERCE",`${d[a.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",d[a.COERCEPLAIN]+`(?:${d[a.PRERELEASE]})?(?:${d[a.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",d[a.COERCE],!0),v("COERCERTLFULL",d[a.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${d[a.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${d[a.LONETILDE]}${d[a.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${d[a.LONETILDE]}${d[a.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${d[a.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${d[a.LONECARET]}${d[a.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${d[a.LONECARET]}${d[a.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${d[a.GTLT]}\\s*(${d[a.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${d[a.GTLT]}\\s*(${d[a.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${d[a.GTLT]}\\s*(${d[a.LOOSEPLAIN]}|${d[a.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${d[a.XRANGEPLAIN]})\\s+-\\s+(${d[a.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${d[a.XRANGEPLAINLOOSE]})\\s+-\\s+(${d[a.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(En,En.exports)),En.exports}var Tn,Qr;function Fa(){if(Qr)return Tn;Qr=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Tn=n=>n?typeof n!="object"?e:n:t,Tn}var Nn,Kr;function Ga(){if(Kr)return Nn;Kr=1;const e=/^[0-9]+$/,t=(n,r)=>{const o=e.test(n),s=e.test(r);return o&&s&&(n=+n,r=+r),n===r?0:o&&!s?-1:s&&!o?1:n<r?-1:1};return Nn={compareIdentifiers:t,rcompareIdentifiers:(n,r)=>t(r,n)},Nn}var Cn,Jr;function ji(){if(Jr)return Cn;Jr=1;const e=Ui(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Mi(),{safeRe:r,t:o}=Va(),s=Fa(),{compareIdentifiers:l}=Ga();class c{constructor(a,u){if(u=s(u),a instanceof c){if(a.loose===!!u.loose&&a.includePrerelease===!!u.includePrerelease)return a;a=a.version}else if(typeof a!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof a}".`);if(a.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",a,u),this.options=u,this.loose=!!u.loose,this.includePrerelease=!!u.includePrerelease;const p=a.trim().match(u.loose?r[o.LOOSE]:r[o.FULL]);if(!p)throw new TypeError(`Invalid Version: ${a}`);if(this.raw=a,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const b=+f;if(b>=0&&b<n)return b}return f}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(a){if(e("SemVer.compare",this.version,this.options,a),!(a instanceof c)){if(typeof a=="string"&&a===this.version)return 0;a=new c(a,this.options)}return a.version===this.version?0:this.compareMain(a)||this.comparePre(a)}compareMain(a){return a instanceof c||(a=new c(a,this.options)),l(this.major,a.major)||l(this.minor,a.minor)||l(this.patch,a.patch)}comparePre(a){if(a instanceof c||(a=new c(a,this.options)),this.prerelease.length&&!a.prerelease.length)return-1;if(!this.prerelease.length&&a.prerelease.length)return 1;if(!this.prerelease.length&&!a.prerelease.length)return 0;let u=0;do{const p=this.prerelease[u],f=a.prerelease[u];if(e("prerelease compare",u,p,f),p===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(p===void 0)return-1;if(p!==f)return l(p,f)}while(++u)}compareBuild(a){a instanceof c||(a=new c(a,this.options));let u=0;do{const p=this.build[u],f=a.build[u];if(e("build compare",u,p,f),p===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(p===void 0)return-1;if(p!==f)return l(p,f)}while(++u)}inc(a,u,p){switch(a){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",u,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",u,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",u,p),this.inc("pre",u,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",u,p),this.inc("pre",u,p);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(p)?1:0;if(!u&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[f];else{let b=this.prerelease.length;for(;--b>=0;)typeof this.prerelease[b]=="number"&&(this.prerelease[b]++,b=-2);if(b===-1){if(u===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(u){let b=[u,f];p===!1&&(b=[u]),l(this.prerelease[0],u)===0?isNaN(this.prerelease[1])&&(this.prerelease=b):this.prerelease=b}break}default:throw new Error(`invalid increment argument: ${a}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Cn=c,Cn}var _n,ti;function za(){if(ti)return _n;ti=1;const e=ji();return _n=(t,n,r=!1)=>{if(t instanceof e)return t;try{return new e(t,n)}catch(o){if(!r)return null;throw o}},_n}var On,ei;function Ha(){if(ei)return On;ei=1;const e=za();return On=(t,n)=>{const r=e(t,n);return r?r.version:null},On}Ha();var In,ni;function Wa(){if(ni)return In;ni=1;const e=ji();return In=(t,n)=>new e(t,n).major,In}Wa();var ri={},ii;function Xa(){return ii||(ii=1,(function(e){(function(t){t.parser=function(T,y){return new r(T,y)},t.SAXParser=r,t.SAXStream=u,t.createStream=a,t.MAX_BUFFER_LENGTH=64*1024;var n=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];t.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"];function r(T,y){if(!(this instanceof r))return new r(T,y);var M=this;s(M),M.q=M.c="",M.bufferCheckPosition=t.MAX_BUFFER_LENGTH,M.opt=y||{},M.opt.lowercase=M.opt.lowercase||M.opt.lowercasetags,M.looseCase=M.opt.lowercase?"toLowerCase":"toUpperCase",M.tags=[],M.closed=M.closedRoot=M.sawRoot=!1,M.tag=M.error=null,M.strict=!!T,M.noscript=!!(T||M.opt.noscript),M.state=C.BEGIN,M.strictEntities=M.opt.strictEntities,M.ENTITIES=M.strictEntities?Object.create(t.XML_ENTITIES):Object.create(t.ENTITIES),M.attribList=[],M.opt.xmlns&&(M.ns=Object.create(E)),M.opt.unquotedAttributeValues===void 0&&(M.opt.unquotedAttributeValues=!T),M.trackPosition=M.opt.position!==!1,M.trackPosition&&(M.position=M.line=M.column=0),D(M,"onready")}Object.create||(Object.create=function(T){function y(){}y.prototype=T;var M=new y;return M}),Object.keys||(Object.keys=function(T){var y=[];for(var M in T)T.hasOwnProperty(M)&&y.push(M);return y});function o(T){for(var y=Math.max(t.MAX_BUFFER_LENGTH,10),M=0,P=0,Z=n.length;P<Z;P++){var ht=T[n[P]].length;if(ht>y)switch(n[P]){case"textNode":$(T);break;case"cdata":S(T,"oncdata",T.cdata),T.cdata="";break;case"script":S(T,"onscript",T.script),T.script="";break;default:F(T,"Max buffer length exceeded: "+n[P])}M=Math.max(M,ht)}var ft=t.MAX_BUFFER_LENGTH-M;T.bufferCheckPosition=ft+T.position}function s(T){for(var y=0,M=n.length;y<M;y++)T[n[y]]=""}function l(T){$(T),T.cdata!==""&&(S(T,"oncdata",T.cdata),T.cdata=""),T.script!==""&&(S(T,"onscript",T.script),T.script="")}r.prototype={end:function(){q(this)},write:Ft,resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){l(this)}};var c;try{c=require("stream").Stream}catch{c=function(){}}c||(c=function(){});var d=t.EVENTS.filter(function(T){return T!=="error"&&T!=="end"});function a(T,y){return new u(T,y)}function u(T,y){if(!(this instanceof u))return new u(T,y);c.apply(this),this._parser=new r(T,y),this.writable=!0,this.readable=!0;var M=this;this._parser.onend=function(){M.emit("end")},this._parser.onerror=function(P){M.emit("error",P),M._parser.error=null},this._decoder=null,d.forEach(function(P){Object.defineProperty(M,"on"+P,{get:function(){return M._parser["on"+P]},set:function(Z){if(!Z)return M.removeAllListeners(P),M._parser["on"+P]=Z,Z;M.on(P,Z)},enumerable:!0,configurable:!1})})}u.prototype=Object.create(c.prototype,{constructor:{value:u}}),u.prototype.write=function(T){if(typeof sn=="function"&&typeof sn.isBuffer=="function"&&sn.isBuffer(T)){if(!this._decoder){var y=ja.StringDecoder;this._decoder=new y("utf8")}T=this._decoder.write(T)}return this._parser.write(T.toString()),this.emit("data",T),!0},u.prototype.end=function(T){return T&&T.length&&this.write(T),this._parser.end(),!0},u.prototype.on=function(T,y){var M=this;return!M._parser["on"+T]&&d.indexOf(T)!==-1&&(M._parser["on"+T]=function(){var P=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);P.splice(0,0,T),M.emit.apply(M,P)}),c.prototype.on.call(M,T,y)};var p="[CDATA[",f="DOCTYPE",b="http://www.w3.org/XML/1998/namespace",v="http://www.w3.org/2000/xmlns/",E={xml:b,xmlns:v},N=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,_=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/,g=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,w=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040.\d-]/;function I(T){return T===" "||T===`
`||T==="\r"||T==="	"}function R(T){return T==='"'||T==="'"}function O(T){return T===">"||I(T)}function x(T,y){return T.test(y)}function A(T,y){return!x(T,y)}var C=0;t.STATE={BEGIN:C++,BEGIN_WHITESPACE:C++,TEXT:C++,TEXT_ENTITY:C++,OPEN_WAKA:C++,SGML_DECL:C++,SGML_DECL_QUOTED:C++,DOCTYPE:C++,DOCTYPE_QUOTED:C++,DOCTYPE_DTD:C++,DOCTYPE_DTD_QUOTED:C++,COMMENT_STARTING:C++,COMMENT:C++,COMMENT_ENDING:C++,COMMENT_ENDED:C++,CDATA:C++,CDATA_ENDING:C++,CDATA_ENDING_2:C++,PROC_INST:C++,PROC_INST_BODY:C++,PROC_INST_ENDING:C++,OPEN_TAG:C++,OPEN_TAG_SLASH:C++,ATTRIB:C++,ATTRIB_NAME:C++,ATTRIB_NAME_SAW_WHITE:C++,ATTRIB_VALUE:C++,ATTRIB_VALUE_QUOTED:C++,ATTRIB_VALUE_CLOSED:C++,ATTRIB_VALUE_UNQUOTED:C++,ATTRIB_VALUE_ENTITY_Q:C++,ATTRIB_VALUE_ENTITY_U:C++,CLOSE_TAG:C++,CLOSE_TAG_SAW_WHITE:C++,SCRIPT:C++,SCRIPT_ENDING:C++},t.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},t.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(t.ENTITIES).forEach(function(T){var y=t.ENTITIES[T],M=typeof y=="number"?String.fromCharCode(y):y;t.ENTITIES[T]=M});for(var B in t.STATE)t.STATE[t.STATE[B]]=B;C=t.STATE;function D(T,y,M){T[y]&&T[y](M)}function S(T,y,M){T.textNode&&$(T),D(T,y,M)}function $(T){T.textNode=G(T.opt,T.textNode),T.textNode&&D(T,"ontext",T.textNode),T.textNode=""}function G(T,y){return T.trim&&(y=y.trim()),T.normalize&&(y=y.replace(/\s+/g," ")),y}function F(T,y){return $(T),T.trackPosition&&(y+=`
Line: `+T.line+`
Column: `+T.column+`
Char: `+T.c),y=new Error(y),T.error=y,D(T,"onerror",y),T}function q(T){return T.sawRoot&&!T.closedRoot&&H(T,"Unclosed root tag"),T.state!==C.BEGIN&&T.state!==C.BEGIN_WHITESPACE&&T.state!==C.TEXT&&F(T,"Unexpected end"),$(T),T.c="",T.closed=!0,D(T,"onend"),r.call(T,T.strict,T.opt),T}function H(T,y){if(typeof T!="object"||!(T instanceof r))throw new Error("bad call to strictFail");T.strict&&F(T,y)}function nt(T){T.strict||(T.tagName=T.tagName[T.looseCase]());var y=T.tags[T.tags.length-1]||T,M=T.tag={name:T.tagName,attributes:{}};T.opt.xmlns&&(M.ns=y.ns),T.attribList.length=0,S(T,"onopentagstart",M)}function J(T,y){var M=T.indexOf(":"),P=M<0?["",T]:T.split(":"),Z=P[0],ht=P[1];return y&&T==="xmlns"&&(Z="xmlns",ht=""),{prefix:Z,local:ht}}function vt(T){if(T.strict||(T.attribName=T.attribName[T.looseCase]()),T.attribList.indexOf(T.attribName)!==-1||T.tag.attributes.hasOwnProperty(T.attribName)){T.attribName=T.attribValue="";return}if(T.opt.xmlns){var y=J(T.attribName,!0),M=y.prefix,P=y.local;if(M==="xmlns")if(P==="xml"&&T.attribValue!==b)H(T,"xml: prefix must be bound to "+b+`
Actual: `+T.attribValue);else if(P==="xmlns"&&T.attribValue!==v)H(T,"xmlns: prefix must be bound to "+v+`
Actual: `+T.attribValue);else{var Z=T.tag,ht=T.tags[T.tags.length-1]||T;Z.ns===ht.ns&&(Z.ns=Object.create(ht.ns)),Z.ns[P]=T.attribValue}T.attribList.push([T.attribName,T.attribValue])}else T.tag.attributes[T.attribName]=T.attribValue,S(T,"onattribute",{name:T.attribName,value:T.attribValue});T.attribName=T.attribValue=""}function Q(T,y){if(T.opt.xmlns){var M=T.tag,P=J(T.tagName);M.prefix=P.prefix,M.local=P.local,M.uri=M.ns[P.prefix]||"",M.prefix&&!M.uri&&(H(T,"Unbound namespace prefix: "+JSON.stringify(T.tagName)),M.uri=P.prefix);var Z=T.tags[T.tags.length-1]||T;M.ns&&Z.ns!==M.ns&&Object.keys(M.ns).forEach(function(pt){S(T,"onopennamespace",{prefix:pt,uri:M.ns[pt]})});for(var ht=0,ft=T.attribList.length;ht<ft;ht++){var Ot=T.attribList[ht],Nt=Ot[0],Wt=Ot[1],yt=J(Nt,!0),Gt=yt.prefix,Je=yt.local,Oe=Gt===""?"":M.ns[Gt]||"",fe={name:Nt,value:Wt,prefix:Gt,local:Je,uri:Oe};Gt&&Gt!=="xmlns"&&!Oe&&(H(T,"Unbound namespace prefix: "+JSON.stringify(Gt)),fe.uri=Gt),T.tag.attributes[Nt]=fe,S(T,"onattribute",fe)}T.attribList.length=0}T.tag.isSelfClosing=!!y,T.sawRoot=!0,T.tags.push(T.tag),S(T,"onopentag",T.tag),y||(!T.noscript&&T.tagName.toLowerCase()==="script"?T.state=C.SCRIPT:T.state=C.TEXT,T.tag=null,T.tagName=""),T.attribName=T.attribValue="",T.attribList.length=0}function rt(T){if(!T.tagName){H(T,"Weird empty close tag."),T.textNode+="</>",T.state=C.TEXT;return}if(T.script){if(T.tagName!=="script"){T.script+="</"+T.tagName+">",T.tagName="",T.state=C.SCRIPT;return}S(T,"onscript",T.script),T.script=""}var y=T.tags.length,M=T.tagName;T.strict||(M=M[T.looseCase]());for(var P=M;y--;){var Z=T.tags[y];if(Z.name!==P)H(T,"Unexpected close tag");else break}if(y<0){H(T,"Unmatched closing tag: "+T.tagName),T.textNode+="</"+T.tagName+">",T.state=C.TEXT;return}T.tagName=M;for(var ht=T.tags.length;ht-- >y;){var ft=T.tag=T.tags.pop();T.tagName=T.tag.name,S(T,"onclosetag",T.tagName);var Ot={};for(var Nt in ft.ns)Ot[Nt]=ft.ns[Nt];var Wt=T.tags[T.tags.length-1]||T;T.opt.xmlns&&ft.ns!==Wt.ns&&Object.keys(ft.ns).forEach(function(yt){var Gt=ft.ns[yt];S(T,"onclosenamespace",{prefix:yt,uri:Gt})})}y===0&&(T.closedRoot=!0),T.tagName=T.attribValue=T.attribName="",T.attribList.length=0,T.state=C.TEXT}function oe(T){var y=T.entity,M=y.toLowerCase(),P,Z="";return T.ENTITIES[y]?T.ENTITIES[y]:T.ENTITIES[M]?T.ENTITIES[M]:(y=M,y.charAt(0)==="#"&&(y.charAt(1)==="x"?(y=y.slice(2),P=parseInt(y,16),Z=P.toString(16)):(y=y.slice(1),P=parseInt(y,10),Z=P.toString(10))),y=y.replace(/^0+/,""),isNaN(P)||Z.toLowerCase()!==y?(H(T,"Invalid character entity"),"&"+T.entity+";"):String.fromCodePoint(P))}function Zt(T,y){y==="<"?(T.state=C.OPEN_WAKA,T.startTagPosition=T.position):I(y)||(H(T,"Non-whitespace before first tag."),T.textNode=y,T.state=C.TEXT)}function Bt(T,y){var M="";return y<T.length&&(M=T.charAt(y)),M}function Ft(T){var y=this;if(this.error)throw this.error;if(y.closed)return F(y,"Cannot write after close. Assign an onready handler.");if(T===null)return q(y);typeof T=="object"&&(T=T.toString());for(var M=0,P="";P=Bt(T,M++),y.c=P,!!P;)switch(y.trackPosition&&(y.position++,P===`
`?(y.line++,y.column=0):y.column++),y.state){case C.BEGIN:if(y.state=C.BEGIN_WHITESPACE,P==="\uFEFF")continue;Zt(y,P);continue;case C.BEGIN_WHITESPACE:Zt(y,P);continue;case C.TEXT:if(y.sawRoot&&!y.closedRoot){for(var Z=M-1;P&&P!=="<"&&P!=="&";)P=Bt(T,M++),P&&y.trackPosition&&(y.position++,P===`
`?(y.line++,y.column=0):y.column++);y.textNode+=T.substring(Z,M-1)}P==="<"&&!(y.sawRoot&&y.closedRoot&&!y.strict)?(y.state=C.OPEN_WAKA,y.startTagPosition=y.position):(!I(P)&&(!y.sawRoot||y.closedRoot)&&H(y,"Text data outside of root node."),P==="&"?y.state=C.TEXT_ENTITY:y.textNode+=P);continue;case C.SCRIPT:P==="<"?y.state=C.SCRIPT_ENDING:y.script+=P;continue;case C.SCRIPT_ENDING:P==="/"?y.state=C.CLOSE_TAG:(y.script+="<"+P,y.state=C.SCRIPT);continue;case C.OPEN_WAKA:if(P==="!")y.state=C.SGML_DECL,y.sgmlDecl="";else if(!I(P))if(x(N,P))y.state=C.OPEN_TAG,y.tagName=P;else if(P==="/")y.state=C.CLOSE_TAG,y.tagName="";else if(P==="?")y.state=C.PROC_INST,y.procInstName=y.procInstBody="";else{if(H(y,"Unencoded <"),y.startTagPosition+1<y.position){var ht=y.position-y.startTagPosition;P=new Array(ht).join(" ")+P}y.textNode+="<"+P,y.state=C.TEXT}continue;case C.SGML_DECL:if(y.sgmlDecl+P==="--"){y.state=C.COMMENT,y.comment="",y.sgmlDecl="";continue}y.doctype&&y.doctype!==!0&&y.sgmlDecl?(y.state=C.DOCTYPE_DTD,y.doctype+="<!"+y.sgmlDecl+P,y.sgmlDecl=""):(y.sgmlDecl+P).toUpperCase()===p?(S(y,"onopencdata"),y.state=C.CDATA,y.sgmlDecl="",y.cdata=""):(y.sgmlDecl+P).toUpperCase()===f?(y.state=C.DOCTYPE,(y.doctype||y.sawRoot)&&H(y,"Inappropriately located doctype declaration"),y.doctype="",y.sgmlDecl=""):P===">"?(S(y,"onsgmldeclaration",y.sgmlDecl),y.sgmlDecl="",y.state=C.TEXT):(R(P)&&(y.state=C.SGML_DECL_QUOTED),y.sgmlDecl+=P);continue;case C.SGML_DECL_QUOTED:P===y.q&&(y.state=C.SGML_DECL,y.q=""),y.sgmlDecl+=P;continue;case C.DOCTYPE:P===">"?(y.state=C.TEXT,S(y,"ondoctype",y.doctype),y.doctype=!0):(y.doctype+=P,P==="["?y.state=C.DOCTYPE_DTD:R(P)&&(y.state=C.DOCTYPE_QUOTED,y.q=P));continue;case C.DOCTYPE_QUOTED:y.doctype+=P,P===y.q&&(y.q="",y.state=C.DOCTYPE);continue;case C.DOCTYPE_DTD:P==="]"?(y.doctype+=P,y.state=C.DOCTYPE):P==="<"?(y.state=C.OPEN_WAKA,y.startTagPosition=y.position):R(P)?(y.doctype+=P,y.state=C.DOCTYPE_DTD_QUOTED,y.q=P):y.doctype+=P;continue;case C.DOCTYPE_DTD_QUOTED:y.doctype+=P,P===y.q&&(y.state=C.DOCTYPE_DTD,y.q="");continue;case C.COMMENT:P==="-"?y.state=C.COMMENT_ENDING:y.comment+=P;continue;case C.COMMENT_ENDING:P==="-"?(y.state=C.COMMENT_ENDED,y.comment=G(y.opt,y.comment),y.comment&&S(y,"oncomment",y.comment),y.comment=""):(y.comment+="-"+P,y.state=C.COMMENT);continue;case C.COMMENT_ENDED:P!==">"?(H(y,"Malformed comment"),y.comment+="--"+P,y.state=C.COMMENT):y.doctype&&y.doctype!==!0?y.state=C.DOCTYPE_DTD:y.state=C.TEXT;continue;case C.CDATA:P==="]"?y.state=C.CDATA_ENDING:y.cdata+=P;continue;case C.CDATA_ENDING:P==="]"?y.state=C.CDATA_ENDING_2:(y.cdata+="]"+P,y.state=C.CDATA);continue;case C.CDATA_ENDING_2:P===">"?(y.cdata&&S(y,"oncdata",y.cdata),S(y,"onclosecdata"),y.cdata="",y.state=C.TEXT):P==="]"?y.cdata+="]":(y.cdata+="]]"+P,y.state=C.CDATA);continue;case C.PROC_INST:P==="?"?y.state=C.PROC_INST_ENDING:I(P)?y.state=C.PROC_INST_BODY:y.procInstName+=P;continue;case C.PROC_INST_BODY:if(!y.procInstBody&&I(P))continue;P==="?"?y.state=C.PROC_INST_ENDING:y.procInstBody+=P;continue;case C.PROC_INST_ENDING:P===">"?(S(y,"onprocessinginstruction",{name:y.procInstName,body:y.procInstBody}),y.procInstName=y.procInstBody="",y.state=C.TEXT):(y.procInstBody+="?"+P,y.state=C.PROC_INST_BODY);continue;case C.OPEN_TAG:x(_,P)?y.tagName+=P:(nt(y),P===">"?Q(y):P==="/"?y.state=C.OPEN_TAG_SLASH:(I(P)||H(y,"Invalid character in tag name"),y.state=C.ATTRIB));continue;case C.OPEN_TAG_SLASH:P===">"?(Q(y,!0),rt(y)):(H(y,"Forward-slash in opening tag not followed by >"),y.state=C.ATTRIB);continue;case C.ATTRIB:if(I(P))continue;P===">"?Q(y):P==="/"?y.state=C.OPEN_TAG_SLASH:x(N,P)?(y.attribName=P,y.attribValue="",y.state=C.ATTRIB_NAME):H(y,"Invalid attribute name");continue;case C.ATTRIB_NAME:P==="="?y.state=C.ATTRIB_VALUE:P===">"?(H(y,"Attribute without value"),y.attribValue=y.attribName,vt(y),Q(y)):I(P)?y.state=C.ATTRIB_NAME_SAW_WHITE:x(_,P)?y.attribName+=P:H(y,"Invalid attribute name");continue;case C.ATTRIB_NAME_SAW_WHITE:if(P==="=")y.state=C.ATTRIB_VALUE;else{if(I(P))continue;H(y,"Attribute without value"),y.tag.attributes[y.attribName]="",y.attribValue="",S(y,"onattribute",{name:y.attribName,value:""}),y.attribName="",P===">"?Q(y):x(N,P)?(y.attribName=P,y.state=C.ATTRIB_NAME):(H(y,"Invalid attribute name"),y.state=C.ATTRIB)}continue;case C.ATTRIB_VALUE:if(I(P))continue;R(P)?(y.q=P,y.state=C.ATTRIB_VALUE_QUOTED):(y.opt.unquotedAttributeValues||F(y,"Unquoted attribute value"),y.state=C.ATTRIB_VALUE_UNQUOTED,y.attribValue=P);continue;case C.ATTRIB_VALUE_QUOTED:if(P!==y.q){P==="&"?y.state=C.ATTRIB_VALUE_ENTITY_Q:y.attribValue+=P;continue}vt(y),y.q="",y.state=C.ATTRIB_VALUE_CLOSED;continue;case C.ATTRIB_VALUE_CLOSED:I(P)?y.state=C.ATTRIB:P===">"?Q(y):P==="/"?y.state=C.OPEN_TAG_SLASH:x(N,P)?(H(y,"No whitespace between attributes"),y.attribName=P,y.attribValue="",y.state=C.ATTRIB_NAME):H(y,"Invalid attribute name");continue;case C.ATTRIB_VALUE_UNQUOTED:if(!O(P)){P==="&"?y.state=C.ATTRIB_VALUE_ENTITY_U:y.attribValue+=P;continue}vt(y),P===">"?Q(y):y.state=C.ATTRIB;continue;case C.CLOSE_TAG:if(y.tagName)P===">"?rt(y):x(_,P)?y.tagName+=P:y.script?(y.script+="</"+y.tagName,y.tagName="",y.state=C.SCRIPT):(I(P)||H(y,"Invalid tagname in closing tag"),y.state=C.CLOSE_TAG_SAW_WHITE);else{if(I(P))continue;A(N,P)?y.script?(y.script+="</"+P,y.state=C.SCRIPT):H(y,"Invalid tagname in closing tag."):y.tagName=P}continue;case C.CLOSE_TAG_SAW_WHITE:if(I(P))continue;P===">"?rt(y):H(y,"Invalid characters in closing tag");continue;case C.TEXT_ENTITY:case C.ATTRIB_VALUE_ENTITY_Q:case C.ATTRIB_VALUE_ENTITY_U:var ft,Ot;switch(y.state){case C.TEXT_ENTITY:ft=C.TEXT,Ot="textNode";break;case C.ATTRIB_VALUE_ENTITY_Q:ft=C.ATTRIB_VALUE_QUOTED,Ot="attribValue";break;case C.ATTRIB_VALUE_ENTITY_U:ft=C.ATTRIB_VALUE_UNQUOTED,Ot="attribValue";break}if(P===";"){var Nt=oe(y);y.opt.unparsedEntities&&!Object.values(t.XML_ENTITIES).includes(Nt)?(y.entity="",y.state=ft,y.write(Nt)):(y[Ot]+=Nt,y.entity="",y.state=ft)}else x(y.entity.length?w:g,P)?y.entity+=P:(H(y,"Invalid character in entity name"),y[Ot]+="&"+y.entity+P,y.entity="",y.state=ft);continue;default:throw new Error(y,"Unknown state: "+y.state)}return y.position>=y.bufferCheckPosition&&o(y),y}String.fromCodePoint||(function(){var T=String.fromCharCode,y=Math.floor,M=function(){var P=16384,Z=[],ht,ft,Ot=-1,Nt=arguments.length;if(!Nt)return"";for(var Wt="";++Ot<Nt;){var yt=Number(arguments[Ot]);if(!isFinite(yt)||yt<0||yt>1114111||y(yt)!==yt)throw RangeError("Invalid code point: "+yt);yt<=65535?Z.push(yt):(yt-=65536,ht=(yt>>10)+55296,ft=yt%1024+56320,Z.push(ht,ft)),(Ot+1===Nt||Z.length>P)&&(Wt+=T.apply(null,Z),Z.length=0)}return Wt};Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:M,configurable:!0,writable:!0}):String.fromCodePoint=M})()})(e)})(ri)),ri}Xa();const Sn=["B","KB","MB","GB","TB","PB"],An=["B","KiB","MiB","GiB","TiB","PiB"];function qa(e,t=!1,n=!1,r=!1){n=n&&!r,typeof e=="string"&&(e=Number(e));let o=e>0?Math.floor(Math.log(e)/Math.log(r?1e3:1024)):0;o=Math.min((n?An.length:Sn.length)-1,o);const s=n?An[o]:Sn[o];let l=(e/Math.pow(r?1e3:1024,o)).toFixed(1);return t===!0&&o===0?(l!=="0.0"?"< 1 ":"0 ")+(n?An[1]:Sn[1]):(o<2?l=parseFloat(l).toFixed(0):l=parseFloat(l).toLocaleString(li()),l+" "+s)}function oi(e){return e instanceof Date?e.toISOString():String(e)}function Ya(e,t,n){t=t??[s=>s],n=n??[];const r=t.map((s,l)=>(n[l]??"asc")==="asc"?1:-1),o=Intl.Collator([co(),li()],{numeric:!0,usage:"sort"});return[...e].sort((s,l)=>{for(const[c,d]of t.entries()){const a=o.compare(oi(d(s)),oi(d(l)));if(a!==0)return a*r[c]}return 0})}function Za(e,t={}){const n={sortingMode:"basename",sortingOrder:"asc",...t},r=l=>l.lastIndexOf(".")>0?l.slice(0,l.lastIndexOf(".")):l,o=[...n.sortFavoritesFirst?[l=>l.attributes?.favorite!==1]:[],...n.sortFoldersFirst?[l=>l.type!=="folder"]:[],...n.sortingMode!=="basename"?[l=>l[n.sortingMode]??l.attributes[n.sortingMode]]:[],l=>r(l.displayname||l.attributes?.displayname||l.basename||""),l=>l.basename],s=[...n.sortFavoritesFirst?["asc"]:[],...n.sortFoldersFirst?["asc"]:[],...n.sortingMode==="mtime"?[n.sortingOrder==="asc"?"desc":"asc"]:[],...n.sortingMode!=="mtime"&&n.sortingMode!=="basename"?[n.sortingOrder]:[],n.sortingOrder,n.sortingOrder];return Ya(e,o,s)}const Qa=new ho({concurrency:5});function Ka(e){const{resolve:t,promise:n}=Promise.withResolvers();return Qa.add(()=>{const r=new Image;return r.onerror=()=>t(!1),r.onload=()=>t(!0),r.src=e,n}),n}function Ja(e,t={}){t={size:32,cropPreview:!1,mimeFallback:!0,...t};try{const n=e.attributes?.previewUrl||jn("/core/preview?fileId={fileid}",{fileid:e.fileid});let r;try{r=new URL(n)}catch{r=new URL(n,window.location.origin)}return r.searchParams.set("x",`${t.size}`),r.searchParams.set("y",`${t.size}`),r.searchParams.set("mimeFallback",`${t.mimeFallback}`),r.searchParams.set("a",t.cropPreview===!0?"0":"1"),r.searchParams.set("c",`${e.attributes.etag}`),r}catch{return null}}function tl(e,t){const n=ct(null),r=ct(!1);return fo(()=>{r.value=!1,n.value=Ja(Pe(e),Pe(t||{})),n.value&&Pe(e).type===te.File&&Ka(n.value.href).then(o=>{r.value=o})}),{previewURL:n,previewLoaded:r}}const kt=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n};var We;(function(e){e[e.User=0]="User",e[e.Group=1]="Group",e[e.Link=3]="Link",e[e.Email=4]="Email",e[e.Remote=6]="Remote",e[e.Team=7]="Team",e[e.Guest=8]="Guest",e[e.RemoteGroup=9]="RemoteGroup",e[e.Room=10]="Room",e[e.Deck=12]="Deck",e[e.FederatedGroup=14]="FederatedGroup",e[e.ScienceMesh=15]="ScienceMesh"})(We||(We={}));function Vi(e,t,n){const r=`#initial-state-${e}-${t}`;if(window._nc_initial_state?.has(r))return window._nc_initial_state.get(r);window._nc_initial_state||(window._nc_initial_state=new Map);const o=document.querySelector(r);if(o===null)return n;try{const s=JSON.parse(atob(o.value));return window._nc_initial_state.set(r,s),s}catch(s){return console.error("[@nextcloud/initial-state] Could not parse initial state",{key:t,app:e,error:s}),n}}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const si=Pe,el={name:"FileIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},nl=["aria-hidden","aria-label"],rl=["fill","width","height"],il={d:"M13,9V3.5L18.5,9M6,2C4.89,2 4,2.89 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6Z"},ol={key:0};function sl(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon file-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",il,[n.title?(V(),z("title",ol,gt(n.title),1)):bt("",!0)])],8,rl))],16,nl)}const Un=kt(el,[["render",sl]]),al={name:"MenuDownIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ll=["aria-hidden","aria-label"],ul=["fill","width","height"],cl={d:"M7,10L12,15L17,10H7Z"},hl={key:0};function fl(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-down-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",cl,[n.title?(V(),z("title",hl,gt(n.title),1)):bt("",!0)])],8,ul))],16,ll)}const Rn=kt(al,[["render",fl]]),pl={name:"MenuUpIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},dl=["aria-hidden","aria-label"],gl=["fill","width","height"],ml={d:"M7,15L12,10L17,15H7Z"},vl={key:0};function yl(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon menu-up-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",ml,[n.title?(V(),z("title",vl,gt(n.title),1)):bt("",!0)])],8,gl))],16,dl)}const Ln=kt(pl,[["render",yl]]),bl={name:"FolderIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},wl=["aria-hidden","aria-label"],El=["fill","width","height"],Tl={d:"M10,4H4C2.89,4 2,4.89 2,6V18A2,2 0 0,0 4,20H20A2,2 0 0,0 22,18V8C22,6.89 21.1,6 20,6H12L10,4Z"},Nl={key:0};function Cl(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon folder-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",Tl,[n.title?(V(),z("title",Nl,gt(n.title),1)):bt("",!0)])],8,El))],16,wl)}const Fi=kt(bl,[["render",Cl]]),Gi={"file-picker__file-icon":"_file-picker__file-icon_3v9zx_9","file-picker__file-icon--primary":"_file-picker__file-icon--primary_3v9zx_21","file-picker__file-icon-overlay":"_file-picker__file-icon-overlay_3v9zx_25"},_l=ee({__name:"FilePreview",props:{node:{},cropImagePreviews:{type:Boolean}},setup(e){const t=e,n=ct(Gi),{previewURL:r,previewLoaded:o}=tl(ke(t,"node"),K(()=>({cropPreview:t.cropImagePreviews}))),s=K(()=>t.node.type===te.File),l=K(()=>{if(t.node.type!==te.Folder)return null;if(t.node.attributes?.["is-encrypted"]===1)return Qo;if(t.node.attributes?.["is-tag"])return ts;const c=Object.values(t.node.attributes?.["share-types"]||{}).flat();if(c.some(d=>d===We.Link||d===We.Email))return Zo;if(c.length>0)return yr;switch(t.node.attributes?.["mount-type"]){case"external":case"external-session":return Ko;case"group":return Yo;case"shared":return yr}return null});return(c,d)=>(V(),z("div",{style:No(W(o)?{backgroundImage:`url(${W(r)})`}:void 0),class:ce(n.value["file-picker__file-icon"])},[W(o)?bt("",!0):(V(),z(qt,{key:0},[s.value?(V(),dt(Un,{key:0,size:32})):(V(),z(qt,{key:1},[l.value?(V(),dt(W(fi),{key:0,class:ce(n.value["file-picker__file-icon-overlay"]),inline:"",path:l.value,size:16},null,8,["class","path"])):bt("",!0),ut(Fi,{class:ce(n.value["file-picker__file-icon--primary"]),size:32},null,8,["class"])],64))],64))],6))}}),Ol=["tabindex","aria-selected","data-filename"],Il={class:"row-name"},Sl={class:"file-picker__name-container","data-testid":"row-name"},Al=["title","textContent"],Rl=["textContent"],Ll={class:"row-size"},xl={class:"row-modified"},Pl=ee({__name:"FileListRow",props:{allowPickDirectory:{type:Boolean},selected:{type:Boolean},showCheckbox:{type:Boolean},canPick:{type:Boolean},node:{},cropImagePreviews:{type:Boolean}},emits:["update:selected","enterDirectory"],setup(e,{emit:t}){const n=e,r=t,o=K(()=>n.node.mtime??0),s=K(()=>n.node.attributes?.displayName||n.node.basename.slice(0,n.node.extension?-n.node.extension.length:void 0)),l=K(()=>n.node.extension),c=K(()=>n.node.type===te.Folder),d=K(()=>n.canPick&&(n.allowPickDirectory||!c.value)),a=K(()=>(n.node.permissions&Dt.READ)===Dt.READ);function u(){d.value&&r("update:selected",!n.selected)}function p(){c.value?a.value&&r("enterDirectory",n.node):u()}function f(b){b.key==="Enter"&&p()}return(b,v)=>(V(),z("tr",Vt({tabindex:e.showCheckbox&&!c.value?void 0:0,"aria-selected":d.value?e.selected:void 0,class:["file-picker__row",[{"file-picker__row--selected":e.selected&&!e.showCheckbox,"file-picker__row--not-navigatable":c.value&&!a.value,"file-picker__row--not-pickable":!d.value}]],"data-filename":e.node.basename,"data-testid":"file-list-row"},To({click:p,...!e.showCheckbox||c.value?{keydown:f}:{}},!0)),[e.showCheckbox?(V(),z("td",{key:0,class:"row-checkbox",onClick:xe(()=>{},["stop"])},[ut(W(hi),{"aria-label":W(Y)("Select the row for {nodename}",{nodename:s.value}),disabled:!d.value,"data-testid":"row-checkbox","model-value":e.selected,"onUpdate:modelValue":u},null,8,["aria-label","disabled","model-value"])])):bt("",!0),X("td",Il,[X("div",Sl,[ut(_l,{node:e.node,"crop-image-previews":e.cropImagePreviews},null,8,["node","crop-image-previews"]),X("div",{class:"file-picker__file-name",title:s.value,textContent:gt(s.value)},null,8,Al),X("div",{class:"file-picker__file-extension",textContent:gt(l.value)},null,8,Rl)])]),X("td",Ll,gt(W(qa)(e.node.size||0)),1),X("td",xl,[ut(W(Ho),{timestamp:o.value,"ignore-seconds":""},null,8,["timestamp"])])],16,Ol))}}),$l=kt(Pl,[["__scopeId","data-v-a5daea8d"]]),kl={"aria-hidden":"true",class:"file-picker__row loading-row"},Dl={key:0,class:"row-checkbox"},Bl={class:"row-name"},Ul={class:"row-wrapper"},Ml=ee({__name:"LoadingTableRow",props:{showCheckbox:{type:Boolean}},setup(e){return(t,n)=>(V(),z("tr",kl,[e.showCheckbox?(V(),z("td",Dl,[...n[0]||(n[0]=[X("span",null,null,-1)])])):bt("",!0),X("td",Bl,[X("div",Ul,[X("span",{class:ce(W(Gi)["file-picker__file-icon"])},null,2),n[1]||(n[1]=X("span",null,null,-1))])]),n[2]||(n[2]=X("td",{class:"row-size"},[X("span")],-1)),n[3]||(n[3]=X("td",{class:"row-modified"},[X("span")],-1))]))}}),jl=kt(Ml,[["__scopeId","data-v-1f96131b"]]);function zi(){const e=Vi("files","config",null),t=ct(e?.show_hidden??!0),n=ct(e?.sort_favorites_first??!0),r=ct(e?.crop_image_previews??!0);return Ne(async()=>{if(di())Ee.debug("Skip loading files settings - currently on public share");else try{const{data:o}=await ci.get(jn("/apps/files/api/v1/configs"));t.value=o?.data?.show_hidden??!1,n.value=o?.data?.sort_favorites_first??!0,r.value=o?.data?.crop_image_previews??!0}catch(o){Ee.error("Could not load files settings",o),Vn(Y("Could not load files settings"))}}),{showHiddenFiles:t,sortFavoritesFirst:n,cropImagePreviews:r}}function Vl(e){const t=a=>a==="asc"?"ascending":a==="desc"?"descending":"none",n=Vi("files","viewConfigs",null),r=ct({sortBy:n?.files?.sorting_mode??"basename",order:t(n?.files?.sorting_direction??"asc")}),o=ct({sortBy:n?.recent?.sorting_mode??"basename",order:t(n?.recent?.sorting_direction??"asc")}),s=ct({sortBy:n?.favorites?.sorting_mode??"basename",order:t(n?.favorites?.sorting_direction??"asc")});Ne(async()=>{if(di())Ee.debug("Skip loading files views - currently on public share");else try{const{data:a}=await ci.get(jn("/apps/files/api/v1/views"));r.value={sortBy:a?.data?.files?.sorting_mode??"basename",order:t(a?.data?.files?.sorting_direction)},s.value={sortBy:a?.data?.favorites?.sorting_mode??"basename",order:t(a?.data?.favorites?.sorting_direction)},o.value={sortBy:a?.data?.recent?.sorting_mode??"basename",order:t(a?.data?.recent?.sorting_direction)}}catch(a){Ee.error("Could not load files views",a),Vn(Y("Could not load files views"))}});const l=K(()=>si(e||"files")==="files"?r.value:si(e)==="recent"?o.value:s.value),c=K(()=>l.value.sortBy),d=K(()=>l.value.order);return{filesViewConfig:r,favoritesViewConfig:s,recentViewConfig:o,currentConfig:l,sortBy:c,order:d}}const Fl={key:0,class:"row-checkbox"},Gl={class:"hidden-visually"},zl=["aria-sort"],Hl={class:"header-wrapper"},Wl={key:2,style:{width:"44px"}},Xl=["aria-sort"],ql={key:2,style:{width:"44px"}},Yl=["aria-sort"],Zl={key:2,style:{width:"44px"}},Ql=ee({__name:"FileList",props:vo({currentView:{},multiselect:{type:Boolean},allowPickDirectory:{type:Boolean},loading:{type:Boolean},files:{},canPick:{type:Function}},{path:{required:!0},pathModifiers:{},selectedFiles:{required:!0},selectedFilesModifiers:{}}),emits:["update:path","update:selectedFiles"],setup(e){const t=mr(e,"path"),n=mr(e,"selectedFiles"),r=e,o=ct(),{currentConfig:s}=Vl(r.currentView),l=K(()=>o.value??s.value),c=K(()=>l.value.sortBy==="basename"?l.value.order==="none"?void 0:l.value.order:void 0),d=K(()=>l.value.sortBy==="size"?l.value.order==="none"?void 0:l.value.order:void 0),a=K(()=>l.value.sortBy==="mtime"?l.value.order==="none"?void 0:l.value.order:void 0);function u(R){l.value.sortBy===R?l.value.order==="ascending"?o.value={sortBy:l.value.sortBy,order:"descending"}:o.value={sortBy:l.value.sortBy,order:"ascending"}:o.value={sortBy:R,order:"ascending"}}const{sortFavoritesFirst:p,cropImagePreviews:f}=zi(),b=K(()=>Za(r.files,{sortFoldersFirst:!0,sortFavoritesFirst:p.value,sortingOrder:l.value.order==="descending"?"desc":"asc",sortingMode:l.value.sortBy})),v=K(()=>r.files.filter(R=>r.allowPickDirectory||R.type!==te.Folder)),E=K(()=>!r.loading&&n.value.length>0&&n.value.length>=v.value.length);function N(){n.value.length<v.value.length?n.value=[...v.value]:n.value=[]}function _(R){n.value.includes(R)?n.value=n.value.filter(O=>O.path!==R.path):r.multiselect?n.value=[...n.value,R]:n.value=[R]}function g(R){t.value=R.path}const w=ct(4),I=ct();{const R=()=>yo(()=>{const O=I.value?.parentElement?.children||[];let x=I.value?.parentElement?.clientHeight||450;for(let A=0;A<O.length;A++)I.value?.isSameNode(O[A])||(x-=O[A].clientHeight);w.value=Math.max(1,Math.floor((x-50)/50))});Ne(()=>{window.addEventListener("resize",R),R()}),bo(()=>{window.removeEventListener("resize",R)})}return(R,O)=>(V(),z("div",{ref_key:"fileContainer",ref:I,class:"file-picker__files"},[X("table",null,[X("thead",null,[X("tr",null,[e.multiselect?(V(),z("th",Fl,[X("span",Gl,gt(W(Y)("Select entry")),1),e.multiselect?(V(),dt(W(hi),{key:0,"aria-label":W(Y)("Select all entries"),"data-testid":"select-all-checkbox","model-value":E.value,"onUpdate:modelValue":N},null,8,["aria-label","model-value"])):bt("",!0)])):bt("",!0),X("th",{"aria-sort":c.value,class:"row-name"},[X("div",Hl,[O[3]||(O[3]=X("span",{class:"file-picker__header-preview"},null,-1)),ut(W(ye),{"data-test":"file-picker_sort-name",variant:"tertiary",wide:"",onClick:O[0]||(O[0]=x=>u("basename"))},{icon:st(()=>[c.value==="ascending"?(V(),dt(Ln,{key:0,size:20})):c.value==="descending"?(V(),dt(Rn,{key:1,size:20})):(V(),z("span",Wl))]),default:st(()=>[be(" "+gt(W(Y)("Name")),1)]),_:1})])],8,zl),X("th",{"aria-sort":d.value,class:"row-size"},[ut(W(ye),{variant:"tertiary",wide:"",onClick:O[1]||(O[1]=x=>u("size"))},{icon:st(()=>[d.value==="ascending"?(V(),dt(Ln,{key:0,size:20})):d.value==="descending"?(V(),dt(Rn,{key:1,size:20})):(V(),z("span",ql))]),default:st(()=>[be(" "+gt(W(Y)("Size")),1)]),_:1})],8,Xl),X("th",{"aria-sort":a.value,class:"row-modified"},[ut(W(ye),{variant:"tertiary",wide:"",onClick:O[2]||(O[2]=x=>u("mtime"))},{icon:st(()=>[a.value==="ascending"?(V(),dt(Ln,{key:0,size:20})):a.value==="descending"?(V(),dt(Rn,{key:1,size:20})):(V(),z("span",Zl))]),default:st(()=>[be(" "+gt(W(Y)("Modified")),1)]),_:1})],8,Yl)])]),X("tbody",null,[e.loading?(V(!0),z(qt,{key:0},De(w.value,x=>(V(),dt(jl,{key:x,"show-checkbox":e.multiselect},null,8,["show-checkbox"]))),128)):(V(!0),z(qt,{key:1},De(b.value,x=>(V(),dt($l,{key:x.fileid||x.path,"allow-pick-directory":e.allowPickDirectory,"show-checkbox":e.multiselect,"can-pick":(e.multiselect||n.value.length===0||n.value.includes(x))&&(e.canPick===void 0||e.canPick(x)),selected:n.value.includes(x),node:x,"crop-image-previews":W(f),"onUpdate:selected":A=>_(x),onEnterDirectory:g},null,8,["allow-pick-directory","show-checkbox","can-pick","selected","node","crop-image-previews","onUpdate:selected"]))),128))])])],512))}}),Kl=kt(Ql,[["__scopeId","data-v-38620705"]]),Jl={name:"HomeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},tu=["aria-hidden","aria-label"],eu=["fill","width","height"],nu={d:"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z"},ru={key:0};function iu(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon home-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",nu,[n.title?(V(),z("title",ru,gt(n.title),1)):bt("",!0)])],8,eu))],16,tu)}const ou=kt(Jl,[["render",iu]]),su={name:"PlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},au=["aria-hidden","aria-label"],lu=["fill","width","height"],uu={d:"M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"},cu={key:0};function hu(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon plus-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",uu,[n.title?(V(),z("title",cu,gt(n.title),1)):bt("",!0)])],8,lu))],16,au)}const fu=kt(su,[["render",hu]]),pu=ee({__name:"FilePickerBreadcrumbs",props:{path:{},showMenu:{type:Boolean}},emits:["update:path","create-node"],setup(e,{emit:t}){const n=e,r=t,o=ct(!1),s=ct(""),l=go("nameInput");function c(){const u=s.value.trim(),p=l.value?.$el?.querySelector("input");let f="";return u.length===0?f=Y("Folder name cannot be empty."):u.includes("/")?f=Y('"/" is not allowed inside a folder name.'):["..","."].includes(u)?f=Y('"{name}" is an invalid folder name.',{name:u}):window.OC.config?.blacklist_files_regex&&u.match(window.OC.config?.blacklist_files_regex)&&(f=Y('"{name}" is not an allowed folder name',{name:u})),p&&p.setCustomValidity(f),f===""}function d(){const u=s.value.trim();c()&&(o.value=!1,r("create-node",u),s.value="")}const a=K(()=>n.path.split("/").filter(u=>u!=="").map((u,p,f)=>({name:u,path:"/"+f.slice(0,p+1).join("/")})));return(u,p)=>(V(),dt(W(Go),{class:"file-picker__breadcrumbs"},ai({default:st(()=>[ut(W(Ue),{name:W(Y)("All files"),title:W(Y)("Home"),onClick:p[0]||(p[0]=f=>r("update:path","/"))},{icon:st(()=>[ut(ou,{size:20})]),_:1},8,["name","title"]),(V(!0),z(qt,null,De(a.value,f=>(V(),dt(W(Ue),{key:f.path,name:f.name,title:f.path,onClick:b=>r("update:path",f.path)},null,8,["name","title","onClick"]))),128))]),_:2},[e.showMenu?{name:"actions",fn:st(()=>[ut(W(Mn),{open:o.value,"onUpdate:open":p[2]||(p[2]=f=>o.value=f),"aria-label":W(Y)("Create directory"),"force-menu":!0,"force-name":!0,"menu-name":W(Y)("New"),variant:"secondary",onClose:p[3]||(p[3]=f=>s.value="")},{icon:st(()=>[ut(fu,{size:20})]),default:st(()=>[ut(W(mo),{ref_key:"nameInput",ref:l,modelValue:s.value,"onUpdate:modelValue":[p[1]||(p[1]=f=>s.value=f),c],label:W(Y)("New folder"),placeholder:W(Y)("New folder name"),onSubmit:d},{icon:st(()=>[ut(Fi,{size:20})]),_:1},8,["modelValue","label","placeholder"])]),_:1},8,["open","aria-label","menu-name"])]),key:"0"}:void 0]),1024))}}),du=kt(pu,[["__scopeId","data-v-4e6fd4e4"]]),gu={name:"CloseIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},mu=["aria-hidden","aria-label"],vu=["fill","width","height"],yu={d:"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z"},bu={key:0};function wu(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon close-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",yu,[n.title?(V(),z("title",bu,gt(n.title),1)):bt("",!0)])],8,vu))],16,mu)}const Eu=kt(gu,[["render",wu]]),Tu={name:"MagnifyIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},Nu=["aria-hidden","aria-label"],Cu=["fill","width","height"],_u={d:"M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z"},Ou={key:0};function Iu(e,t,n,r,o,s){return V(),z("span",Vt(e.$attrs,{"aria-hidden":n.title?null:"true","aria-label":n.title,class:"material-design-icon magnify-icon",role:"img",onClick:t[0]||(t[0]=l=>e.$emit("click",l))}),[(V(),z("svg",{fill:n.fillColor,class:"material-design-icon__svg",width:n.size,height:n.size,viewBox:"0 0 24 24"},[X("path",_u,[n.title?(V(),z("title",Ou,gt(n.title),1)):bt("",!0)])],8,Cu))],16,Nu)}const Su=kt(Tu,[["render",Iu]]);function Au(e){const t=[{id:"files",label:Y("All files"),icon:qo},{id:"recent",label:Y("Recent"),icon:Xo},{id:"favorites",label:Y("Favorites"),icon:Jo}],n=e.value?t.filter(({id:r})=>r==="files"):t;return{allViews:t,availableViews:n}}const Ru={key:0,class:"file-picker__side"},Lu=ee({__name:"FilePickerNavigation",props:{currentView:{},filterString:{},isCollapsed:{type:Boolean},disabledNavigation:{type:Boolean}},emits:["update:currentView","update:filterString"],setup(e,{emit:t}){const n=e,r=t,{availableViews:o}=Au(ct(qe()===null)),s=K(()=>o.filter(c=>c.id===n.currentView)[0]??o[0]),l=c=>r("update:filterString",c);return(c,d)=>(V(),z(qt,null,[ut(W(wo),{class:"file-picker__filter-input",label:W(Y)("Filter file list"),"show-trailing-button":!!e.filterString,"model-value":e.filterString,"onUpdate:modelValue":l,onTrailingButtonClick:d[0]||(d[0]=a=>l(""))},{"trailing-button-icon":st(()=>[ut(Eu,{size:16})]),default:st(()=>[ut(Su,{size:16})]),_:1},8,["label","show-trailing-button","model-value"]),W(o).length>1&&!e.disabledNavigation?(V(),z(qt,{key:0},[e.isCollapsed?(V(),dt(W(Eo),{key:1,"aria-label":W(Y)("Current view selector"),clearable:!1,searchable:!1,options:W(o),"model-value":s.value,"onUpdate:modelValue":d[1]||(d[1]=a=>r("update:currentView",a.id))},null,8,["aria-label","options","model-value"])):(V(),z("ul",Ru,[(V(!0),z(qt,null,De(W(o),a=>(V(),z("li",{key:a.id},[ut(W(ye),{variant:e.currentView===a.id?"primary":"tertiary",wide:!0,onClick:u=>c.$emit("update:currentView",a.id)},{icon:st(()=>[ut(W(fi),{path:a.icon,size:20},null,8,["path"])]),default:st(()=>[be(" "+gt(a.label),1)]),_:2},1032,["variant","onClick"])]))),128))]))],64)):bt("",!0)],64))}}),xu=kt(Lu,[["__scopeId","data-v-86223490"]]);function Pu(e){const t=new AbortController,n=Math.round(Date.now()/1e3)-3600*24*14;return new zt(async(r,o,s)=>{s(()=>t.abort());try{const{data:l}=await e.search("/",{signal:t.signal,details:!0,data:La(n)}),c=l.results.map(d=>Ke(d));r(c)}catch(l){o(l)}})}function $u(e,t){const n=new AbortController;return new zt(async(r,o,s)=>{s(()=>n.abort());try{const l=(await e.getDirectoryContents(Be(_e,t),{signal:n.signal,details:!0,includeSelf:!0,data:Di()})).data.map(c=>Ke(c));r({contents:l.filter(({path:c})=>c!==t),folder:l.find(({path:c})=>c===t)})}catch(l){o(l)}})}async function ku(e,t){const{data:n}=await e.stat(Be(_e,t),{details:!0,data:Di()});return Ke(n)}function Du(e,t){const n=$a(),r=xn([]),o=xn(null),s=ct(!0),l=ct(null);async function c(a){const u=Be(t.value,a);await n.createDirectory(Be(_e,u));const p=await ku(n,u);return r.value=[...r.value,p],p}async function d(){l.value&&l.value.cancel(),s.value=!0,e.value==="favorites"?l.value=ka(n,t.value):e.value==="recent"?l.value=Pu(n):l.value=$u(n,t.value);const a=await l.value;if(a)"folder"in a?(o.value=a.folder,r.value=a.contents):(o.value=null,r.value=a);else return;l.value=null,s.value=!1}return ui([e,t],()=>d()),Ne(()=>d()),{isLoading:s,files:r,folder:o,loadFiles:d,createDirectory:c}}function Bu(e){const t=K(()=>e.value.map(n=>n.split("/")));return{isSupportedMimeType:n=>{const r=n.split("/");return t.value.some(([o,s])=>(r[0]===o||o==="*")&&(r[1]===s||s==="*"))}}}const Uu={class:"file-picker__main"},Mu={key:1,class:"file-picker__view"},ju=ee({__name:"FilePicker",props:{buttons:{},name:{},allowPickDirectory:{type:Boolean,default:!1},disabledNavigation:{type:Boolean,default:!1},filterFn:{type:Function,default:void 0},canPickFn:{type:Function,default:void 0},mimetypeFilter:{default:()=>[]},multiselect:{type:Boolean,default:!1},path:{default:void 0}},emits:["close"],setup(e,{emit:t}){const n=e,r=t,o=ct(!0),s=ct("files"),l=ct(window?.sessionStorage.getItem("NC.FilePicker.LastPath")||"/"),c=ct(""),d=K({get:()=>s.value==="files"?c.value||n.path||l.value:"/",set:B=>{c.value=B}}),a=xn([]),{files:u,folder:p,isLoading:f,loadFiles:b,createDirectory:v}=Du(s,d);ui([c],()=>{n.path===void 0&&c.value&&window.sessionStorage.setItem("NC.FilePicker.LastPath",c.value),a.value=[]});let E=!1;const N=K(()=>{const B=a.value.length===0&&n.allowPickDirectory&&p.value?[p.value]:a.value;return(typeof n.buttons=="function"?n.buttons(B,d.value,s.value):n.buttons).map(D=>({...D,disabled:D.disabled||f.value,callback:()=>{E=!0,_(D.callback,B)}}))});async function _(B,D){await B(D),r("close",D),E=!1}const g=K(()=>s.value==="favorites"?Y("Favorites"):s.value==="recent"?Y("Recent"):""),w=ct(""),{isSupportedMimeType:I}=Bu(ke(n,"mimetypeFilter"));Ne(()=>b());const{showHiddenFiles:R}=zi(),O=K(()=>{let B=u.value;return R.value||(B=B.filter(D=>!D.basename.startsWith("."))),n.mimetypeFilter.length>0&&(B=B.filter(D=>D.type==="folder"||D.mime&&I(D.mime))),w.value&&(B=B.filter(D=>D.basename.toLowerCase().includes(w.value.toLowerCase()))),n.filterFn&&(B=B.filter(D=>n.filterFn(D))),B}),x=K(()=>s.value==="files"?Y("Upload some content or sync with your devices!"):s.value==="recent"?Y("Files and folders you recently modified will show up here."):Y("Files and folders you mark as favorite will show up here."));async function A(B){try{const D=await v(B);c.value=D.path,po("files:node:created",u.value.filter(S=>S.basename===B)[0])}catch(D){Ee.warn("Could not create new folder",{name:B,error:D}),Vn(Y("Could not create the new folder"))}}function C(B){!B&&!E&&r("close")}return(B,D)=>(V(),dt(W(Co),{open:o.value,"onUpdate:open":[D[6]||(D[6]=S=>o.value=S),C],buttons:N.value,name:e.name,size:"large","content-classes":"file-picker__content","dialog-classes":"file-picker","navigation-classes":"file-picker__navigation"},{navigation:st(({isCollapsed:S})=>[ut(xu,{"current-view":s.value,"onUpdate:currentView":D[0]||(D[0]=$=>s.value=$),"filter-string":w.value,"onUpdate:filterString":D[1]||(D[1]=$=>w.value=$),"is-collapsed":S,"disabled-navigation":e.disabledNavigation},null,8,["current-view","filter-string","is-collapsed","disabled-navigation"])]),default:st(()=>[X("div",Uu,[s.value==="files"?(V(),dt(du,{key:0,path:d.value,"onUpdate:path":D[2]||(D[2]=S=>d.value=S),"show-menu":e.allowPickDirectory,onCreateNode:A},null,8,["path","show-menu"])):(V(),z("div",Mu,[X("h3",null,gt(g.value),1)])),W(f)||O.value.length>0?(V(),dt(Kl,{key:2,path:d.value,"onUpdate:path":[D[3]||(D[3]=S=>d.value=S),D[5]||(D[5]=S=>s.value="files")],"selected-files":a.value,"onUpdate:selectedFiles":D[4]||(D[4]=S=>a.value=S),"allow-pick-directory":e.allowPickDirectory,"current-view":s.value,files:O.value,multiselect:e.multiselect,loading:W(f),name:g.value,"can-pick":e.canPickFn},null,8,["path","selected-files","allow-pick-directory","current-view","files","multiselect","loading","name","can-pick"])):w.value?(V(),dt(W(gr),{key:3,name:W(Y)("No matching files"),description:W(Y)("No files matching your filter were found.")},{icon:st(()=>[ut(Un)]),_:1},8,["name","description"])):(V(),dt(W(gr),{key:4,name:W(Y)("No files in here"),description:x.value},{icon:st(()=>[ut(Un)]),_:1},8,["name","description"]))])]),_:1},8,["open","buttons","name"]))}}),Hu=kt(ju,[["__scopeId","data-v-5287035b"]]);export{Hu as default};
//# sourceMappingURL=FilePicker-CtWlxGEm-BWQwGm98.chunk.mjs.map

import{G as Q,f as c,o as r,g as e,i as F,t as a,A as G,w as d,c as u,S as b,F as w,h as o,y as i,u as s,O as p,Q as f,Z as H,x as q,L as j,R as E,T as J,U as K,V as W}from"./index-BGCAAR9m.chunk.mjs";import{N as M}from"./NcNoteCard-C6JdnZUp-DJ-IEcCg.chunk.mjs";import{l as S}from"./index-IgWYF-oH.chunk.mjs";import{b as X,d as D,a as B,C as ee}from"./Calendar-DT9LkGD1.chunk.mjs";import{g as ae}from"./response-qwsgigBs.chunk.mjs";const te={name:"ClockIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ne=["aria-hidden","aria-label"],se=["fill","width","height"],oe={d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M16.2,16.2L11,13V7H12.5V12.2L17,14.9L16.2,16.2Z"},le={key:0};function re(h,n,l,A,g,y){return r(),c("span",G(h.$attrs,{"aria-hidden":l.title?null:"true","aria-label":l.title,class:"material-design-icon clock-icon",role:"img",onClick:n[0]||(n[0]=m=>h.$emit("click",m))}),[(r(),c("svg",{fill:l.fillColor,class:"material-design-icon__svg",width:l.size,height:l.size,viewBox:"0 0 24 24"},[e("path",oe,[l.title?(r(),c("title",le,a(l.title),1)):F("",!0)])],8,se))],16,ne)}const P=Q(te,[["render",re]]),ie=["data-nc-version"],pe={class:"button-row"},ce={class:"appointment-details"},de={class:"date-time"},ue={class:"date-time"},me={class:"response-display"},ve={class:"button-row"},fe={class:"responding-as"},he={class:"appointment-details"},ge={class:"date-time"},ye={class:"date-time"},ke={class:"response-display"},be={class:"button-row"},we={class:"link-row"},_e=["href"],Ae=["href"],Ce={__name:"QuickResponse",setup(h){const n=S("attendance","quick-response-data",{});let l=31;try{l=S("attendance","nc-version")}catch{console.debug("nc-version not available, defaulting to 31")}const A=d(l),g=d(n.error||!1),y=d(n.errorMessage||""),m=d(n.confirmed||!1),v=d(!1),C=n.appointmentId||0,z=n.appointmentName||"",I=n.appointmentDatetime||"",x=n.response||"",N=n.responseLabel||"",R=n.token||"",T=n.userId||"",U=n.userName||"",V=u(()=>X(I,"long")),L=u(()=>D(I)),k=u(()=>b("/apps/attendance/")),O=u(()=>b("/apps/attendance/appointment/{id}",{id:C})),Z=u(()=>ae(x)),$=async()=>{v.value=!0;try{const t=b("/apps/attendance/respond/{appointmentId}/confirm",{appointmentId:C});await E.post(t,{response:x,token:R,userId:T}),m.value=!0}catch(t){g.value=!0,y.value=t.response?.data?.message||"An error occurred while recording your response."}finally{v.value=!1}};return(t,Y)=>(r(),c("div",{class:"quick-response-container guest-box","data-nc-version":A.value},[g.value?(r(),c(w,{key:0},[o(s(M),{type:"error"},{default:i(()=>[e("h2",null,a(t.t("attendance","Unable to process response")),1),e("p",null,a(y.value),1)]),_:1}),e("div",pe,[o(s(f),{variant:"primary",href:k.value},{default:i(()=>[p(a(t.t("attendance","Open Attendance app")),1)]),_:1},8,["href"])])],64)):m.value?(r(),c(w,{key:1},[o(s(M),{type:"success"},{default:i(()=>[e("h2",null,a(t.t("attendance","Thank you for your response!")),1),e("p",null,a(t.t("attendance","Your response has been saved.")),1)]),_:1}),e("div",ce,[e("h3",null,a(s(z)),1),e("p",de,[o(B,{size:18}),e("strong",null,a(V.value),1)]),e("p",ue,[o(P,{size:18}),p(" "+a(L.value),1)]),e("p",me,[p(a(t.t("attendance","Your response:"))+" ",1),o(s(H),{text:s(N),variant:Z.value,"no-close":""},null,8,["text","variant"])])]),e("div",ve,[o(s(f),{href:O.value},{default:i(()=>[p(a(t.t("attendance","View appointment details")),1)]),_:1},8,["href"]),o(s(f),{variant:"primary",href:k.value},{default:i(()=>[p(a(t.t("attendance","Open Attendance app")),1)]),_:1},8,["href"])])],64)):(r(),c(w,{key:2},[e("h2",null,a(t.t("attendance","Confirm your response?")),1),e("p",fe,a(t.t("attendance","You are answering as {user}",{user:s(U)})),1),e("div",he,[e("h3",null,a(s(z)),1),e("p",ge,[o(B,{size:18}),e("strong",null,a(V.value),1)]),e("p",ye,[o(P,{size:18}),p(" "+a(L.value),1)]),e("p",ke,a(t.t("attendance","You are about to respond with: {response}",{response:s(N)})),1)]),e("div",be,[o(s(f),{variant:"primary",disabled:v.value,onClick:$},{icon:i(()=>[v.value?(r(),q(s(j),{key:0,size:20})):(r(),q(ee,{key:1,size:20}))]),default:i(()=>[p(" "+a(t.t("attendance","Confirm response")),1)]),_:1},8,["disabled"])]),e("div",we,[e("a",{href:O.value},a(t.t("attendance","View appointment details")),9,_e),Y[0]||(Y[0]=e("span",{class:"separator"},"Â·",-1)),e("a",{href:k.value},a(t.t("attendance","Open Attendance app")),9,Ae)])],64))],8,ie))}},ze=Q(Ce,[["__scopeId","data-v-389c481c"]]),_=J(ze);_.config.globalProperties.t=K,_.config.globalProperties.n=W,_.mount("#attendance-quick-response");
//# sourceMappingURL=attendance-quickresponse.mjs.map

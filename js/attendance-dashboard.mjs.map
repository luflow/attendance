{"version":3,"file":"attendance-dashboard.mjs","sources":["../src/components/widget/WidgetAppointmentItem.vue","../src/views/Widget.vue","../src/dashboard.js"],"sourcesContent":["<template>\n\t<div class=\"appointment-item\" data-test=\"widget-appointment-item\">\n\t\t<!-- Check-in Section (for admins when appointment is ready for check-in) -->\n\t\t<div v-if=\"showCheckinButton\" class=\"checkin-section\">\n\t\t\t<NcButton\n\t\t\t\tvariant=\"primary\"\n\t\t\t\tclass=\"checkin-button\"\n\t\t\t\tdata-test=\"button-widget-checkin\"\n\t\t\t\t@click=\"$emit('open-checkin', item.id)\">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<ListStatusIcon />\n\t\t\t\t</template>\n\t\t\t\t{{ t('attendance', 'Start check-in') }}\n\t\t\t</NcButton>\n\t\t</div>\n\n\t\t<div class=\"appointment-header\">\n\t\t\t<h3 class=\"clickable\" data-test=\"widget-appointment-title\" @click=\"$emit('open-detail', item.id)\">\n\t\t\t\t{{ item.mainText }}\n\t\t\t</h3>\n\t\t\t<span class=\"appointment-time\">{{ formattedDate }}</span>\n\t\t</div>\n\n\t\t<div v-if=\"item.description\" class=\"appointment-description clickable\" @click=\"$emit('open-detail', item.id)\">\n\t\t\t{{ strippedDescription }}\n\t\t</div>\n\n\t\t<!-- Response Section -->\n\t\t<div class=\"response-section\">\n\t\t\t<div class=\"response-buttons\" :class=\"{ 'has-response': item.userResponse }\">\n\t\t\t\t<NcButton\n\t\t\t\t\t:class=\"{ active: item.userResponse?.response === 'yes' }\"\n\t\t\t\t\tvariant=\"success\"\n\t\t\t\t\t:text=\"t('attendance', 'Yes')\"\n\t\t\t\t\tdata-test=\"widget-response-yes\"\n\t\t\t\t\t@click=\"$emit('respond', item.id, 'yes')\" />\n\t\t\t\t<NcButton\n\t\t\t\t\t:class=\"{ active: item.userResponse?.response === 'maybe' }\"\n\t\t\t\t\tvariant=\"warning\"\n\t\t\t\t\t:text=\"t('attendance', 'Maybe')\"\n\t\t\t\t\tdata-test=\"widget-response-maybe\"\n\t\t\t\t\t@click=\"$emit('respond', item.id, 'maybe')\" />\n\t\t\t\t<NcButton\n\t\t\t\t\t:class=\"{ active: item.userResponse?.response === 'no' }\"\n\t\t\t\t\tvariant=\"error\"\n\t\t\t\t\t:text=\"t('attendance', 'No')\"\n\t\t\t\t\tdata-test=\"widget-response-no\"\n\t\t\t\t\t@click=\"$emit('respond', item.id, 'no')\" />\n\t\t\t\t<!-- Comment Toggle Button (only show when user has responded) -->\n\t\t\t\t<NcButton\n\t\t\t\t\tv-if=\"item.userResponse\"\n\t\t\t\t\t:class=\"{ 'comment-active': commentExpanded, 'comment-toggle': true }\"\n\t\t\t\t\ttype=\"tertiary\"\n\t\t\t\t\tdata-test=\"button-widget-toggle-comment\"\n\t\t\t\t\t@click=\"toggleComment\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CommentIcon :size=\"14\" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\n\t\t\t<!-- Comment Section -->\n\t\t\t<div v-if=\"commentExpanded\" class=\"comment-section\">\n\t\t\t\t<div class=\"textarea-container\">\n\t\t\t\t\t<NcInputField\n\t\t\t\t\t\tref=\"commentInput\"\n\t\t\t\t\t\tv-model=\"localComment\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t:label=\"t('attendance', 'Comment (optional)')\"\n\t\t\t\t\t\t:placeholder=\"t('attendance', 'Add your comment …')\"\n\t\t\t\t\t\tdata-test=\"widget-response-comment\"\n\t\t\t\t\t\t@update:model-value=\"handleCommentInput\" />\n\n\t\t\t\t\t<div v-if=\"saving\" class=\"saving-spinner\">\n\t\t\t\t\t\t<div class=\"spinner\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else-if=\"saved\" class=\"saved-indicator\">\n\t\t\t\t\t\t<CheckIcon :size=\"16\" class=\"check-icon\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-else-if=\"error\" class=\"error-indicator\">\n\t\t\t\t\t\t<CloseCircle :size=\"16\" class=\"error-icon\" />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, computed, watch, nextTick } from 'vue'\nimport { NcButton, NcInputField } from '@nextcloud/vue'\nimport ListStatusIcon from 'vue-material-design-icons/ListStatus.vue'\nimport CheckIcon from 'vue-material-design-icons/Check.vue'\nimport CommentIcon from 'vue-material-design-icons/Comment.vue'\nimport CloseCircle from 'vue-material-design-icons/CloseCircle.vue'\nimport { formatDateTime } from '../../utils/datetime.js'\nimport { stripMarkdown } from '../../utils/markdown.js'\nimport { useAppointmentResponse } from '../../composables/useAppointmentResponse.js'\n\nconst props = defineProps({\n\titem: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n\tshowCheckinButton: {\n\t\ttype: Boolean,\n\t\tdefault: false,\n\t},\n})\n\ndefineEmits(['respond', 'open-checkin', 'open-detail'])\n\n// Local state for comment\nconst commentExpanded = ref(false)\nconst commentInput = ref(null)\nconst localComment = ref(props.item.userResponse?.comment || '')\nlet commentTimeout = null\n\n// Use the shared response composable for comment auto-save\nconst {\n\tsavingComment: saving,\n\tcommentSaved: saved,\n\terrorComment: error,\n\tautoSaveComment,\n} = useAppointmentResponse()\n\n// Watch for external changes to userResponse\nwatch(() => props.item.userResponse, (newResponse) => {\n\tif (!commentTimeout) {\n\t\tlocalComment.value = newResponse?.comment || ''\n\t}\n}, { deep: true })\n\nconst toggleComment = async () => {\n\tcommentExpanded.value = !commentExpanded.value\n\tif (commentExpanded.value) {\n\t\tawait nextTick()\n\t\tcommentInput.value?.$el?.querySelector('input')?.focus()\n\t}\n}\n\nconst handleCommentInput = () => {\n\tif (commentTimeout) {\n\t\tclearTimeout(commentTimeout)\n\t}\n\n\tcommentTimeout = setTimeout(async () => {\n\t\tawait nextTick()\n\t\tconst userResponse = props.item.userResponse\n\t\tif (userResponse) {\n\t\t\tautoSaveComment(props.item.id, userResponse.response, localComment.value)\n\t\t}\n\t\tcommentTimeout = null\n\t}, 500)\n}\n\nconst formattedDate = computed(() => {\n\treturn formatDateTime(props.item.subText)\n})\n\nconst strippedDescription = computed(() => {\n\treturn stripMarkdown(props.item.description)\n})\n</script>\n\n<style scoped lang=\"scss\">\n@use '../../styles/shared.scss';\n\n.appointment-item {\n\tpadding: 0 14px 12px 14px;\n\tborder-bottom: 1px solid var(--color-border);\n\toverflow: hidden;\n\tword-wrap: break-word;\n\n\t&:last-child {\n\t\tborder-bottom: none;\n\t}\n}\n\n.appointment-header {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\n\th3 {\n\t\tmargin: 0;\n\t\tfont-size: 18px;\n\t\tfont-weight: 600;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\twhite-space: nowrap;\n\t\tflex: 1;\n\t\tmargin-right: 8px;\n\n\t\t&.clickable {\n\t\t\tcursor: pointer;\n\n\t\t\t&:hover {\n\t\t\t\ttext-decoration: underline;\n\t\t\t}\n\t\t}\n\t}\n\n\t.appointment-time {\n\t\tfont-size: 12px;\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tflex-shrink: 0;\n\t}\n}\n\n.appointment-description {\n\tfont-size: 12px;\n\tcolor: var(--color-text-light);\n\tmargin-bottom: 8px;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\n\t&.clickable {\n\t\tcursor: pointer;\n\n\t\t&:hover {\n\t\t\ttext-decoration: underline;\n\t\t\tcolor: var(--color-text-maxcontrast);\n\t\t}\n\t}\n}\n\n.checkin-section {\n\tmargin-bottom: 8px;\n\n\t.checkin-button {\n\t\tfont-size: 11px;\n\t\tpadding: 4px 12px;\n\t\tmin-height: 28px;\n\t\tfont-weight: 600;\n\t}\n}\n\n.response-section {\n\tmargin-top: 8px;\n\n\t.response-buttons {\n\t\tdisplay: flex;\n\t\tgap: 6px;\n\t\tmargin-bottom: 8px;\n\t\tflex-wrap: wrap;\n\n\t\t:deep(.button-vue) {\n\t\t\tfont-size: 11px;\n\t\t\tpadding: 4px 12px;\n\t\t\theight: 32px;\n\t\t}\n\n\t\t&.has-response {\n\t\t\t:deep(.button-vue:not(.active):not(.comment-toggle)) {\n\t\t\t\tbackground-color: var(--color-background-dark) !important;\n\t\t\t\tcolor: var(--color-text-lighter) !important;\n\t\t\t\tborder-color: var(--color-border-dark) !important;\n\n\t\t\t\t&:hover {\n\t\t\t\t\tbackground-color: var(--color-background-hover) !important;\n\t\t\t\t\tcolor: var(--color-text) !important;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t:deep(.button-vue.active) {\n\t\t\tfont-weight: bold;\n\t\t}\n\n\t\t:deep(.button-vue.comment-active) {\n\t\t\tbackground-color: var(--color-primary-element) !important;\n\t\t\tcolor: white !important;\n\t\t}\n\t}\n\n\t.comment-section {\n\t\tmargin-top: 16px;\n\n\t\t.textarea-container {\n\t\t\tposition: relative;\n\t\t}\n\t}\n}\n</style>\n","<template>\n\t<div class=\"appointment-widget-container\" :data-nc-version=\"ncVersion\" data-test=\"widget-container\">\n\t\t<NcDashboardWidget\n\t\t\t:items=\"items\"\n\t\t\t:loading=\"state === 'loading'\"\n\t\t\tclass=\"appointment-widget\"\n\t\t\tdata-test=\"appointment-widget\">\n\t\t\t<template #empty-content>\n\t\t\t\t<NcEmptyContent :title=\"t('attendance', 'No appointments found')\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<CalendarIcon />\n\t\t\t\t\t</template>\n\t\t\t\t</NcEmptyContent>\n\t\t\t</template>\n\t\t\t<template #default=\"{ item }\">\n\t\t\t\t<WidgetAppointmentItem\n\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t:show-checkin-button=\"showCheckinButton(item)\"\n\t\t\t\t\t@respond=\"respond\"\n\t\t\t\t\t@open-checkin=\"openCheckinView\"\n\t\t\t\t\t@open-detail=\"openAppointmentDetail\" />\n\t\t\t</template>\n\t\t</NcDashboardWidget>\n\n\t\t<!-- Show All Button -->\n\t\t<div class=\"widget-footer\">\n\t\t\t<NcButton\n\t\t\t\tvariant=\"primary\"\n\t\t\t\twide\n\t\t\t\tdata-test=\"button-show-all\"\n\t\t\t\t@click=\"goToAttendanceApp\">\n\t\t\t\t{{ t('attendance', 'Show all appointments') }}\n\t\t\t</NcButton>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, computed, onMounted } from 'vue'\nimport CalendarIcon from 'vue-material-design-icons/Calendar.vue'\nimport { NcDashboardWidget, NcEmptyContent, NcButton } from '@nextcloud/vue'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\nimport { usePermissions } from '../composables/usePermissions.js'\nimport { useAppointmentResponse } from '../composables/useAppointmentResponse.js'\nimport { canCheckinNow } from '../utils/datetime.js'\nimport WidgetAppointmentItem from '../components/widget/WidgetAppointmentItem.vue'\n\ndefineProps({\n\ttitle: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n})\n\n// Load initial state\nlet initialAppointments = []\nlet initialState = 'ok'\nlet ncVersionState = 31\n\ntry {\n\tinitialAppointments = loadState('attendance', 'dashboard-widget-items')\n} catch (error) {\n\tconsole.error('Error loading appointments:', error)\n\tinitialState = 'error'\n}\n\ntry {\n\tncVersionState = loadState('attendance', 'nc-version')\n} catch (error) {\n\tconsole.debug('nc-version not available, defaulting to 31')\n}\n\n// State\nconst appointments = ref(initialAppointments)\nconst state = ref(initialState)\nconst ncVersion = ref(ncVersionState)\n\nconst { permissions, loadPermissions } = usePermissions()\n\n// Use the shared response composable\nconst { submitResponse: submitResponseApi } = useAppointmentResponse()\n\n// Computed\nconst items = computed(() => {\n\treturn appointments.value.map((appointment) => ({\n\t\tid: appointment.id,\n\t\tmainText: appointment.name,\n\t\tsubText: appointment.startDatetime,\n\t\tdescription: appointment.description,\n\t\tlink: generateUrl('/apps/attendance'),\n\t\ticonUrl: generateUrl('/svg/attendance/calendar'),\n\t\tuserResponse: appointment.userResponse,\n\t}))\n})\n\n// Methods\nconst respond = async (appointmentId, response) => {\n\ttry {\n\t\tawait submitResponseApi(appointmentId, response, '')\n\t\t// Update local state after successful response\n\t\tconst appointmentIndex = appointments.value.findIndex(a => a.id === appointmentId)\n\t\tif (appointmentIndex !== -1) {\n\t\t\tappointments.value[appointmentIndex].userResponse = {\n\t\t\t\tresponse,\n\t\t\t\tcomment: '',\n\t\t\t}\n\t\t}\n\t} catch (error) {\n\t\t// Error already handled by composable\n\t}\n}\n\nconst goToAttendanceApp = () => {\n\twindow.location.href = generateUrl('/apps/attendance/')\n}\n\nconst openAppointmentDetail = (appointmentId) => {\n\twindow.location.href = generateUrl(`/apps/attendance/appointment/${appointmentId}`)\n}\n\nconst showCheckinButton = (item) => {\n\tif (!permissions.canCheckin) {\n\t\treturn false\n\t}\n\treturn canCheckinNow(item.subText, 30)\n}\n\nconst openCheckinView = (appointmentId) => {\n\tconst checkinUrl = generateUrl('/apps/attendance/checkin/{id}', { id: appointmentId })\n\twindow.location.href = checkinUrl\n}\n\n// Lifecycle\nonMounted(async () => {\n\tawait loadPermissions()\n})\n</script>\n\n<style scoped lang=\"scss\">\n/* Dark mode: explicit dark theme */\nbody[data-theme-dark] .appointment-widget-container[data-nc-version=\"31\"] :deep(.button-vue--warning) {\n\tcolor: black !important;\n}\n\n/* Dark mode: system preference when using default theme */\n@media (prefers-color-scheme: dark) {\n\tbody[data-theme-default] .appointment-widget-container[data-nc-version=\"31\"] :deep(.button-vue--warning) {\n\t\tcolor: black !important;\n\t}\n}\n\n.appointment-widget-container {\n\tdisplay: flex;\n\tflex-direction: column;\n\theight: 100%;\n\tmax-height: 450px;\n}\n\n.appointment-widget {\n\toverflow-y: auto;\n\tflex: 1;\n\tmin-height: 0;\n}\n\n.widget-footer {\n\tflex-shrink: 0;\n\tpadding: 12px 12px 20px 12px;\n}\n</style>\n","import { createApp } from 'vue'\nimport { translate, translatePlural } from '@nextcloud/l10n'\nimport AppointmentWidget from './views/Widget.vue'\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tOCA.Dashboard.register('attendance-vue-widget', (el, { widget }) => {\n\t\ttry {\n\t\t\tconst app = createApp(AppointmentWidget, {\n\t\t\t\ttitle: widget.title,\n\t\t\t})\n\n\t\t\t// Make translation functions available globally\n\t\t\tapp.config.globalProperties.t = translate\n\t\t\tapp.config.globalProperties.n = translatePlural\n\n\t\t\tapp.mount(el)\n\t\t} catch (error) {\n\t\t\tconsole.error('Error creating/mounting Vue instance:', error)\n\t\t\tel.innerHTML = '<div style=\"color: red;\">Error loading widget: ' + error.message + '</div>'\n\t\t}\n\t})\n})\n"],"names":["props","__props","commentExpanded","ref","commentInput","localComment","commentTimeout","saving","saved","error","autoSaveComment","useAppointmentResponse","watch","newResponse","toggleComment","nextTick","handleCommentInput","userResponse","formattedDate","computed","formatDateTime","strippedDescription","stripMarkdown","_openBlock","_createElementBlock","_hoisted_1","_hoisted_2","_createVNode","_unref","NcButton","_cache","$event","$emit","ListStatusIcon","_createTextVNode","t","_createElementVNode","_hoisted_3","_toDisplayString","_hoisted_4","_hoisted_5","_normalizeClass","_createBlock","CommentIcon","_hoisted_6","_hoisted_7","NcInputField","_hoisted_8","_hoisted_9","CheckIcon","_hoisted_10","CloseCircle","initialAppointments","initialState","ncVersionState","loadState","appointments","state","ncVersion","permissions","loadPermissions","usePermissions","submitResponseApi","items","appointment","generateUrl","respond","appointmentId","response","appointmentIndex","a","goToAttendanceApp","openAppointmentDetail","showCheckinButton","item","canCheckinNow","openCheckinView","checkinUrl","onMounted","NcDashboardWidget","NcEmptyContent","CalendarIcon","_withCtx","WidgetAppointmentItem","el","widget","app","createApp","AppointmentWidget","translate","translatePlural"],"mappings":"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"}